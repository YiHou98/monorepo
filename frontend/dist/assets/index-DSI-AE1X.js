import{j as t,S as e,R as i,T as n,P as s,O as r,C as o,a,b as l,c,d as h,e as u,f as d,g as f,I as p,p as m,r as g,h as y,i as v,o as b,H as w,k as x,l as S,m as k,n as j,q as C,s as E,t as M,u as _,v as T,w as A,x as O,y as N,z as I,A as L,B as z,D as R,E as P,F as D,G as $,J as B,K as U,L as F}from"./ui-vendor-Ctur8p7h.js";import{a as W,r as V,g as q,c as H,d as K}from"./react-vendor-lxYFoEwF.js";!(function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=(function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),e.credentials="use-credentials"===t.crossOrigin?"include":"anonymous"===t.crossOrigin?"omit":"same-origin",e})(t);fetch(t.href,e)}})();var G={},Z=W;G.createRoot=Z.createRoot,G.hydrateRoot=Z.hydrateRoot;const Y={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class X extends Error{}class Q extends X{constructor(t,e){super(t),this.code=e,this.type=Y[e]??"ServerError"}}class J extends X{constructor(t,e,i){super(t),this.status=e,this.statusText=i}}var tt,et,it,nt,st,rt,ot,at,lt,ct=t=>{throw TypeError(t)},ht=(t,e,i)=>e.has(t)||ct("Cannot "+i),ut=(t,e,i)=>(ht(t,e,"read from private field"),i?i.call(t):e.get(t)),dt=(t,e,i)=>e.has(t)?ct("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),ft=(t,e,i,n)=>(ht(t,e,"write to private field"),e.set(t,i),i),pt=(t,e,i)=>(ht(t,e,"access private method"),i);const mt={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class gt{constructor(t,e={}){if(dt(this,ot),dt(this,tt,0),dt(this,et,0),dt(this,it,null),dt(this,nt,null),dt(this,st,new Set),dt(this,rt,new Map),this.endpoint=t,this.options={...mt,...e},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=(function(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()})(this.endpoint))}async makeRequest(t,e){const i=await pt(this,ot,at).call(this);return new Promise(((n,s)=>{ft(this,tt,ut(this,tt)+1),ut(this,rt).set(ut(this,tt),{resolve:n,reject:s,timeout:setTimeout((()=>{ut(this,rt).delete(ut(this,tt)),s(new Error(`Request timeout: ${t}`))}),this.options.callTimeout)}),i.send(JSON.stringify({jsonrpc:"2.0",id:ut(this,tt),method:t,params:e}))})).then((({error:t,result:e})=>{if(t)throw new Q(t.message,t.code);return e}))}async subscribe(t){const e=new yt(t);return ut(this,st).add(e),await e.subscribe(this),()=>e.unsubscribe(this)}}tt=new WeakMap,et=new WeakMap,it=new WeakMap,nt=new WeakMap,st=new WeakMap,rt=new WeakMap,ot=new WeakSet,at=function(){return ut(this,nt)||ft(this,nt,new Promise((t=>{ut(this,it)?.close(),ft(this,it,new this.options.WebSocketConstructor(this.endpoint)),ut(this,it).addEventListener("open",(()=>{ft(this,et,0),t(ut(this,it))})),ut(this,it).addEventListener("close",(()=>{var t,e;(t=this,e=et,{set _(i){ft(t,e,i)},get _(){return ut(t,e,undefined)}})._++,ut(this,et)<=this.options.maxReconnects&&setTimeout((()=>{pt(this,ot,lt).call(this)}),this.options.reconnectTimeout)})),ut(this,it).addEventListener("message",(({data:t})=>{let e;try{e=JSON.parse(t)}catch(qa){return void console.error(new Error(`Failed to parse RPC message: ${t}`,{cause:qa}))}if("id"in e&&null!=e.id&&ut(this,rt).has(e.id)){const{resolve:t,timeout:i}=ut(this,rt).get(e.id);clearTimeout(i),t(e)}else if("params"in e){const{params:t}=e;ut(this,st).forEach((e=>{e.subscriptionId===t.subscription&&t.subscription===e.subscriptionId&&e.onMessage(t.result)}))}}))}))),ut(this,nt)},lt=async function(){return ut(this,it)?.close(),ft(this,nt,null),Promise.allSettled([...ut(this,st)].map((t=>t.subscribe(this))))};class yt{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:e}=this;return this.subscribed=!1,null!=e&&(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[e]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const e=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=e)}}var vt,bt,wt,xt,St,kt=t=>{throw TypeError(t)},jt=(t,e,i)=>e.has(t)||kt("Cannot "+i),Ct=(t,e,i)=>(jt(t,e,"read from private field"),i?i.call(t):e.get(t)),Et=(t,e,i)=>e.has(t)?kt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Mt=(t,e,i,n)=>(jt(t,e,"write to private field"),e.set(t,i),i);class _t{constructor(t){Et(this,xt),Et(this,vt,0),Et(this,bt),Et(this,wt),Mt(this,bt,t)}fetch(t,e){const i=Ct(this,bt).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(t,e)}async request(t){Mt(this,vt,Ct(this,vt)+1);const e=await this.fetch(Ct(this,bt).rpc?.url??Ct(this,bt).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"1.14.2","Client-Target-Api-Version":"1.38.0",...Ct(this,bt).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ct(this,vt),method:t.method,params:t.params})});if(!e.ok)throw new J(`Unexpected status code: ${e.status}`,e.status,e.statusText);const i=await e.json();if("error"in i&&null!=i.error)throw new Q(i.error.message,i.error.code);return i.result}async subscribe(t){const e=await(i=xt,n=St,jt(this,i,"access private method"),n).call(this).subscribe(t);var i,n;return async()=>!!(await e())}}function Tt(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}vt=new WeakMap,bt=new WeakMap,wt=new WeakMap,xt=new WeakSet,St=function(){if(!Ct(this,wt)){const t=Ct(this,bt).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Mt(this,wt,new gt(Ct(this,bt).websocket?.url??Ct(this,bt).url,{WebSocketConstructor:t,...Ct(this,bt).websocket}))}return Ct(this,wt)};const At=(function(t){const e=new Uint8Array(256);for(let a=0;a<e.length;a++)e[a]=255;for(let a=0;a<58;a++){const i=t.charAt(a),n=i.charCodeAt(0);if(255!==e[n])throw new TypeError(i+" is ambiguous");e[n]=a}const i=58,n=t.charAt(0),s=Math.log(i)/Math.log(256),r=Math.log(256)/Math.log(i);function o(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;let r=0,o=0,a=0;for(;t[r]===n;)o++,r++;const l=(t.length-r)*s+1>>>0,c=new Uint8Array(l);for(;t[r];){let n=e[t.charCodeAt(r)];if(255===n)return;let s=0;for(let t=l-1;(0!==n||s<a)&&-1!==t;t--,s++)n+=i*c[t]>>>0,c[t]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");a=s,r++}let h=l-a;for(;h!==l&&0===c[h];)h++;const u=new Uint8Array(o+(l-h));let d=o;for(;h!==l;)u[d++]=c[h++];return u}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";let s=0,o=0,a=0;const l=e.length;for(;a!==l&&0===e[a];)a++,s++;const c=(l-a)*r+1>>>0,h=new Uint8Array(c);for(;a!==l;){let t=e[a],n=0;for(let e=c-1;(0!==t||n<o)&&-1!==e;e--,n++)t+=256*h[e]>>>0,h[e]=t%i>>>0,t=t/i>>>0;if(0!==t)throw new Error("Non-zero carry");o=n,a++}let u=c-o;for(;u!==c&&0===h[u];)u++;let d=n.repeat(s);for(;u<c;++u)d+=t.charAt(h[u]);return d},decodeUnsafe:o,decode:function(t){const e=o(t);if(e)return e;throw new Error("Non-base58 character")}}})("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ot=t=>At.encode(t),Nt=t=>At.decode(t);function It(t){return Uint8Array.from(atob(t),(t=>t.charCodeAt(0)))}const Lt=8192;function zt(t){if(t.length<Lt)return btoa(String.fromCharCode(...t));let e="";for(var i=0;i<t.length;i+=Lt){const n=t.slice(i,i+Lt);e+=String.fromCharCode(...n)}return btoa(e)}function Rt(t){const e=t.startsWith("0x")?t.slice(2):t,i=e.length%2==0?e:`0${e}}`,n=i.match(/.{2}/g)?.map((t=>parseInt(t,16)))??[];return Uint8Array.from(n)}function Pt(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")}function Dt(t){let e=[],i=0;if(0===t)return[0];for(;t>0;)e[i]=127&t,(t>>=7)&&(e[i]|=128),i+=1;return e}class $t{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),e=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+e).toString(10)}read128(){let t=BigInt(this.read64()),e=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+e).toString(10)}read256(){let t=BigInt(this.read128()),e=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+e).toString(10)}readBytes(t){let e=new Uint8Array(this.dataView.buffer,this.bytePosition+this.dataView.byteOffset,t);return this.shift(t),e}readULEB(){let t=new Uint8Array(this.dataView.buffer,this.bytePosition+this.dataView.byteOffset),{value:e,length:i}=(function(t){let e=0,i=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(127&s)<<i,!(128&s))break;i+=7}return{value:e,length:n}})(t);return this.shift(i),e}readVec(t){let e=this.readULEB(),i=[];for(let n=0;n<e;n++)i.push(t(this,n,e));return i}}class Bt{constructor({initialSize:t=1024,maxSize:e=1/0,allocateSize:i=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=e,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const e=this.bytePosition+t;if(e>this.size){const t=Math.min(this.maxSize,this.size+this.allocateSize);if(e>t)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${e}`);this.size=t;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return Ut(BigInt(t),8).forEach((t=>this.write8(t))),this}write128(t){return Ut(BigInt(t),16).forEach((t=>this.write8(t))),this}write256(t){return Ut(BigInt(t),32).forEach((t=>this.write8(t))),this}writeULEB(t){return Dt(t).forEach((t=>this.write8(t))),this}writeVec(t,e){return this.writeULEB(t.length),Array.from(t).forEach(((i,n)=>e(this,i,n,t.length))),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return(function(t,e){switch(e){case"base58":return Ot(t);case"base64":return zt(t);case"hex":return Pt(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}})(this.toBytes(),t)}}function Ut(t,e){let i=new Uint8Array(e),n=0;for(;t>0;)i[n]=Number(t%BigInt(256)),t/=BigInt(256),n+=1;return i}var Ft,Wt,Vt,qt,Ht=t=>{throw TypeError(t)},Kt=(t,e,i)=>e.has(t)||Ht("Cannot "+i),Gt=(t,e,i)=>(Kt(t,e,"read from private field"),i?i.call(t):e.get(t)),Zt=(t,e,i)=>e.has(t)?Ht("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Yt=(t,e,i,n)=>(Kt(t,e,"write to private field"),e.set(t,i),i);Ft=new WeakMap,Wt=new WeakMap;let Xt=class t{constructor(t){Zt(this,Ft),Zt(this,Wt),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),Yt(this,Ft,t.write),Yt(this,Wt,t.serialize??((t,e)=>{const i=new Bt({initialSize:this.serializedSize(t)??void 0,...e});return Gt(this,Ft).call(this,t,i),i.toBytes()})),this.validate=t.validate??(()=>{})}write(t,e){this.validate(t),Gt(this,Ft).call(this,t,e)}serialize(t,e){return this.validate(t),new te(this,Gt(this,Wt).call(this,t,e))}parse(t){const e=new $t(t);return this.read(e)}fromHex(t){return this.parse(Rt(t))}fromBase58(t){return this.parse(Nt(t))}fromBase64(t){return this.parse(It(t))}transform({name:e,input:i,output:n,validate:s}){return new t({name:e??this.name,read:t=>n(this.read(t)),write:(t,e)=>Gt(this,Ft).call(this,i(t),e),serializedSize:t=>this.serializedSize(i(t)),serialize:(t,e)=>Gt(this,Wt).call(this,i(t),e),validate:t=>{s?.(t),this.validate(i(t))}})}};const Qt=Symbol.for("@mysten/serialized-bcs");function Jt(t){return!!t&&"object"==typeof t&&!0===t[Qt]}class te{constructor(t,e){Zt(this,Vt),Zt(this,qt),Yt(this,Vt,t),Yt(this,qt,e)}get[Qt](){return!0}toBytes(){return Gt(this,qt)}toHex(){return Pt(Gt(this,qt))}toBase64(){return zt(Gt(this,qt))}toBase58(){return Ot(Gt(this,qt))}parse(){return Gt(this,Vt).parse(Gt(this,qt))}}function ee({size:t,...e}){return new Xt({...e,serializedSize:()=>t})}function ie({readMethod:t,writeMethod:e,...i}){return ee({...i,read:e=>e[t](),write:(t,i)=>i[e](t),validate:t=>{if(t<0||t>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${t}. Expected value in range 0-${i.maxValue}`);i.validate?.(t)}})}function ne({readMethod:t,writeMethod:e,...i}){return ee({...i,read:e=>e[t](),write:(t,i)=>i[e](BigInt(t)),validate:t=>{const e=BigInt(t);if(e<0||e>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${e}. Expected value in range 0-${i.maxValue}`);i.validate?.(e)}})}Vt=new WeakMap,qt=new WeakMap;const se={u8:t=>ie({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...t}),u16:t=>ie({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...t}),u32:t=>ie({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t}),u64:t=>ne({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t}),u128:t=>ne({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t}),u256:t=>ne({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t}),bool:t=>ee({name:"bool",size:1,read:t=>1===t.read8(),write:(t,e)=>e.write8(t?1:0),...t,validate:e=>{if(t?.validate?.(e),"boolean"!=typeof e)throw new TypeError("Expected boolean, found "+typeof e)}}),uleb128:t=>(function({serialize:t,...e}){const i=new Xt({...e,serialize:t,write:(t,e)=>{for(const n of i.serialize(t).toBytes())e.write8(n)}});return i})({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Dt(t)),...t}),bytes:(t,e)=>ee({name:`bytes[${t}]`,size:t,read:e=>e.readBytes(t),write:(e,i)=>{for(let n=0;n<t;n++)i.write8(e[n]??0)},...e,validate:i=>{if(e?.validate?.(i),!i||"object"!=typeof i||!("length"in i))throw new TypeError("Expected array, found "+typeof i);if(i.length!==t)throw new TypeError(`Expected array of length ${t}, found ${i.length}`)}}),string:t=>(function({toBytes:t,fromBytes:e,...i}){return new Xt({...i,read:t=>{const i=t.readULEB(),n=t.readBytes(i);return e(n)},write:(e,i)=>{const n=t(e);i.writeULEB(n.length);for(let t=0;t<n.length;t++)i.write8(n[t])},serialize:e=>{const i=t(e),n=Dt(i.length),s=new Uint8Array(n.length+i.length);return s.set(n,0),s.set(i,n.length),s},validate:t=>{if("string"!=typeof t)throw new TypeError(`Invalid ${i.name} value: ${t}. Expected string`);i.validate?.(t)}})})({name:"string",toBytes:t=>(new TextEncoder).encode(t),fromBytes:t=>(new TextDecoder).decode(t),...t}),fixedArray:(t,e,i)=>new Xt({name:`${e.name}[${t}]`,read:i=>{const n=new Array(t);for(let s=0;s<t;s++)n[s]=e.read(i);return n},write:(t,i)=>{for(const n of t)e.write(n,i)},...i,validate:e=>{if(i?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e);if(e.length!==t)throw new TypeError(`Expected array of length ${t}, found ${e.length}`)}}),option:t=>se.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:t=>null==t?{None:!0}:{Some:t},output:t=>"Some"===t.$kind?t.Some:null}),vector:(t,e)=>new Xt({name:`vector<${t.name}>`,read:e=>{const i=e.readULEB(),n=new Array(i);for(let s=0;s<i;s++)n[s]=t.read(e);return n},write:(e,i)=>{i.writeULEB(e.length);for(const n of e)t.write(n,i)},...e,validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),tuple:(t,e)=>new Xt({name:`(${t.map((t=>t.name)).join(", ")})`,serializedSize:e=>{let i=0;for(let n=0;n<t.length;n++){const s=t[n].serializedSize(e[n]);if(null==s)return null;i+=s}return i},read:e=>{const i=[];for(const n of t)i.push(n.read(e));return i},write:(e,i)=>{for(let n=0;n<t.length;n++)t[n].write(e[n],i)},...e,validate:i=>{if(e?.validate?.(i),!Array.isArray(i))throw new TypeError("Expected array, found "+typeof i);if(i.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${i.length}`)}}),struct(t,e,i){const n=Object.entries(e);return new Xt({name:t,serializedSize:t=>{let e=0;for(const[i,s]of n){const n=s.serializedSize(t[i]);if(null==n)return null;e+=n}return e},read:t=>{const e={};for(const[i,s]of n)e[i]=s.read(t);return e},write:(t,e)=>{for(const[i,s]of n)s.write(t[i],e)},...i,validate:t=>{if(i?.validate?.(t),"object"!=typeof t||null==t)throw new TypeError("Expected object, found "+typeof t)}})},enum(t,e,i){const n=Object.entries(e);return new Xt({name:t,read:e=>{const i=e.readULEB(),s=n[i];if(!s)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[r,o]=s;return{[r]:o?.read(e)??!0,$kind:r}},write:(t,i)=>{const[s,r]=Object.entries(t).filter((([t])=>Object.hasOwn(e,t)))[0];for(let e=0;e<n.length;e++){const[t,o]=n[e];if(t===s)return i.writeULEB(e),void o?.write(r,i)}},...i,validate:n=>{if(i?.validate?.(n),"object"!=typeof n||null==n)throw new TypeError("Expected object, found "+typeof n);const s=Object.keys(n).filter((t=>void 0!==n[t]&&Object.hasOwn(e,t)));if(1!==s.length)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);const[r]=s;if(!Object.hasOwn(e,r))throw new TypeError(`Invalid enum variant ${r}`)}})},map:(t,e)=>se.vector(se.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:t=>[...t.entries()],output:t=>{const e=new Map;for(const[i,n]of t)e.set(i,n);return e}}),lazy:t=>(function(t){let e=null;function i(){return e||(e=t()),e}return new Xt({name:"lazy",read:t=>i().read(t),serializedSize:t=>i().serializedSize(t),write:(t,e)=>i().write(t,e),serialize:(t,e)=>i().serialize(t,e).toBytes()})})(t)};function re(t){try{return 32===Nt(t).length}catch(mx){return!1}}function oe(t){return(function(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2==0})(t)&&32===(function(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2})(t)}function ae(t){return oe(t)}function le(t,e=!1){let i=t.toLowerCase();return!e&&i.startsWith("0x")&&(i=i.slice(2)),`0x${i.padStart(64,"0")}`}function ce(t,e=!1){return le(t,e)}const he=/^vector<(.+)>$/,ue=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class de{static parseFromStr(t,e=!1){if("address"===t)return{address:null};if("bool"===t)return{bool:null};if("u8"===t)return{u8:null};if("u16"===t)return{u16:null};if("u32"===t)return{u32:null};if("u64"===t)return{u64:null};if("u128"===t)return{u128:null};if("u256"===t)return{u256:null};if("signer"===t)return{signer:null};const i=t.match(he);if(i)return{vector:de.parseFromStr(i[1],e)};const n=t.match(ue);if(n)return{struct:{address:e?le(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:de.parseStructTypeArgs(n[5],e)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,e=!1){return(function(t,e=["<",">"]){const[i,n]=e,s=[];let r="",o=0;for(let a=0;a<t.length;a++){const e=t[a];e===i&&o++,e===n&&o--,0!==o||","!==e?r+=e:(s.push(r.trim()),r="")}return s.push(r.trim()),s})(t).map((t=>de.parseFromStr(t,e)))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${de.tagToString(t.vector)}>`;if("struct"in t){const e=t.struct,i=e.typeParams.map(de.tagToString).join(", ");return`${e.address}::${e.module}::${e.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}const fe=se.bytes(32).transform({validate:t=>{const e="string"==typeof t?t:Pt(t);if(!e||!oe(le(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>"string"==typeof t?Rt(le(t)):t,output:t=>le(Pt(t))}),pe=se.vector(se.u8()).transform({name:"ObjectDigest",input:t=>Nt(t),output:t=>Ot(new Uint8Array(t)),validate:t=>{if(32!==Nt(t).length)throw new Error("ObjectDigest must be 32 bytes")}}),me=se.struct("SuiObjectRef",{objectId:fe,version:se.u64(),digest:pe}),ge=se.struct("SharedObjectRef",{objectId:fe,initialSharedVersion:se.u64(),mutable:se.bool()}),ye=se.enum("ObjectArg",{ImmOrOwnedObject:me,SharedObject:ge,Receiving:me}),ve=se.enum("CallArg",{Pure:se.struct("Pure",{bytes:se.vector(se.u8()).transform({input:t=>"string"==typeof t?It(t):t,output:t=>zt(new Uint8Array(t))})}),Object:ye}),be=se.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:se.lazy((()=>be)),struct:se.lazy((()=>Me)),u16:null,u32:null,u256:null}),we=be.transform({input:t=>"string"==typeof t?de.parseFromStr(t,!0):t,output:t=>de.tagToString(t)}),xe=se.enum("Argument",{GasCoin:null,Input:se.u16(),Result:se.u16(),NestedResult:se.tuple([se.u16(),se.u16()])}),Se=se.struct("ProgrammableMoveCall",{package:fe,module:se.string(),function:se.string(),typeArguments:se.vector(we),arguments:se.vector(xe)}),ke=se.enum("Command",{MoveCall:Se,TransferObjects:se.struct("TransferObjects",{objects:se.vector(xe),address:xe}),SplitCoins:se.struct("SplitCoins",{coin:xe,amounts:se.vector(xe)}),MergeCoins:se.struct("MergeCoins",{destination:xe,sources:se.vector(xe)}),Publish:se.struct("Publish",{modules:se.vector(se.vector(se.u8()).transform({input:t=>"string"==typeof t?It(t):t,output:t=>zt(new Uint8Array(t))})),dependencies:se.vector(fe)}),MakeMoveVec:se.struct("MakeMoveVec",{type:se.enum("Option",{None:null,Some:we}).transform({input:t=>null===t?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:se.vector(xe)}),Upgrade:se.struct("Upgrade",{modules:se.vector(se.vector(se.u8()).transform({input:t=>"string"==typeof t?It(t):t,output:t=>zt(new Uint8Array(t))})),dependencies:se.vector(fe),package:fe,ticket:xe})}),je=se.struct("ProgrammableTransaction",{inputs:se.vector(ve),commands:se.vector(ke)}),Ce=se.enum("TransactionKind",{ProgrammableTransaction:je,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Ee=se.enum("TransactionExpiration",{None:null,Epoch:se.u64({name:"unsafe_u64"}).transform({input:t=>t,output:t=>Number(t)})});const Me=se.struct("StructTag",{address:fe,module:se.string(),name:se.string(),typeParams:se.vector(be)}),_e=se.struct("GasData",{payment:se.vector(me),owner:fe,price:se.u64(),budget:se.u64()}),Te=se.struct("TransactionDataV1",{kind:Ce,sender:fe,gasData:_e,expiration:Ee}),Ae=se.enum("TransactionData",{V1:Te}),Oe=se.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ne=se.enum("IntentVersion",{V0:null}),Ie=se.enum("AppId",{Sui:null}),Le=se.struct("Intent",{scope:Oe,version:Ne,appId:Ie});function ze(t){return se.struct(`IntentMessage<${t.name}>`,{intent:Le,value:t})}const Re=se.enum("CompressedSignature",{ED25519:se.fixedArray(64,se.u8()),Secp256k1:se.fixedArray(64,se.u8()),Secp256r1:se.fixedArray(64,se.u8()),ZkLogin:se.vector(se.u8())}),Pe=se.enum("PublicKey",{ED25519:se.fixedArray(32,se.u8()),Secp256k1:se.fixedArray(33,se.u8()),Secp256r1:se.fixedArray(33,se.u8()),ZkLogin:se.vector(se.u8())}),De=se.struct("MultiSigPkMap",{pubKey:Pe,weight:se.u8()}),$e=se.struct("MultiSigPublicKey",{pk_map:se.vector(De),threshold:se.u16()}),Be=se.struct("MultiSig",{sigs:se.vector(Re),bitmap:se.u16(),multisig_pk:$e}),Ue=se.vector(se.u8()).transform({input:t=>"string"==typeof t?It(t):t,output:t=>zt(new Uint8Array(t))}),Fe=se.struct("SenderSignedTransaction",{intentMessage:ze(Ae),txSignatures:se.vector(Ue)}),We=se.vector(Fe,{name:"SenderSignedData"}),Ve=se.enum("PackageUpgradeError",{UnableToFetchPackage:se.struct("UnableToFetchPackage",{packageId:fe}),NotAPackage:se.struct("NotAPackage",{objectId:fe}),IncompatibleUpgrade:null,DigestDoesNotMatch:se.struct("DigestDoesNotMatch",{digest:se.vector(se.u8())}),UnknownUpgradePolicy:se.struct("UnknownUpgradePolicy",{policy:se.u8()}),PackageIDDoesNotMatch:se.struct("PackageIDDoesNotMatch",{packageId:fe,ticketId:fe})}),qe=se.struct("ModuleId",{address:fe,name:se.string()}),He=se.struct("MoveLocation",{module:qe,function:se.u16(),instruction:se.u16(),functionName:se.option(se.string())}),Ke=se.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:se.struct("IndexOutOfBounds",{idx:se.u16()}),SecondaryIndexOutOfBounds:se.struct("SecondaryIndexOutOfBounds",{resultIdx:se.u16(),secondaryIdx:se.u16()}),InvalidResultArity:se.struct("InvalidResultArity",{resultIdx:se.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Ge=se.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Ze=se.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:se.struct("MoveObjectTooBig",{objectSize:se.u64(),maxObjectSize:se.u64()}),MovePackageTooBig:se.struct("MovePackageTooBig",{objectSize:se.u64(),maxObjectSize:se.u64()}),CircularObjectOwnership:se.struct("CircularObjectOwnership",{object:fe}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:se.option(He),MoveAbort:se.tuple([He,se.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:se.struct("CommandArgumentError",{argIdx:se.u16(),kind:Ke}),TypeArgumentError:se.struct("TypeArgumentError",{argumentIdx:se.u16(),kind:Ge}),UnusedValueWithoutDrop:se.struct("UnusedValueWithoutDrop",{resultIdx:se.u16(),secondaryIdx:se.u16()}),InvalidPublicFunctionReturnType:se.struct("InvalidPublicFunctionReturnType",{idx:se.u16()}),InvalidTransferObject:null,EffectsTooLarge:se.struct("EffectsTooLarge",{currentSize:se.u64(),maxSize:se.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:se.struct("PackageUpgradeError",{upgradeError:Ve}),WrittenObjectsTooLarge:se.struct("WrittenObjectsTooLarge",{currentSize:se.u64(),maxSize:se.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:se.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:se.vector(fe)}),AddressDeniedForCoin:se.struct("AddressDeniedForCoin",{address:fe,coinType:se.string()}),CoinTypeGlobalPause:se.struct("CoinTypeGlobalPause",{coinType:se.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Ye=se.enum("ExecutionStatus",{Success:null,Failed:se.struct("ExecutionFailed",{error:Ze,command:se.option(se.u64())})}),Xe=se.struct("GasCostSummary",{computationCost:se.u64(),storageCost:se.u64(),storageRebate:se.u64(),nonRefundableStorageFee:se.u64()}),Qe=se.enum("Owner",{AddressOwner:fe,ObjectOwner:fe,Shared:se.struct("Shared",{initialSharedVersion:se.u64()}),Immutable:null}),Je=se.struct("TransactionEffectsV1",{status:Ye,executedEpoch:se.u64(),gasUsed:Xe,modifiedAtVersions:se.vector(se.tuple([fe,se.u64()])),sharedObjects:se.vector(me),transactionDigest:pe,created:se.vector(se.tuple([me,Qe])),mutated:se.vector(se.tuple([me,Qe])),unwrapped:se.vector(se.tuple([me,Qe])),deleted:se.vector(me),unwrappedThenDeleted:se.vector(me),wrapped:se.vector(me),gasObject:se.tuple([me,Qe]),eventsDigest:se.option(pe),dependencies:se.vector(pe)}),ti=se.tuple([se.u64(),pe]),ei=se.enum("ObjectIn",{NotExist:null,Exist:se.tuple([ti,Qe])}),ii=se.enum("ObjectOut",{NotExist:null,ObjectWrite:se.tuple([pe,Qe]),PackageWrite:ti}),ni=se.enum("IDOperation",{None:null,Created:null,Deleted:null}),si=se.struct("EffectsObjectChange",{inputState:ei,outputState:ii,idOperation:ni}),ri=se.enum("UnchangedSharedKind",{ReadOnlyRoot:ti,MutateDeleted:se.u64(),ReadDeleted:se.u64(),Cancelled:se.u64(),PerEpochConfig:null}),oi=se.struct("TransactionEffectsV2",{status:Ye,executedEpoch:se.u64(),gasUsed:Xe,transactionDigest:pe,gasObjectIndex:se.option(se.u32()),eventsDigest:se.option(pe),dependencies:se.vector(pe),lamportVersion:se.u64(),changedObjects:se.vector(se.tuple([fe,si])),unchangedSharedObjects:se.vector(se.tuple([fe,ri])),auxDataDigest:se.option(pe)}),ai=se.enum("TransactionEffects",{V1:Je,V2:oi}),li={...se,U8:se.u8(),U16:se.u16(),U32:se.u32(),U64:se.u64(),U128:se.u128(),U256:se.u256(),ULEB128:se.uleb128(),Bool:se.bool(),String:se.string(),Address:fe,AppId:Ie,Argument:xe,CallArg:ve,CompressedSignature:Re,GasData:_e,Intent:Le,IntentMessage:ze,IntentScope:Oe,IntentVersion:Ne,MultiSig:Be,MultiSigPkMap:De,MultiSigPublicKey:$e,ObjectArg:ye,ObjectDigest:pe,ProgrammableMoveCall:Se,ProgrammableTransaction:je,PublicKey:Pe,SenderSignedData:We,SenderSignedTransaction:Fe,SharedObjectRef:ge,StructTag:Me,SuiObjectRef:me,Command:ke,TransactionData:Ae,TransactionDataV1:Te,TransactionExpiration:Ee,TransactionKind:Ce,TypeTag:we,TransactionEffects:ai};function ci(t){if(t.length<=6)return t;const e=t.startsWith("0x")?2:0;return`0x${t.slice(e,e+4)}\u2026${t.slice(-4)}`}const hi=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,ui=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;BigInt(1e9),ce("0x6");function di(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function fi(t,...e){if(!(function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name})(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function pi(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");di(t.outputLen),di(t.blockLen)}function mi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function gi(t,e){fi(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}ce("0x5");const yi=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),vi=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),bi=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),wi=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,xi=bi?t=>t:t=>wi(t);function Si(t){for(let e=0;e<t.length;e++)t[e]=wi(t[e])}const ki=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function ji(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function Ci(t){return"string"==typeof t&&(t=(function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))})(t)),fi(t),t}class Ei{clone(){return this._cloneInto()}}function Mi(t){const e=e=>t().update(Ci(e)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function _i(t){const e=(e,i)=>t(i).update(Ci(e)).digest(),i=t({});return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=e=>t(e),e}const Ti=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class Ai extends Ei{constructor(t,e,i={},n,s,r){if(super(),this.blockLen=t,this.outputLen=e,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,di(t),di(e),di(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");if(void 0!==i.key&&(i.key.length<1||i.key.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==i.salt&&i.salt.length!==s)throw new Error("salt must be undefined or "+s);if(void 0!==i.personalization&&i.personalization.length!==r)throw new Error("personalization must be undefined or "+r);this.buffer=new Uint8Array(t),this.buffer32=yi(this.buffer)}update(t){mi(this);const{blockLen:e,buffer:i,buffer32:n}=this,s=(t=Ci(t)).length,r=t.byteOffset,o=t.buffer;for(let a=0;a<s;){this.pos===e&&(bi||Si(n),this.compress(n,0,!1),bi||Si(n),this.pos=0);const l=Math.min(e-this.pos,s-a),c=r+a;if(l!==e||c%4||!(a+l<s))i.set(t.subarray(a,a+l),this.pos),this.pos+=l,this.length+=l,a+=l;else{const t=new Uint32Array(o,c,Math.floor((s-a)/4));bi||Si(t);for(let i=0;a+e<s;i+=n.length,a+=e)this.length+=e,this.compress(t,i,!1);bi||Si(t)}}return this}digestInto(t){mi(this),gi(t,this);const{pos:e,buffer32:i}=this;this.finished=!0,this.buffer.subarray(e).fill(0),bi||Si(i),this.compress(i,0,!0),bi||Si(i);const n=yi(t);this.get().forEach(((t,e)=>n[e]=xi(t)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){const{buffer:e,length:i,finished:n,destroyed:s,outputLen:r,pos:o}=this;return t||(t=new this.constructor({dkLen:r})),t.set(...this.get()),t.length=i,t.finished=n,t.destroyed=s,t.outputLen=r,t.buffer.set(e),t.pos=o,t}}const Oi=BigInt(2**32-1),Ni=BigInt(32);function Ii(t,e=!1){return e?{h:Number(t&Oi),l:Number(t>>Ni&Oi)}:{h:0|Number(t>>Ni&Oi),l:0|Number(t&Oi)}}const Li={fromBig:Ii,split:function(t,e=!1){let i=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:r,l:o}=Ii(t[s],e);[i[s],n[s]]=[r,o]}return[i,n]},toBig:(t,e)=>BigInt(t>>>0)<<Ni|BigInt(e>>>0),shrSH:(t,e,i)=>t>>>i,shrSL:(t,e,i)=>t<<32-i|e>>>i,rotrSH:(t,e,i)=>t>>>i|e<<32-i,rotrSL:(t,e,i)=>t<<32-i|e>>>i,rotrBH:(t,e,i)=>t<<64-i|e>>>i-32,rotrBL:(t,e,i)=>t>>>i-32|e<<64-i,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,i)=>t<<i|e>>>32-i,rotlSL:(t,e,i)=>e<<i|t>>>32-i,rotlBH:(t,e,i)=>e<<i-32|t>>>64-i,rotlBL:(t,e,i)=>t<<i-32|e>>>64-i,add:function(t,e,i,n){const s=(e>>>0)+(n>>>0);return{h:t+i+(s/2**32|0)|0,l:0|s}},add3L:(t,e,i)=>(t>>>0)+(e>>>0)+(i>>>0),add3H:(t,e,i,n)=>e+i+n+(t/2**32|0)|0,add4L:(t,e,i,n)=>(t>>>0)+(e>>>0)+(i>>>0)+(n>>>0),add4H:(t,e,i,n,s)=>e+i+n+s+(t/2**32|0)|0,add5H:(t,e,i,n,s,r)=>e+i+n+s+r+(t/2**32|0)|0,add5L:(t,e,i,n,s)=>(t>>>0)+(e>>>0)+(i>>>0)+(n>>>0)+(s>>>0)},zi=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ri=new Uint32Array(32);function Pi(t,e,i,n,s,r){const o=s[r+1];let a=Ri[2*t],l=Ri[2*t+1],c=Ri[2*e],h=Ri[2*e+1],u=Ri[2*i],d=Ri[2*i+1],f=Ri[2*n],p=Ri[2*n+1],m=Li.add3L(a,c,s[r]);l=Li.add3H(m,l,h,o),a=0|m,({Dh:p,Dl:f}={Dh:p^l,Dl:f^a}),({Dh:p,Dl:f}={Dh:Li.rotr32H(p,f),Dl:Li.rotr32L(p,f)}),({h:d,l:u}=Li.add(d,u,p,f)),({Bh:h,Bl:c}={Bh:h^d,Bl:c^u}),({Bh:h,Bl:c}={Bh:Li.rotrSH(h,c,24),Bl:Li.rotrSL(h,c,24)}),Ri[2*t]=a,Ri[2*t+1]=l,Ri[2*e]=c,Ri[2*e+1]=h,Ri[2*i]=u,Ri[2*i+1]=d,Ri[2*n]=f,Ri[2*n+1]=p}function Di(t,e,i,n,s,r){const o=s[r+1];let a=Ri[2*t],l=Ri[2*t+1],c=Ri[2*e],h=Ri[2*e+1],u=Ri[2*i],d=Ri[2*i+1],f=Ri[2*n],p=Ri[2*n+1],m=Li.add3L(a,c,s[r]);l=Li.add3H(m,l,h,o),a=0|m,({Dh:p,Dl:f}={Dh:p^l,Dl:f^a}),({Dh:p,Dl:f}={Dh:Li.rotrSH(p,f,16),Dl:Li.rotrSL(p,f,16)}),({h:d,l:u}=Li.add(d,u,p,f)),({Bh:h,Bl:c}={Bh:h^d,Bl:c^u}),({Bh:h,Bl:c}={Bh:Li.rotrBH(h,c,63),Bl:Li.rotrBL(h,c,63)}),Ri[2*t]=a,Ri[2*t+1]=l,Ri[2*e]=c,Ri[2*e+1]=h,Ri[2*i]=u,Ri[2*i+1]=d,Ri[2*n]=f,Ri[2*n+1]=p}class $i extends Ai{constructor(t={}){if(super(128,void 0===t.dkLen?64:t.dkLen,t,64,16,16),this.v0l=0|zi[0],this.v0h=0|zi[1],this.v1l=0|zi[2],this.v1h=0|zi[3],this.v2l=0|zi[4],this.v2h=0|zi[5],this.v3l=0|zi[6],this.v3h=0|zi[7],this.v4l=0|zi[8],this.v4h=0|zi[9],this.v5l=0|zi[10],this.v5h=0|zi[11],this.v6l=0|zi[12],this.v6h=0|zi[13],this.v7l=0|zi[14],this.v7h=0|zi[15],this.v0l^=this.outputLen|(t.key?t.key.length:0)<<8|65536|1<<24,t.salt){const e=yi(Ci(t.salt));this.v4l^=xi(e[0]),this.v4h^=xi(e[1]),this.v5l^=xi(e[2]),this.v5h^=xi(e[3])}if(t.personalization){const e=yi(Ci(t.personalization));this.v6l^=xi(e[0]),this.v6h^=xi(e[1]),this.v7l^=xi(e[2]),this.v7h^=xi(e[3])}if(t.key){const e=new Uint8Array(this.blockLen);e.set(Ci(t.key)),this.update(e)}}get(){let{v0l:t,v0h:e,v1l:i,v1h:n,v2l:s,v2h:r,v3l:o,v3h:a,v4l:l,v4h:c,v5l:h,v5h:u,v6l:d,v6h:f,v7l:p,v7h:m}=this;return[t,e,i,n,s,r,o,a,l,c,h,u,d,f,p,m]}set(t,e,i,n,s,r,o,a,l,c,h,u,d,f,p,m){this.v0l=0|t,this.v0h=0|e,this.v1l=0|i,this.v1h=0|n,this.v2l=0|s,this.v2h=0|r,this.v3l=0|o,this.v3h=0|a,this.v4l=0|l,this.v4h=0|c,this.v5l=0|h,this.v5h=0|u,this.v6l=0|d,this.v6h=0|f,this.v7l=0|p,this.v7h=0|m}compress(t,e,i){this.get().forEach(((t,e)=>Ri[e]=t)),Ri.set(zi,16);let{h:n,l:s}=Li.fromBig(BigInt(this.length));Ri[24]=zi[8]^s,Ri[25]=zi[9]^n,i&&(Ri[28]=~Ri[28],Ri[29]=~Ri[29]);let r=0;const o=Ti;for(let a=0;a<12;a++)Pi(0,4,8,12,t,e+2*o[r++]),Di(0,4,8,12,t,e+2*o[r++]),Pi(1,5,9,13,t,e+2*o[r++]),Di(1,5,9,13,t,e+2*o[r++]),Pi(2,6,10,14,t,e+2*o[r++]),Di(2,6,10,14,t,e+2*o[r++]),Pi(3,7,11,15,t,e+2*o[r++]),Di(3,7,11,15,t,e+2*o[r++]),Pi(0,5,10,15,t,e+2*o[r++]),Di(0,5,10,15,t,e+2*o[r++]),Pi(1,6,11,12,t,e+2*o[r++]),Di(1,6,11,12,t,e+2*o[r++]),Pi(2,7,8,13,t,e+2*o[r++]),Di(2,7,8,13,t,e+2*o[r++]),Pi(3,4,9,14,t,e+2*o[r++]),Di(3,4,9,14,t,e+2*o[r++]);this.v0l^=Ri[0]^Ri[16],this.v0h^=Ri[1]^Ri[17],this.v1l^=Ri[2]^Ri[18],this.v1h^=Ri[3]^Ri[19],this.v2l^=Ri[4]^Ri[20],this.v2h^=Ri[5]^Ri[21],this.v3l^=Ri[6]^Ri[22],this.v3h^=Ri[7]^Ri[23],this.v4l^=Ri[8]^Ri[24],this.v4h^=Ri[9]^Ri[25],this.v5l^=Ri[10]^Ri[26],this.v5h^=Ri[11]^Ri[27],this.v6l^=Ri[12]^Ri[28],this.v6h^=Ri[13]^Ri[29],this.v7l^=Ri[14]^Ri[30],this.v7h^=Ri[15]^Ri[31],Ri.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bi=_i((t=>new $i(t)));function Ui(t){if("string"==typeof t)switch(t){case"address":return li.Address;case"bool":return li.Bool;case"u8":return li.U8;case"u16":return li.U16;case"u32":return li.U32;case"u64":return li.U64;case"u128":return li.U128;case"u256":return li.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if("u8"===t.vector)return li.vector(li.U8).transform({input:t=>"string"==typeof t?(new TextEncoder).encode(t):t,output:t=>t});const e=Ui(t.vector);return e?li.vector(e):null}if("datatype"in t){const e=le(t.datatype.package);if(e===le("0x1")){if("ascii"===t.datatype.module&&"String"===t.datatype.type)return li.String;if("string"===t.datatype.module&&"String"===t.datatype.type)return li.String;if("option"===t.datatype.module&&"Option"===t.datatype.type){const e=Ui(t.datatype.typeParameters[0]);return e?li.vector(e):null}}if(e===le("0x2")&&"object"===t.datatype.module&&"ID"===t.datatype.type)return li.Address}return null}function Fi(t){if("string"==typeof t)switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Fi(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Fi)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}const Wi=function(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?zt(t):t.toBase64()}}},Vi=({objectId:t,digest:e,version:i})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:i,objectId:le(t)}}}),qi=({objectId:t,mutable:e,initialSharedVersion:i})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:i,objectId:le(t)}}}),Hi=({objectId:t,digest:e,version:i})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:i,objectId:le(t)}}});var Ki=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function Gi(t){return{lang:t?.lang??void 0,message:t?.message,abortEarly:t?.abortEarly??void 0,abortPipeEarly:t?.abortPipeEarly??void 0}}function Zi(t){const e=typeof t;return"string"===e?`"${t}"`:"number"===e||"bigint"===e||"boolean"===e?`${t}`:"object"===e||"function"===e?(t&&Object.getPrototypeOf(t)?.constructor?.name)??"null":e}function Yi(t,e,i,n,s){const r=s&&"input"in s?s.input:i.value,o=s?.expected??t.expects??null,a=s?.received??Zi(r),l={kind:t.kind,type:t.type,input:r,expected:o,received:a,message:`Invalid ${e}: ${o?`Expected ${o} but r`:"R"}eceived ${a}`,requirement:t.requirement,path:s?.path,issues:s?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},c="schema"===t.kind,h=s?.message??t.message??void 0??(c?void 0:null)??n.message??void 0;h&&(l.message="function"==typeof h?h(l):h),c&&(i.typed=!1),i.issues?i.issues.push(l):i.issues=[l]}function Xi(t,e){return Object.hasOwn(t,e)&&"__proto__"!==e&&"prototype"!==e&&"constructor"!==e}var Qi=class extends Error{issues;constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function Ji(t,e){return{kind:"validation",type:"check",reference:Ji,async:!1,expects:null,requirement:t,message:e,_run(t,e){return t.typed&&!this.requirement(t.value)&&Yi(this,"input",t,e),t}}}function tn(t){return{kind:"validation",type:"integer",reference:tn,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(t,e){return t.typed&&!this.requirement(t.value)&&Yi(this,"integer",t,e),t}}}function en(t){return{kind:"transformation",type:"transform",reference:en,async:!1,operation:t,_run(t){return t.value=this.operation(t.value),t}}}function nn(t){return{kind:"validation",type:"uuid",reference:nn,async:!1,expects:null,requirement:Ki,message:t,_run(t,e){return t.typed&&!this.requirement.test(t.value)&&Yi(this,"UUID",t,e),t}}}function sn(t,e,i){return"function"==typeof t.default?t.default(e,i):t.default}function rn(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function on(t,e){return{kind:"schema",type:"array",reference:on,expects:"Array",async:!1,item:t,message:e,_run(t,e){const i=t.value;if(Array.isArray(i)){t.typed=!0,t.value=[];for(let n=0;n<i.length;n++){const s=i[n],r=this.item._run({typed:!1,value:s},e);if(r.issues){const o={type:"array",origin:"value",input:i,key:n,value:s};for(const e of r.issues)e.path?e.path.unshift(o):e.path=[o],t.issues?.push(e);if(t.issues||(t.issues=r.issues),e.abortEarly){t.typed=!1;break}}r.typed||(t.typed=!1),t.value.push(r.value)}}else Yi(this,"type",t,e);return t}}}function an(t){return{kind:"schema",type:"bigint",reference:an,expects:"bigint",async:!1,message:t,_run(t,e){return"bigint"==typeof t.value?t.typed=!0:Yi(this,"type",t,e),t}}}function ln(t){return{kind:"schema",type:"boolean",reference:ln,expects:"boolean",async:!1,message:t,_run(t,e){return"boolean"==typeof t.value?t.typed=!0:Yi(this,"type",t,e),t}}}function cn(t){return{kind:"schema",type:"lazy",reference:cn,expects:"unknown",async:!1,getter:t,_run(t,e){return this.getter(t.value)._run(t,e)}}}function hn(t,e){return{kind:"schema",type:"literal",reference:hn,expects:Zi(t),async:!1,literal:t,message:e,_run(t,e){return t.value===this.literal?t.typed=!0:Yi(this,"type",t,e),t}}}function un(t,...e){const i={kind:"schema",type:"nullable",reference:un,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(t,e){return null===t.value&&("default"in this&&(t.value=sn(this,t,e)),null===t.value)?(t.typed=!0,t):this.wrapped._run(t,e)}};return 0 in e&&(i.default=e[0]),i}function dn(t,...e){const i={kind:"schema",type:"nullish",reference:dn,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(t,e){return null==t.value&&("default"in this&&(t.value=sn(this,t,e)),null==t.value)?(t.typed=!0,t):this.wrapped._run(t,e)}};return 0 in e&&(i.default=e[0]),i}function fn(t){return{kind:"schema",type:"number",reference:fn,expects:"number",async:!1,message:t,_run(t,e){return"number"!=typeof t.value||isNaN(t.value)?Yi(this,"type",t,e):t.typed=!0,t}}}function pn(t,e){return{kind:"schema",type:"object",reference:pn,expects:"Object",async:!1,entries:t,message:e,_run(t,e){const i=t.value;if(i&&"object"==typeof i){t.typed=!0,t.value={};for(const n in this.entries){const s=i[n],r=this.entries[n]._run({typed:!1,value:s},e);if(r.issues){const o={type:"object",origin:"value",input:i,key:n,value:s};for(const e of r.issues)e.path?e.path.unshift(o):e.path=[o],t.issues?.push(e);if(t.issues||(t.issues=r.issues),e.abortEarly){t.typed=!1;break}}r.typed||(t.typed=!1),(void 0!==r.value||n in i)&&(t.value[n]=r.value)}}else Yi(this,"type",t,e);return t}}}function mn(t,...e){const i={kind:"schema",type:"optional",reference:mn,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(t,e){return void 0===t.value&&("default"in this&&(t.value=sn(this,t,e)),void 0===t.value)?(t.typed=!0,t):this.wrapped._run(t,e)}};return 0 in e&&(i.default=e[0]),i}function gn(t,e,i){return{kind:"schema",type:"record",reference:gn,expects:"Object",async:!1,key:t,value:e,message:i,_run(t,e){const i=t.value;if(i&&"object"==typeof i){t.typed=!0,t.value={};for(const n in i)if(Xi(i,n)){const s=i[n],r=this.key._run({typed:!1,value:n},e);if(r.issues){const o={type:"object",origin:"key",input:i,key:n,value:s};for(const e of r.issues)e.path=[o],t.issues?.push(e);if(t.issues||(t.issues=r.issues),e.abortEarly){t.typed=!1;break}}const o=this.value._run({typed:!1,value:s},e);if(o.issues){const r={type:"object",origin:"value",input:i,key:n,value:s};for(const e of o.issues)e.path?e.path.unshift(r):e.path=[r],t.issues?.push(e);if(t.issues||(t.issues=o.issues),e.abortEarly){t.typed=!1;break}}r.typed&&o.typed||(t.typed=!1),r.typed&&(t.value[r.value]=o.value)}}else Yi(this,"type",t,e);return t}}}function yn(t){return{kind:"schema",type:"string",reference:yn,expects:"string",async:!1,message:t,_run(t,e){return"string"==typeof t.value?t.typed=!0:Yi(this,"type",t,e),t}}}function vn(t,e){return{kind:"schema",type:"tuple",reference:vn,expects:"Array",async:!1,items:t,message:e,_run(t,e){const i=t.value;if(Array.isArray(i)){t.typed=!0,t.value=[];for(let n=0;n<this.items.length;n++){const s=i[n],r=this.items[n]._run({typed:!1,value:s},e);if(r.issues){const o={type:"array",origin:"value",input:i,key:n,value:s};for(const e of r.issues)e.path?e.path.unshift(o):e.path=[o],t.issues?.push(e);if(t.issues||(t.issues=r.issues),e.abortEarly){t.typed=!1;break}}r.typed||(t.typed=!1),t.value.push(r.value)}}else Yi(this,"type",t,e);return t}}}function bn(t){let e;if(t)for(const i of t)e?e.push(...i.issues):e=i.issues;return e}function wn(t,e){return{kind:"schema",type:"union",reference:wn,expects:[...new Set(t.map((t=>t.expects)))].join(" | ")||"never",async:!1,options:t,message:e,_run(t,e){let i,n,s;for(const r of this.options){const o=r._run({typed:!1,value:t.value},e);if(o.typed){if(!o.issues){i=o;break}n?n.push(o):n=[o]}else s?s.push(o):s=[o]}if(i)return i;if(n){if(1===n.length)return n[0];Yi(this,"type",t,e,{issues:bn(n)}),t.typed=!0}else{if(1===s?.length)return s[0];Yi(this,"type",t,e,{issues:bn(s)})}return t}}}function xn(){return{kind:"schema",type:"unknown",reference:xn,expects:"unknown",async:!1,_run:t=>(t.typed=!0,t)}}function Sn(t,e,i=new Set){for(const n of e)"variant"===n.type?Sn(t,n.options,i):i.add(n.entries[t].expects);return i}function kn(t,e,i){let n;return{kind:"schema",type:"variant",reference:kn,expects:"Object",async:!1,key:t,options:e,message:i,_run(t,e){const i=t.value;if(i&&"object"==typeof i){const s=i[this.key];if(this.key in i){let t;for(const n of this.options)if("variant"===n.type||!n.entries[this.key]._run({typed:!1,value:s},e).issues){const s=n._run({typed:!1,value:i},e);if(!s.issues)return s;(!t||!t.typed&&s.typed)&&(t=s)}if(t)return t}n||(n=[...Sn(this.key,this.options)].join(" | ")||"never"),Yi(this,"type",t,e,{input:s,expected:n,path:[{type:"object",origin:"value",input:i,key:this.key,value:s}]})}else Yi(this,"type",t,e);return t}}}function jn(t,e,i){const n=t._run({typed:!1,value:e},Gi(i));if(n.issues)throw new Qi(n.issues);return n.value}function Cn(...t){return{...t[0],pipe:t,_run(e,i){for(let n=0;n<t.length;n++){if(e.issues&&("schema"===t[n].kind||"transformation"===t[n].kind)){e.typed=!1;break}e.issues&&(i.abortEarly||i.abortPipeEarly)||(e=t[n]._run(e,i))}return e}}}function En(t){const e=Object.entries(t).map((([t,e])=>pn({[t]:e})));return Cn(wn(e),en((t=>({...t,$kind:Object.keys(t)[0]}))))}const Mn=Cn(yn(),en((t=>le(t))),Ji(oe)),_n=Mn,Tn=yn(),An=Cn(wn([yn(),Cn(fn(),tn())]),Ji((t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}}),"Invalid u64")),On=pn({objectId:Mn,version:An,digest:yn()}),Nn=Cn(wn([pn({GasCoin:hn(!0)}),pn({Input:Cn(fn(),tn()),type:mn(hn("pure"))}),pn({Input:Cn(fn(),tn()),type:mn(hn("object"))}),pn({Result:Cn(fn(),tn())}),pn({NestedResult:vn([Cn(fn(),tn()),Cn(fn(),tn())])})]),en((t=>({...t,$kind:Object.keys(t)[0]})))),In=pn({budget:un(An),price:un(An),owner:un(Mn),payment:un(on(On))}),Ln=wn([hn("address"),hn("bool"),hn("u8"),hn("u16"),hn("u32"),hn("u64"),hn("u128"),hn("u256"),pn({vector:cn((()=>Ln))}),pn({datatype:pn({package:yn(),module:yn(),type:yn(),typeParameters:on(cn((()=>Ln)))})}),pn({typeParameter:Cn(fn(),tn())})]),zn=pn({ref:un(wn([hn("&"),hn("&mut")])),body:Ln}),Rn=pn({package:_n,module:yn(),function:yn(),typeArguments:on(yn()),arguments:on(Nn),_argumentTypes:mn(un(on(zn)))}),Pn=pn({name:yn(),inputs:gn(yn(),wn([Nn,on(Nn)])),data:gn(yn(),xn())}),Dn=En({MoveCall:Rn,TransferObjects:pn({objects:on(Nn),address:Nn}),SplitCoins:pn({coin:Nn,amounts:on(Nn)}),MergeCoins:pn({destination:Nn,sources:on(Nn)}),Publish:pn({modules:on(Tn),dependencies:on(_n)}),MakeMoveVec:pn({type:un(yn()),elements:on(Nn)}),Upgrade:pn({modules:on(Tn),dependencies:on(_n),package:_n,ticket:Nn}),$Intent:Pn}),$n=En({ImmOrOwnedObject:On,SharedObject:pn({objectId:_n,initialSharedVersion:An,mutable:ln()}),Receiving:On}),Bn=En({Object:$n,Pure:pn({bytes:Tn}),UnresolvedPure:pn({value:xn()}),UnresolvedObject:pn({objectId:_n,version:mn(un(An)),digest:mn(un(yn())),initialSharedVersion:mn(un(An))})}),Un=En({Object:$n,Pure:pn({bytes:Tn})}),Fn=En({None:hn(!0),Epoch:An}),Wn=pn({version:hn(2),sender:dn(Mn),expiration:dn(Fn),gasData:In,inputs:on(Bn),commands:on(Dn)}),Vn={MoveCall(t){const[e,i="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:i,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects:(t,e)=>({$kind:"TransferObjects",TransferObjects:{objects:t.map((t=>jn(Nn,t))),address:jn(Nn,e)}}),SplitCoins:(t,e)=>({$kind:"SplitCoins",SplitCoins:{coin:jn(Nn,t),amounts:e.map((t=>jn(Nn,t)))}}),MergeCoins:(t,e)=>({$kind:"MergeCoins",MergeCoins:{destination:jn(Nn,t),sources:e.map((t=>jn(Nn,t)))}}),Publish:({modules:t,dependencies:e})=>({$kind:"Publish",Publish:{modules:t.map((t=>"string"==typeof t?t:zt(new Uint8Array(t)))),dependencies:e.map((t=>ce(t)))}}),Upgrade:({modules:t,dependencies:e,package:i,ticket:n})=>({$kind:"Upgrade",Upgrade:{modules:t.map((t=>"string"==typeof t?t:zt(new Uint8Array(t)))),dependencies:e.map((t=>ce(t))),package:i,ticket:jn(Nn,n)}}),MakeMoveVec:({type:t,elements:e})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map((t=>jn(Nn,t)))}}),Intent:({name:t,inputs:e={},data:i={}})=>({$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map((([t,e])=>[t,Array.isArray(e)?e.map((t=>jn(Nn,t))):jn(Nn,e)]))),data:i}})},qn=pn({digest:yn(),objectId:yn(),version:wn([Cn(fn(),tn()),yn(),an()])}),Hn=En({ImmOrOwned:qn,Shared:pn({objectId:_n,initialSharedVersion:An,mutable:ln()}),Receiving:qn}),Kn=En({Object:Hn,Pure:on(Cn(fn(),tn()))}),Gn=wn([pn({kind:hn("Input"),index:Cn(fn(),tn()),value:xn(),type:mn(hn("object"))}),pn({kind:hn("Input"),index:Cn(fn(),tn()),value:xn(),type:hn("pure")})]),Zn=wn([pn({Epoch:Cn(fn(),tn())}),pn({None:un(hn(!0))})]),Yn=Cn(wn([fn(),yn(),an()]),Ji((t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}))),Xn=wn([pn({bool:un(hn(!0))}),pn({u8:un(hn(!0))}),pn({u64:un(hn(!0))}),pn({u128:un(hn(!0))}),pn({address:un(hn(!0))}),pn({signer:un(hn(!0))}),pn({vector:cn((()=>Xn))}),pn({struct:cn((()=>Qn))}),pn({u16:un(hn(!0))}),pn({u32:un(hn(!0))}),pn({u256:un(hn(!0))})]),Qn=pn({address:yn(),module:yn(),name:yn(),typeParams:on(Xn)}),Jn=pn({budget:mn(Yn),price:mn(Yn),payment:mn(on(qn)),owner:mn(yn())}),ts=wn([Gn,pn({kind:hn("GasCoin")}),pn({kind:hn("Result"),index:Cn(fn(),tn())}),pn({kind:hn("NestedResult"),index:Cn(fn(),tn()),resultIndex:Cn(fn(),tn())})]),es=pn({kind:hn("MoveCall"),target:Cn(yn(),Ji((t=>3===t.split("::").length))),typeArguments:on(yn()),arguments:on(ts)}),is=pn({kind:hn("TransferObjects"),objects:on(ts),address:ts}),ns=pn({kind:hn("SplitCoins"),coin:ts,amounts:on(ts)}),ss=pn({kind:hn("MergeCoins"),destination:ts,sources:on(ts)}),rs=pn({kind:hn("MakeMoveVec"),type:wn([pn({Some:Xn}),pn({None:un(hn(!0))})]),objects:on(ts)}),os=wn([es,is,ns,ss,pn({kind:hn("Publish"),modules:on(on(Cn(fn(),tn()))),dependencies:on(yn())}),pn({kind:hn("Upgrade"),modules:on(on(Cn(fn(),tn()))),dependencies:on(yn()),packageId:yn(),ticket:ts}),rs]);function as(t){const e=t.inputs.map(((t,e)=>{if(t.Object)return{kind:"Input",index:e,value:{Object:t.Object.ImmOrOwnedObject?{ImmOrOwned:t.Object.ImmOrOwnedObject}:t.Object.Receiving?{Receiving:{digest:t.Object.Receiving.digest,version:t.Object.Receiving.version,objectId:t.Object.Receiving.objectId}}:{Shared:{mutable:t.Object.SharedObject.mutable,initialSharedVersion:t.Object.SharedObject.initialSharedVersion,objectId:t.Object.SharedObject.objectId}}},type:"object"};if(t.Pure)return{kind:"Input",index:e,value:{Pure:Array.from(It(t.Pure.bytes))},type:"pure"};if(t.UnresolvedPure)return{kind:"Input",type:"pure",index:e,value:t.UnresolvedPure.value};if(t.UnresolvedObject)return{kind:"Input",type:"object",index:e,value:t.UnresolvedObject.objectId};throw new Error("Invalid input")}));return{version:1,sender:t.sender??void 0,expiration:"Epoch"===t.expiration?.$kind?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map((t=>{if(t.MakeMoveVec)return{kind:"MakeMoveVec",type:null===t.MakeMoveVec.type?{None:!0}:{Some:de.parseFromStr(t.MakeMoveVec.type)},objects:t.MakeMoveVec.elements.map((t=>ls(t,e)))};if(t.MergeCoins)return{kind:"MergeCoins",destination:ls(t.MergeCoins.destination,e),sources:t.MergeCoins.sources.map((t=>ls(t,e)))};if(t.MoveCall)return{kind:"MoveCall",target:`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`,typeArguments:t.MoveCall.typeArguments,arguments:t.MoveCall.arguments.map((t=>ls(t,e)))};if(t.Publish)return{kind:"Publish",modules:t.Publish.modules.map((t=>Array.from(It(t)))),dependencies:t.Publish.dependencies};if(t.SplitCoins)return{kind:"SplitCoins",coin:ls(t.SplitCoins.coin,e),amounts:t.SplitCoins.amounts.map((t=>ls(t,e)))};if(t.TransferObjects)return{kind:"TransferObjects",objects:t.TransferObjects.objects.map((t=>ls(t,e))),address:ls(t.TransferObjects.address,e)};if(t.Upgrade)return{kind:"Upgrade",modules:t.Upgrade.modules.map((t=>Array.from(It(t)))),dependencies:t.Upgrade.dependencies,packageId:t.Upgrade.package,ticket:ls(t.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(t)}`)}))}}function ls(t,e){if("GasCoin"===t.$kind)return{kind:"GasCoin"};if("Result"===t.$kind)return{kind:"Result",index:t.Result};if("NestedResult"===t.$kind)return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if("Input"===t.$kind)return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function cs(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function hs(t){return wn(Object.entries(t).map((([t,e])=>pn({[t]:e}))))}pn({version:hn(1),sender:mn(yn()),expiration:dn(Zn),gasConfig:Jn,inputs:on(Gn),transactions:on(os)});const us=hs({GasCoin:hn(!0),Input:Cn(fn(),tn()),Result:Cn(fn(),tn()),NestedResult:vn([Cn(fn(),tn()),Cn(fn(),tn())])}),ds=pn({budget:un(An),price:un(An),owner:un(Mn),payment:un(on(On))}),fs=pn({package:_n,module:yn(),function:yn(),typeArguments:on(yn()),arguments:on(us)}),ps=pn({name:yn(),inputs:gn(yn(),wn([us,on(us)])),data:gn(yn(),xn())}),ms=hs({MoveCall:fs,TransferObjects:pn({objects:on(us),address:us}),SplitCoins:pn({coin:us,amounts:on(us)}),MergeCoins:pn({destination:us,sources:on(us)}),Publish:pn({modules:on(Tn),dependencies:on(_n)}),MakeMoveVec:pn({type:un(yn()),elements:on(us)}),Upgrade:pn({modules:on(Tn),dependencies:on(_n),package:_n,ticket:us}),$Intent:ps}),gs=hs({ImmOrOwnedObject:On,SharedObject:pn({objectId:_n,initialSharedVersion:An,mutable:ln()}),Receiving:On}),ys=hs({Object:gs,Pure:pn({bytes:Tn}),UnresolvedPure:pn({value:xn()}),UnresolvedObject:pn({objectId:_n,version:mn(un(An)),digest:mn(un(yn())),initialSharedVersion:mn(un(An))})}),vs=hs({None:hn(!0),Epoch:An}),bs=pn({version:hn(2),sender:dn(Mn),expiration:dn(vs),gasData:ds,inputs:on(ys),commands:on(ms)});async function ws(t,e,i){return await(async function(t,e){const{inputs:i,commands:n}=t,s=[],r=new Set;n.forEach((e=>{if(e.MoveCall){if(e.MoveCall._argumentTypes)return;e.MoveCall.arguments.map((e=>"Input"===e.$kind?t.inputs[e.Input]:null)).some((t=>t?.UnresolvedPure||t?.UnresolvedObject))&&(r.add(`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`),s.push(e.MoveCall))}switch(e.$kind){case"SplitCoins":e.SplitCoins.amounts.forEach((e=>{xs(e,li.U64,t)}));break;case"TransferObjects":xs(e.TransferObjects.address,li.Address,t)}}));const o=new Map;if(r.size>0){const t=js(e);await Promise.all([...r].map((async e=>{const[i,n,s]=e.split("::"),r=await t.getNormalizedMoveFunction({package:i,module:n,function:s});o.set(e,r.parameters.map((t=>(function(t){return"object"==typeof t&&"Reference"in t?{ref:"&",body:Fi(t.Reference)}:"object"==typeof t&&"MutableReference"in t?{ref:"&mut",body:Fi(t.MutableReference)}:{ref:null,body:Fi(t)}})(t))))})))}s.length&&await Promise.all(s.map((async t=>{const e=o.get(`${t.package}::${t.module}::${t.function}`);if(!e)return;const i=e.length>0&&(function(t){const e="object"==typeof t.body&&"datatype"in t.body?t.body.datatype:null;return!!e&&le(e.package)===le("0x2")&&"tx_context"===e.module&&"TxContext"===e.type})(e.at(-1))?e.slice(0,e.length-1):e;t._argumentTypes=i}))),n.forEach((t=>{if(!t.MoveCall)return;const e=t.MoveCall,n=e._argumentTypes;if(n){if(n.length!==t.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${e.package}::${e.module}::${e.function}`);n.forEach(((t,n)=>{const s=e.arguments[n];if("Input"!==s.$kind)return;const r=i[s.Input];if(!r.UnresolvedPure&&!r.UnresolvedObject)return;const o=r.UnresolvedPure?.value??r.UnresolvedObject?.objectId,a=Ui(t.body);if(a)return s.type="pure",void(i[i.indexOf(r)]=Wi(a.serialize(o)));if("string"!=typeof o)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(o,null,2)}`);s.type="object",i[s.Input]=r.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:o}}:r}))}}))})(t,e),await(async function(t,e){const i=t.inputs.filter((t=>t.UnresolvedObject&&!(t.UnresolvedObject.version||t.UnresolvedObject?.initialSharedVersion))),n=[...new Set(i.map((t=>ce(t.UnresolvedObject.objectId))))],s=n.length?(l=n,Array.from({length:Math.ceil(l.length/50)},((t,e)=>l.slice(50*e,50*e+50)))):[],r=(await Promise.all(s.map((t=>js(e).multiGetObjects({ids:t,options:{showOwner:!0}}))))).flat(),o=new Map(n.map(((t,e)=>[t,r[e]]))),a=Array.from(o).filter((([t,e])=>e.error)).map((([t,e])=>JSON.stringify(e.error)));var l;if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=r.map((t=>{if(t.error||!t.data)throw new Error(`Failed to fetch object: ${t.error}`);const e=t.data.owner;return{objectId:t.data.objectId,digest:t.data.digest,version:t.data.version,initialSharedVersion:e&&"object"==typeof e&&"Shared"in e?e.Shared.initial_shared_version:null}})),h=new Map(n.map(((t,e)=>[t,c[e]])));for(const[u,d]of t.inputs.entries()){if(!d.UnresolvedObject)continue;let e;const i=le(d.UnresolvedObject.objectId),n=h.get(i);d.UnresolvedObject.initialSharedVersion??n?.initialSharedVersion?e=qi({objectId:i,initialSharedVersion:d.UnresolvedObject.initialSharedVersion||n?.initialSharedVersion,mutable:Ss(t,u)}):ks(t,u)&&(e=Hi({objectId:i,digest:d.UnresolvedObject.digest??n?.digest,version:d.UnresolvedObject.version??n?.version})),t.inputs[t.inputs.indexOf(d)]=e??Vi({objectId:i,digest:d.UnresolvedObject.digest??n?.digest,version:d.UnresolvedObject.version??n?.version})}})(t,e),e.onlyTransactionKind||(await(async function(t,e){t.gasConfig.price||(t.gasConfig.price=String(await js(e).getReferenceGasPrice()))})(t,e),await(async function(t,e){if(t.gasConfig.budget)return;const i=await js(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(5e10),payment:[]}}})});if("success"!==i.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${i.effects.status.error}`,{cause:i});const n=1000n*BigInt(t.gasConfig.price||1n),s=BigInt(i.effects.gasUsed.computationCost)+n,r=s+BigInt(i.effects.gasUsed.storageCost)-BigInt(i.effects.gasUsed.storageRebate);t.gasConfig.budget=String(r>s?r:s)})(t,e),await(async function(t,e){if(!t.gasConfig.payment){const i=(await js(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:"0x2::sui::SUI"})).data.filter((e=>!t.inputs.find((t=>!!t.Object?.ImmOrOwnedObject&&e.coinObjectId===t.Object.ImmOrOwnedObject.objectId)))).map((t=>({objectId:t.coinObjectId,digest:t.digest,version:t.version})));if(!i.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=i.map((t=>jn(On,t)))}})(t,e)),await(function(t){t.inputs.forEach(((t,e)=>{if("Object"!==t.$kind&&"Pure"!==t.$kind)throw new Error(`Input at index ${e} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)}))})(t),await i()}function xs(t,e,i){if("Input"!==t.$kind)return;const n=i.inputs[t.Input];"UnresolvedPure"===n.$kind&&(i.inputs[t.Input]=Wi(e.serialize(n.UnresolvedPure.value)))}function Ss(t,e){let i=!1;return t.getInputUses(e,((t,e)=>{if(e.MoveCall&&e.MoveCall._argumentTypes){const n=e.MoveCall.arguments.indexOf(t);i="&"!==e.MoveCall._argumentTypes[n].ref||i}"MakeMoveVec"!==e.$kind&&"MergeCoins"!==e.$kind&&"SplitCoins"!==e.$kind||(i=!0)})),i}function ks(t,e){let i=!1;return t.getInputUses(e,((t,e)=>{if(e.MoveCall&&e.MoveCall._argumentTypes){const n=e.MoveCall.arguments.indexOf(t);i=(function(t){return"object"==typeof t.body&&"datatype"in t.body&&("0x2"===t.body.datatype.package&&"transfer"===t.body.datatype.module&&"Receiving"===t.body.datatype.type)})(e.MoveCall._argumentTypes[n])||i}})),i}function js(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Cs(t){function e(e,i){if("string"==typeof e)return t(Es(e).serialize(i));if(e instanceof Uint8Array||Jt(e))return t(e);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=e=>t(li.U8.serialize(e)),e.u16=e=>t(li.U16.serialize(e)),e.u32=e=>t(li.U32.serialize(e)),e.u64=e=>t(li.U64.serialize(e)),e.u128=e=>t(li.U128.serialize(e)),e.u256=e=>t(li.U256.serialize(e)),e.bool=e=>t(li.Bool.serialize(e)),e.string=e=>t(li.String.serialize(e)),e.address=e=>t(li.Address.serialize(e)),e.id=e.address,e.vector=(e,i)=>t(li.vector(Es(e)).serialize(i)),e.option=(e,i)=>t(li.option(Es(e)).serialize(i)),e}function Es(t){switch(t){case"u8":return li.u8();case"u16":return li.u16();case"u32":return li.u32();case"u64":return li.u64();case"u128":return li.u128();case"u256":return li.u256();case"bool":return li.bool();case"string":return li.string();case"id":case"address":return li.Address}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[t,i]=e.slice(1);return"vector"===t?li.vector(Es(i)):li.option(Es(i))}throw new Error(`Invalid Pure type name: ${t}`)}function Ms(t){return le(t).replace("0x","")}class _s{constructor(t){this.version=2,this.sender=t?.sender??null,this.expiration=t?.expiration??null,this.inputs=t?.inputs??[],this.commands=t?.commands??[],this.gasData=t?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const e=li.TransactionKind.parse(t).ProgrammableTransaction;if(!e)throw new Error("Unable to deserialize from bytes.");return _s.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:e.inputs,commands:e.commands})}static fromBytes(t){const e=li.TransactionData.parse(t),i=e?.V1,n=i.kind.ProgrammableTransaction;if(!i||!n)throw new Error("Unable to deserialize from bytes.");return _s.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:n.inputs,commands:n.commands})}static restore(t){return new _s(jn(Wn,2===t.version?t:(function(t){return jn(Wn,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map((t=>({digest:t.digest,objectId:t.objectId,version:t.version.toString()})))??null},inputs:t.inputs.map((t=>{if("Input"===t.kind){if(rn(Kn,t.value)){const e=jn(Kn,t.value);if(e.Object){if(e.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:e.Object.ImmOrOwned.objectId,version:String(e.Object.ImmOrOwned.version),digest:e.Object.ImmOrOwned.digest}}};if(e.Object.Shared)return{Object:{SharedObject:{mutable:e.Object.Shared.mutable??null,initialSharedVersion:e.Object.Shared.initialSharedVersion,objectId:e.Object.Shared.objectId}}};if(e.Object.Receiving)return{Object:{Receiving:{digest:e.Object.Receiving.digest,version:String(e.Object.Receiving.version),objectId:e.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:zt(new Uint8Array(e.Pure))}}}return"object"===t.type?{UnresolvedObject:{objectId:t.value}}:{UnresolvedPure:{value:t.value}}}throw new Error("Invalid input")})),commands:t.transactions.map((t=>{switch(t.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in t.type?de.tagToString(t.type.Some):null,elements:t.objects.map((t=>cs(t)))}};case"MergeCoins":return{MergeCoins:{destination:cs(t.destination),sources:t.sources.map((t=>cs(t)))}};case"MoveCall":{const[e,i,n]=t.target.split("::");return{MoveCall:{package:e,module:i,function:n,typeArguments:t.typeArguments,arguments:t.arguments.map((t=>cs(t)))}}}case"Publish":return{Publish:{modules:t.modules.map((t=>zt(Uint8Array.from(t)))),dependencies:t.dependencies}};case"SplitCoins":return{SplitCoins:{coin:cs(t.coin),amounts:t.amounts.map((t=>cs(t)))}};case"TransferObjects":return{TransferObjects:{objects:t.objects.map((t=>cs(t))),address:cs(t.address)}};case"Upgrade":return{Upgrade:{modules:t.modules.map((t=>zt(Uint8Array.from(t)))),dependencies:t.dependencies,package:t.packageId,ticket:cs(t.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(t)}`)}))})})(t)))}static getDigestFromBytes(t){const e=(function(t,e){const i=Array.from("TransactionData::").map((t=>t.charCodeAt(0))),n=new Uint8Array(i.length+e.length);return n.set(i),n.set(e,i.length),Bi(n,{dkLen:32})})(0,t);return Ot(e)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:e,onlyTransactionKind:i}={}){const n=this.inputs,s=this.commands;if(i)return li.TransactionKind.serialize({ProgrammableTransaction:{inputs:n,commands:s}},{maxSize:t}).toBytes();const r=e?.expiration??this.expiration,o=e?.sender??this.sender,a={...this.gasData,...e?.gasConfig,...e?.gasData};if(!o)throw new Error("Missing transaction sender");if(!a.budget)throw new Error("Missing gas budget");if(!a.payment)throw new Error("Missing gas payment");if(!a.price)throw new Error("Missing gas price");const l={sender:Ms(o),expiration:r||{None:!0},gasData:{payment:a.payment,owner:Ms(this.gasData.owner??o),price:BigInt(a.price),budget:BigInt(a.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:s}}};return li.TransactionData.serialize({V1:l},{maxSize:t}).toBytes()}addInput(t,e){const i=this.inputs.length;return this.inputs.push(e),{Input:i,type:t,$kind:"Input"}}getInputUses(t,e){this.mapArguments(((i,n)=>("Input"===i.$kind&&i.Input===t&&e(i,n),i)))}mapArguments(t){for(const e of this.commands)switch(e.$kind){case"MoveCall":e.MoveCall.arguments=e.MoveCall.arguments.map((i=>t(i,e)));break;case"TransferObjects":e.TransferObjects.objects=e.TransferObjects.objects.map((i=>t(i,e))),e.TransferObjects.address=t(e.TransferObjects.address,e);break;case"SplitCoins":e.SplitCoins.coin=t(e.SplitCoins.coin,e),e.SplitCoins.amounts=e.SplitCoins.amounts.map((i=>t(i,e)));break;case"MergeCoins":e.MergeCoins.destination=t(e.MergeCoins.destination,e),e.MergeCoins.sources=e.MergeCoins.sources.map((i=>t(i,e)));break;case"MakeMoveVec":e.MakeMoveVec.elements=e.MakeMoveVec.elements.map((i=>t(i,e)));break;case"Upgrade":e.Upgrade.ticket=t(e.Upgrade.ticket,e);break;case"$Intent":const i=e.$Intent.inputs;e.$Intent.inputs={};for(const[n,s]of Object.entries(i))e.$Intent.inputs[n]=Array.isArray(s)?s.map((i=>t(i,e))):t(s,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${e.$kind}`)}}replaceCommand(t,e){if(!Array.isArray(e))return void(this.commands[t]=e);const i=e.length-1;this.commands.splice(t,1,...e),0!==i&&this.mapArguments((e=>{switch(e.$kind){case"Result":e.Result>t&&(e.Result+=i);break;case"NestedResult":e.NestedResult[0]>t&&(e.NestedResult[0]+=i)}return e}))}getDigest(){const t=this.build({onlyTransactionKind:!1});return _s.getDigestFromBytes(t)}snapshot(){return jn(Wn,this)}}function Ts(t){return"string"==typeof t?le(t):t.Object?le(t.Object.ImmOrOwnedObject?t.Object.ImmOrOwnedObject.objectId:t.Object.Receiving?t.Object.Receiving.objectId:t.Object.SharedObject.objectId):t.UnresolvedObject?le(t.UnresolvedObject.objectId):void 0}var As,Os,Ns,Is,Ls,zs,Rs,Ps,Ds,$s=t=>{throw TypeError(t)},Bs=(t,e,i)=>e.has(t)||$s("Cannot "+i),Us=(t,e,i)=>(Bs(t,e,"read from private field"),i?i.call(t):e.get(t)),Fs=(t,e,i)=>e.has(t)?$s("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Ws=(t,e,i,n)=>(Bs(t,e,"write to private field"),e.set(t,i),i),Vs=(t,e,i)=>(Bs(t,e,"access private method"),i);const qs=Symbol.for("@mysten/transaction");function Hs(t){return!!t&&"object"==typeof t&&!0===t[qs]}const Ks={buildPlugins:new Map,serializationPlugins:new Map},Gs=Symbol.for("@mysten/transaction/registry");function Zs(){try{const t=globalThis;return t[Gs]||(t[Gs]=Ks),t[Gs]}catch(mx){return Ks}}As=new WeakMap,Os=new WeakMap,Ns=new WeakMap,Is=new WeakMap,Ls=new WeakSet,zs=function(t){return Jt(t)?this.pure(t):Vs(this,Ls,Rs).call(this,t)},Rs=function(t){return jn(Nn,"function"==typeof t?t(this):t)},Ps=async function(t){if(!t.onlyTransactionKind&&!Us(this,Is).sender)throw new Error("Missing transaction sender");await Vs(this,Ls,Ds).call(this,[...Us(this,Os),ws],t)},Ds=async function(t,e){const i=n=>{if(n>=t.length)return()=>{};const s=t[n];return async()=>{const t=i(n+1);let r=!1,o=!1;if(await s(Us(this,Is),e,(async()=>{if(r)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);r=!0,await t(),o=!0})),!r)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!o)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await i(0)()};let Ys=class t{constructor(){Fs(this,Ls),Fs(this,As),Fs(this,Os),Fs(this,Ns,new Map),Fs(this,Is),this.object=(function(t){function e(e){return t(e)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e})((t=>{if("function"==typeof t)return this.object(t(this));if("object"==typeof t&&rn(Nn,t))return t;const e=Ts(t),i=Us(this,Is).inputs.find((t=>e===Ts(t)));return i?.Object?.SharedObject&&"object"==typeof t&&t.Object?.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||t.Object.SharedObject.mutable),i?{$kind:"Input",Input:Us(this,Is).inputs.indexOf(i),type:"object"}:Us(this,Is).addInput("object","string"==typeof t?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:le(t)}}:t)}));const t=Zs();Ws(this,Is,new _s),Ws(this,Os,[...t.buildPlugins.values()]),Ws(this,As,[...t.serializationPlugins.values()])}static fromKind(e){const i=new t;return Ws(i,Is,_s.fromKindBytes("string"==typeof e?It(e):e)),i}static from(e){const i=new t;return Hs(e)?Ws(i,Is,new _s(e.getData())):"string"==typeof e&&e.startsWith("{")?Ws(i,Is,_s.restore(JSON.parse(e))):Ws(i,Is,_s.fromBytes("string"==typeof e?It(e):e)),i}static registerGlobalSerializationPlugin(t,e){Zs().serializationPlugins.set(t,e??t)}static unregisterGlobalSerializationPlugin(t){Zs().serializationPlugins.delete(t)}static registerGlobalBuildPlugin(t,e){Zs().buildPlugins.set(t,e??t)}static unregisterGlobalBuildPlugin(t){Zs().buildPlugins.delete(t)}addSerializationPlugin(t){Us(this,As).push(t)}addBuildPlugin(t){Us(this,Os).push(t)}addIntentResolver(t,e){if(Us(this,Ns).has(t)&&Us(this,Ns).get(t)!==e)throw new Error(`Intent resolver for ${t} already exists`);Us(this,Ns).set(t,e)}setSender(t){Us(this,Is).sender=t}setSenderIfNotSet(t){Us(this,Is).sender||(Us(this,Is).sender=t)}setExpiration(t){Us(this,Is).expiration=t?jn(Fn,t):null}setGasPrice(t){Us(this,Is).gasConfig.price=String(t)}setGasBudget(t){Us(this,Is).gasConfig.budget=String(t)}setGasBudgetIfNotSet(t){null==Us(this,Is).gasData.budget&&(Us(this,Is).gasConfig.budget=String(t))}setGasOwner(t){Us(this,Is).gasConfig.owner=t}setGasPayment(t){Us(this,Is).gasConfig.payment=t.map((t=>jn(On,t)))}get blockData(){return as(Us(this,Is).snapshot())}getData(){return Us(this,Is).snapshot()}get[qs](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Cs((t=>Jt(t)?Us(this,Is).addInput("pure",{$kind:"Pure",Pure:{bytes:t.toBase64()}}):Us(this,Is).addInput("pure",rn(Un,t)?jn(Un,t):t instanceof Uint8Array?Wi(t):{$kind:"UnresolvedPure",UnresolvedPure:{value:t}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...t){return this.object(Vi(...t))}receivingRef(...t){return this.object(Hi(...t))}sharedObjectRef(...t){return this.object(qi(...t))}add(t){return"function"==typeof t?t(this):(function(t){const e=[],i=i=>e[i]??(e[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy({$kind:"Result",Result:t},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(t,e){if(e in t)return Reflect.get(t,e);if(e===Symbol.iterator)return function*(){let t=0;for(;;)yield i(t),t++};if("symbol"==typeof e)return;const n=parseInt(e,10);return Number.isNaN(n)||n<0?void 0:i(n)}})})(Us(this,Is).commands.push(t)-1)}splitCoins(t,e){return this.add(Vn.SplitCoins("string"==typeof t?this.object(t):Vs(this,Ls,Rs).call(this,t),e.map((t=>"number"==typeof t||"bigint"==typeof t||"string"==typeof t?this.pure.u64(t):Vs(this,Ls,zs).call(this,t)))))}mergeCoins(t,e){return this.add(Vn.MergeCoins(this.object(t),e.map((t=>this.object(t)))))}publish({modules:t,dependencies:e}){return this.add(Vn.Publish({modules:t,dependencies:e}))}upgrade({modules:t,dependencies:e,package:i,ticket:n}){return this.add(Vn.Upgrade({modules:t,dependencies:e,package:i,ticket:this.object(n)}))}moveCall({arguments:t,...e}){return this.add(Vn.MoveCall({...e,arguments:t?.map((t=>Vs(this,Ls,zs).call(this,t)))}))}transferObjects(t,e){return this.add(Vn.TransferObjects(t.map((t=>this.object(t))),"string"==typeof e?this.pure.address(e):Vs(this,Ls,zs).call(this,e)))}makeMoveVec({type:t,elements:e}){return this.add(Vn.MakeMoveVec({type:t,elements:e.map((t=>this.object(t)))}))}serialize(){return JSON.stringify(as(Us(this,Is).snapshot()))}async toJSON(t={}){return await this.prepareForSerialization(t),JSON.stringify(jn(bs,Us(this,Is).snapshot()),((t,e)=>"bigint"==typeof e?e.toString():e),2)}async sign(t){const{signer:e,...i}=t,n=await this.build(i);return e.signTransaction(n)}async build(t={}){return await this.prepareForSerialization(t),await Vs(this,Ls,Ps).call(this,t),Us(this,Is).build({onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await Vs(this,Ls,Ps).call(this,t),Us(this,Is).getDigest()}async prepareForSerialization(t){const e=new Set;for(const n of Us(this,Is).commands)n.$Intent&&e.add(n.$Intent.name);const i=[...Us(this,As)];for(const n of e)if(!t.supportedIntents?.includes(n)){if(!Us(this,Ns).has(n))throw new Error(`Missing intent resolver for ${n}`);i.push(Us(this,Ns).get(n))}await Vs(this,Ls,Ds).call(this,i,t)}};const Xs=Symbol.for("@mysten/SuiClient");class Qs{get[Xs](){return!0}constructor(t){this.transport=t.transport??new _t({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!oe(le(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!oe(le(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!oe(le(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!oe(le(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,e){return await this.transport.request({method:t,params:e})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!oe(le(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!ae(ce(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach((t=>{if(!t||!ae(ce(t)))throw new Error(`Invalid Sui Object id ${t}`)})),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,"descending"===(t.order||"descending")]})}async getTransactionBlock(t){if(!re(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach((t=>{if(!re(t))throw new Error(`Invalid Transaction digest ${t}`)})),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock({transactionBlock:t,signature:e,options:i,requestType:n}){const s=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof t?t:zt(t),Array.isArray(e)?e:[e],i]});if("WaitForLocalExecution"===n)try{await this.waitForTransaction({digest:s.digest})}catch(xx){}return s}async signAndExecuteTransaction({transaction:t,signer:e,...i}){let n;t instanceof Uint8Array?n=t:(t.setSenderIfNotSet(e.toSuiAddress()),n=await t.build({client:this}));const{signature:s,bytes:r}=await e.signTransaction(n);return this.executeTransactionBlock({transactionBlock:r,signature:s,...i})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!oe(le(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach((t=>{if(!t||!ae(ce(t)))throw new Error(`Invalid Sui Stake id ${t}`)})),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,"descending"===(t.order||"descending")]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){let e;if(Hs(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),e=zt(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof t.transactionBlock)e=t.transactionBlock;else{if(!(t.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");e=zt(t.transactionBlock)}return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,e,t.gasPrice?.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof t.transactionBlock?t.transactionBlock:zt(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!ae(ce(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t?.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t?.cursor,t?.limit,t?.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t?.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t?.cursor,t?.limit,t?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"});return Pt(Nt(t.digest).slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...e}){const{nextCursor:i,hasNextPage:n,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]});return{hasNextPage:n,nextCursor:i,data:s.map((e=>(function(t,e="at"){const i=t.toLowerCase();let n;if(i.includes("@")){if(!hi.test(i))throw new Error(`Invalid SuiNS name ${t}`);const[e,s]=i.split("@");n=[...e?e.split("."):[],s]}else{if(!ui.test(i))throw new Error(`Invalid SuiNS name ${t}`);n=i.split(".").slice(0,-1)}return"dot"===e?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`})(e,t)))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t?.version]})}async waitForTransaction({signal:t,timeout:e=6e4,pollInterval:i=2e3,...n}){const s=AbortSignal.timeout(e),r=new Promise(((t,e)=>{s.addEventListener("abort",(()=>e(s.reason)))}));for(r.catch((()=>{}));!s.aborted;){t?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(mx){await Promise.race([new Promise((t=>setTimeout(t,i))),r])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}function Js(t){var e,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=Js(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}function tr(){for(var t,e,i=0,n="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=Js(t))&&(n&&(n+=" "),n+=e);return n}var er=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ir="undefined"==typeof window||"Deno"in globalThis;function nr(){}function sr(t){return"number"==typeof t&&t>=0&&t!==1/0}function rr(t,e){return Math.max(t+(e||0)-Date.now(),0)}function or(t,e){return"function"==typeof t?t(e):t}function ar(t,e){return"function"==typeof t?t(e):t}function lr(t,e){const{type:i="all",exact:n,fetchStatus:s,predicate:r,queryKey:o,stale:a}=t;if(o)if(n){if(e.queryHash!==hr(o,e.options))return!1}else if(!dr(e.queryKey,o))return!1;if("all"!==i){const t=e.isActive();if("active"===i&&!t)return!1;if("inactive"===i&&t)return!1}return!("boolean"==typeof a&&e.isStale()!==a||s&&s!==e.state.fetchStatus||r&&!r(e))}function cr(t,e){const{exact:i,status:n,predicate:s,mutationKey:r}=t;if(r){if(!e.options.mutationKey)return!1;if(i){if(ur(e.options.mutationKey)!==ur(r))return!1}else if(!dr(e.options.mutationKey,r))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function hr(t,e){return(e?.queryKeyHashFn||ur)(t)}function ur(t){return JSON.stringify(t,((t,e)=>gr(e)?Object.keys(e).sort().reduce(((t,i)=>(t[i]=e[i],t)),{}):e))}function dr(t,e){return t===e||typeof t==typeof e&&!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&!Object.keys(e).some((i=>!dr(t[i],e[i])))}function fr(t,e){if(t===e)return t;const i=mr(t)&&mr(e);if(i||gr(t)&&gr(e)){const n=i?t:Object.keys(t),s=n.length,r=i?e:Object.keys(e),o=r.length,a=i?[]:{};let l=0;for(let c=0;c<o;c++){const s=i?c:r[c];(!i&&n.includes(s)||i)&&void 0===t[s]&&void 0===e[s]?(a[s]=void 0,l++):(a[s]=fr(t[s],e[s]),a[s]===t[s]&&void 0!==t[s]&&l++)}return s===o&&l===s?t:a}return e}function pr(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}function mr(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gr(t){if(!yr(t))return!1;const e=t.constructor;if(void 0===e)return!0;const i=e.prototype;return!!yr(i)&&!!i.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype}function yr(t){return"[object Object]"===Object.prototype.toString.call(t)}function vr(t,e,i){return"function"==typeof i.structuralSharing?i.structuralSharing(t,e):!1!==i.structuralSharing?fr(t,e):e}function br(t,e,i=0){const n=[...t,e];return i&&n.length>i?n.slice(1):n}function wr(t,e,i=0){const n=[e,...t];return i&&n.length>i?n.slice(0,-1):n}var xr=Symbol();function Sr(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:t.queryFn&&t.queryFn!==xr?t.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`))}var kr=new class extends er{#t;#e;#i;constructor(){super(),this.#i=t=>{if(!ir&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#i=t,this.#e?.(),this.#e=t((t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach((e=>{e(t)}))}isFocused(){return"boolean"==typeof this.#t?this.#t:"hidden"!==globalThis.document?.visibilityState}},jr=new class extends er{#n=!0;#e;#i;constructor(){super(),this.#i=t=>{if(!ir&&window.addEventListener){const e=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#i=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#n!==t&&(this.#n=t,this.listeners.forEach((e=>{e(t)})))}isOnline(){return this.#n}};function Cr(){let t,e;const i=new Promise(((i,n)=>{t=i,e=n}));function n(t){Object.assign(i,t),delete i.resolve,delete i.reject}return i.status="pending",i.catch((()=>{})),i.resolve=e=>{n({status:"fulfilled",value:e}),t(e)},i.reject=t=>{n({status:"rejected",reason:t}),e(t)},i}function Er(t){return Math.min(1e3*2**t,3e4)}function Mr(t){return"online"!==(t??"online")||jr.isOnline()}var _r=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Tr(t){return t instanceof _r}function Ar(t){let e,i=!1,n=0,s=!1;const r=Cr(),o=()=>kr.isFocused()&&("always"===t.networkMode||jr.isOnline())&&t.canRun(),a=()=>Mr(t.networkMode)&&t.canRun(),l=i=>{s||(s=!0,t.onSuccess?.(i),e?.(),r.resolve(i))},c=i=>{s||(s=!0,t.onError?.(i),e?.(),r.reject(i))},h=()=>new Promise((i=>{e=t=>{(s||o())&&i(t)},t.onPause?.()})).then((()=>{e=void 0,s||t.onContinue?.()})),u=()=>{if(s)return;let e;const r=0===n?t.initialPromise:void 0;try{e=r??t.fn()}catch(qa){e=Promise.reject(qa)}Promise.resolve(e).then(l).catch((e=>{if(s)return;const r=t.retry??(ir?0:3),a=t.retryDelay??Er,l="function"==typeof a?a(n,e):a,d=!0===r||"number"==typeof r&&n<r||"function"==typeof r&&r(n,e);var f;!i&&d?(n++,t.onFail?.(n,e),(f=l,new Promise((t=>{setTimeout(t,f)}))).then((()=>o()?void 0:h())).then((()=>{i?c(e):u()}))):c(e)}))};return{promise:r,cancel:e=>{s||(c(new _r(e)),t.abort?.())},continue:()=>(e?.(),r),cancelRetry:()=>{i=!0},continueRetry:()=>{i=!1},canStart:a,start:()=>(a()?u():h().then(u),r)}}var Or=(function(){let t=[],e=0,i=t=>{t()},n=t=>{t()},s=t=>setTimeout(t,0);const r=n=>{e?t.push(n):s((()=>{i(n)}))};return{batch:r=>{let o;e++;try{o=r()}finally{e--,e||(()=>{const e=t;t=[],e.length&&s((()=>{n((()=>{e.forEach((t=>{i(t)}))}))}))})()}return o},batchCalls:t=>(...e)=>{r((()=>{t(...e)}))},schedule:r,setNotifyFunction:t=>{i=t},setBatchNotifyFunction:t=>{n=t},setScheduler:t=>{s=t}}})(),Nr=class{#s;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sr(this.gcTime)&&(this.#s=setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ir?1/0:3e5))}clearGcTimeout(){this.#s&&(clearTimeout(this.#s),this.#s=void 0)}},Ir=class extends Nr{#r;#o;#a;#l;#c;#h;constructor(t){super(),this.#h=!1,this.#c=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#a=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#r=(function(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,i=void 0!==e,n=i?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}})(this.options),this.state=t.state??this.#r,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#l?.promise}setOptions(t){this.options={...this.#c,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#a.remove(this)}setData(t,e){const i=vr(this.state.data,t,this.options);return this.#u({data:i,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),i}setState(t,e){this.#u({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#l?.promise;return this.#l?.cancel(t),e?e.then(nr).catch(nr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#r)}isActive(){return this.observers.some((t=>!1!==ar(t.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((t=>t.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(t=0){return this.state.isInvalidated||void 0===this.state.data||!rr(this.state.dataUpdatedAt,t)}onFocus(){const t=this.observers.find((t=>t.shouldFetchOnWindowFocus()));t?.refetch({cancelRefetch:!1}),this.#l?.continue()}onOnline(){const t=this.observers.find((t=>t.shouldFetchOnReconnect()));t?.refetch({cancelRefetch:!1}),this.#l?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#a.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter((e=>e!==t)),this.observers.length||(this.#l&&(this.#h?this.#l.cancel({revert:!0}):this.#l.cancelRetry()),this.scheduleGc()),this.#a.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#u({type:"invalidate"})}fetch(t,e){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#l)return this.#l.continueRetry(),this.#l.promise;if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find((t=>t.options.queryFn));t&&this.setOptions(t.options)}const i=new AbortController,n=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(this.#h=!0,i.signal)})},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const t=Sr(this.options,e),i={queryKey:this.queryKey,meta:this.meta};return n(i),this.#h=!1,this.options.persister?this.options.persister(t,i,this):t(i)}};n(s),this.options.behavior?.onFetch(s,this),this.#o=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===s.fetchOptions?.meta||this.#u({type:"fetch",meta:s.fetchOptions?.meta});const r=t=>{Tr(t)&&t.silent||this.#u({type:"error",error:t}),Tr(t)||(this.#a.config.onError?.(t,this),this.#a.config.onSettled?.(this.state.data,t,this)),this.scheduleGc()};return this.#l=Ar({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:i.abort.bind(i),onSuccess:t=>{if(void 0!==t){try{this.setData(t)}catch(qa){return void r(qa)}this.#a.config.onSuccess?.(t,this),this.#a.config.onSettled?.(t,this.state.error,this),this.scheduleGc()}else r(new Error(`${this.queryHash} data is undefined`))},onError:r,onFail:(t,e)=>{this.#u({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#u({type:"pause"})},onContinue:()=>{this.#u({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#l.start()}#u(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...Lr(e.data,this.options),fetchMeta:t.meta??null};case"success":return{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Tr(i)&&i.revert&&this.#o?{...this.#o,fetchStatus:"idle"}:{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),Or.batch((()=>{this.observers.forEach((t=>{t.onQueryUpdate()})),this.#a.notify({query:this,type:"updated",action:t})}))}};function Lr(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mr(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}var zr=class extends er{constructor(t={}){super(),this.config=t,this.#d=new Map}#d;build(t,e,i){const n=e.queryKey,s=e.queryHash??hr(n,e);let r=this.get(s);return r||(r=new Ir({cache:this,queryKey:n,queryHash:s,options:t.defaultQueryOptions(e),state:i,defaultOptions:t.getQueryDefaults(n)}),this.add(r)),r}add(t){this.#d.has(t.queryHash)||(this.#d.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#d.get(t.queryHash);e&&(t.destroy(),e===t&&this.#d.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Or.batch((()=>{this.getAll().forEach((t=>{this.remove(t)}))}))}get(t){return this.#d.get(t)}getAll(){return[...this.#d.values()]}find(t){const e={exact:!0,...t};return this.getAll().find((t=>lr(e,t)))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter((e=>lr(t,e))):e}notify(t){Or.batch((()=>{this.listeners.forEach((e=>{e(t)}))}))}onFocus(){Or.batch((()=>{this.getAll().forEach((t=>{t.onFocus()}))}))}onOnline(){Or.batch((()=>{this.getAll().forEach((t=>{t.onOnline()}))}))}},Rr=class extends Nr{#f;#p;#l;constructor(t){super(),this.mutationId=t.mutationId,this.#p=t.mutationCache,this.#f=[],this.state=t.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#f.includes(t)||(this.#f.push(t),this.clearGcTimeout(),this.#p.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#f=this.#f.filter((e=>e!==t)),this.scheduleGc(),this.#p.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#f.length||("pending"===this.state.status?this.scheduleGc():this.#p.remove(this))}continue(){return this.#l?.continue()??this.execute(this.state.variables)}async execute(t){this.#l=Ar({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(t,e)=>{this.#u({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#u({type:"pause"})},onContinue:()=>{this.#u({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#p.canRun(this)});const e="pending"===this.state.status,i=!this.#l.canStart();try{if(!e){this.#u({type:"pending",variables:t,isPaused:i}),await(this.#p.config.onMutate?.(t,this));const e=await(this.options.onMutate?.(t));e!==this.state.context&&this.#u({type:"pending",context:e,variables:t,isPaused:i})}const n=await this.#l.start();return await(this.#p.config.onSuccess?.(n,t,this.state.context,this)),await(this.options.onSuccess?.(n,t,this.state.context)),await(this.#p.config.onSettled?.(n,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(n,null,t,this.state.context)),this.#u({type:"success",data:n}),n}catch(qa){try{throw await(this.#p.config.onError?.(qa,t,this.state.context,this)),await(this.options.onError?.(qa,t,this.state.context)),await(this.#p.config.onSettled?.(void 0,qa,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,qa,t,this.state.context)),qa}finally{this.#u({type:"error",error:qa})}}finally{this.#p.runNext(this)}}#u(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),Or.batch((()=>{this.#f.forEach((e=>{e.onMutationUpdate(t)})),this.#p.notify({mutation:this,type:"updated",action:t})}))}},Pr=class extends er{constructor(t={}){super(),this.config=t,this.#m=new Map,this.#g=Date.now()}#m;#g;build(t,e,i){const n=new Rr({mutationCache:this,mutationId:++this.#g,options:t.defaultMutationOptions(e),state:i});return this.add(n),n}add(t){const e=Dr(t),i=this.#m.get(e)??[];i.push(t),this.#m.set(e,i),this.notify({type:"added",mutation:t})}remove(t){const e=Dr(t);if(this.#m.has(e)){const i=this.#m.get(e)?.filter((e=>e!==t));i&&(0===i.length?this.#m.delete(e):this.#m.set(e,i))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#m.get(Dr(t))?.find((t=>"pending"===t.state.status));return!e||e===t}runNext(t){const e=this.#m.get(Dr(t))?.find((e=>e!==t&&e.state.isPaused));return e?.continue()??Promise.resolve()}clear(){Or.batch((()=>{this.getAll().forEach((t=>{this.remove(t)}))}))}getAll(){return[...this.#m.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find((t=>cr(e,t)))}findAll(t={}){return this.getAll().filter((e=>cr(t,e)))}notify(t){Or.batch((()=>{this.listeners.forEach((e=>{e(t)}))}))}resumePausedMutations(){const t=this.getAll().filter((t=>t.state.isPaused));return Or.batch((()=>Promise.all(t.map((t=>t.continue().catch(nr))))))}};function Dr(t){return t.options.scope?.id??String(t.mutationId)}function $r(t){return{onFetch:(e,i)=>{const n=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,r=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let i=!1;const c=Sr(e.options,e.fetchOptions),h=async(t,n,s)=>{if(i)return Promise.reject();if(null==n&&t.pages.length)return Promise.resolve(t);const r={queryKey:e.queryKey,pageParam:n,direction:s?"backward":"forward",meta:e.options.meta};Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(e.signal.aborted?i=!0:e.signal.addEventListener("abort",(()=>{i=!0})),e.signal)});const o=await c(r),{maxPages:a}=e.options,l=s?wr:br;return{pages:l(t.pages,o,a),pageParams:l(t.pageParams,n,a)}};if(s&&r.length){const t="backward"===s,e={pages:r,pageParams:o},i=(t?Ur:Br)(n,e);a=await h(e,i,t)}else{const e=t??r.length;do{const t=0===l?o[0]??n.initialPageParam:Br(n,a);if(l>0&&null==t)break;a=await h(a,t),l++}while(l<e)}return a};e.fetchFn=e.options.persister?()=>e.options.persister?.(c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},i):c}}}function Br(t,{pages:e,pageParams:i}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,i[n],i):void 0}function Ur(t,{pages:e,pageParams:i}){return e.length>0?t.getPreviousPageParam?.(e[0],e,i[0],i):void 0}var Fr=class extends er{constructor(t,e){super(),this.options=e,this.#y=t,this.#v=null,this.#b=Cr(),this.options.experimental_prefetchInRender||this.#b.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#y;#w=void 0;#x=void 0;#S=void 0;#k;#j;#b;#v;#C;#E;#M;#_;#T;#A;#O=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#w.addObserver(this),Wr(this.#w,this.options)?this.#N():this.updateResult(),this.#I())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vr(this.#w,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vr(this.#w,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#L(),this.#z(),this.#w.removeObserver(this)}setOptions(t,e){const i=this.options,n=this.#w;if(this.options=this.#y.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof ar(this.options.enabled,this.#w))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#w.setOptions(this.options),i._defaulted&&!pr(this.options,i)&&this.#y.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#w,observer:this});const s=this.hasListeners();s&&qr(this.#w,n,this.options,i)&&this.#N(),this.updateResult(e),!s||this.#w===n&&ar(this.options.enabled,this.#w)===ar(i.enabled,this.#w)&&or(this.options.staleTime,this.#w)===or(i.staleTime,this.#w)||this.#P();const r=this.#D();!s||this.#w===n&&ar(this.options.enabled,this.#w)===ar(i.enabled,this.#w)&&r===this.#A||this.#$(r)}getOptimisticResult(t){const e=this.#y.getQueryCache().build(this.#y,t),i=this.createResult(e,t);return n=i,!pr(this.getCurrentResult(),n)&&(this.#S=i,this.#j=this.options,this.#k=this.#w.state),i;var n}getCurrentResult(){return this.#S}trackResult(t,e){const i={};return Object.keys(t).forEach((n=>{Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e?.(n),t[n])})})),i}trackProp(t){this.#O.add(t)}getCurrentQuery(){return this.#w}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#y.defaultQueryOptions(t),i=this.#y.getQueryCache().build(this.#y,e);return i.fetch().then((()=>this.createResult(i,e)))}fetch(t){return this.#N({...t,cancelRefetch:t.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#S)))}#N(t){this.#R();let e=this.#w.fetch(this.options,t);return t?.throwOnError||(e=e.catch(nr)),e}#P(){this.#L();const t=or(this.options.staleTime,this.#w);if(ir||this.#S.isStale||!sr(t))return;const e=rr(this.#S.dataUpdatedAt,t);this.#_=setTimeout((()=>{this.#S.isStale||this.updateResult()}),e+1)}#D(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#w):this.options.refetchInterval)??!1}#$(t){this.#z(),this.#A=t,!ir&&!1!==ar(this.options.enabled,this.#w)&&sr(this.#A)&&0!==this.#A&&(this.#T=setInterval((()=>{(this.options.refetchIntervalInBackground||kr.isFocused())&&this.#N()}),this.#A))}#I(){this.#P(),this.#$(this.#D())}#L(){this.#_&&(clearTimeout(this.#_),this.#_=void 0)}#z(){this.#T&&(clearInterval(this.#T),this.#T=void 0)}createResult(t,e){const i=this.#w,n=this.options,s=this.#S,r=this.#k,o=this.#j,a=t!==i?t.state:this.#x,{state:l}=t;let c,h={...l},u=!1;if(e._optimisticResults){const s=this.hasListeners(),r=!s&&Wr(t,e),o=s&&qr(t,i,e,n);(r||o)&&(h={...h,...Lr(l.data,t.options)}),"isRestoring"===e._optimisticResults&&(h.fetchStatus="idle")}let{error:d,errorUpdatedAt:f,status:p}=h;if(e.select&&void 0!==h.data)if(s&&h.data===r?.data&&e.select===this.#C)c=this.#E;else try{this.#C=e.select,c=e.select(h.data),c=vr(s?.data,c,e),this.#E=c,this.#v=null}catch(x){this.#v=x}else c=h.data;if(void 0!==e.placeholderData&&void 0===c&&"pending"===p){let t;if(s?.isPlaceholderData&&e.placeholderData===o?.placeholderData)t=s.data;else if(t="function"==typeof e.placeholderData?e.placeholderData(this.#M?.state.data,this.#M):e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),this.#v=null}catch(x){this.#v=x}void 0!==t&&(p="success",c=vr(s?.data,t,e),u=!0)}this.#v&&(d=this.#v,c=this.#E,f=Date.now(),p="error");const m="fetching"===h.fetchStatus,g="pending"===p,y="error"===p,v=g&&m,b=void 0!==c,w={status:p,fetchStatus:h.fetchStatus,isPending:g,isSuccess:"success"===p,isError:y,isInitialLoading:v,isLoading:v,data:c,dataUpdatedAt:h.dataUpdatedAt,error:d,errorUpdatedAt:f,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>a.dataUpdateCount||h.errorUpdateCount>a.errorUpdateCount,isFetching:m,isRefetching:m&&!g,isLoadingError:y&&!b,isPaused:"paused"===h.fetchStatus,isPlaceholderData:u,isRefetchError:y&&b,isStale:Hr(t,e),refetch:this.refetch,promise:this.#b};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===w.status?t.reject(w.error):void 0!==w.data&&t.resolve(w.data)},n=()=>{const t=this.#b=w.promise=Cr();e(t)},s=this.#b;switch(s.status){case"pending":t.queryHash===i.queryHash&&e(s);break;case"fulfilled":"error"!==w.status&&w.data===s.value||n();break;case"rejected":"error"===w.status&&w.error===s.reason||n()}}return w}updateResult(t){const e=this.#S,i=this.createResult(this.#w,this.options);if(this.#k=this.#w.state,this.#j=this.options,void 0!==this.#k.data&&(this.#M=this.#w),pr(i,e))return;this.#S=i;const n={};!1!==t?.listeners&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,i="function"==typeof t?t():t;if("all"===i||!i&&!this.#O.size)return!0;const n=new Set(i??this.#O);return this.options.throwOnError&&n.add("error"),Object.keys(this.#S).some((t=>this.#S[t]!==e[t]&&n.has(t)))})()&&(n.listeners=!0),this.#B({...n,...t})}#R(){const t=this.#y.getQueryCache().build(this.#y,this.options);if(t===this.#w)return;const e=this.#w;this.#w=t,this.#x=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#I()}#B(t){Or.batch((()=>{t.listeners&&this.listeners.forEach((t=>{t(this.#S)})),this.#y.getQueryCache().notify({query:this.#w,type:"observerResultsUpdated"})}))}};function Wr(t,e){return(function(t,e){return!1!==ar(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)})(t,e)||void 0!==t.state.data&&Vr(t,e,e.refetchOnMount)}function Vr(t,e,i){if(!1!==ar(e.enabled,t)){const n="function"==typeof i?i(t):i;return"always"===n||!1!==n&&Hr(t,e)}return!1}function qr(t,e,i,n){return(t!==e||!1===ar(n.enabled,t))&&(!i.suspense||"error"!==t.state.status)&&Hr(t,i)}function Hr(t,e){return!1!==ar(e.enabled,t)&&t.isStaleByTime(or(e.staleTime,t))}var Kr=class extends er{#y;#S=void 0;#U;#F;constructor(t,e){super(),this.#y=t,this.setOptions(e),this.bindMethods(),this.#W()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#y.defaultMutationOptions(t),pr(this.options,e)||this.#y.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#U,observer:this}),e?.mutationKey&&this.options.mutationKey&&ur(e.mutationKey)!==ur(this.options.mutationKey)?this.reset():"pending"===this.#U?.state.status&&this.#U.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#U?.removeObserver(this)}onMutationUpdate(t){this.#W(),this.#B(t)}getCurrentResult(){return this.#S}reset(){this.#U?.removeObserver(this),this.#U=void 0,this.#W(),this.#B()}mutate(t,e){return this.#F=e,this.#U?.removeObserver(this),this.#U=this.#y.getMutationCache().build(this.#y,this.options),this.#U.addObserver(this),this.#U.execute(t)}#W(){const t=this.#U?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#S={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#B(t){Or.batch((()=>{if(this.#F&&this.hasListeners()){const e=this.#S.variables,i=this.#S.context;"success"===t?.type?(this.#F.onSuccess?.(t.data,e,i),this.#F.onSettled?.(t.data,null,e,i)):"error"===t?.type&&(this.#F.onError?.(t.error,e,i),this.#F.onSettled?.(void 0,t.error,e,i))}this.listeners.forEach((t=>{t(this.#S)}))}))}},Gr=V.createContext(void 0),Zr=t=>{const e=V.useContext(Gr);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Yr=({client:e,children:i})=>(V.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),t.jsx(Gr.Provider,{value:e,children:i})),Xr=V.createContext(!1),Qr=V.createContext((function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}})());function Jr(t,e){return"function"==typeof t?t(...e):!!t}function to(){}var eo=(t,e,i)=>e.fetchOptimistic(t).catch((()=>{i.clearReset()}));function io(t,e){return(function(t,e){const i=Zr(),n=V.useContext(Xr),s=V.useContext(Qr),r=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(r),r._optimisticResults=n?"isRestoring":"optimistic",(t=>{t.suspense&&(void 0===t.staleTime&&(t.staleTime=1e3),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3)))})(r),((t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))})(r,s),(t=>{V.useEffect((()=>{t.clearReset()}),[t])})(s);const o=!i.getQueryCache().get(r.queryHash),[a]=V.useState((()=>new e(i,r))),l=a.getOptimisticResult(r);if(V.useSyncExternalStore(V.useCallback((t=>{const e=n?to:a.subscribe(Or.batchCalls(t));return a.updateResult(),e}),[a,n]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),V.useEffect((()=>{a.setOptions(r,{listeners:!1})}),[r,a]),((t,e)=>t?.suspense&&e.isPending)(r,l))throw eo(r,a,s);if((({result:t,errorResetBoundary:e,throwOnError:i,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&Jr(i,[t.error,n]))({result:l,errorResetBoundary:s,throwOnError:r.throwOnError,query:i.getQueryCache().get(r.queryHash)}))throw l.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(r,l),r.experimental_prefetchInRender&&!ir&&((t,e)=>t.isLoading&&t.isFetching&&!e)(l,n)){const t=o?eo(r,a,s):i.getQueryCache().get(r.queryHash)?.promise;t?.catch(to).finally((()=>{a.updateResult()}))}return r.notifyOnChangeProps?l:a.trackResult(l)})(t,Fr)}function no(t,e){const i=Zr(),[n]=V.useState((()=>new Kr(i,t)));V.useEffect((()=>{n.setOptions(t)}),[n,t]);const s=V.useSyncExternalStore(V.useCallback((t=>n.subscribe(Or.batchCalls(t))),[n]),(()=>n.getCurrentResult()),(()=>n.getCurrentResult())),r=V.useCallback(((t,e)=>{n.mutate(t,e).catch(to)}),[n]);if(s.error&&Jr(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:r,mutateAsync:s.mutate}}const so=t=>{let e;const i=new Set,n=(t,n)=>{const s="function"==typeof t?t(e):t;if(!Object.is(s,e)){const t=e;e=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},e,s),i.forEach((i=>i(e,t)))}},s=()=>e,r={setState:n,getState:s,getInitialState:()=>o,subscribe:t=>(i.add(t),()=>i.delete(t)),destroy:()=>{i.clear()}},o=e=t(n,s,r);return r};var ro={exports:{}},oo={},ao={exports:{}},lo={},co="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},ho=V.useState,uo=V.useEffect,fo=V.useLayoutEffect,po=V.useDebugValue;function mo(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!co(t,i)}catch(Cx){return!0}}var go="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var i=e(),n=ho({inst:{value:i,getSnapshot:e}}),s=n[0].inst,r=n[1];return fo((function(){s.value=i,s.getSnapshot=e,mo(s)&&r({inst:s})}),[t,i,e]),uo((function(){return mo(s)&&r({inst:s}),t((function(){mo(s)&&r({inst:s})}))}),[t]),po(i),i};lo.useSyncExternalStore=void 0!==V.useSyncExternalStore?V.useSyncExternalStore:go,ao.exports=lo;var yo="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},vo=ao.exports.useSyncExternalStore,bo=V.useRef,wo=V.useEffect,xo=V.useMemo,So=V.useDebugValue;oo.useSyncExternalStoreWithSelector=function(t,e,i,n,s){var r=bo(null);if(null===r.current){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=xo((function(){function t(t){if(!l){if(l=!0,r=t,t=n(t),void 0!==s&&o.hasValue){var e=o.value;if(s(e,t))return a=e}return a=t}if(e=a,yo(r,t))return e;var i=n(t);return void 0!==s&&s(e,i)?e:(r=t,a=i)}var r,a,l=!1,c=void 0===i?null:i;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]}),[e,i,n,s]);var a=vo(t,r[0],r[1]);return wo((function(){o.hasValue=!0,o.value=a}),[a]),So(a),a},ro.exports=oo;const ko=q(ro.exports),{useDebugValue:jo}=H,{useSyncExternalStoreWithSelector:Co}=ko,Eo=t=>t;var Mo;let _o;const To=new Set,Ao={};function Oo(){if(_o)return _o;if(_o=Object.freeze({register:No,get:Lo,on:zo}),"undefined"==typeof window)return _o;const t=Object.freeze({register:No});try{window.addEventListener("wallet-standard:register-wallet",(({detail:e})=>e(t)))}catch(qa){console.error("wallet-standard:register-wallet event listener could not be added\n",qa)}try{window.dispatchEvent(new Po(t))}catch(qa){console.error("wallet-standard:app-ready event could not be dispatched\n",qa)}return _o}function No(...t){return(t=t.filter((t=>!To.has(t)))).length?(t.forEach((t=>(function(t){Io=void 0,To.add(t)})(t))),Ao.register?.forEach((e=>Ro((()=>e(...t))))),function(){t.forEach((t=>(function(t){Io=void 0,To.delete(t)})(t))),Ao.unregister?.forEach((e=>Ro((()=>e(...t)))))}):()=>{}}let Io;function Lo(){return Io||(Io=[...To]),Io}function zo(t,e){return Ao[t]?.push(e)||(Ao[t]=[e]),function(){Ao[t]=Ao[t]?.filter((t=>e!==t))}}function Ro(t){try{t()}catch(qa){console.error(qa)}}class Po extends Event{get detail(){return(function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)})(this,Mo,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Mo.set(this,void 0),(function(t,e,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?s.call(t,i):s?s.value=i:e.set(t,i)})(this,Mo,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Mo=new WeakMap;var Do,$o,Bo,Uo,Fo,Wo,Vo=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},qo=function(t,e,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,i):s?s.value=i:e.set(t,i),i};class Ho{get address(){return Vo(this,Do,"f")}get publicKey(){return Vo(this,$o,"f").slice()}get chains(){return Vo(this,Bo,"f").slice()}get features(){return Vo(this,Uo,"f").slice()}get label(){return Vo(this,Fo,"f")}get icon(){return Vo(this,Wo,"f")}constructor(t){Do.set(this,void 0),$o.set(this,void 0),Bo.set(this,void 0),Uo.set(this,void 0),Fo.set(this,void 0),Wo.set(this,void 0),new.target===Ho&&Object.freeze(this),qo(this,Do,t.address,"f"),qo(this,$o,t.publicKey.slice(),"f"),qo(this,Bo,t.chains.slice(),"f"),qo(this,Uo,t.features.slice(),"f"),qo(this,Fo,t.label,"f"),qo(this,Wo,t.icon,"f")}}async function Ko(t,e){if(t.features["sui:signTransaction"])return t.features["sui:signTransaction"].signTransaction(e);if(!t.features["sui:signTransactionBlock"])throw new Error(`Provided wallet (${t.name}) does not support the signTransaction feature.`);const{signTransactionBlock:i}=t.features["sui:signTransactionBlock"],n=Ys.from(await e.transaction.toJSON()),{transactionBlockBytes:s,signature:r}=await i({transactionBlock:n,account:e.account,chain:e.chain});return{bytes:s,signature:r}}Do=new WeakMap,$o=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,Fo=new WeakMap,Wo=new WeakMap;const Go=["standard:connect","standard:events"],Zo="sui:mainnet",Yo=["sui:devnet","sui:testnet","sui:localnet",Zo];function Xo(t,e,i){return(e=(function(t){var e=(function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(t);return"symbol"==typeof e?e:String(e)})(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Qo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Jo(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Qo(Object(i),!0).forEach((function(e){Xo(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Qo(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ta(t,e){var i={};for(var n in t)i[n]=e(t[n],n);return i}var ea=(t,e,i)=>{for(var n of Object.keys(t)){var s;if(t[n]!==(null!==(s=e[n])&&void 0!==s?s:i[n]))return!1}return!0},ia=t=>{var e=e=>{var i=t.defaultClassName,n=Jo(Jo({},t.defaultVariants),e);for(var s in n){var r,o=null!==(r=n[s])&&void 0!==r?r:t.defaultVariants[s];if(null!=o){var a=o;"boolean"==typeof a&&(a=!0===a?"true":"false");var l=t.variantClassNames[s][a];l&&(i+=" "+l)}}for(var[c,h]of t.compoundVariants)ea(c,n,t.defaultVariants)&&(i+=" "+h);return i};return e.variants=()=>Object.keys(t.variantClassNames),e.classNames={get base(){return t.defaultClassName.split(" ")[0]},get variants(){return ta(t.variantClassNames,(t=>ta(t,(t=>t.split(" ")[0]))))}},e};function na(t,e){return li.IntentMessage(li.fixedArray(e.length,li.u8())).serialize({intent:{scope:{[t]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}function sa(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}class ra{equals(t){return sa(this.toRawBytes(),t.toRawBytes())}toBase64(){return zt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){return zt(this.toSuiBytes())}verifyWithIntent(t,e,i){const n=na(i,t),s=Bi(n,{dkLen:32});return this.verify(s,e)}verifyPersonalMessage(t,e){return this.verifyWithIntent(li.vector(li.u8()).serialize(t).toBytes(),e,"PersonalMessage")}verifyTransaction(t,e){return this.verifyWithIntent(t,e,"TransactionData")}toSuiBytes(){const t=this.toRawBytes(),e=new Uint8Array(t.length+1);return e.set([this.flag()]),e.set(t,1),e}toSuiAddress(){return le((function(t){fi(t);let e="";for(let i=0;i<t.length;i++)e+=ki[t[i]];return e})(Bi(this.toSuiBytes(),{dkLen:32})).slice(0,64))}}const oa={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},aa={ED25519:32,Secp256k1:33,Secp256r1:33},la={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function ca(t,e){if(!Boolean(t))throw new Error(e)}const ha={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},ua=new Set(Object.keys(ha));function da(t){const e=null==t?void 0:t.kind;return"string"==typeof e&&ua.has(e)}var fa,pa;function ma(t){return 9===t||32===t}function ga(t){return ya(t,[])}function ya(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return(function(t,e){if(null===t)return"null";if(e.includes(t))return"[Circular]";const i=[...e,t];if((function(t){return"function"==typeof t.toJSON})(t)){const e=t.toJSON();if(e!==t)return"string"==typeof e?e:ya(e,i)}else if(Array.isArray(t))return(function(t,e){if(0===t.length)return"[]";if(e.length>2)return"[Array]";const i=Math.min(10,t.length),n=t.length-i,s=[];for(let r=0;r<i;++r)s.push(ya(t[r],e));return 1===n?s.push("... 1 more item"):n>1&&s.push(`... ${n} more items`),"["+s.join(", ")+"]"})(t,i);return(function(t,e){const i=Object.entries(t);if(0===i.length)return"{}";if(e.length>2)return"["+(function(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof t.constructor){const e=t.constructor.name;if("string"==typeof e&&""!==e)return e}return e})(t)+"]";const n=i.map((([t,i])=>t+": "+ya(i,e)));return"{ "+n.join(", ")+" }"})(t,i)})(t,e);default:return String(t)}}!(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(fa||(fa={})),(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(pa||(pa={}));const va=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function ba(t){return wa[t.charCodeAt(0)]}const wa=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],xa=Object.freeze({});function Sa(t,e){const i=t[e];return"object"==typeof i?i:"function"==typeof i?{enter:i,leave:void 0}:{enter:t.enter,leave:t.leave}}const ka={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>ja(t.definitions,"\n\n")},OperationDefinition:{leave(t){const e=Ea("(",ja(t.variableDefinitions,", "),")"),i=ja([t.operation,ja([t.name,e]),ja(t.directives," ")]," ");return("query"===i?"":i+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:i,directives:n})=>t+": "+e+Ea(" = ",i)+Ea(" ",ja(n," "))},SelectionSet:{leave:({selections:t})=>Ca(t)},Field:{leave({alias:t,name:e,arguments:i,directives:n,selectionSet:s}){const r=Ea("",t,": ")+e;let o=r+Ea("(",ja(i,", "),")");return o.length>80&&(o=r+Ea("(\n",Ma(ja(i,"\n")),"\n)")),ja([o,ja(n," "),s]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+Ea(" ",ja(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:i})=>ja(["...",Ea("on ",t),ja(e," "),i]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:i,directives:n,selectionSet:s})=>`fragment ${t}${Ea("(",ja(i,", "),")")} on ${e} ${Ea("",ja(n," ")," ")}`+s},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?(function(t){const e=t.replace(/"""/g,'\\"""'),i=e.split(/\r\n|[\n\r]/g),n=1===i.length,s=i.length>1&&i.slice(1).every((t=>0===t.length||ma(t.charCodeAt(0)))),r=e.endsWith('\\"""'),o=t.endsWith('"')&&!r,a=t.endsWith("\\"),l=o||a,c=!n||t.length>70||l||s||r;let h="";const u=n&&ma(t.charCodeAt(0));return(c&&!u||s)&&(h+="\n"),h+=e,(c||l)&&(h+="\n"),'"""'+h+'"""'})(t):`"${t.replace(va,ba)}"`},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+ja(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+ja(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+Ea("(",ja(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:i})=>Ea("",t,"\n")+ja(["schema",ja(e," "),Ca(i)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:i})=>Ea("",t,"\n")+ja(["scalar",e,ja(i," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:i,directives:n,fields:s})=>Ea("",t,"\n")+ja(["type",e,Ea("implements ",ja(i," & ")),ja(n," "),Ca(s)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:i,type:n,directives:s})=>Ea("",t,"\n")+e+(_a(i)?Ea("(\n",Ma(ja(i,"\n")),"\n)"):Ea("(",ja(i,", "),")"))+": "+n+Ea(" ",ja(s," "))},InputValueDefinition:{leave:({description:t,name:e,type:i,defaultValue:n,directives:s})=>Ea("",t,"\n")+ja([e+": "+i,Ea("= ",n),ja(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:i,directives:n,fields:s})=>Ea("",t,"\n")+ja(["interface",e,Ea("implements ",ja(i," & ")),ja(n," "),Ca(s)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:i,types:n})=>Ea("",t,"\n")+ja(["union",e,ja(i," "),Ea("= ",ja(n," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:i,values:n})=>Ea("",t,"\n")+ja(["enum",e,ja(i," "),Ca(n)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:i})=>Ea("",t,"\n")+ja([e,ja(i," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:i,fields:n})=>Ea("",t,"\n")+ja(["input",e,ja(i," "),Ca(n)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:i,repeatable:n,locations:s})=>Ea("",t,"\n")+"directive @"+e+(_a(i)?Ea("(\n",Ma(ja(i,"\n")),"\n)"):Ea("(",ja(i,", "),")"))+(n?" repeatable":"")+" on "+ja(s," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>ja(["extend schema",ja(t," "),Ca(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>ja(["extend scalar",t,ja(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:i,fields:n})=>ja(["extend type",t,Ea("implements ",ja(e," & ")),ja(i," "),Ca(n)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:i,fields:n})=>ja(["extend interface",t,Ea("implements ",ja(e," & ")),ja(i," "),Ca(n)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:i})=>ja(["extend union",t,ja(e," "),Ea("= ",ja(i," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:i})=>ja(["extend enum",t,ja(e," "),Ca(i)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:i})=>ja(["extend input",t,ja(e," "),Ca(i)]," ")}};function ja(t,e=""){var i;return null!==(i=null==t?void 0:t.filter((t=>t)).join(e))&&void 0!==i?i:""}function Ca(t){return Ea("{\n",Ma(ja(t,"\n")),"\n}")}function Ea(t,e,i=""){return null!=e&&""!==e?t+e+i:""}function Ma(t){return Ea("  ",t.replace(/\n/g,"\n  "))}function _a(t){var e;return null!==(e=null==t?void 0:t.some((t=>t.includes("\n"))))&&void 0!==e&&e}var Ta,Aa,Oa,Na,Ia=t=>{throw TypeError(t)},La=(t,e,i)=>e.has(t)||Ia("Cannot "+i),za=(t,e,i)=>(La(t,e,"read from private field"),i?i.call(t):e.get(t)),Ra=(t,e,i)=>e.has(t)?Ia("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Pa=(t,e,i,n)=>(La(t,e,"write to private field"),e.set(t,i),i);class Da extends Error{}class $a{constructor({url:t,fetch:e=fetch,headers:i={},queries:n={}}){Ra(this,Ta),Ra(this,Aa),Ra(this,Oa),Ra(this,Na),Pa(this,Ta,t),Pa(this,Aa,n),Pa(this,Oa,i),Pa(this,Na,((...t)=>e(...t)))}async query(t){const e=await za(this,Na).call(this,za(this,Ta),{method:"POST",headers:{"Content-Type":"application/json",...za(this,Oa)},body:JSON.stringify({query:"string"==typeof t.query?String(t.query):(i=t.query,(function(t,e,i=ha){const n=new Map;for(const y of Object.values(pa))n.set(y,Sa(e,y));let s,r,o,a=Array.isArray(t),l=[t],c=-1,h=[],u=t;const d=[],f=[];do{c++;const t=c===l.length,y=t&&0!==h.length;if(t){if(r=0===f.length?void 0:d[d.length-1],u=o,o=f.pop(),y)if(a){u=u.slice();let t=0;for(const[e,i]of h){const n=e-t;null===i?(u.splice(n,1),t++):u[n]=i}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(const[t,e]of h)u[t]=e}c=s.index,l=s.keys,h=s.edits,a=s.inArray,s=s.prev}else if(o){if(r=a?c:l[c],u=o[r],null==u)continue;d.push(r)}let v;if(!Array.isArray(u)){var p,m;da(u)||ca(!1,`Invalid AST Node: ${ga(u)}.`);const i=t?null===(p=n.get(u.kind))||void 0===p?void 0:p.leave:null===(m=n.get(u.kind))||void 0===m?void 0:m.enter;if(v=null==i?void 0:i.call(e,u,r,o,d,f),v===xa)break;if(!1===v){if(!t){d.pop();continue}}else if(void 0!==v&&(h.push([r,v]),!t)){if(!da(v)){d.pop();continue}u=v}}var g;void 0===v&&y&&h.push([r,u]),t?d.pop():(s={inArray:a,index:c,keys:l,edits:h,prev:s},a=Array.isArray(u),l=a?u:null!==(g=i[u.kind])&&void 0!==g?g:[],c=-1,h=[],o&&f.push(o),o=u)}while(void 0!==s);return 0!==h.length?h[h.length-1][1]:t})(i,ka)),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});var i;if(!e.ok)throw new Da(`GraphQL request failed: ${e.statusText} (${e.status})`);return await e.json()}async execute(t,e){return this.query({...e,query:za(this,Aa)[t]})}}Ta=new WeakMap,Aa=new WeakMap,Oa=new WeakMap,Na=new WeakMap;var Ba,Ua,Fa="Document",Wa="FragmentDefinition";class Va extends Error{constructor(t,e,i,n,s,r,o){super(t),this.name="GraphQLError",this.message=t,s&&(this.path=s),e&&(this.nodes=Array.isArray(e)?e:[e]),i&&(this.source=i),n&&(this.positions=n),r&&(this.originalError=r);var a=o;if(!a&&r){var l=r.extensions;l&&"object"==typeof l&&(a=l)}this.extensions=a||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}function qa(t){return new Va(`Syntax Error: Unexpected token at ${Ua} in ${t}`)}function Ha(t){if(t.lastIndex=Ua,t.test(Ba))return Ba.slice(Ua,Ua=t.lastIndex)}var Ka=/ +(?=[^\s])/y;function Ga(t){for(var e=t.split("\n"),i="",n=0,s=0,r=e.length-1,o=0;o<e.length;o++)Ka.lastIndex=0,Ka.test(e[o])&&(o&&(!n||Ka.lastIndex<n)&&(n=Ka.lastIndex),s=s||o,r=o);for(var a=s;a<=r;a++)a!==s&&(i+="\n"),i+=e[a].slice(n).replace(/\\"""/g,'"""');return i}function Za(){for(var t=0|Ba.charCodeAt(Ua++);9===t||10===t||13===t||32===t||35===t||44===t||65279===t;t=0|Ba.charCodeAt(Ua++))if(35===t)for(;10!==(t=Ba.charCodeAt(Ua++))&&13!==t;);Ua--}var Ya=/[_A-Za-z]\w*/y,Xa=new RegExp("(?:(null|true|false)|\\$("+Ya.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+Ya.source+"))","y"),Qa=(function(t){return t[t.Const=1]="Const",t[t.Var=2]="Var",t[t.Int=3]="Int",t[t.Float=4]="Float",t[t.BlockString=5]="BlockString",t[t.String=6]="String",t[t.Enum=7]="Enum",t})(Qa||{}),Ja=/\\/;function tl(t){var e,i;if(Xa.lastIndex=Ua,91===Ba.charCodeAt(Ua)){Ua++,Za();for(var n=[];93!==Ba.charCodeAt(Ua);)n.push(tl(t));return Ua++,Za(),{kind:"ListValue",values:n}}if(123===Ba.charCodeAt(Ua)){Ua++,Za();for(var s=[];125!==Ba.charCodeAt(Ua);){if(null==(e=Ha(Ya)))throw qa("ObjectField");if(Za(),58!==Ba.charCodeAt(Ua++))throw qa("ObjectField");Za(),s.push({kind:"ObjectField",name:{kind:"Name",value:e},value:tl(t)})}return Ua++,Za(),{kind:"ObjectValue",fields:s}}if(null!=(i=Xa.exec(Ba))){if(Ua=Xa.lastIndex,Za(),null!=(e=i[Qa.Const]))return"null"===e?{kind:"NullValue"}:{kind:"BooleanValue",value:"true"===e};if(null!=(e=i[Qa.Var])){if(t)throw qa("Variable");return{kind:"Variable",name:{kind:"Name",value:e}}}var r;if(null!=(e=i[Qa.Int]))return null!=(r=i[Qa.Float])?{kind:"FloatValue",value:e+r}:{kind:"IntValue",value:e};if(null!=(e=i[Qa.BlockString]))return{kind:"StringValue",value:Ga(e.slice(3,-3)),block:!0};if(null!=(e=i[Qa.String]))return{kind:"StringValue",value:Ja.test(e)?JSON.parse(e):e.slice(1,-1),block:!1};if(null!=(e=i[Qa.Enum]))return{kind:"EnumValue",value:e}}throw qa("Value")}function el(t){if(40===Ba.charCodeAt(Ua)){var e,i=[];Ua++,Za();do{if(null==(e=Ha(Ya)))throw qa("Argument");if(Za(),58!==Ba.charCodeAt(Ua++))throw qa("Argument");Za(),i.push({kind:"Argument",name:{kind:"Name",value:e},value:tl(t)})}while(41!==Ba.charCodeAt(Ua));return Ua++,Za(),i}}function il(t){if(64===Ba.charCodeAt(Ua)){var e,i=[];do{if(Ua++,null==(e=Ha(Ya)))throw qa("Directive");Za(),i.push({kind:"Directive",name:{kind:"Name",value:e},arguments:el(t)})}while(64===Ba.charCodeAt(Ua));return i}}function nl(){for(var t,e=0;91===Ba.charCodeAt(Ua);)e++,Ua++,Za();if(null==(t=Ha(Ya)))throw qa("NamedType");Za();var i={kind:"NamedType",name:{kind:"Name",value:t}};do{if(33===Ba.charCodeAt(Ua)&&(Ua++,Za(),i={kind:"NonNullType",type:i}),e){if(93!==Ba.charCodeAt(Ua++))throw qa("NamedType");Za(),i={kind:"ListType",type:i}}}while(e--);return i}var sl=new RegExp("(?:(\\.{3})|("+Ya.source+"))","y"),rl=(function(t){return t[t.Spread=1]="Spread",t[t.Name=2]="Name",t})(rl||{});function ol(){var t,e,i=[];do{if(sl.lastIndex=Ua,null==(e=sl.exec(Ba)))throw qa("SelectionSet");if(Ua=sl.lastIndex,null!=e[rl.Spread]){Za();var n=Ha(Ya);if(null!=n&&"on"!==n)Za(),i.push({kind:"FragmentSpread",name:{kind:"Name",value:n},directives:il(!1)});else{if(Za(),"on"===n){if(null==(n=Ha(Ya)))throw qa("NamedType");Za()}var s=il(!1);if(123!==Ba.charCodeAt(Ua++))throw qa("InlineFragment");Za(),i.push({kind:"InlineFragment",typeCondition:n?{kind:"NamedType",name:{kind:"Name",value:n}}:void 0,directives:s,selectionSet:ol()})}}else if(null!=(t=e[rl.Name])){var r=void 0;if(Za(),58===Ba.charCodeAt(Ua)){if(Ua++,Za(),r=t,null==(t=Ha(Ya)))throw qa("Field");Za()}var o=el(!1);Za();var a=il(!1),l=void 0;123===Ba.charCodeAt(Ua)&&(Ua++,Za(),l=ol()),i.push({kind:"Field",alias:r?{kind:"Name",value:r}:void 0,name:{kind:"Name",value:t},arguments:o,directives:a,selectionSet:l})}}while(125!==Ba.charCodeAt(Ua));return Ua++,Za(),{kind:"SelectionSet",selections:i}}function al(){var t,e;if(null==(t=Ha(Ya)))throw qa("FragmentDefinition");if(Za(),"on"!==Ha(Ya))throw qa("FragmentDefinition");if(Za(),null==(e=Ha(Ya)))throw qa("FragmentDefinition");Za();var i=il(!1);if(123!==Ba.charCodeAt(Ua++))throw qa("FragmentDefinition");return Za(),{kind:"FragmentDefinition",name:{kind:"Name",value:t},typeCondition:{kind:"NamedType",name:{kind:"Name",value:e}},directives:i,selectionSet:ol()}}var ll=/(?:query|mutation|subscription|fragment)/y;function cl(t){var e,i,n;if(t&&(Za(),e=Ha(Ya),i=(function(){if(Za(),40===Ba.charCodeAt(Ua)){var t,e=[];Ua++,Za();do{if(36!==Ba.charCodeAt(Ua++))throw qa("Variable");if(null==(t=Ha(Ya)))throw qa("Variable");if(Za(),58!==Ba.charCodeAt(Ua++))throw qa("VariableDefinition");Za();var i=nl(),n=void 0;61===Ba.charCodeAt(Ua)&&(Ua++,Za(),n=tl(!0)),Za(),e.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:t}},type:i,defaultValue:n,directives:il(!0)})}while(41!==Ba.charCodeAt(Ua));return Ua++,Za(),e}})(),n=il(!1)),123===Ba.charCodeAt(Ua))return Ua++,Za(),{kind:"OperationDefinition",operation:t||"query",name:e?{kind:"Name",value:e}:void 0,variableDefinitions:i,directives:n,selectionSet:ol()}}var hl=0,ul=new Set;function dl(){function t(t,e){var i,n,s=(function(t){return Ua=0,(function(t){var e,i;Za();var n,s=[];do{if("fragment"===(e=Ha(ll)))Za(),s.push(al());else{if(null==(i=cl(e)))throw qa("Document");s.push(i)}}while(Ua<t.length);return{kind:"Document",definitions:s,set loc(t){n=t},get loc(){return n||(n={start:0,end:t.length,startToken:void 0,endToken:void 0,source:{body:t,name:"graphql.web",locationOffset:{line:1,column:1}}}),n}}})(Ba="string"==typeof t.body?t.body:t)})(t).definitions,r=new Set;for(var o of e||[])for(var a of o.definitions)a.kind!==Wa||r.has(a)||(s.push(a),r.add(a));return(i=s[0].kind===Wa)&&s[0].directives&&(s[0].directives=s[0].directives.filter((t=>"_unmask"!==t.name.value))),{kind:Fa,definitions:s,get loc(){if(!n&&i){var s=t+(function(t){try{hl++;var e="";for(var i of t)if(!ul.has(i)){ul.add(i);var{loc:n}=i;n&&(e+=n.source.body)}return e}finally{0==--hl&&ul.clear()}})(e||[]);return{start:0,end:s.length,source:{body:s,name:"GraphQLTada",locationOffset:{line:1,column:1}}}}return n},set loc(t){n=t}}}return t.scalar=function(t,e){return e},t.persisted=function(t,e){return{kind:Fa,definitions:e?e.definitions:[],documentId:t}},t}dl();const fl=dl();function pl(t){if(1!==t.length)throw new Error("Invalid base64Url character: "+t);const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(-1===e)throw new Error("Invalid base64Url character: "+t);const i=e.toString(2).padStart(6,"0");return Array.from(i).map(Number)}function ml(t,e){const i=(function(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let i=(function(t){let e=[];for(let i=0;i<t.length;i++){const n=pl(t.charAt(i));e=e.concat(n)}return e})(t);const n=e%4;if(0===n);else if(1===n)i=i.slice(2);else{if(2!==n)throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);i=i.slice(4)}const s=(e+t.length-1)%4;if(3===s);else if(2===s)i=i.slice(0,i.length-2);else{if(1!==s)throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);i=i.slice(0,i.length-4)}if(i.length%8!=0)throw new Error("We should never reach here...");const r=new Uint8Array(Math.floor(i.length/8));let o=0;for(let a=0;a<i.length;a+=8){const t=i.slice(a,a+8),e=parseInt(t.join(""),2);r[o++]=e}return(new TextDecoder).decode(r)})(t.value,t.indexMod4),[n,s]=(function(t){if("}"!==t.slice(-1)&&","!==t.slice(-1))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(1!==Object.keys(e).length)throw new Error("Invalid claim");const i=Object.keys(e)[0];return[i,e[i]]})(i);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return s}const gl=se.struct("ZkLoginSignature",{inputs:se.struct("ZkLoginSignatureInputs",{proofPoints:se.struct("ZkLoginSignatureInputsProofPoints",{a:se.vector(se.string()),b:se.vector(se.vector(se.string())),c:se.vector(se.string())}),issBase64Details:se.struct("ZkLoginSignatureInputsClaim",{value:se.string(),indexMod4:se.u8()}),headerBase64:se.string(),addressSeed:se.string()}),maxEpoch:se.u64(),userSignature:se.vector(se.u8())});var yl,vl,bl=t=>{throw TypeError(t)},wl=(t,e,i)=>e.has(t)||bl("Cannot "+i),xl=(t,e,i)=>(wl(t,e,"read from private field"),i?i.call(t):e.get(t)),Sl=(t,e,i)=>e.has(t)?bl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),kl=(t,e,i,n)=>(wl(t,e,"write to private field"),e.set(t,i),i);yl=new WeakMap,vl=new WeakMap;let jl=class t extends ra{constructor(t,{client:e}={}){super(),Sl(this,yl),Sl(this,vl),kl(this,vl,e),"string"==typeof t?kl(this,yl,It(t)):t instanceof Uint8Array?kl(this,yl,t):kl(this,yl,Uint8Array.from(t))}equals(t){return super.equals(t)}toRawBytes(){return xl(this,yl)}flag(){return oa.ZkLogin}async verify(t,e){throw Error("does not support")}verifyPersonalMessage(e,i){const n=Ml(i);return El({address:new t(n.publicKey).toSuiAddress(),bytes:zt(e),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:xl(this,vl)})}verifyTransaction(e,i){const n=Ml(i);return El({address:new t(n.publicKey).toSuiAddress(),bytes:zt(e),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:xl(this,vl)})}};const Cl=fl("\n\tquery Zklogin(\n\t\t$bytes: Base64!\n\t\t$signature: Base64!\n\t\t$intentScope: ZkLoginIntentScope!\n\t\t$author: SuiAddress!\n\t) {\n\t\tverifyZkloginSignature(\n\t\t\tbytes: $bytes\n\t\t\tsignature: $signature\n\t\t\tintentScope: $intentScope\n\t\t\tauthor: $author\n\t\t) {\n\t\t\tsuccess\n\t\t\terrors\n\t\t}\n\t}\n");async function El({address:t,bytes:e,signature:i,intentScope:n,client:s=new $a({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){const r=await s.query({query:Cl,variables:{bytes:e,signature:i,intentScope:n,author:t}});return!0===r.data?.verifyZkloginSignature.success&&0===r.data?.verifyZkloginSignature.errors.length}function Ml(t){const e="string"==typeof t?It(t):t;if(e[0]!==oa.ZkLogin)throw new Error("Invalid signature scheme");const i=e.slice(1),{inputs:n,maxEpoch:s,userSignature:r}=(function(t){return gl.parse("string"==typeof t?It(t):t)})(i),{issBase64Details:o,addressSeed:a}=n,l=ml(o,"iss"),c=(function(t,e){const i=(r=32,(function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,i=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(i);for(let s=0,r=0;s<i;s++,r+=2){const e=ji(t.charCodeAt(r)),i=ji(t.charCodeAt(r+1));if(void 0===e||void 0===i)throw new Error('hex string expected, got non-hex character "'+(t[r]+t[r+1])+'" at index '+r);n[s]=16*e+i}return n})(t.toString(16).padStart(2*r,"0").slice(2*-r))),n=(new TextEncoder).encode(e),s=new Uint8Array(1+n.length+i.length);var r;return s.set([n.length],0),s.set(n,1),s.set(i,1+n.length),new jl(s,void 0)})(BigInt(a),l);return{serializedSignature:zt(e),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:s,userSignature:r,iss:l,addressSeed:BigInt(a)},signature:e,publicKey:c.toRawBytes()}}class _l extends Ei{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,pi(t);const i=Ci(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?t.create().update(i).digest():i);for(let r=0;r<s.length;r++)s[r]^=54;this.iHash.update(s),this.oHash=t.create();for(let r=0;r<s.length;r++)s[r]^=106;this.oHash.update(s),s.fill(0)}update(t){return mi(this),this.iHash.update(t),this}digestInto(t){mi(this),fi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:i,finished:n,destroyed:s,blockLen:r,outputLen:o}=this;return t.finished=n,t.destroyed=s,t.blockLen=r,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Tl=(t,e,i)=>new _l(t,e).update(i).digest();Tl.create=(t,e)=>new _l(t,e);class Al extends Ei{constructor(t,e,i,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=vi(this.buffer)}update(t){mi(this);const{view:e,buffer:i,blockLen:n}=this,s=(t=Ci(t)).length;for(let r=0;r<s;){const o=Math.min(n-this.pos,s-r);if(o!==n)i.set(t.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=vi(t);for(;n<=s-r;r+=n)this.process(e,r)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){mi(this),gi(t,this),this.finished=!0;const{buffer:e,view:i,blockLen:n,isLE:s}=this;let{pos:r}=this;e[r++]=128,this.buffer.subarray(r).fill(0),this.padOffset>n-r&&(this.process(i,0),r=0);for(let h=r;h<n;h++)e[h]=0;!(function(t,e,i,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,n);const s=BigInt(32),r=BigInt(4294967295),o=Number(i>>s&r),a=Number(i&r),l=n?0:4;t.setUint32(e+(n?4:0),o,n),t.setUint32(e+l,a,n)})(i,n-8,BigInt(8*this.length),s),this.process(i,0);const o=vi(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)o.setUint32(4*h,c[h],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:i,length:n,finished:s,destroyed:r,pos:o}=this;return t.length=n,t.pos=o,t.finished=s,t.destroyed=r,n%e&&t.buffer.set(i),t}}const[Ol,Nl]=(()=>Li.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),Il=new Uint32Array(80),Ll=new Uint32Array(80);class zl extends Al{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:i,Bl:n,Ch:s,Cl:r,Dh:o,Dl:a,Eh:l,El:c,Fh:h,Fl:u,Gh:d,Gl:f,Hh:p,Hl:m}=this;return[t,e,i,n,s,r,o,a,l,c,h,u,d,f,p,m]}set(t,e,i,n,s,r,o,a,l,c,h,u,d,f,p,m){this.Ah=0|t,this.Al=0|e,this.Bh=0|i,this.Bl=0|n,this.Ch=0|s,this.Cl=0|r,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|h,this.Fl=0|u,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(t,e){for(let v=0;v<16;v++,e+=4)Il[v]=t.getUint32(e),Ll[v]=t.getUint32(e+=4);for(let v=16;v<80;v++){const t=0|Il[v-15],e=0|Ll[v-15],i=Li.rotrSH(t,e,1)^Li.rotrSH(t,e,8)^Li.shrSH(t,e,7),n=Li.rotrSL(t,e,1)^Li.rotrSL(t,e,8)^Li.shrSL(t,e,7),s=0|Il[v-2],r=0|Ll[v-2],o=Li.rotrSH(s,r,19)^Li.rotrBH(s,r,61)^Li.shrSH(s,r,6),a=Li.rotrSL(s,r,19)^Li.rotrBL(s,r,61)^Li.shrSL(s,r,6),l=Li.add4L(n,a,Ll[v-7],Ll[v-16]),c=Li.add4H(l,i,o,Il[v-7],Il[v-16]);Il[v]=0|c,Ll[v]=0|l}let{Ah:i,Al:n,Bh:s,Bl:r,Ch:o,Cl:a,Dh:l,Dl:c,Eh:h,El:u,Fh:d,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let v=0;v<80;v++){const t=Li.rotrSH(h,u,14)^Li.rotrSH(h,u,18)^Li.rotrBH(h,u,41),e=Li.rotrSL(h,u,14)^Li.rotrSL(h,u,18)^Li.rotrBL(h,u,41),b=h&d^~h&p,w=Li.add5L(y,e,u&f^~u&m,Nl[v],Ll[v]),x=Li.add5H(w,g,t,b,Ol[v],Il[v]),S=0|w,k=Li.rotrSH(i,n,28)^Li.rotrBH(i,n,34)^Li.rotrBH(i,n,39),j=Li.rotrSL(i,n,28)^Li.rotrBL(i,n,34)^Li.rotrBL(i,n,39),C=i&s^i&o^s&o,E=n&r^n&a^r&a;g=0|p,y=0|m,p=0|d,m=0|f,d=0|h,f=0|u,({h:h,l:u}=Li.add(0|l,0|c,0|x,0|S)),l=0|o,c=0|a,o=0|s,a=0|r,s=0|i,r=0|n;const M=Li.add3L(S,j,E);i=Li.add3H(M,x,k,C),n=0|M}({h:i,l:n}=Li.add(0|this.Ah,0|this.Al,0|i,0|n)),({h:s,l:r}=Li.add(0|this.Bh,0|this.Bl,0|s,0|r)),({h:o,l:a}=Li.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=Li.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:h,l:u}=Li.add(0|this.Eh,0|this.El,0|h,0|u)),({h:d,l:f}=Li.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:m}=Li.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=Li.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(i,n,s,r,o,a,l,c,h,u,d,f,p,m,g,y)}roundClean(){Il.fill(0),Ll.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Rl=Mi((()=>new zl));function Pl(t){if("string"!=typeof t)throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function Dl(t,e=""){return(function(t,e,i){const{c:n,dkLen:s,DK:r,PRF:o,PRFSalt:a}=(function(t,e,i,n){pi(t);const s=(function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign({dkLen:32,asyncTick:10},e)})(0,n),{c:r,dkLen:o,asyncTick:a}=s;if(di(r),di(o),di(a),r<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Ci(e),c=Ci(i),h=new Uint8Array(o),u=Tl.create(t,l),d=u._cloneInto().update(c);return{c:r,dkLen:o,asyncTick:a,DK:h,PRF:u,PRFSalt:d}})(t,e,i,{c:2048,dkLen:64});let l;const c=new Uint8Array(4),h=vi(c),u=new Uint8Array(o.outputLen);for(let d=1,f=0;f<s;d++,f+=o.outputLen){const t=r.subarray(f,f+o.outputLen);h.setInt32(0,d,!1),(l=a._cloneInto(l)).update(c).digestInto(u),t.set(u.subarray(0,t.length));for(let e=1;e<n;e++){o._cloneInto(l).update(u).digestInto(u);for(let e=0;e<t.length;e++)t[e]^=u[e]}}return(function(t,e,i,n,s){return t.destroy(),e.destroy(),n&&n.destroy(),s.fill(0),i})(o,a,r,l,u)})(Rl,(function(t){const e=Pl(t),i=e.split(" ");if(![12,15,18,21,24].includes(i.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:i}})(t).nfkd,(t=>Pl("mnemonic"+t))(e))}function $l(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.bech32m=Yl=Bl.bech32=void 0;const Ul="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Fl={};for(let iM=0;iM<32;iM++){const t=Ul.charAt(iM);Fl[t]=iM}function Wl(t){const e=t>>25;return(33554431&t)<<5^996825010&-(1&e)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function Vl(t){let e=1;for(let i=0;i<t.length;++i){const n=t.charCodeAt(i);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Wl(e)^n>>5}e=Wl(e);for(let i=0;i<t.length;++i){const n=t.charCodeAt(i);e=Wl(e)^31&n}return e}function ql(t,e,i,n){let s=0,r=0;const o=(1<<i)-1,a=[];for(let l=0;l<t.length;++l)for(s=s<<e|t[l],r+=e;r>=i;)r-=i,a.push(s>>r&o);if(n)r>0&&a.push(s<<i-r&o);else{if(r>=e)return"Excess padding";if(s<<i-r&o)return"Non-zero padding"}return a}function Hl(t){return ql(t,8,5,!0)}function Kl(t){const e=ql(t,5,8,!1);if(Array.isArray(e))return e}function Gl(t){const e=ql(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function Zl(t){let e;function i(t,i){if(t.length<8)return t+" too short";if(t.length>(i=i||90))return"Exceeds length limit";const n=t.toLowerCase(),s=t.toUpperCase();if(t!==n&&t!==s)return"Mixed-case string "+t;const r=(t=n).lastIndexOf("1");if(-1===r)return"No separator character for "+t;if(0===r)return"Missing prefix for "+t;const o=t.slice(0,r),a=t.slice(r+1);if(a.length<6)return"Data too short";let l=Vl(o);if("string"==typeof l)return l;const c=[];for(let e=0;e<a.length;++e){const t=a.charAt(e),i=Fl[t];if(void 0===i)return"Unknown character "+t;l=Wl(l)^i,e+6>=a.length||c.push(i)}return l!==e?"Invalid checksum for "+t:{prefix:o,words:c}}return e="bech32"===t?1:734539939,{decodeUnsafe:function(t,e){const n=i(t,e);if("object"==typeof n)return n},decode:function(t,e){const n=i(t,e);if("object"==typeof n)return n;throw new Error(n)},encode:function(t,i,n){if(t.length+7+i.length>(n=n||90))throw new TypeError("Exceeds length limit");let s=Vl(t=t.toLowerCase());if("string"==typeof s)throw new Error(s);let r=t+"1";for(let e=0;e<i.length;++e){const t=i[e];if(t>>5)throw new Error("Non 5-bit word");s=Wl(s)^t,r+=Ul.charAt(t)}for(let e=0;e<6;++e)s=Wl(s);s^=e;for(let e=0;e<6;++e)r+=Ul.charAt(s>>5*(5-e)&31);return r},toWords:Hl,fromWordsUnsafe:Kl,fromWords:Gl}}var Yl=Bl.bech32=Zl("bech32");Bl.bech32m=Zl("bech32m");const Xl="suiprivkey";class Ql{async signWithIntent(t,e){const i=na(e,t),n=Bi(i,{dkLen:32});return{signature:(function({signature:t,signatureScheme:e,publicKey:i}){if(!i)throw new Error("`publicKey` is required");const n=i.toRawBytes(),s=new Uint8Array(1+t.length+n.length);return s.set([oa[e]]),s.set(t,1),s.set(n,1+t.length),zt(s)})({signature:await this.sign(n),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:zt(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){const{signature:e}=await this.signWithIntent(se.vector(se.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:zt(t),signature:e}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class Jl extends Ql{}function tc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ec={exports:{}};const ic=K(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));!(function(t){var e=function(t){var e,i=new Float64Array(16);if(t)for(e=0;e<t.length;e++)i[e]=t[e];return i},i=function(){throw new Error("no PRNG")},n=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var r=e(),o=e([1]),a=e([56129,1]),l=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(t,e,i,n){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function p(t,e,i,n,s){var r,o=0;for(r=0;r<s;r++)o|=t[e+r]^i[n+r];return(1&o-1>>>8)-1}function m(t,e,i,n){return p(t,e,i,n,16)}function g(t,e,i,n){return p(t,e,i,n,32)}function y(t,e,i,n){!(function(t,e,i,n){for(var s,r=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,a=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,l=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,c=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&i[16]|(255&i[17])<<8|(255&i[18])<<16|(255&i[19])<<24,y=255&i[20]|(255&i[21])<<8|(255&i[22])<<16|(255&i[23])<<24,v=255&i[24]|(255&i[25])<<8|(255&i[26])<<16|(255&i[27])<<24,b=255&i[28]|(255&i[29])<<8|(255&i[30])<<16|(255&i[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,x=r,S=o,k=a,j=l,C=c,E=h,M=u,_=d,T=f,A=p,O=m,N=g,I=y,L=v,z=b,R=w,P=0;P<20;P+=2)x^=(s=(I^=(s=(T^=(s=(C^=(s=x+I|0)<<7|s>>>25)+x|0)<<9|s>>>23)+C|0)<<13|s>>>19)+T|0)<<18|s>>>14,E^=(s=(S^=(s=(L^=(s=(A^=(s=E+S|0)<<7|s>>>25)+E|0)<<9|s>>>23)+A|0)<<13|s>>>19)+L|0)<<18|s>>>14,O^=(s=(M^=(s=(k^=(s=(z^=(s=O+M|0)<<7|s>>>25)+O|0)<<9|s>>>23)+z|0)<<13|s>>>19)+k|0)<<18|s>>>14,R^=(s=(N^=(s=(_^=(s=(j^=(s=R+N|0)<<7|s>>>25)+R|0)<<9|s>>>23)+j|0)<<13|s>>>19)+_|0)<<18|s>>>14,x^=(s=(j^=(s=(k^=(s=(S^=(s=x+j|0)<<7|s>>>25)+x|0)<<9|s>>>23)+S|0)<<13|s>>>19)+k|0)<<18|s>>>14,E^=(s=(C^=(s=(_^=(s=(M^=(s=E+C|0)<<7|s>>>25)+E|0)<<9|s>>>23)+M|0)<<13|s>>>19)+_|0)<<18|s>>>14,O^=(s=(A^=(s=(T^=(s=(N^=(s=O+A|0)<<7|s>>>25)+O|0)<<9|s>>>23)+N|0)<<13|s>>>19)+T|0)<<18|s>>>14,R^=(s=(z^=(s=(L^=(s=(I^=(s=R+z|0)<<7|s>>>25)+R|0)<<9|s>>>23)+I|0)<<13|s>>>19)+L|0)<<18|s>>>14;S=S+o|0,k=k+a|0,j=j+l|0,C=C+c|0,E=E+h|0,M=M+u|0,_=_+d|0,T=T+f|0,A=A+p|0,O=O+m|0,N=N+g|0,I=I+y|0,L=L+v|0,z=z+b|0,R=R+w|0,t[0]=(x=x+r|0)>>>0&255,t[1]=x>>>8&255,t[2]=x>>>16&255,t[3]=x>>>24&255,t[4]=S>>>0&255,t[5]=S>>>8&255,t[6]=S>>>16&255,t[7]=S>>>24&255,t[8]=k>>>0&255,t[9]=k>>>8&255,t[10]=k>>>16&255,t[11]=k>>>24&255,t[12]=j>>>0&255,t[13]=j>>>8&255,t[14]=j>>>16&255,t[15]=j>>>24&255,t[16]=C>>>0&255,t[17]=C>>>8&255,t[18]=C>>>16&255,t[19]=C>>>24&255,t[20]=E>>>0&255,t[21]=E>>>8&255,t[22]=E>>>16&255,t[23]=E>>>24&255,t[24]=M>>>0&255,t[25]=M>>>8&255,t[26]=M>>>16&255,t[27]=M>>>24&255,t[28]=_>>>0&255,t[29]=_>>>8&255,t[30]=_>>>16&255,t[31]=_>>>24&255,t[32]=T>>>0&255,t[33]=T>>>8&255,t[34]=T>>>16&255,t[35]=T>>>24&255,t[36]=A>>>0&255,t[37]=A>>>8&255,t[38]=A>>>16&255,t[39]=A>>>24&255,t[40]=O>>>0&255,t[41]=O>>>8&255,t[42]=O>>>16&255,t[43]=O>>>24&255,t[44]=N>>>0&255,t[45]=N>>>8&255,t[46]=N>>>16&255,t[47]=N>>>24&255,t[48]=I>>>0&255,t[49]=I>>>8&255,t[50]=I>>>16&255,t[51]=I>>>24&255,t[52]=L>>>0&255,t[53]=L>>>8&255,t[54]=L>>>16&255,t[55]=L>>>24&255,t[56]=z>>>0&255,t[57]=z>>>8&255,t[58]=z>>>16&255,t[59]=z>>>24&255,t[60]=R>>>0&255,t[61]=R>>>8&255,t[62]=R>>>16&255,t[63]=R>>>24&255})(t,e,i,n)}function v(t,e,i,n){!(function(t,e,i,n){for(var s,r=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,a=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,l=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,c=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&i[16]|(255&i[17])<<8|(255&i[18])<<16|(255&i[19])<<24,y=255&i[20]|(255&i[21])<<8|(255&i[22])<<16|(255&i[23])<<24,v=255&i[24]|(255&i[25])<<8|(255&i[26])<<16|(255&i[27])<<24,b=255&i[28]|(255&i[29])<<8|(255&i[30])<<16|(255&i[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,x=0;x<20;x+=2)r^=(s=(y^=(s=(f^=(s=(c^=(s=r+y|0)<<7|s>>>25)+r|0)<<9|s>>>23)+c|0)<<13|s>>>19)+f|0)<<18|s>>>14,h^=(s=(o^=(s=(v^=(s=(p^=(s=h+o|0)<<7|s>>>25)+h|0)<<9|s>>>23)+p|0)<<13|s>>>19)+v|0)<<18|s>>>14,m^=(s=(u^=(s=(a^=(s=(b^=(s=m+u|0)<<7|s>>>25)+m|0)<<9|s>>>23)+b|0)<<13|s>>>19)+a|0)<<18|s>>>14,w^=(s=(g^=(s=(d^=(s=(l^=(s=w+g|0)<<7|s>>>25)+w|0)<<9|s>>>23)+l|0)<<13|s>>>19)+d|0)<<18|s>>>14,r^=(s=(l^=(s=(a^=(s=(o^=(s=r+l|0)<<7|s>>>25)+r|0)<<9|s>>>23)+o|0)<<13|s>>>19)+a|0)<<18|s>>>14,h^=(s=(c^=(s=(d^=(s=(u^=(s=h+c|0)<<7|s>>>25)+h|0)<<9|s>>>23)+u|0)<<13|s>>>19)+d|0)<<18|s>>>14,m^=(s=(p^=(s=(f^=(s=(g^=(s=m+p|0)<<7|s>>>25)+m|0)<<9|s>>>23)+g|0)<<13|s>>>19)+f|0)<<18|s>>>14,w^=(s=(b^=(s=(v^=(s=(y^=(s=w+b|0)<<7|s>>>25)+w|0)<<9|s>>>23)+y|0)<<13|s>>>19)+v|0)<<18|s>>>14;t[0]=r>>>0&255,t[1]=r>>>8&255,t[2]=r>>>16&255,t[3]=r>>>24&255,t[4]=h>>>0&255,t[5]=h>>>8&255,t[6]=h>>>16&255,t[7]=h>>>24&255,t[8]=m>>>0&255,t[9]=m>>>8&255,t[10]=m>>>16&255,t[11]=m>>>24&255,t[12]=w>>>0&255,t[13]=w>>>8&255,t[14]=w>>>16&255,t[15]=w>>>24&255,t[16]=u>>>0&255,t[17]=u>>>8&255,t[18]=u>>>16&255,t[19]=u>>>24&255,t[20]=d>>>0&255,t[21]=d>>>8&255,t[22]=d>>>16&255,t[23]=d>>>24&255,t[24]=f>>>0&255,t[25]=f>>>8&255,t[26]=f>>>16&255,t[27]=f>>>24&255,t[28]=p>>>0&255,t[29]=p>>>8&255,t[30]=p>>>16&255,t[31]=p>>>24&255})(t,e,i,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(t,e,i,n,s,r,o){var a,l,c=new Uint8Array(16),h=new Uint8Array(64);for(l=0;l<16;l++)c[l]=0;for(l=0;l<8;l++)c[l]=r[l];for(;s>=64;){for(y(h,c,o,b),l=0;l<64;l++)t[e+l]=i[n+l]^h[l];for(a=1,l=8;l<16;l++)c[l]=255&(a=a+(255&c[l])|0),a>>>=8;s-=64,e+=64,n+=64}if(s>0)for(y(h,c,o,b),l=0;l<s;l++)t[e+l]=i[n+l]^h[l];return 0}function x(t,e,i,n,s){var r,o,a=new Uint8Array(16),l=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;i>=64;){for(y(l,a,s,b),o=0;o<64;o++)t[e+o]=l[o];for(r=1,o=8;o<16;o++)a[o]=255&(r=r+(255&a[o])|0),r>>>=8;i-=64,e+=64}if(i>0)for(y(l,a,s,b),o=0;o<i;o++)t[e+o]=l[o];return 0}function S(t,e,i,n,s){var r=new Uint8Array(32);v(r,n,s,b);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return x(t,e,i,o,r)}function k(t,e,i,n,s,r,o){var a=new Uint8Array(32);v(a,r,o,b);for(var l=new Uint8Array(8),c=0;c<8;c++)l[c]=r[c+16];return w(t,e,i,n,s,l,a)}var j=function(t){var e,i,n,s,r,o,a,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,this.r[0]=8191&(e=255&t[0]|(255&t[1])<<8),this.r[1]=8191&(e>>>13|(i=255&t[2]|(255&t[3])<<8)<<3),this.r[2]=7939&(i>>>10|(n=255&t[4]|(255&t[5])<<8)<<6),this.r[3]=8191&(n>>>7|(s=255&t[6]|(255&t[7])<<8)<<9),this.r[4]=255&(s>>>4|(r=255&t[8]|(255&t[9])<<8)<<12),this.r[5]=r>>>1&8190,this.r[6]=8191&(r>>>14|(o=255&t[10]|(255&t[11])<<8)<<2),this.r[7]=8065&(o>>>11|(a=255&t[12]|(255&t[13])<<8)<<5),this.r[8]=8191&(a>>>8|(l=255&t[14]|(255&t[15])<<8)<<8),this.r[9]=l>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function C(t,e,i,n,s,r){var o=new j(r);return o.update(i,n,s),o.finish(t,e),0}function E(t,e,i,n,s,r){var o=new Uint8Array(16);return C(o,0,i,n,s,r),m(t,e,o,0)}function M(t,e,i,n,s){var r;if(i<32)return-1;for(k(t,0,e,0,i,n,s),C(t,16,t,32,i-32,t),r=0;r<16;r++)t[r]=0;return 0}function _(t,e,i,n,s){var r,o=new Uint8Array(32);if(i<32)return-1;if(S(o,0,32,n,s),0!==E(e,16,e,32,i-32,o))return-1;for(k(t,0,e,0,i,n,s),r=0;r<32;r++)t[r]=0;return 0}function T(t,e){var i;for(i=0;i<16;i++)t[i]=0|e[i]}function A(t){var e,i,n=1;for(e=0;e<16;e++)i=t[e]+n+65535,n=Math.floor(i/65536),t[e]=i-65536*n;t[0]+=n-1+37*(n-1)}function O(t,e,i){for(var n,s=~(i-1),r=0;r<16;r++)t[r]^=n=s&(t[r]^e[r]),e[r]^=n}function N(t,i){var n,s,r,o=e(),a=e();for(n=0;n<16;n++)a[n]=i[n];for(A(a),A(a),A(a),s=0;s<2;s++){for(o[0]=a[0]-65517,n=1;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),r=o[15]>>16&1,o[14]&=65535,O(a,o,1-r)}for(n=0;n<16;n++)t[2*n]=255&a[n],t[2*n+1]=a[n]>>8}function I(t,e){var i=new Uint8Array(32),n=new Uint8Array(32);return N(i,t),N(n,e),g(i,0,n,0)}function L(t){var e=new Uint8Array(32);return N(e,t),1&e[0]}function z(t,e){var i;for(i=0;i<16;i++)t[i]=e[2*i]+(e[2*i+1]<<8);t[15]&=32767}function R(t,e,i){for(var n=0;n<16;n++)t[n]=e[n]+i[n]}function P(t,e,i){for(var n=0;n<16;n++)t[n]=e[n]-i[n]}function D(t,e,i){var n,s,r=0,o=0,a=0,l=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,b=0,w=0,x=0,S=0,k=0,j=0,C=0,E=0,M=0,_=0,T=0,A=0,O=0,N=0,I=0,L=0,z=0,R=i[0],P=i[1],D=i[2],$=i[3],B=i[4],U=i[5],F=i[6],W=i[7],V=i[8],q=i[9],H=i[10],K=i[11],G=i[12],Z=i[13],Y=i[14],X=i[15];r+=(n=e[0])*R,o+=n*P,a+=n*D,l+=n*$,c+=n*B,h+=n*U,u+=n*F,d+=n*W,f+=n*V,p+=n*q,m+=n*H,g+=n*K,y+=n*G,v+=n*Z,b+=n*Y,w+=n*X,o+=(n=e[1])*R,a+=n*P,l+=n*D,c+=n*$,h+=n*B,u+=n*U,d+=n*F,f+=n*W,p+=n*V,m+=n*q,g+=n*H,y+=n*K,v+=n*G,b+=n*Z,w+=n*Y,x+=n*X,a+=(n=e[2])*R,l+=n*P,c+=n*D,h+=n*$,u+=n*B,d+=n*U,f+=n*F,p+=n*W,m+=n*V,g+=n*q,y+=n*H,v+=n*K,b+=n*G,w+=n*Z,x+=n*Y,S+=n*X,l+=(n=e[3])*R,c+=n*P,h+=n*D,u+=n*$,d+=n*B,f+=n*U,p+=n*F,m+=n*W,g+=n*V,y+=n*q,v+=n*H,b+=n*K,w+=n*G,x+=n*Z,S+=n*Y,k+=n*X,c+=(n=e[4])*R,h+=n*P,u+=n*D,d+=n*$,f+=n*B,p+=n*U,m+=n*F,g+=n*W,y+=n*V,v+=n*q,b+=n*H,w+=n*K,x+=n*G,S+=n*Z,k+=n*Y,j+=n*X,h+=(n=e[5])*R,u+=n*P,d+=n*D,f+=n*$,p+=n*B,m+=n*U,g+=n*F,y+=n*W,v+=n*V,b+=n*q,w+=n*H,x+=n*K,S+=n*G,k+=n*Z,j+=n*Y,C+=n*X,u+=(n=e[6])*R,d+=n*P,f+=n*D,p+=n*$,m+=n*B,g+=n*U,y+=n*F,v+=n*W,b+=n*V,w+=n*q,x+=n*H,S+=n*K,k+=n*G,j+=n*Z,C+=n*Y,E+=n*X,d+=(n=e[7])*R,f+=n*P,p+=n*D,m+=n*$,g+=n*B,y+=n*U,v+=n*F,b+=n*W,w+=n*V,x+=n*q,S+=n*H,k+=n*K,j+=n*G,C+=n*Z,E+=n*Y,M+=n*X,f+=(n=e[8])*R,p+=n*P,m+=n*D,g+=n*$,y+=n*B,v+=n*U,b+=n*F,w+=n*W,x+=n*V,S+=n*q,k+=n*H,j+=n*K,C+=n*G,E+=n*Z,M+=n*Y,_+=n*X,p+=(n=e[9])*R,m+=n*P,g+=n*D,y+=n*$,v+=n*B,b+=n*U,w+=n*F,x+=n*W,S+=n*V,k+=n*q,j+=n*H,C+=n*K,E+=n*G,M+=n*Z,_+=n*Y,T+=n*X,m+=(n=e[10])*R,g+=n*P,y+=n*D,v+=n*$,b+=n*B,w+=n*U,x+=n*F,S+=n*W,k+=n*V,j+=n*q,C+=n*H,E+=n*K,M+=n*G,_+=n*Z,T+=n*Y,A+=n*X,g+=(n=e[11])*R,y+=n*P,v+=n*D,b+=n*$,w+=n*B,x+=n*U,S+=n*F,k+=n*W,j+=n*V,C+=n*q,E+=n*H,M+=n*K,_+=n*G,T+=n*Z,A+=n*Y,O+=n*X,y+=(n=e[12])*R,v+=n*P,b+=n*D,w+=n*$,x+=n*B,S+=n*U,k+=n*F,j+=n*W,C+=n*V,E+=n*q,M+=n*H,_+=n*K,T+=n*G,A+=n*Z,O+=n*Y,N+=n*X,v+=(n=e[13])*R,b+=n*P,w+=n*D,x+=n*$,S+=n*B,k+=n*U,j+=n*F,C+=n*W,E+=n*V,M+=n*q,_+=n*H,T+=n*K,A+=n*G,O+=n*Z,N+=n*Y,I+=n*X,b+=(n=e[14])*R,w+=n*P,x+=n*D,S+=n*$,k+=n*B,j+=n*U,C+=n*F,E+=n*W,M+=n*V,_+=n*q,T+=n*H,A+=n*K,O+=n*G,N+=n*Z,I+=n*Y,L+=n*X,w+=(n=e[15])*R,o+=38*(S+=n*D),a+=38*(k+=n*$),l+=38*(j+=n*B),c+=38*(C+=n*U),h+=38*(E+=n*F),u+=38*(M+=n*W),d+=38*(_+=n*V),f+=38*(T+=n*q),p+=38*(A+=n*H),m+=38*(O+=n*K),g+=38*(N+=n*G),y+=38*(I+=n*Z),v+=38*(L+=n*Y),b+=38*(z+=n*X),r=(n=(r+=38*(x+=n*P))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),v=(n=v+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),r=(n=(r+=s-1+37*(s-1))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),v=(n=v+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),t[0]=r+=s-1+37*(s-1),t[1]=o,t[2]=a,t[3]=l,t[4]=c,t[5]=h,t[6]=u,t[7]=d,t[8]=f,t[9]=p,t[10]=m,t[11]=g,t[12]=y,t[13]=v,t[14]=b,t[15]=w}function $(t,e){D(t,e,e)}function B(t,i){var n,s=e();for(n=0;n<16;n++)s[n]=i[n];for(n=253;n>=0;n--)$(s,s),2!==n&&4!==n&&D(s,s,i);for(n=0;n<16;n++)t[n]=s[n]}function U(t,i){var n,s=e();for(n=0;n<16;n++)s[n]=i[n];for(n=250;n>=0;n--)$(s,s),1!==n&&D(s,s,i);for(n=0;n<16;n++)t[n]=s[n]}function F(t,i,n){var s,r,o=new Uint8Array(32),l=new Float64Array(80),c=e(),h=e(),u=e(),d=e(),f=e(),p=e();for(r=0;r<31;r++)o[r]=i[r];for(o[31]=127&i[31]|64,o[0]&=248,z(l,n),r=0;r<16;r++)h[r]=l[r],d[r]=c[r]=u[r]=0;for(c[0]=d[0]=1,r=254;r>=0;--r)O(c,h,s=o[r>>>3]>>>(7&r)&1),O(u,d,s),R(f,c,u),P(c,c,u),R(u,h,d),P(h,h,d),$(d,f),$(p,c),D(c,u,c),D(u,h,f),R(f,c,u),P(c,c,u),$(h,c),P(u,d,p),D(c,u,a),R(c,c,d),D(u,u,c),D(c,d,p),D(d,h,l),$(h,f),O(c,h,s),O(u,d,s);for(r=0;r<16;r++)l[r+16]=c[r],l[r+32]=u[r],l[r+48]=h[r],l[r+64]=d[r];var m=l.subarray(32),g=l.subarray(16);return B(m,m),D(g,g,m),N(t,g),0}function W(t,e){return F(t,e,s)}function V(t,e){return i(e,32),W(t,e)}function q(t,e,i){var s=new Uint8Array(32);return F(s,i,e),v(t,n,s,b)}j.prototype.blocks=function(t,e,i){for(var n,s,r,o,a,l,c,h,u,d,f,p,m,g,y,v,b,w,x,S=this.fin?0:2048,k=this.h[0],j=this.h[1],C=this.h[2],E=this.h[3],M=this.h[4],_=this.h[5],T=this.h[6],A=this.h[7],O=this.h[8],N=this.h[9],I=this.r[0],L=this.r[1],z=this.r[2],R=this.r[3],P=this.r[4],D=this.r[5],$=this.r[6],B=this.r[7],U=this.r[8],F=this.r[9];i>=16;)d=u=0,d+=(k+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*I,d+=(j+=8191&(n>>>13|(s=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*F),d+=(C+=8191&(s>>>10|(r=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*U),d+=(E+=8191&(r>>>7|(o=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*B),u=(d+=(M+=8191&(o>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*$))>>>13,d&=8191,d+=(_+=a>>>1&8191)*(5*D),d+=(T+=8191&(a>>>14|(l=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*P),d+=(A+=8191&(l>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*R),d+=(O+=8191&(c>>>8|(h=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*z),f=u+=(d+=(N+=h>>>5|S)*(5*L))>>>13,f+=k*L,f+=j*I,f+=C*(5*F),f+=E*(5*U),u=(f+=M*(5*B))>>>13,f&=8191,f+=_*(5*$),f+=T*(5*D),f+=A*(5*P),f+=O*(5*R),u+=(f+=N*(5*z))>>>13,f&=8191,p=u,p+=k*z,p+=j*L,p+=C*I,p+=E*(5*F),u=(p+=M*(5*U))>>>13,p&=8191,p+=_*(5*B),p+=T*(5*$),p+=A*(5*D),p+=O*(5*P),m=u+=(p+=N*(5*R))>>>13,m+=k*R,m+=j*z,m+=C*L,m+=E*I,u=(m+=M*(5*F))>>>13,m&=8191,m+=_*(5*U),m+=T*(5*B),m+=A*(5*$),m+=O*(5*D),g=u+=(m+=N*(5*P))>>>13,g+=k*P,g+=j*R,g+=C*z,g+=E*L,u=(g+=M*I)>>>13,g&=8191,g+=_*(5*F),g+=T*(5*U),g+=A*(5*B),g+=O*(5*$),y=u+=(g+=N*(5*D))>>>13,y+=k*D,y+=j*P,y+=C*R,y+=E*z,u=(y+=M*L)>>>13,y&=8191,y+=_*I,y+=T*(5*F),y+=A*(5*U),y+=O*(5*B),v=u+=(y+=N*(5*$))>>>13,v+=k*$,v+=j*D,v+=C*P,v+=E*R,u=(v+=M*z)>>>13,v&=8191,v+=_*L,v+=T*I,v+=A*(5*F),v+=O*(5*U),b=u+=(v+=N*(5*B))>>>13,b+=k*B,b+=j*$,b+=C*D,b+=E*P,u=(b+=M*R)>>>13,b&=8191,b+=_*z,b+=T*L,b+=A*I,b+=O*(5*F),w=u+=(b+=N*(5*U))>>>13,w+=k*U,w+=j*B,w+=C*$,w+=E*D,u=(w+=M*P)>>>13,w&=8191,w+=_*R,w+=T*z,w+=A*L,w+=O*I,x=u+=(w+=N*(5*F))>>>13,x+=k*F,x+=j*U,x+=C*B,x+=E*$,u=(x+=M*D)>>>13,x&=8191,x+=_*P,x+=T*R,x+=A*z,x+=O*L,k=d=8191&(u=(u=((u+=(x+=N*I)>>>13)<<2)+u|0)+(d&=8191)|0),j=f+=u>>>=13,C=p&=8191,E=m&=8191,M=g&=8191,_=y&=8191,T=v&=8191,A=b&=8191,O=w&=8191,N=x&=8191,e+=16,i-=16;this.h[0]=k,this.h[1]=j,this.h[2]=C,this.h[3]=E,this.h[4]=M,this.h[5]=_,this.h[6]=T,this.h[7]=A,this.h[8]=O,this.h[9]=N},j.prototype.finish=function(t,e){var i,n,s,r,o=new Uint16Array(10);if(this.leftover){for(r=this.leftover,this.buffer[r++]=1;r<16;r++)this.buffer[r]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(i=this.h[1]>>>13,this.h[1]&=8191,r=2;r<10;r++)this.h[r]+=i,i=this.h[r]>>>13,this.h[r]&=8191;for(this.h[0]+=5*i,i=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=i,i=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=i,o[0]=this.h[0]+5,i=o[0]>>>13,o[0]&=8191,r=1;r<10;r++)o[r]=this.h[r]+i,i=o[r]>>>13,o[r]&=8191;for(o[9]-=8192,n=(1^i)-1,r=0;r<10;r++)o[r]&=n;for(n=~n,r=0;r<10;r++)this.h[r]=this.h[r]&n|o[r];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),this.h[0]=65535&(s=this.h[0]+this.pad[0]),r=1;r<8;r++)this.h[r]=65535&(s=(this.h[r]+this.pad[r]|0)+(s>>>16)|0);t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},j.prototype.update=function(t,e,i){var n,s;if(this.leftover){for((s=16-this.leftover)>i&&(s=i),n=0;n<s;n++)this.buffer[this.leftover+n]=t[e+n];if(i-=s,e+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(i>=16&&(this.blocks(t,e,s=i-i%16),e+=s,i-=s),i){for(n=0;n<i;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=i}};var H=M,K=_,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Z(t,e,i,n){for(var s,r,o,a,l,c,h,u,d,f,p,m,g,y,v,b,w,x,S,k,j,C,E=new Int32Array(16),M=new Int32Array(16),_=t[0],T=t[1],A=t[2],O=t[3],N=t[4],I=t[5],L=t[6],z=t[7],R=e[0],P=e[1],D=e[2],$=e[3],B=e[4],U=e[5],F=e[6],W=e[7],V=0;n>=128;){for(v=0;v<16;v++)E[v]=i[(b=8*v+V)+0]<<24|i[b+1]<<16|i[b+2]<<8|i[b+3],M[v]=i[b+4]<<24|i[b+5]<<16|i[b+6]<<8|i[b+7];for(v=0;v<80;v++)if(s=T,r=A,o=N,a=I,l=L,h=P,u=D,d=B,f=U,p=F,S=65535&(x=W),k=x>>>16,j=65535&(w=z),C=w>>>16,S+=65535&(x=(B>>>14|N<<18)^(B>>>18|N<<14)^(N>>>9|B<<23)),k+=x>>>16,j+=65535&(w=(N>>>14|B<<18)^(N>>>18|B<<14)^(B>>>9|N<<23)),C+=w>>>16,S+=65535&(x=B&U^~B&F),k+=x>>>16,j+=65535&(w=N&I^~N&L),C+=w>>>16,S+=65535&(x=G[2*v+1]),k+=x>>>16,j+=65535&(w=G[2*v]),C+=w>>>16,k+=(x=M[v%16])>>>16,j+=65535&(w=E[v%16]),C+=w>>>16,j+=(k+=(S+=65535&x)>>>16)>>>16,S=65535&(x=y=65535&S|k<<16),k=x>>>16,j=65535&(w=g=65535&j|(C+=j>>>16)<<16),C=w>>>16,S+=65535&(x=(R>>>28|_<<4)^(_>>>2|R<<30)^(_>>>7|R<<25)),k+=x>>>16,j+=65535&(w=(_>>>28|R<<4)^(R>>>2|_<<30)^(R>>>7|_<<25)),C+=w>>>16,k+=(x=R&P^R&D^P&D)>>>16,j+=65535&(w=_&T^_&A^T&A),C+=w>>>16,c=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,m=65535&S|k<<16,S=65535&(x=$),k=x>>>16,j=65535&(w=O),C=w>>>16,k+=(x=y)>>>16,j+=65535&(w=g),C+=w>>>16,T=_,A=s,O=r,N=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,I=o,L=a,z=l,_=c,P=R,D=h,$=u,B=65535&S|k<<16,U=d,F=f,W=p,R=m,v%16==15)for(b=0;b<16;b++)S=65535&(x=M[b]),k=x>>>16,j=65535&(w=E[b]),C=w>>>16,S+=65535&(x=M[(b+9)%16]),k+=x>>>16,j+=65535&(w=E[(b+9)%16]),C+=w>>>16,S+=65535&(x=((y=M[(b+1)%16])>>>1|(g=E[(b+1)%16])<<31)^(y>>>8|g<<24)^(y>>>7|g<<25)),k+=x>>>16,j+=65535&(w=(g>>>1|y<<31)^(g>>>8|y<<24)^g>>>7),C+=w>>>16,k+=(x=((y=M[(b+14)%16])>>>19|(g=E[(b+14)%16])<<13)^(g>>>29|y<<3)^(y>>>6|g<<26))>>>16,j+=65535&(w=(g>>>19|y<<13)^(y>>>29|g<<3)^g>>>6),C+=w>>>16,E[b]=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,M[b]=65535&S|k<<16;S=65535&(x=R),k=x>>>16,j=65535&(w=_),C=w>>>16,k+=(x=e[0])>>>16,j+=65535&(w=t[0]),C+=w>>>16,t[0]=_=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[0]=R=65535&S|k<<16,S=65535&(x=P),k=x>>>16,j=65535&(w=T),C=w>>>16,k+=(x=e[1])>>>16,j+=65535&(w=t[1]),C+=w>>>16,t[1]=T=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[1]=P=65535&S|k<<16,S=65535&(x=D),k=x>>>16,j=65535&(w=A),C=w>>>16,k+=(x=e[2])>>>16,j+=65535&(w=t[2]),C+=w>>>16,t[2]=A=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[2]=D=65535&S|k<<16,S=65535&(x=$),k=x>>>16,j=65535&(w=O),C=w>>>16,k+=(x=e[3])>>>16,j+=65535&(w=t[3]),C+=w>>>16,t[3]=O=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[3]=$=65535&S|k<<16,S=65535&(x=B),k=x>>>16,j=65535&(w=N),C=w>>>16,k+=(x=e[4])>>>16,j+=65535&(w=t[4]),C+=w>>>16,t[4]=N=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[4]=B=65535&S|k<<16,S=65535&(x=U),k=x>>>16,j=65535&(w=I),C=w>>>16,k+=(x=e[5])>>>16,j+=65535&(w=t[5]),C+=w>>>16,t[5]=I=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[5]=U=65535&S|k<<16,S=65535&(x=F),k=x>>>16,j=65535&(w=L),C=w>>>16,k+=(x=e[6])>>>16,j+=65535&(w=t[6]),C+=w>>>16,t[6]=L=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[6]=F=65535&S|k<<16,S=65535&(x=W),k=x>>>16,j=65535&(w=z),C=w>>>16,k+=(x=e[7])>>>16,j+=65535&(w=t[7]),C+=w>>>16,t[7]=z=65535&(j+=(k+=(S+=65535&x)>>>16)>>>16)|(C+=j>>>16)<<16,e[7]=W=65535&S|k<<16,V+=128,n-=128}return n}function Y(t,e,i){var n,s=new Int32Array(8),r=new Int32Array(8),o=new Uint8Array(256),a=i;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,r[0]=4089235720,r[1]=2227873595,r[2]=4271175723,r[3]=1595750129,r[4]=2917565137,r[5]=725511199,r[6]=4215389547,r[7]=327033209,Z(s,r,e,i),i%=128,n=0;n<i;n++)o[n]=e[a-i+n];for(o[i]=128,o[(i=256-128*(i<112?1:0))-9]=0,f(o,i-8,a/536870912|0,a<<3),Z(s,r,o,i),n=0;n<8;n++)f(t,8*n,s[n],r[n]);return 0}function X(t,i){var n=e(),s=e(),r=e(),o=e(),a=e(),l=e(),h=e(),u=e(),d=e();P(n,t[1],t[0]),P(d,i[1],i[0]),D(n,n,d),R(s,t[0],t[1]),R(d,i[0],i[1]),D(s,s,d),D(r,t[3],i[3]),D(r,r,c),D(o,t[2],i[2]),R(o,o,o),P(a,s,n),P(l,o,r),R(h,o,r),R(u,s,n),D(t[0],a,l),D(t[1],u,h),D(t[2],h,l),D(t[3],a,u)}function Q(t,e,i){var n;for(n=0;n<4;n++)O(t[n],e[n],i)}function J(t,i){var n=e(),s=e(),r=e();B(r,i[2]),D(n,i[0],r),D(s,i[1],r),N(t,s),t[31]^=L(n)<<7}function tt(t,e,i){var n,s;for(T(t[0],r),T(t[1],o),T(t[2],o),T(t[3],r),s=255;s>=0;--s)Q(t,e,n=i[s/8|0]>>(7&s)&1),X(e,t),X(t,t),Q(t,e,n)}function et(t,i){var n=[e(),e(),e(),e()];T(n[0],h),T(n[1],u),T(n[2],o),D(n[3],h,u),tt(t,n,i)}function it(t,n,s){var r,o=new Uint8Array(64),a=[e(),e(),e(),e()];for(s||i(n,32),Y(o,n,32),o[0]&=248,o[31]&=127,o[31]|=64,et(a,o),J(t,a),r=0;r<32;r++)n[r+32]=t[r];return 0}var nt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function st(t,e){var i,n,s,r;for(n=63;n>=32;--n){for(i=0,s=n-32,r=n-12;s<r;++s)e[s]+=i-16*e[n]*nt[s-(n-32)],i=Math.floor((e[s]+128)/256),e[s]-=256*i;e[s]+=i,e[n]=0}for(i=0,s=0;s<32;s++)e[s]+=i-(e[31]>>4)*nt[s],i=e[s]>>8,e[s]&=255;for(s=0;s<32;s++)e[s]-=i*nt[s];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function rt(t){var e,i=new Float64Array(64);for(e=0;e<64;e++)i[e]=t[e];for(e=0;e<64;e++)t[e]=0;st(t,i)}function ot(t,i,n,s){var r,o,a=new Uint8Array(64),l=new Uint8Array(64),c=new Uint8Array(64),h=new Float64Array(64),u=[e(),e(),e(),e()];Y(a,s,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=n+64;for(r=0;r<n;r++)t[64+r]=i[r];for(r=0;r<32;r++)t[32+r]=a[32+r];for(Y(c,t.subarray(32),n+32),rt(c),et(u,c),J(t,u),r=32;r<64;r++)t[r]=s[r];for(Y(l,t,n+64),rt(l),r=0;r<64;r++)h[r]=0;for(r=0;r<32;r++)h[r]=c[r];for(r=0;r<32;r++)for(o=0;o<32;o++)h[r+o]+=l[r]*a[o];return st(t.subarray(32),h),d}function at(t,i,n,s){var a,c=new Uint8Array(32),h=new Uint8Array(64),u=[e(),e(),e(),e()],f=[e(),e(),e(),e()];if(n<64)return-1;if((function(t,i){var n=e(),s=e(),a=e(),c=e(),h=e(),u=e(),f=e();return T(t[2],o),z(t[1],i),$(a,t[1]),D(c,a,l),P(a,a,t[2]),R(c,t[2],c),$(h,c),$(u,h),D(f,u,h),D(n,f,a),D(n,n,c),U(n,n),D(n,n,a),D(n,n,c),D(n,n,c),D(t[0],n,c),$(s,t[0]),D(s,s,c),I(s,a)&&D(t[0],t[0],d),$(s,t[0]),D(s,s,c),I(s,a)?-1:(L(t[0])===i[31]>>7&&P(t[0],r,t[0]),D(t[3],t[0],t[1]),0)})(f,s))return-1;for(a=0;a<n;a++)t[a]=i[a];for(a=0;a<32;a++)t[a+32]=s[a];if(Y(h,t,n),rt(h),tt(u,f,h),et(f,i.subarray(32)),X(u,f),J(c,u),n-=64,g(i,0,c,0)){for(a=0;a<n;a++)t[a]=0;return-1}for(a=0;a<n;a++)t[a]=i[a+64];return n}var lt=64,ct=32,ht=64;function ut(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function dt(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ft(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:k,crypto_stream:S,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:C,crypto_onetimeauth_verify:E,crypto_verify_16:m,crypto_verify_32:g,crypto_secretbox:M,crypto_secretbox_open:_,crypto_scalarmult:F,crypto_scalarmult_base:W,crypto_box_beforenm:q,crypto_box_afternm:H,crypto_box:function(t,e,i,n,s,r){var o=new Uint8Array(32);return q(o,s,r),H(t,e,i,n,o)},crypto_box_open:function(t,e,i,n,s,r){var o=new Uint8Array(32);return q(o,s,r),K(t,e,i,n,o)},crypto_box_keypair:V,crypto_hash:Y,crypto_sign:ot,crypto_sign_keypair:it,crypto_sign_open:at,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:lt,crypto_sign_PUBLICKEYBYTES:ct,crypto_sign_SECRETKEYBYTES:ht,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:e,D:l,L:nt,pack25519:N,unpack25519:z,M:D,A:R,S:$,Z:P,pow2523:U,add:X,set25519:T,modL:st,scalarmult:tt,scalarbase:et},t.randomBytes=function(t){var e=new Uint8Array(t);return i(e,t),e},t.secretbox=function(t,e,i){dt(t,e,i),ut(i,e);for(var n=new Uint8Array(32+t.length),s=new Uint8Array(n.length),r=0;r<t.length;r++)n[r+32]=t[r];return M(s,n,n.length,e,i),s.subarray(16)},t.secretbox.open=function(t,e,i){dt(t,e,i),ut(i,e);for(var n=new Uint8Array(16+t.length),s=new Uint8Array(n.length),r=0;r<t.length;r++)n[r+16]=t[r];return n.length<32||0!==_(s,n,n.length,e,i)?null:s.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(dt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var i=new Uint8Array(32);return F(i,t,e),i},t.scalarMult.base=function(t){if(dt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return W(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,i,n,s){var r=t.box.before(n,s);return t.secretbox(e,i,r)},t.box.before=function(t,e){dt(t,e),(function(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")})(t,e);var i=new Uint8Array(32);return q(i,t,e),i},t.box.after=t.secretbox,t.box.open=function(e,i,n,s){var r=t.box.before(n,s);return t.secretbox.open(e,i,r)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return V(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(dt(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return W(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(dt(t,e),e.length!==ht)throw new Error("bad secret key size");var i=new Uint8Array(lt+t.length);return ot(i,t,t.length,e),i},t.sign.open=function(t,e){if(dt(t,e),e.length!==ct)throw new Error("bad public key size");var i=new Uint8Array(t.length),n=at(i,t,t.length,e);if(n<0)return null;for(var s=new Uint8Array(n),r=0;r<s.length;r++)s[r]=i[r];return s},t.sign.detached=function(e,i){for(var n=t.sign(e,i),s=new Uint8Array(lt),r=0;r<s.length;r++)s[r]=n[r];return s},t.sign.detached.verify=function(t,e,i){if(dt(t,e,i),e.length!==lt)throw new Error("bad signature size");if(i.length!==ct)throw new Error("bad public key size");var n,s=new Uint8Array(lt+t.length),r=new Uint8Array(lt+t.length);for(n=0;n<lt;n++)s[n]=e[n];for(n=0;n<t.length;n++)s[n+lt]=t[n];return at(r,s,s.length,i)>=0},t.sign.keyPair=function(){var t=new Uint8Array(ct),e=new Uint8Array(ht);return it(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(dt(t),t.length!==ht)throw new Error("bad secret key size");for(var e=new Uint8Array(ct),i=0;i<e.length;i++)e[i]=t[32+i];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(dt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(ct),i=new Uint8Array(ht),n=0;n<32;n++)i[n]=t[n];return it(e,i,!0),{publicKey:e,secretKey:i}},t.sign.publicKeyLength=ct,t.sign.secretKeyLength=ht,t.sign.seedLength=32,t.sign.signatureLength=lt,t.hash=function(t){dt(t);var e=new Uint8Array(64);return Y(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return dt(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===p(t,0,e,0,t.length)},t.setPRNG=function(t){i=t},(function(){var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&e.getRandomValues?t.setPRNG((function(t,i){var n,s=new Uint8Array(i);for(n=0;n<i;n+=65536)e.getRandomValues(s.subarray(n,n+Math.min(i-n,65536)));for(n=0;n<i;n++)t[n]=s[n];ft(s)})):void 0!==tc&&(e=ic)&&e.randomBytes&&t.setPRNG((function(t,i){var n,s=e.randomBytes(i);for(n=0;n<i;n++)t[n]=s[n];ft(s)}))})()})(ec.exports?ec.exports:self.nacl=self.nacl||{});const nc=q(ec.exports),sc=new RegExp("^m(\\/[0-9]+')+$"),rc=t=>t.replace("'",""),oc=(t,e,i=2147483648)=>{if(!(t=>!!sc.test(t)&&!t.split("/").slice(1).map(rc).some(isNaN))(t))throw new Error("Invalid derivation path");const{key:n,chainCode:s}=(t=>{const e=Tl.create(Rl,"ed25519 seed").update(Rt(t)).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}})(e);return t.split("/").slice(1).map(rc).map((t=>parseInt(t,10))).reduce(((t,e)=>(({key:t,chainCode:e},i)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,i);const s=new Uint8Array(1+t.length+n.byteLength);s.set(new Uint8Array(1).fill(0)),s.set(t,1),s.set(new Uint8Array(n,0,n.byteLength),t.length+1);const r=Tl.create(Rl,e).update(s).digest();return{key:r.slice(0,32),chainCode:r.slice(32)}})(t,e+i)),{key:n,chainCode:s})};class ac extends ra{constructor(t){if(super(),this.data="string"==typeof t?It(t):t instanceof Uint8Array?t:Uint8Array.from(t),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return oa.ED25519}async verify(t,e){let i;if("string"==typeof e){const t=(function(t){const e=It(t),i=la[e[0]];switch(i){case"MultiSig":return{serializedSignature:t,signatureScheme:i,multisig:li.MultiSig.parse(e.slice(1)),bytes:e};case"ZkLogin":return Ml(t);case"ED25519":case"Secp256k1":case"Secp256r1":const n=e.slice(1,e.length-aa[i]);return{serializedSignature:t,signatureScheme:i,signature:n,publicKey:e.slice(1+n.length),bytes:e};default:throw new Error("Unsupported signature scheme")}})(e);if("ED25519"!==t.signatureScheme)throw new Error("Invalid signature scheme");if(!sa(this.toRawBytes(),t.publicKey))throw new Error("Signature does not match public key");i=t.signature}else i=e;return nc.sign.detached.verify(t,i,this.toRawBytes())}}ac.SIZE=32;const lc="m/44'/784'/0'/0'/0'";class cc extends Jl{constructor(t){super(),this.keypair=t||nc.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new cc(nc.sign.keyPair())}static fromSecretKey(t,e){if("string"==typeof t){const i=(function(t){const{prefix:e,words:i}=Yl.decode(t);if(e!==Xl)throw new Error("invalid private key prefix");const n=new Uint8Array(Yl.fromWords(i)),s=n.slice(1);return{schema:la[n[0]],secretKey:s}})(t);if("ED25519"!==i.schema)throw new Error(`Expected a ED25519 keypair, got ${i.schema}`);return this.fromSecretKey(i.secretKey,e)}const i=t.length;if(32!==i)throw new Error(`Wrong secretKey size. Expected 32 bytes, got ${i}.`);const n=nc.sign.keyPair.fromSeed(t);if(!e||!e.skipValidation){const t=(new TextEncoder).encode("sui validation"),e=nc.sign.detached(t,n.secretKey);if(!nc.sign.detached.verify(t,e,n.publicKey))throw new Error("provided secretKey is invalid")}return new cc(n)}getPublicKey(){return new ac(this.keypair.publicKey)}getSecretKey(){return(function(t,e){if(32!==t.length)throw new Error("Invalid bytes length");const i=oa[e],n=new Uint8Array(t.length+1);return n.set([i]),n.set(t,1),Yl.encode(Xl,Yl.toWords(n))})(this.keypair.secretKey.slice(0,32),this.getKeyScheme())}async sign(t){return nc.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,e){if(null==e&&(e=lc),!$l(e))throw new Error("Invalid derivation path");const{key:i}=oc(e,(function(t){return Pt((function(t){return Dl(t,"")})(t))})(t));return cc.fromSecretKey(i)}static deriveKeypairFromSeed(t,e){if(null==e&&(e=lc),!$l(e))throw new Error("Invalid derivation path");const{key:i}=oc(e,t);return cc.fromSecretKey(i)}}const hc=kn("type",[pn({type:hn("connect")}),pn({type:hn("sign-transaction-block"),data:yn("`data` is required"),address:yn("`address` is required")}),pn({type:hn("sign-personal-message"),bytes:yn("`bytes` is required"),address:yn("`address` is required")})]);pn({id:Cn(yn("`id` is required"),nn()),origin:Cn(yn(),(function t(e){return{kind:"validation",type:"url",reference:t,async:!1,expects:null,requirement(t){try{return new URL(t),!0}catch{return!1}},message:e,_run(t,e){return t.typed&&!this.requirement(t.value)&&Yi(this,"URL",t,e),t}}})("`origin` must be a valid URL")),name:mn(yn()),payload:hc});const uc=kn("type",[pn({type:hn("connect"),address:yn()}),pn({type:hn("sign-transaction-block"),bytes:yn(),signature:yn()}),pn({type:hn("sign-personal-message"),bytes:yn(),signature:yn()})]),dc=kn("type",[pn({type:hn("reject")}),pn({type:hn("resolve"),data:uc})]),fc=pn({id:Cn(yn(),nn()),source:hn("zksend-channel"),payload:dc});var pc,mc,gc,yc,vc,bc,wc,xc,Sc,kc,jc,Cc,Ec=t=>{throw TypeError(t)},Mc=(t,e,i)=>e.has(t)||Ec("Cannot "+i),_c=(t,e,i)=>(Mc(t,e,"read from private field"),i?i.call(t):e.get(t)),Tc=(t,e,i)=>e.has(t)?Ec("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Ac=(t,e,i,n)=>(Mc(t,e,"write to private field"),e.set(t,i),i),Oc=(t,e,i)=>(Mc(t,e,"access private method"),i);const Nc="https://getstashed.com";class Ic{constructor({name:t,network:e,origin:i=Nc}){Tc(this,jc),Tc(this,pc),Tc(this,mc),Tc(this,gc),Tc(this,yc),Tc(this,vc),Tc(this,bc),Tc(this,wc),Tc(this,xc),Tc(this,Sc,null),Tc(this,kc,(t=>{if(t.origin!==_c(this,gc))return;const{success:e,output:i}=(function(t,e){const i=fc._run({typed:!1,value:e},Gi(void 0));return{typed:i.typed,success:!i.issues,output:i.value,issues:i.issues}})(0,t.data);e&&i.id===_c(this,mc)&&(Oc(this,jc,Cc).call(this),"reject"===i.payload.type?_c(this,xc).call(this,new Error("User rejected the request")):"resolve"===i.payload.type&&_c(this,wc).call(this,i.payload.data))}));const n=window.open("about:blank","_blank");if(!n)throw new Error("Failed to open new window");Ac(this,pc,n),Ac(this,mc,crypto.randomUUID()),Ac(this,gc,i),Ac(this,yc,t),Ac(this,vc,e);const{promise:s,resolve:r,reject:o}=(function(){let t,e;return{promise:new Promise(((i,n)=>{t=i,e=n})),reject:e,resolve:t}})();Ac(this,bc,s),Ac(this,wc,r),Ac(this,xc,o),Ac(this,Sc,setInterval((()=>{try{_c(this,pc).closed&&(Oc(this,jc,Cc).call(this),o(new Error("User closed the Stashed window")))}catch{}}),1e3))}send({type:t,...e}){return window.addEventListener("message",_c(this,kc)),_c(this,pc).location.assign(`${_c(this,gc)}/dapp/${t}?${new URLSearchParams({id:_c(this,mc),origin:window.origin,network:_c(this,vc),name:_c(this,yc)})}${e?`#${new URLSearchParams(e)}`:""}`),_c(this,bc)}close(){Oc(this,jc,Cc).call(this),_c(this,pc).close()}}pc=new WeakMap,mc=new WeakMap,gc=new WeakMap,yc=new WeakMap,vc=new WeakMap,bc=new WeakMap,wc=new WeakMap,xc=new WeakMap,Sc=new WeakMap,kc=new WeakMap,jc=new WeakSet,Cc=function(){_c(this,Sc)&&(clearInterval(_c(this,Sc)),Ac(this,Sc,null)),window.removeEventListener("message",_c(this,kc))};var Lc,zc,Rc,Pc,Dc,$c,Bc,Uc,Fc,Wc,Vc,qc,Hc,Kc=t=>{throw TypeError(t)},Gc=(t,e,i)=>e.has(t)||Kc("Cannot "+i),Zc=(t,e,i)=>(Gc(t,e,"read from private field"),i?i.call(t):e.get(t)),Yc=(t,e,i)=>e.has(t)?Kc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Xc=(t,e,i,n)=>(Gc(t,e,"write to private field"),e.set(t,i),i),Qc=(t,e,i)=>(Gc(t,e,"access private method"),i);const Jc="stashed:recentAddress",th="Stashed";class eh{constructor({name:t,network:e,address:i,origin:n=Nc}){Yc(this,Wc),Yc(this,Lc),Yc(this,zc),Yc(this,Rc),Yc(this,Pc),Yc(this,Dc),Yc(this,$c,(async({transactionBlock:t,account:e})=>{t.setSenderIfNotSet(e.address);const i=t.serialize(),n=new Ic({name:Zc(this,Pc),origin:Zc(this,Rc),network:Zc(this,Dc)}),s=await n.send({type:"sign-transaction-block",data:i,address:e.address});return{transactionBlockBytes:s.bytes,signature:s.signature}})),Yc(this,Bc,(async({transaction:t,account:e})=>{const i=new Ic({name:Zc(this,Pc),origin:Zc(this,Rc),network:Zc(this,Dc)}),n=Ys.from(await t.toJSON());n.setSenderIfNotSet(e.address);const s=n.serialize(),r=await i.send({type:"sign-transaction-block",data:s,address:e.address});return{bytes:r.bytes,signature:r.signature}})),Yc(this,Uc,(async({message:t,account:e})=>{const i=new Ic({name:Zc(this,Pc),origin:Zc(this,Rc),network:Zc(this,Dc)}),n=zt(t);return{bytes:n,signature:(await i.send({type:"sign-personal-message",bytes:n,address:e.address})).signature}})),Yc(this,Fc,((t,e)=>(Zc(this,Lc).on(t,e),()=>Zc(this,Lc).off(t,e)))),Yc(this,qc,(async t=>{if(t?.silent){const t=localStorage.getItem(Jc);return t&&Qc(this,Wc,Vc).call(this,t),{accounts:this.accounts}}const e=new Ic({name:Zc(this,Pc),origin:Zc(this,Rc),network:Zc(this,Dc)}),i=await e.send({type:"connect"});if(!("address"in i))throw new Error("Unexpected response");return Qc(this,Wc,Vc).call(this,i.address),{accounts:this.accounts}})),Yc(this,Hc,(async()=>{localStorage.removeItem(Jc),Qc(this,Wc,Vc).call(this)})),Xc(this,zc,[]),Xc(this,Lc,(function(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map((function(t){t(i)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,i)}))}}})()),Xc(this,Rc,n),Xc(this,Pc,t),Xc(this,Dc,e),i&&Qc(this,Wc,Vc).call(this,i)}get name(){return th}get icon(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjU0IiBoZWlnaHQ9IjU0IiB4PSIxIiB5PSIxIiBmaWxsPSIjNTE5REU5IiByeD0iMjciLz48cmVjdCB3aWR0aD0iNTQiIGhlaWdodD0iNTQiIHg9IjEiIHk9IjEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjciLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTguMzUzIDM1LjA2NGMuOTIxIDMuNDM4IDQuMzYzIDYuNTUxIDExLjQ4MyA0LjY0NCA2Ljc5NC0xLjgyMSAxMS4wNTItNy40MSA5Ljk0OC0xMS41My0uMzgxLTEuNDIzLTEuNTMtMi4zODctMy4zLTIuMjNsLTE1LjgzMiAxLjMyYy0uOTk3LjA3Ni0xLjQ1NC0uMDg4LTEuNzE4LS43MTYtLjI1Ni0uNTk5LS4xMS0xLjI0MSAxLjA5NC0xLjg1bDEyLjA0OC02LjE4M2MuOTI0LS40NyAxLjUzOS0uNjY2IDIuMTAxLS40NjguMzUyLjEyOC41ODQuNjM4LjM3MSAxLjI2N2wtLjc4MSAyLjMwNmMtLjk1OSAyLjgzIDEuMDk0IDMuNDg4IDIuMjUgMy4xNzggMS43NTEtLjQ2OSAyLjE2My0yLjEzNiAxLjU5OS00LjI0LTEuNDMtNS4zMzctNy4wOS02LjE3LTEyLjIyMy00Ljc5Ni01LjIyMiAxLjQtOS43NDggNS42My04LjM2NiAxMC43ODkuMzI1IDEuMjE1IDEuNDQ0IDIuMTg2IDIuNzQgMi4xNTdsMS45NzgtLjAwNWMuNDA3LS4wMS4yNi4wMjQgMS4wNDYtLjA0MS43ODQtLjA2NSAyLjg4LS4zMjMgMi44OC0uMzIzbDEwLjI4Ni0xLjE2NC4yNjUtLjAzOGMuNjAyLS4xMDMgMS4wNTYuMDUzIDEuNDQuNzE1LjU3Ni45OTEtLjMwMiAxLjczOC0xLjM1MiAyLjYzM2wtLjA4NS4wNzItOS4wNDEgNy43OTJjLTEuNTUgMS4zMzctMi42MzkuODM0LTMuMDItLjU4OWwtMS4zNS01LjA0Yy0uMzM0LTEuMjQ0LTEuNTUtMi4yMjEtMi45NzQtMS44NC0xLjc4LjQ3Ny0xLjkyNCAyLjU1LTEuNDg3IDQuMThaIi8+PC9zdmc+Cg=="}get version(){return"1.0.0"}get chains(){return[Zo]}get accounts(){return Zc(this,zc)}get features(){return{"standard:connect":{version:"1.0.0",connect:Zc(this,qc)},"standard:disconnect":{version:"1.0.0",disconnect:Zc(this,Hc)},"standard:events":{version:"1.0.0",on:Zc(this,Fc)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:Zc(this,$c)},"sui:signTransaction":{version:"2.0.0",signTransaction:Zc(this,Bc)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:Zc(this,Uc)}}}}function ih(t,e){let i;try{i=t()}catch(pE){return}return{getItem:t=>{var e;const n=t=>null===t?null:JSON.parse(t,void 0),s=null!=(e=i.getItem(t))?e:null;return s instanceof Promise?s.then(n):n(s)},setItem:(t,e)=>i.setItem(t,JSON.stringify(e,void 0)),removeItem:t=>i.removeItem(t)}}Lc=new WeakMap,zc=new WeakMap,Rc=new WeakMap,Pc=new WeakMap,Dc=new WeakMap,$c=new WeakMap,Bc=new WeakMap,Uc=new WeakMap,Fc=new WeakMap,Wc=new WeakSet,Vc=function(t){t?(Xc(this,zc,[new Ho({address:t,chains:[Zo],features:["sui:signTransactionBlock","sui:signPersonalMessage"],publicKey:new Uint8Array})]),localStorage.setItem(Jc,t)):Xc(this,zc,[]),Zc(this,Lc).emit("change",{accounts:this.accounts})},qc=new WeakMap,Hc=new WeakMap;const nh=t=>e=>{try{const i=t(e);return i instanceof Promise?i:{then:t=>nh(t)(i),catch(t){return this}}}catch(mx){return{then(t){return this},catch:e=>nh(e)(mx)}}};function sh(t){var e=t.match(/^var\((.*)\)$/);return e?e[1]:t}function rh(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};for(var s in t){var r=t[s],o=[...i,s];"string"==typeof r||"number"==typeof r||null==r?n[s]=e(r,o):"object"!=typeof r||Array.isArray(r)?console.warn('Skipping invalid key "'.concat(o.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(r)?"Array":typeof r,'"')):n[s]=rh(r,e,o)}return n}var oh={},ah={}.hasOwnProperty,lh=/[ -,\.\/:-@\[-\^`\{-~]/,ch=/[ -,\.\/:-@\[\]\^`\{-~]/,hh=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,uh=function t(e,i){"single"!=(i=(function(t,e){if(!t)return e;var i={};for(var n in e)i[n]=ah.call(t,n)?t[n]:e[n];return i})(i,t.options)).quotes&&"double"!=i.quotes&&(i.quotes="single");for(var n="double"==i.quotes?'"':"'",s=i.isIdentifier,r=e.charAt(0),o="",a=0,l=e.length;a<l;){var c=e.charAt(a++),h=c.charCodeAt(),u=void 0;if(h<32||h>126){if(h>=55296&&h<=56319&&a<l){var d=e.charCodeAt(a++);56320==(64512&d)?h=((1023&h)<<10)+(1023&d)+65536:a--}u="\\"+h.toString(16).toUpperCase()+" "}else u=i.escapeEverything?lh.test(c)?"\\"+c:"\\"+h.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?"\\"+h.toString(16).toUpperCase()+" ":"\\"==c||!s&&('"'==c&&n==c||"'"==c&&n==c)||s&&ch.test(c)?"\\"+c:c;o+=u}return s&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(r)&&(o="\\3"+r+" "+o.slice(1))),o=o.replace(hh,(function(t,e,i){return e&&e.length%2?t:(e||"")+i})),!s&&i.wrap?n+o+n:o};uh.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},uh.version="3.0.0";const dh=q(uh);var fh,ph,mh=class{constructor(t){const{failure:e,gotoFn:i,output:n}=this._buildTables(t);this.gotoFn=i,this.output=n,this.failure=e}_buildTables(t){const e={0:{}},i={};let n=0;for(const o of t){let t=0;for(const s of o)e[t]&&s in e[t]?t=e[t][s]:(n++,e[t][s]=n,e[n]={},t=n,i[n]=[]);i[t].push(o)}const s={},r=[];for(const o in e[0]){const t=e[0][o];s[t]=0,r.push(t)}for(;r.length>0;){const t=r.shift();if(void 0!==t)for(const n in e[t]){const o=e[t][n];r.push(o);let a=s[t];for(;a>0&&!(n in e[a]);)a=s[a];if(n in e[a]){const t=e[a][n];s[o]=t,i[o]=[...i[o],...i[t]]}else s[o]=0}}return{gotoFn:e,output:i,failure:s}}search(t){let e=0;const i=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e>0&&!(s in this.gotoFn[e]);)e=this.failure[e];s in this.gotoFn[e]&&(e=this.gotoFn[e][s],this.output[e].length>0)&&i.push([n,this.output[e]])}return i}match(t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];for(;e>0&&!(n in this.gotoFn[e]);)e=this.failure[e];if(n in this.gotoFn[e]&&(e=this.gotoFn[e][n],this.output[e].length>0))return!0}return!1}},gh=[{appendCss:()=>{},registerClassName:()=>{},onEndFileScope:()=>{},registerComposition:()=>{},markCompositionUsed:()=>{},getIdentOption:()=>"short"}],yh=!1;function vh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}!(function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"})(fh||(fh={})),(function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"})(ph||(ph={}));const bh=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,wh=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,xh=new Map([[126,ph.Element],[94,ph.Start],[36,ph.End],[42,ph.Any],[33,ph.Not],[124,ph.Hyphen]]),Sh=new Set(["has","not","matches","is","where","host","host-context"]),kh=new Set(["contains","icontains"]);function jh(t,e,i){const n=parseInt(e,16)-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)}function Ch(t){return t.replace(wh,jh)}function Eh(t){return 39===t||34===t}function Mh(t){return 32===t||9===t||10===t||12===t||13===t}function _h(t){const e=[],i=Th(e,`${t}`,0);if(i<t.length)throw new Error(`Unmatched selector: ${t.slice(i)}`);return e}function Th(t,e,i){let n=[];function s(t){const n=e.slice(i+t).match(bh);if(!n)throw new Error(`Expected name, found ${e.slice(i)}`);const[s]=n;return i+=t+s.length,Ch(s)}function r(t){for(i+=t;i<e.length&&Mh(e.charCodeAt(i));)i++}function o(){const t=i+=1;let n=1;for(;n>0&&i<e.length;i++)40!==e.charCodeAt(i)||a(i)?41!==e.charCodeAt(i)||a(i)||n--:n++;if(n)throw new Error("Parenthesis not matched");return Ch(e.slice(t,i-1))}function a(t){let i=0;for(;92===e.charCodeAt(--t);)i++;return!(1&~i)}function l(){if(n.length>0&&(function(t){switch(t.type){case fh.Adjacent:case fh.Child:case fh.Descendant:case fh.Parent:case fh.Sibling:case fh.ColumnCombinator:return!0;default:return!1}})(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function c(t){n.length>0&&n[n.length-1].type===fh.Descendant?n[n.length-1].type=t:(l(),n.push({type:t}))}function h(t,e){n.push({type:fh.Attribute,name:t,action:e,value:s(1),namespace:null,ignoreCase:"quirks"})}function u(){if(n.length&&n[n.length-1].type===fh.Descendant&&n.pop(),0===n.length)throw new Error("Empty sub-selector");t.push(n)}if(r(0),e.length===i)return i;t:for(;i<e.length;){const t=e.charCodeAt(i);switch(t){case 32:case 9:case 10:case 12:case 13:0!==n.length&&n[0].type===fh.Descendant||(l(),n.push({type:fh.Descendant})),r(1);break;case 62:c(fh.Child),r(1);break;case 60:c(fh.Parent),r(1);break;case 126:c(fh.Sibling),r(1);break;case 43:c(fh.Adjacent),r(1);break;case 46:h("class",ph.Element);break;case 35:h("id",ph.Equals);break;case 91:{let t;r(1);let o=null;124===e.charCodeAt(i)?t=s(1):e.startsWith("*|",i)?(o="*",t=s(2)):(t=s(0),124===e.charCodeAt(i)&&61!==e.charCodeAt(i+1)&&(o=t,t=s(1))),r(0);let l=ph.Exists;const c=xh.get(e.charCodeAt(i));if(c){if(l=c,61!==e.charCodeAt(i+1))throw new Error("Expected `=`");r(2)}else 61===e.charCodeAt(i)&&(l=ph.Equals,r(1));let h="",u=null;if("exists"!==l){if(Eh(e.charCodeAt(i))){const t=e.charCodeAt(i);let n=i+1;for(;n<e.length&&(e.charCodeAt(n)!==t||a(n));)n+=1;if(e.charCodeAt(n)!==t)throw new Error("Attribute value didn't end");h=Ch(e.slice(i+1,n)),i=n+1}else{const t=i;for(;i<e.length&&(!Mh(e.charCodeAt(i))&&93!==e.charCodeAt(i)||a(i));)i+=1;h=Ch(e.slice(t,i))}r(0);const t=32|e.charCodeAt(i);115===t?(u=!1,r(1)):105===t&&(u=!0,r(1))}if(93!==e.charCodeAt(i))throw new Error("Attribute selector didn't terminate");i+=1,n.push({type:fh.Attribute,name:t,action:l,value:h,namespace:o,ignoreCase:u});break}case 58:{if(58===e.charCodeAt(i+1)){n.push({type:fh.PseudoElement,name:s(2).toLowerCase(),data:40===e.charCodeAt(i)?o():null});continue}const t=s(1).toLowerCase();let r=null;if(40===e.charCodeAt(i))if(Sh.has(t)){if(Eh(e.charCodeAt(i+1)))throw new Error(`Pseudo-selector ${t} cannot be quoted`);if(r=[],i=Th(r,e,i+1),41!==e.charCodeAt(i))throw new Error(`Missing closing parenthesis in :${t} (${e})`);i+=1}else{if(r=o(),kh.has(t)){const t=r.charCodeAt(0);t===r.charCodeAt(r.length-1)&&Eh(t)&&(r=r.slice(1,-1))}r=Ch(r)}n.push({type:fh.Pseudo,name:t,data:r});break}case 44:u(),n=[],r(1);break;default:{if(e.startsWith("/*",i)){const t=e.indexOf("*/",i+2);if(t<0)throw new Error("Comment was not terminated");i=t+2,0===n.length&&r(0);break}let o,a=null;if(42===t)i+=1,o="*";else if(124===t){if(o="",124===e.charCodeAt(i+1)){c(fh.ColumnCombinator),r(2);break}}else{if(!bh.test(e.slice(i)))break t;o=s(0)}124===e.charCodeAt(i)&&124!==e.charCodeAt(i+1)&&(a=o,42===e.charCodeAt(i+1)?(o="*",i+=2):o=s(1)),n.push("*"===o?{type:fh.Universal,namespace:a}:{type:fh.Tag,name:o,namespace:a})}}}return u(),i}function Ah(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Oh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ah(Object(i),!0).forEach((function(e){Nh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ah(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Nh(t,e,i){return(e=(function(t){var e=(function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(t);return"symbol"==typeof e?e:String(e)})(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Ih=(function t(e){return i.withOptions=i=>t(Oh(Oh({},e),i)),i;function i(t,...i){const n="string"==typeof t?[t]:t.raw,{escapeSpecialCharacters:s=Array.isArray(t)}=e;let r="";for(let e=0;e<n.length;e++){let t=n[e];s&&(t=t.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),r+=t,e<i.length&&(r+=i[e])}const o=r.split("\n");let a=null;for(const e of o){const t=e.match(/^(\s+)\S+/);if(t){const e=t[1].length;a=a?Math.min(a,e):e}}if(null!==a){const t=a;r=o.map((e=>" "===e[0]||"\t"===e[0]?e.slice(t):e)).join("\n")}return r=r.trim(),s&&(r=r.replace(/\\n/g,"\n")),r}})({});var Lh=function(){return Lh=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Lh.apply(this,arguments)};function zh(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i}function Rh(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,r=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(qa){s={error:qa}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return o}var Ph,Dh=/(\u000D|\u000C|\u000D\u000A)/g,$h=/[\u0000\uD800-\uDFFF]/g,Bh=/(\/\*)[\s\S]*?(\*\/)/g,Uh=function(t,e){if(t.length<=e+1)return null;for(var i=t.charCodeAt(e),n=[],s=e+1;s<t.length;s+=1){var r=t.charCodeAt(s);if(r===i)return[s,String.fromCharCode.apply(null,n)];if(92===r){var o=Wh(t,s);if(null===o)return null;var a=Rh(o,2),l=a[0];n.push(a[1]),s=l}else{if(10===r)return null;n.push(r)}}return null},Fh=function(t,e){if(t.length<=e)return!1;var i,n=t.charCodeAt(e);return 45===n?!(t.length<=e+1)&&(45===(i=t.charCodeAt(e+1))||95===i||i>=65&&i<=90||i>=97&&i<=122||i>=128||92===i&&!(t.length<=e+2)&&10!==t.charCodeAt(e+2)):95===n||n>=65&&n<=90||n>=97&&n<=122||n>=128||92===n&&!(t.length<=e+1)&&10!==(i=t.charCodeAt(e+1))},Wh=function(t,e){if(t.length<=e+1)return null;if(92!==t.charCodeAt(e))return null;var i=t.charCodeAt(e+1);if(10===i)return null;if(i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102){for(var n=[i],s=Math.min(e+7,t.length),r=e+2;r<s;r+=1){var o=t.charCodeAt(r);if(!(o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102))break;n.push(o)}if(r<t.length){var a=t.charCodeAt(r);9!==a&&32!==a&&10!==a||(r+=1)}return[r-1,parseInt(String.fromCharCode.apply(null,n),16)]}return[e+1,i]},Vh=function(t,e){var i=qh(t,e);if(null===i)return null;var n=Rh(i,3),s=n[0],r=n[1],o=n[2],a=Kh(t,s+1);if(null!==a){var l=Rh(a,2);return[l[0],["<dimension-token>",r,l[1]]]}return s+1<t.length&&37===t.charCodeAt(s+1)?[s+1,["<percentage-token>",r]]:[s,["<number-token>",r,o]]},qh=function(t,e){if(t.length<=e)return null;var i="integer",n=[],s=t.charCodeAt(e);for(43!==s&&45!==s||(e+=1,45===s&&n.push(45));e<t.length&&((c=t.charCodeAt(e))>=48&&c<=57);)n.push(c),e+=1;if(e+1<t.length){var r=t.charCodeAt(e),o=t.charCodeAt(e+1);if(46===r&&o>=48&&o<=57)for(n.push(r,o),i="number",e+=2;e<t.length&&((c=t.charCodeAt(e))>=48&&c<=57);)n.push(c),e+=1}if(e+1<t.length){r=t.charCodeAt(e),o=t.charCodeAt(e+1);var a=t.charCodeAt(e+2);if(69===r||101===r){var l=o>=48&&o<=57;if(l||(43===o||45===o)&&a>=48&&a<=57)for(i="number",l?(n.push(69,o),e+=2):45===o?(n.push(69,45,a),e+=3):(n.push(69,a),e+=3);e<t.length;){var c;if(!((c=t.charCodeAt(e))>=48&&c<=57))break;n.push(c),e+=1}}}var h=String.fromCharCode.apply(null,n),u="number"===i?parseFloat(h):parseInt(h);return-0===u&&(u=0),Number.isNaN(u)?null:[e-1,u,i]},Hh=function(t,e){if(t.length<=e)return null;for(var i=[],n=t.charCodeAt(e);e<t.length;n=t.charCodeAt(++e))if(45===n||95===n||n>=65&&n<=90||n>=97&&n<=122||n>=128||n>=48&&n<=57)i.push(n);else{var s=Wh(t,e);if(null===s)break;var r=Rh(s,2),o=r[0];i.push(r[1]),e=o}return 0===e?null:[e-1,String.fromCharCode.apply(null,i)]},Kh=function(t,e){if(t.length<=e||!Fh(t,e))return null;for(var i=[],n=t.charCodeAt(e);e<t.length;n=t.charCodeAt(++e))if(45===n||95===n||n>=65&&n<=90||n>=97&&n<=122||n>=128||n>=48&&n<=57)i.push(n);else{var s=Wh(t,e);if(null===s)break;var r=Rh(s,2),o=r[0];i.push(r[1]),e=o}return[e-1,String.fromCharCode.apply(null,i)]},Gh=function(t,e){for(var i=t.charCodeAt(e);9===i||32===i||10===i;)i=t.charCodeAt(++e);for(var n=[],s=!1;e<t.length;){if(41===i)return[e,String.fromCharCode.apply(null,n)];if(34===i||39===i||40===i)return null;if(9===i||32===i||10===i)s||0===n.length||(s=!0);else if(92===i){var r=Wh(t,e);if(null===r||s)return null;var o=Rh(r,2),a=o[0];n.push(o[1]),e=a}else{if(s)return null;n.push(i)}i=t.charCodeAt(++e)}return null},Zh=function(t,e){var i=Kh(t,e);if(null===i)return null;var n=Rh(i,2),s=n[0],r=n[1];if("url"===r.toLowerCase()){if(t.length>s+1&&40===t.charCodeAt(s+1)){for(var o=2;s+o<t.length;o+=1){var a=t.charCodeAt(s+o);if(34===a||39===a)return[s+1,r.toLowerCase(),"<function-token>"];if(9!==a&&32!==a&&10!==a){var l=Gh(t,s+o);if(null===l)return null;var c=Rh(l,2);return[c[0],c[1],"<url-token>"]}}return[s+1,r.toLowerCase(),"<function-token>"]}}else if(t.length>s+1&&40===t.charCodeAt(s+1))return[s+1,r.toLowerCase(),"<function-token>"];return[s,r.toLowerCase(),"<ident-token>"]},Yh=function(t){if(null===t.mediaCondition)return t;var e=Xh(t.mediaCondition);return null===e.operator&&1===e.children.length&&"children"in e.children[0]&&(e=e.children[0]),{mediaPrefix:t.mediaPrefix,mediaType:t.mediaType,mediaCondition:e}},Xh=function t(e){for(var i=e.children.length-1;i>=0;i--){var n=e.children[i];if(!("context"in n)){var s=t(n);if(null===s.operator&&1===s.children.length)e.children[i]=s.children[0];else if(s.operator===e.operator&&("and"===s.operator||"or"===s.operator)){for(var r=[i,1],o=0;o<s.children.length;o++)r.push(s.children[o]);e.children.splice.apply(e.children,r)}}}return e},Qh=function(t,e){return e instanceof Error?new Error("".concat(e.message.trim(),"\n").concat(t.trim())):new Error(t.trim())},Jh=function(t){var e=(function(t,e){void 0===e&&(e=0),t=(t=t.replace(Dh,"\n").replace($h,"\ufffd")).replace(Bh,"");for(var i=[];e<t.length;e+=1){var n=t.charCodeAt(e);if(9===n||32===n||10===n){for(var s=t.charCodeAt(++e);9===s||32===s||10===s;)s=t.charCodeAt(++e);e-=1,i.push({type:"<whitespace-token>"})}else if(34===n){if(null===(j=Uh(t,e)))return null;var r=Rh(j,2),o=r[0];i.push({type:"<string-token>",value:x=r[1]}),e=o}else if(35===n){if(e+1<t.length&&(95===(f=t.charCodeAt(e+1))||f>=65&&f<=90||f>=97&&f<=122||f>=128||f>=48&&f<=57||92===f&&e+2<t.length&&10!==t.charCodeAt(e+2))){var a=Fh(t,e+1)?"id":"unrestricted";if(null!==(j=Hh(t,e+1))){var l=Rh(j,2);o=l[0],i.push({type:"<hash-token>",value:(x=l[1]).toLowerCase(),flag:a}),e=o;continue}}i.push({type:"<delim-token>",value:n})}else if(39===n){if(null===(j=Uh(t,e)))return null;var c=Rh(j,2);o=c[0],i.push({type:"<string-token>",value:x=c[1]}),e=o}else if(40===n)i.push({type:"<(-token>"});else if(41===n)i.push({type:"<)-token>"});else if(43===n){var h=Vh(t,e);if(null===h)i.push({type:"<delim-token>",value:n});else{var u=Rh(h,2);o=u[0],i.push("<dimension-token>"===(S=u[1])[0]?{type:"<dimension-token>",value:S[1],unit:S[2].toLowerCase(),flag:"number"}:"<number-token>"===S[0]?{type:S[0],value:S[1],flag:S[2]}:{type:S[0],value:S[1],flag:"number"}),e=o}}else if(44===n)i.push({type:"<comma-token>"});else if(45===n){if(null!==(g=Vh(t,e))){var d=Rh(g,2);o=d[0],i.push("<dimension-token>"===(S=d[1])[0]?{type:"<dimension-token>",value:S[1],unit:S[2].toLowerCase(),flag:"number"}:"<number-token>"===S[0]?{type:S[0],value:S[1],flag:S[2]}:{type:S[0],value:S[1],flag:"number"}),e=o;continue}if(e+2<t.length){var f=t.charCodeAt(e+1),p=t.charCodeAt(e+2);if(45===f&&62===p){i.push({type:"<CDC-token>"}),e+=2;continue}}if(null!==(j=Zh(t,e))){var m=Rh(j,3);o=m[0],i.push({type:m[2],value:x=m[1]}),e=o;continue}i.push({type:"<delim-token>",value:n})}else if(46===n){var g;if(null!==(g=Vh(t,e))){var y=Rh(g,2);o=y[0],i.push("<dimension-token>"===(S=y[1])[0]?{type:"<dimension-token>",value:S[1],unit:S[2].toLowerCase(),flag:"number"}:"<number-token>"===S[0]?{type:S[0],value:S[1],flag:S[2]}:{type:S[0],value:S[1],flag:"number"}),e=o;continue}i.push({type:"<delim-token>",value:n})}else if(58===n)i.push({type:"<colon-token>"});else if(59===n)i.push({type:"<semicolon-token>"});else if(60===n){if(e+3<t.length){f=t.charCodeAt(e+1),p=t.charCodeAt(e+2);var v=t.charCodeAt(e+3);if(33===f&&45===p&&45===v){i.push({type:"<CDO-token>"}),e+=3;continue}}i.push({type:"<delim-token>",value:n})}else if(64===n){if(null!==(j=Kh(t,e+1))){var b=Rh(j,2);o=b[0],i.push({type:"<at-keyword-token>",value:(x=b[1]).toLowerCase()}),e=o;continue}i.push({type:"<delim-token>",value:n})}else if(91===n)i.push({type:"<[-token>"});else if(92===n){if(null===(j=Wh(t,e)))return null;var w=Rh(j,2),x=(o=w[0],w[1]);t=t.slice(0,e)+x+t.slice(o+1),e-=1}else if(93===n)i.push({type:"<]-token>"});else if(123===n)i.push({type:"<{-token>"});else if(125===n)i.push({type:"<}-token>"});else if(n>=48&&n<=57){var S,k=Rh(j=Vh(t,e),2);o=k[0],i.push("<dimension-token>"===(S=k[1])[0]?{type:"<dimension-token>",value:S[1],unit:S[2].toLowerCase(),flag:"number"}:"<number-token>"===S[0]?{type:S[0],value:S[1],flag:S[2]}:{type:S[0],value:S[1],flag:"number"}),e=o}else if(95===n||n>=65&&n<=90||n>=97&&n<=122||n>=128){var j;if(null===(j=Zh(t,e)))return null;var C=Rh(j,3);o=C[0],i.push({type:C[2],value:x=C[1]}),e=o}else i.push({type:"<delim-token>",value:n})}return i.push({type:"<EOF-token>"}),i})(t.trim());if(null===e)throw Qh("Failed tokenizing");var i=0,n=e.length-1;if("<at-keyword-token>"===e[0].type&&"media"===e[0].value){if("<whitespace-token>"!==e[1].type)throw Qh("Expected whitespace after media");i=2;for(var s=2;s<e.length-1;s++){var r=e[s];if("<{-token>"===r.type){n=s;break}if("<semicolon-token>"===r.type)throw Qh("Expected '{' in media query but found ';'")}}return e=e.slice(i,n),eu(e)},tu=function(t){for(var e=[],i=!1,n=0;n<t.length;n++)"<whitespace-token>"===t[n].type?(i=!0,e.length>0&&(e[e.length-1].wsAfter=!0)):(e.push(Lh(Lh({},t[n]),{wsBefore:i,wsAfter:!1})),i=!1);return e},eu=function(t){for(var e,i,n=[[]],s=0;s<t.length;s++){var r=t[s];"<comma-token>"===r.type?n.push([]):n[n.length-1].push(r)}var o=n.map(tu);if(1===o.length&&0===o[0].length)return[{mediaCondition:null,mediaPrefix:null,mediaType:"all"}];var a=o.map((function(t){return 0===t.length?null:iu(t)})),l=[];try{for(var c=(function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")})(a),h=c.next();!h.done;h=c.next()){var u=h.value;null!==u&&l.push(u)}}catch(d){e={error:d}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(e)throw e.error}}if(0===l.length)throw Qh("No valid media queries");return l},iu=function(t){var e=t[0];if("<(-token>"===e.type)try{return{mediaPrefix:null,mediaType:"all",mediaCondition:nu(t,!0)}}catch(h){throw Qh("Expected media condition after '('",h)}else{if("<ident-token>"!==e.type)throw Qh("Expected media condition or media prefix");var i=null,n=void 0,s=e.value;"only"!==s&&"not"!==s||(i=s);var r=null===i?0:1;if(t.length<=r)throw Qh("Expected extra token in media query");var o=t[r];if("<ident-token>"===o.type){var a=o.value;if("all"===a)n="all";else if("print"===a||"screen"===a)n=a;else{if("tty"!==a&&"tv"!==a&&"projection"!==a&&"handheld"!==a&&"braille"!==a&&"embossed"!==a&&"aural"!==a&&"speech"!==a)throw Qh("Unknown ident '".concat(a,"' in media query"));i="not"===i?null:"not",n="all"}}else{if("not"!==i||"<(-token>"!==o.type)throw Qh("Invalid media query");var l=[{type:"<(-token>",wsBefore:!1,wsAfter:!1}];l.push.apply(l,t),l.push({type:"<)-token>",wsBefore:!1,wsAfter:!1});try{return{mediaPrefix:null,mediaType:"all",mediaCondition:nu(l,!0)}}catch(h){throw Qh("Expected media condition after '('",h)}}if(r+1===t.length)return{mediaPrefix:i,mediaType:n,mediaCondition:null};if(!(r+4<t.length))throw Qh("Expected media condition after media prefix");var c=t[r+1];if("<ident-token>"!==c.type||"and"!==c.value)throw Qh("Expected 'and' after media prefix");try{return{mediaPrefix:i,mediaType:n,mediaCondition:nu(t.slice(r+2),!1)}}catch(h){throw Qh("Expected media condition after 'and'",h)}}},nu=function t(e,i,n){if(void 0===n&&(n=null),e.length<3||"<(-token>"!==e[0].type||"<)-token>"!==e[e.length-1].type)throw new Error("Invalid media condition");for(var s,r=e.length-1,o=0,a=0,l=0;l<e.length;l++){var c=e[l];if("<(-token>"===c.type?(a+=1,o=Math.max(o,a)):"<)-token>"===c.type&&(a-=1),0===a){r=l;break}}if(0!==a)throw new Error("Mismatched parens\nInvalid media condition");var h=e.slice(0,r+1);if(s=1===o?su(h):"<ident-token>"===h[1].type&&"not"===h[1].value?t(h.slice(2,-1),!0,"not"):t(h.slice(1,-1),!0),r===e.length-1)return{operator:n,children:[s]};var u=e[r+1];if("<ident-token>"!==u.type)throw new Error("Invalid operator\nInvalid media condition");if(null!==n&&n!==u.value)throw new Error("'".concat(u.value,"' and '").concat(n,"' must not be at same level\nInvalid media condition"));if("or"===u.value&&!i)throw new Error("Cannot use 'or' at top level of a media query\nInvalid media condition");if("and"!==u.value&&"or"!==u.value)throw new Error("Invalid operator: '".concat(u.value,"'\nInvalid media condition"));var d=t(e.slice(r+2),i,u.value);return{operator:u.value,children:[s].concat(d.children)}},su=function(t){if(t.length<3||"<(-token>"!==t[0].type||"<)-token>"!==t[t.length-1].type)throw new Error("Invalid media feature");for(var e=[t[0]],i=1;i<t.length;i++){if(i<t.length-2){var n=t[i],s=t[i+1],r=t[i+2];if("<number-token>"===n.type&&n.value>0&&"<delim-token>"===s.type&&47===s.value&&"<number-token>"===r.type&&r.value>0){e.push({type:"<ratio-token>",numerator:n.value,denominator:r.value,wsBefore:n.wsBefore,wsAfter:r.wsAfter}),i+=2;continue}}e.push(t[i])}var o=e[1];if("<ident-token>"===o.type&&3===e.length)return{context:"boolean",feature:o.value};if(5===e.length&&"<ident-token>"===e[1].type&&"<colon-token>"===e[2].type){var a=e[3];if("<number-token>"===a.type||"<dimension-token>"===a.type||"<ratio-token>"===a.type||"<ident-token>"===a.type){var l=e[1].value,c=null,h=l.slice(0,4);return"min-"===h?(c="min",l=l.slice(4)):"max-"===h&&(c="max",l=l.slice(4)),{context:"value",prefix:c,feature:l,value:zh(a,["wsBefore","wsAfter"])}}}else if(e.length>=5)try{var u=ru(e);return{context:"range",feature:u.featureName,range:u}}catch(d){throw Qh("Invalid media feature",d)}throw new Error("Invalid media feature")},ru=function(t){var e,i,n,s;if(t.length<5||"<(-token>"!==t[0].type||"<)-token>"!==t[t.length-1].type)throw new Error("Invalid range");var r={leftToken:null,leftOp:null,featureName:"",rightOp:null,rightToken:null},o="<number-token>"===t[1].type||"<dimension-token>"===t[1].type||"<ratio-token>"===t[1].type||"<ident-token>"===t[1].type&&"infinite"===t[1].value;if("<delim-token>"===t[2].type){if(60===t[2].value)r[o?"leftOp":"rightOp"]="<delim-token>"!==t[3].type||61!==t[3].value||t[3].wsBefore?"<":"<=";else if(62===t[2].value)r[o?"leftOp":"rightOp"]="<delim-token>"!==t[3].type||61!==t[3].value||t[3].wsBefore?">":">=";else{if(61!==t[2].value)throw new Error("Invalid range");r[o?"leftOp":"rightOp"]="="}if(o)r.leftToken=t[1];else{if("<ident-token>"!==t[1].type)throw new Error("Invalid range");r.featureName=t[1].value}var a=2+(null!==(i=null===(e=r[o?"leftOp":"rightOp"])||void 0===e?void 0:e.length)&&void 0!==i?i:0),l=t[a];if(o){if("<ident-token>"!==l.type)throw new Error("Invalid range");if(r.featureName=l.value,t.length>=7){var c=t[a+1],h=t[a+2];if("<delim-token>"!==c.type)throw new Error("Invalid range");var u=c.value;if(60===u)r.rightOp="<delim-token>"!==h.type||61!==h.value||h.wsBefore?"<":"<=";else{if(62!==u)throw new Error("Invalid range");r.rightOp="<delim-token>"!==h.type||61!==h.value||h.wsBefore?">":">="}var d=t[a+1+(null!==(s=null===(n=r.rightOp)||void 0===n?void 0:n.length)&&void 0!==s?s:0)];r.rightToken=d}else if(a+2!==t.length)throw new Error("Invalid range")}else r.rightToken=l;var f=null,p=r.leftToken,m=r.leftOp,g=r.featureName,y=r.rightOp,v=r.rightToken,b=null;if(null!==p)if("<ident-token>"===p.type){var w=p.type;"infinite"===(S=p.value)&&(b={type:w,value:S})}else"<number-token>"!==p.type&&"<dimension-token>"!==p.type&&"<ratio-token>"!==p.type||(b=zh(p,["wsBefore","wsAfter"]));var x=null;if(null!==v)if("<ident-token>"===v.type){var S;w=v.type,"infinite"===(S=v.value)&&(x={type:w,value:S})}else"<number-token>"!==v.type&&"<dimension-token>"!==v.type&&"<ratio-token>"!==v.type||(x=zh(v,["wsBefore","wsAfter"]));if(null!==b&&null!==x)if("<"!==m&&"<="!==m||"<"!==y&&"<="!==y){if(">"!==m&&">="!==m||">"!==y&&">="!==y)throw new Error("Invalid range");f={leftToken:b,leftOp:m,featureName:g,rightOp:y,rightToken:x}}else f={leftToken:b,leftOp:m,featureName:g,rightOp:y,rightToken:x};else(null===b&&null===m&&null!==y&&null!==x||null!==b&&null!==m&&null===y&&null===x)&&(f={leftToken:b,leftOp:m,featureName:g,rightOp:y,rightToken:x});return f}throw new Error("Invalid range")};function ou(t,e,i){return(e=(function(t){var e=(function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(t);return"symbol"==typeof e?e:String(e)})(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function au(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function lu(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?au(Object(i),!0).forEach((function(e){ou(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):au(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function cu(t,e){if(null==t)return{};var i,n,s=(function(t,e){if(null==t)return{};var i,n,s={},r=Object.keys(t);for(n=0;n<r.length;n++)e.indexOf(i=r[n])>=0||(s[i]=t[i]);return s})(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)e.indexOf(i=r[n])>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function hu(t,e){for(var i in t)e(t[i],i)}function uu(t,e){var i={};for(var n in t)-1===e.indexOf(n)&&(i[n]=t[n]);return i}class du{constructor(){this.ruleset=new Map,this.precedenceLookup=new Map}findOrCreateCondition(t){var e=this.ruleset.get(t);return e||(e={query:t,rules:[],children:new du},this.ruleset.set(t,e)),e}getConditionalRulesetByPath(t){var e=this;for(var i of t){var n=e.findOrCreateCondition(i);e=n.children}return e}addRule(t,e,i){var n=this.getConditionalRulesetByPath(i).findOrCreateCondition(e);if(!n)throw new Error("Failed to add conditional rule");n.rules.push(t)}addConditionPrecedence(t,e){for(var i=this.getConditionalRulesetByPath(t),n=0;n<e.length;n++){var s,r=e[n],o=null!==(s=i.precedenceLookup.get(r))&&void 0!==s?s:new Set;for(var a of e.slice(n+1))o.add(a);i.precedenceLookup.set(r,o)}}isCompatible(t){for(var[e,i]of this.precedenceLookup.entries())for(var n of i){var s;if(null!==(s=t.precedenceLookup.get(n))&&void 0!==s&&s.has(e))return!1}for(var{query:r,children:o}of t.ruleset.values()){var a=this.ruleset.get(r);if(a&&!a.children.isCompatible(o))return!1}return!0}merge(t){for(var{query:e,rules:i,children:n}of t.ruleset.values()){var s=this.ruleset.get(e);s?(s.rules.push(...i),s.children.merge(n)):this.ruleset.set(e,{query:e,rules:i,children:n})}for(var[r,o]of t.precedenceLookup.entries()){var a,l=null!==(a=this.precedenceLookup.get(r))&&void 0!==a?a:new Set;this.precedenceLookup.set(r,new Set([...l,...o]))}}mergeIfCompatible(t){return!!this.isCompatible(t)&&(this.merge(t),!0)}getSortedRuleset(){var t=this,e=[],i=function(i){var s=t.ruleset.get(n);if(!s)throw new Error("Can't find condition for ".concat(n));var r=e.findIndex((t=>i.has(t.query)));r>-1?e.splice(r,0,s):e.push(s)};for(var[n,s]of this.precedenceLookup.entries())i(s);return e}renderToArray(){var t=[];for(var{query:e,rules:i,children:n}of this.getSortedRuleset()){var s={};for(var r of i)s[r.selector]=lu(lu({},s[r.selector]),r.rule);Object.assign(s,...n.renderToArray()),t.push({[e]:s})}return t}}var fu,pu={":-moz-any-link":!0,":-moz-full-screen":!0,":-moz-placeholder":!0,":-moz-read-only":!0,":-moz-read-write":!0,":-ms-fullscreen":!0,":-ms-input-placeholder":!0,":-webkit-any-link":!0,":-webkit-full-screen":!0,"::-moz-color-swatch":!0,"::-moz-list-bullet":!0,"::-moz-list-number":!0,"::-moz-page-sequence":!0,"::-moz-page":!0,"::-moz-placeholder":!0,"::-moz-progress-bar":!0,"::-moz-range-progress":!0,"::-moz-range-thumb":!0,"::-moz-range-track":!0,"::-moz-scrolled-page-sequence":!0,"::-moz-selection":!0,"::-ms-backdrop":!0,"::-ms-browse":!0,"::-ms-check":!0,"::-ms-clear":!0,"::-ms-fill-lower":!0,"::-ms-fill-upper":!0,"::-ms-fill":!0,"::-ms-reveal":!0,"::-ms-thumb":!0,"::-ms-ticks-after":!0,"::-ms-ticks-before":!0,"::-ms-tooltip":!0,"::-ms-track":!0,"::-ms-value":!0,"::-webkit-backdrop":!0,"::-webkit-calendar-picker-indicator":!0,"::-webkit-inner-spin-button":!0,"::-webkit-input-placeholder":!0,"::-webkit-meter-bar":!0,"::-webkit-meter-even-less-good-value":!0,"::-webkit-meter-inner-element":!0,"::-webkit-meter-optimum-value":!0,"::-webkit-meter-suboptimum-value":!0,"::-webkit-outer-spin-button":!0,"::-webkit-progress-bar":!0,"::-webkit-progress-inner-element":!0,"::-webkit-progress-inner-value":!0,"::-webkit-progress-value":!0,"::-webkit-resizer":!0,"::-webkit-scrollbar-button":!0,"::-webkit-scrollbar-corner":!0,"::-webkit-scrollbar-thumb":!0,"::-webkit-scrollbar-track-piece":!0,"::-webkit-scrollbar-track":!0,"::-webkit-scrollbar":!0,"::-webkit-search-cancel-button":!0,"::-webkit-search-results-button":!0,"::-webkit-slider-runnable-track":!0,"::-webkit-slider-thumb":!0,"::after":!0,"::backdrop":!0,"::before":!0,"::cue":!0,"::file-selector-button":!0,"::first-letter":!0,"::first-line":!0,"::grammar-error":!0,"::marker":!0,"::placeholder":!0,"::selection":!0,"::spelling-error":!0,"::target-text":!0,"::view-transition-group":!0,"::view-transition-image-pair":!0,"::view-transition-new":!0,"::view-transition-old":!0,"::view-transition":!0,":active":!0,":after":!0,":any-link":!0,":before":!0,":blank":!0,":checked":!0,":default":!0,":defined":!0,":disabled":!0,":empty":!0,":enabled":!0,":first-child":!0,":first-letter":!0,":first-line":!0,":first-of-type":!0,":first":!0,":focus-visible":!0,":focus-within":!0,":focus":!0,":fullscreen":!0,":hover":!0,":in-range":!0,":indeterminate":!0,":invalid":!0,":last-child":!0,":last-of-type":!0,":left":!0,":link":!0,":only-child":!0,":only-of-type":!0,":optional":!0,":out-of-range":!0,":placeholder-shown":!0,":read-only":!0,":read-write":!0,":required":!0,":right":!0,":root":!0,":scope":!0,":target":!0,":valid":!0,":visited":!0},mu=Object.keys(pu),gu=pu,yu=(t,e)=>new Error(Ih(fu||(fu=vh(['\n    Invalid media query: "','"\n\n    ',"\n\n    Read more on MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries\n  "])),t,e)),vu=t=>{if("@media "===t)throw yu(t,"Query is empty");try{(function(t){for(var e=t.length-1;e>=0;e--)t[e]=Yh(t[e])})(Jh(t))}catch(mx){throw yu(t,mx.message)}},bu=["vars"],wu=["content"],xu="__DECLARATION",Su={animationIterationCount:!0,borderImage:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,initialLetter:!0,lineClamp:!0,lineHeight:!0,maxLines:!0,opacity:!0,order:!0,orphans:!0,scale:!0,tabSize:!0,WebkitLineClamp:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,maskBorder:!0,maskBorderOutset:!0,maskBorderSlice:!0,maskBorderWidth:!0,shapeImageThreshold:!0,stopOpacity:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function ku(t,e,i,n){var s=t.slice(0,e),r=t.slice(i);return"".concat(s).concat(n).concat(r)}var ju=[...mu,"@layer","@media","@supports","@container","selectors"];class Cu{constructor(t,e){this.rules=[],this.conditionalRulesets=[new du],this.fontFaceRules=[],this.keyframesRules=[],this.propertyRules=[],this.localClassNamesMap=new Map(t.map((t=>[t,t]))),this.localClassNamesSearch=new mh(t),this.layers=new Map,this.composedClassLists=e.map((t=>{var{identifier:e,classList:i}=t;return{identifier:e,regex:RegExp("(".concat(i,")"),"g")}})).reverse()}processCssObj(t){if("fontFace"!==t.type)if("property"!==t.type){if("keyframes"===t.type)return t.rule=Object.fromEntries(Object.entries(t.rule).map((t=>{var[e,i]=t;return[e,this.transformVars(this.transformProperties(i))]}))),void this.keyframesRules.push(t);if(this.currConditionalRuleset=new du,"layer"===t.type){var e="@layer ".concat(t.name);this.addLayer([e])}else{var i=uu(t.rule,ju);this.addRule({selector:t.selector,rule:i}),this.transformLayer(t,t.rule["@layer"]),this.transformMedia(t,t.rule["@media"]),this.transformSupports(t,t.rule["@supports"]),this.transformContainer(t,t.rule["@container"]),this.transformSimplePseudos(t,t.rule),this.transformSelectors(t,t.rule)}this.conditionalRulesets[this.conditionalRulesets.length-1].mergeIfCompatible(this.currConditionalRuleset)||this.conditionalRulesets.push(this.currConditionalRuleset)}else this.propertyRules.push(t);else this.fontFaceRules.push(t.rule)}addConditionalRule(t,e){var i=this.transformVars(this.transformProperties(t.rule)),n=this.transformSelector(t.selector);if(!this.currConditionalRuleset)throw new Error("Couldn't add conditional rule");var s=e[e.length-1],r=e.slice(0,e.length-1);this.currConditionalRuleset.addRule({selector:n,rule:i},s,r)}addRule(t){var e=this.transformVars(this.transformProperties(t.rule)),i=this.transformSelector(t.selector);this.rules.push({selector:i,rule:e})}addLayer(t){var e=t.join(" - ");this.layers.set(e,t)}transformProperties(t){return this.transformContent(this.pixelifyProperties(t))}pixelifyProperties(t){return hu(t,((e,i)=>{"number"!=typeof e||0===e||Su[i]||(t[i]="".concat(e,"px"))})),t}transformVars(t){var{vars:e}=t,i=cu(t,bu);return e?lu(lu({},(function(t){var e,i={};for(var n in t)i[(e=n,sh(e))]=t[n];return i})(e)),i):i}transformContent(t){var{content:e}=t,i=cu(t,wu);return void 0===e?i:lu({content:(Array.isArray(e)?e:[e]).map((t=>t&&(t.includes('"')||t.includes("'")||/^([A-Za-z\-]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)(\s|$)/.test(t))?t:'"'.concat(t,'"')))},i)}transformClassname(t){return".".concat(dh(t,{isIdentifier:!0}))}transformSelector(t){var e=t,i=function(t){e=e.replace(s,(()=>((function(){(()=>{if(gh.length<1)throw new Error("No adapter configured");return gh[gh.length-1]})().markCompositionUsed(...arguments)})(t),t)))};for(var{identifier:n,regex:s}of this.composedClassLists)i(n);if(this.localClassNamesMap.has(e))return this.transformClassname(e);for(var r=this.localClassNamesSearch.search(e),o=e.length,a=r.length-1;a>=0;a--){var[l,[c]]=r[a],h=l-c.length+1;o<=l||(o=h,"."!==e[h-1]&&(e=ku(e,h,l+1,this.transformClassname(c))))}return e}transformSelectors(t,e,i){hu(e.selectors,((e,n)=>{if("local"!==t.type)throw new Error("Selectors are not allowed within ".concat("global"===t.type?'"globalStyle"':'"selectors"'));var s=this.transformSelector(n.replace(RegExp("&","g"),t.selector));((t,e)=>{var i,n=()=>{var i=new RegExp(".".concat((function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})(dh(e,{isIdentifier:!0}))),"g");return t.replace(i,"&")};try{i=_h(t)}catch(s){throw new Error("Invalid selector: ".concat(n()))}i.forEach((t=>{try{for(var i=t.length-1;i>=-1;i--){if(!t[i])throw new Error;var r=t[i];if("child"===r.type||"parent"===r.type||"sibling"===r.type||"adjacent"===r.type||"descendant"===r.type)throw new Error;if("attribute"===r.type&&"class"===r.name&&r.value===e)return}}catch(s){throw new Error(Ih(Ph||(Ph=vh(["\n        Invalid selector: ","\n    \n        Style selectors must target the '&' character (along with any modifiers), e.g. "," or ",".\n        \n        This is to ensure that each style block only affects the styling of a single class.\n        \n        If your selector is targeting another class, you should move it to the style definition for that class, e.g. given we have styles for 'parent' and 'child' elements, instead of adding a selector of ",") to 'parent', you should add "," to 'child').\n        \n        If your selector is targeting something global, use the 'globalStyle' function instead, e.g. if you wanted to write ",", you should instead write 'globalStyle(",", { ... })'\n      "])),n(),"`${parent} &`","`${parent} &:hover`","`& ${child}`","`${parent} &`","`& h1`","`${parent} h1`"))}}))})(s,t.selector);var r={selector:s,rule:uu(e,ju)};i?this.addConditionalRule(r,i):this.addRule(r);var o={type:"selector",selector:s,rule:e};this.transformLayer(o,e["@layer"],i),this.transformSupports(o,e["@supports"],i),this.transformMedia(o,e["@media"],i)}))}transformMedia(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e)for(var[s,r]of(null===(i=this.currConditionalRuleset)||void 0===i||i.addConditionPrecedence(n,Object.keys(e).map((t=>"@media ".concat(t)))),Object.entries(e))){var o="@media ".concat(s);vu(o);var a=[...n,o];this.addConditionalRule({selector:t.selector,rule:uu(r,ju)},a),"local"===t.type&&(this.transformSimplePseudos(t,r,a),this.transformSelectors(t,r,a)),this.transformLayer(t,r["@layer"],a),this.transformSupports(t,r["@supports"],a),this.transformContainer(t,r["@container"],a)}}transformContainer(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e&&(null===(i=this.currConditionalRuleset)||void 0===i||i.addConditionPrecedence(n,Object.keys(e).map((t=>"@container ".concat(t)))),hu(e,((e,i)=>{var s="@container ".concat(i),r=[...n,s];this.addConditionalRule({selector:t.selector,rule:uu(e,ju)},r),"local"===t.type&&(this.transformSimplePseudos(t,e,r),this.transformSelectors(t,e,r)),this.transformLayer(t,e["@layer"],r),this.transformSupports(t,e["@supports"],r),this.transformMedia(t,e["@media"],r)})))}transformLayer(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e&&(null===(i=this.currConditionalRuleset)||void 0===i||i.addConditionPrecedence(n,Object.keys(e).map((t=>"@layer ".concat(t)))),hu(e,((e,i)=>{var s=[...n,"@layer ".concat(i)];this.addLayer(s),this.addConditionalRule({selector:t.selector,rule:uu(e,ju)},s),"local"===t.type&&(this.transformSimplePseudos(t,e,s),this.transformSelectors(t,e,s)),this.transformMedia(t,e["@media"],s),this.transformSupports(t,e["@supports"],s),this.transformContainer(t,e["@container"],s)})))}transformSupports(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e&&(null===(i=this.currConditionalRuleset)||void 0===i||i.addConditionPrecedence(n,Object.keys(e).map((t=>"@supports ".concat(t)))),hu(e,((e,i)=>{var s=[...n,"@supports ".concat(i)];this.addConditionalRule({selector:t.selector,rule:uu(e,ju)},s),"local"===t.type&&(this.transformSimplePseudos(t,e,s),this.transformSelectors(t,e,s)),this.transformLayer(t,e["@layer"],s),this.transformMedia(t,e["@media"],s),this.transformContainer(t,e["@container"],s)})))}transformSimplePseudos(t,e,i){for(var n of Object.keys(e))if(gu[n]){if("local"!==t.type)throw new Error("Simple pseudos are not valid in ".concat("global"===t.type?'"globalStyle"':'"selectors"'));i?this.addConditionalRule({selector:"".concat(t.selector).concat(n),rule:e[n]},i):this.addRule({conditions:i,selector:"".concat(t.selector).concat(n),rule:e[n]})}}toCss(){var t=[];for(var e of this.fontFaceRules)t.push(Eu({"@font-face":e}));for(var i of this.propertyRules)t.push(Eu({["@property ".concat(i.name)]:i.rule}));for(var n of this.keyframesRules)t.push(Eu({["@keyframes ".concat(n.name)]:n.rule}));for(var s of this.layers.values()){var[r,...o]=s.reverse(),a={[r]:xu};for(var l of o)a={[l]:a};t.push(Eu(a))}for(var c of this.rules)t.push(Eu({[c.selector]:c.rule}));for(var h of this.conditionalRulesets)for(var u of h.renderToArray())t.push(Eu(u));return t.filter(Boolean)}}function Eu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[],n=function(n){var s,r=t[n];r&&Array.isArray(r)?i.push(...r.map((t=>Eu({[n]:t},e)))):r&&"object"==typeof r?0===Object.keys(r).length||i.push("".concat(e).concat(n," {\n").concat(Eu(r,e+"  "),"\n").concat(e,"}")):i.push(r===xu?"".concat(e).concat(n,";"):"".concat(e).concat(n.startsWith("--")?n:(s=n,s.replace(/([A-Z])/g,"-$1").replace(/^ms-/,"-ms-").toLowerCase()),": ").concat(r,";"))};for(var s of Object.keys(t))n(s);return i.join("\n")}const Mu="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,_u=new Set,Tu="object"==typeof process&&process?process:{},Au=(t,e,i,n)=>{"function"==typeof Tu.emitWarning?Tu.emitWarning(t,e,i,n):console.error(`[${i}] ${e}: ${t}`)};let Ou=globalThis.AbortController,Nu=globalThis.AbortSignal;if(void 0===Ou){Nu=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},Ou=class{constructor(){e()}signal=new Nu;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==Tu.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,Au("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const Iu=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Lu=t=>Iu(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?zu:null:null;class zu extends Array{constructor(t){super(t),this.fill(0)}}class Ru{heap;length;static#V=!1;static create(t){const e=Lu(t);if(!e)return[];Ru.#V=!0;const i=new Ru(t,e);return Ru.#V=!1,i}constructor(t,e){if(!Ru.#V)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class Pu{#q;#H;#K;#G;#Z;#Y;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#X;#Q;#J;#tt;#et;#it;#nt;#st;#rt;#ot;#at;#lt;#ct;#ht;#ut;#dt;#ft;static unsafeExposeInternals(t){return{starts:t.#ct,ttls:t.#ht,sizes:t.#lt,keyMap:t.#J,keyList:t.#tt,valList:t.#et,next:t.#it,prev:t.#nt,get head(){return t.#st},get tail(){return t.#rt},free:t.#ot,isBackgroundFetch:e=>t.#pt(e),backgroundFetch:(e,i,n,s)=>t.#mt(e,i,n,s),moveToTail:e=>t.#gt(e),indexes:e=>t.#yt(e),rindexes:e=>t.#vt(e),isStale:e=>t.#bt(e)}}get max(){return this.#q}get maxSize(){return this.#H}get calculatedSize(){return this.#Q}get size(){return this.#X}get fetchMethod(){return this.#Z}get memoMethod(){return this.#Y}get dispose(){return this.#K}get disposeAfter(){return this.#G}constructor(t){const{max:e=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:r,updateAgeOnHas:o,allowStale:a,dispose:l,disposeAfter:c,noDisposeOnSet:h,noUpdateTTL:u,maxSize:d=0,maxEntrySize:f=0,sizeCalculation:p,fetchMethod:m,memoMethod:g,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:w,ignoreFetchAbort:x}=t;if(0!==e&&!Iu(e))throw new TypeError("max option must be a nonnegative integer");const S=e?Lu(e):Array;if(!S)throw new Error("invalid max value: "+e);if(this.#q=e,this.#H=d,this.maxEntrySize=f||this.#H,this.sizeCalculation=p,this.sizeCalculation){if(!this.#H&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==g&&"function"!=typeof g)throw new TypeError("memoMethod must be a function if defined");if(this.#Y=g,void 0!==m&&"function"!=typeof m)throw new TypeError("fetchMethod must be a function if specified");if(this.#Z=m,this.#dt=!!m,this.#J=new Map,this.#tt=new Array(e).fill(void 0),this.#et=new Array(e).fill(void 0),this.#it=new S(e),this.#nt=new S(e),this.#st=0,this.#rt=0,this.#ot=Ru.create(e),this.#X=0,this.#Q=0,"function"==typeof l&&(this.#K=l),"function"==typeof c?(this.#G=c,this.#at=[]):(this.#G=void 0,this.#at=void 0),this.#ut=!!this.#K,this.#ft=!!this.#G,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!u,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!x,0!==this.maxEntrySize){if(0!==this.#H&&!Iu(this.#H))throw new TypeError("maxSize must be a positive integer if specified");if(!Iu(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#wt()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!o,this.ttlResolution=Iu(n)||0===n?n:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!Iu(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#xt()}if(0===this.#q&&0===this.ttl&&0===this.#H)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#q&&!this.#H){const t="LRU_CACHE_UNBOUNDED";(t=>!_u.has(t))(t)&&(_u.add(t),Au("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,Pu))}}getRemainingTTL(t){return this.#J.has(t)?1/0:0}#xt(){const t=new zu(this.#q),e=new zu(this.#q);this.#ht=t,this.#ct=e,this.#St=(i,n,s=Mu.now())=>{if(e[i]=0!==n?s:0,t[i]=n,0!==n&&this.ttlAutopurge){const t=setTimeout((()=>{this.#bt(i)&&this.#kt(this.#tt[i],"expire")}),n+1);t.unref&&t.unref()}},this.#jt=i=>{e[i]=0!==t[i]?Mu.now():0},this.#Ct=(s,r)=>{if(t[r]){const o=t[r],a=e[r];if(!o||!a)return;s.ttl=o,s.start=a,s.now=i||n(),s.remainingTTL=o-(s.now-a)}};let i=0;const n=()=>{const t=Mu.now();if(this.ttlResolution>0){i=t;const e=setTimeout((()=>i=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=s=>{const r=this.#J.get(s);if(void 0===r)return 0;const o=t[r],a=e[r];return o&&a?o-((i||n())-a):1/0},this.#bt=s=>{const r=e[s],o=t[s];return!!o&&!!r&&(i||n())-r>o}}#jt=()=>{};#Ct=()=>{};#St=()=>{};#bt=()=>!1;#wt(){const t=new zu(this.#q);this.#Q=0,this.#lt=t,this.#Et=e=>{this.#Q-=t[e],t[e]=0},this.#Mt=(t,e,i,n)=>{if(this.#pt(e))return 0;if(!Iu(i)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(i=n(e,t),!Iu(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return i},this.#_t=(e,i,n)=>{if(t[e]=i,this.#H){const i=this.#H-t[e];for(;this.#Q>i;)this.#Tt(!0)}this.#Q+=t[e],n&&(n.entrySize=i,n.totalCalculatedSize=this.#Q)}}#Et=t=>{};#_t=(t,e,i)=>{};#Mt=(t,e,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#yt({allowStale:t=this.allowStale}={}){if(this.#X)for(let e=this.#rt;this.#At(e)&&(!t&&this.#bt(e)||(yield e),e!==this.#st);)e=this.#nt[e]}*#vt({allowStale:t=this.allowStale}={}){if(this.#X)for(let e=this.#st;this.#At(e)&&(!t&&this.#bt(e)||(yield e),e!==this.#rt);)e=this.#it[e]}#At(t){return void 0!==t&&this.#J.get(this.#tt[t])===t}*entries(){for(const t of this.#yt())void 0===this.#et[t]||void 0===this.#tt[t]||this.#pt(this.#et[t])||(yield[this.#tt[t],this.#et[t]])}*rentries(){for(const t of this.#vt())void 0===this.#et[t]||void 0===this.#tt[t]||this.#pt(this.#et[t])||(yield[this.#tt[t],this.#et[t]])}*keys(){for(const t of this.#yt()){const e=this.#tt[t];void 0===e||this.#pt(this.#et[t])||(yield e)}}*rkeys(){for(const t of this.#vt()){const e=this.#tt[t];void 0===e||this.#pt(this.#et[t])||(yield e)}}*values(){for(const t of this.#yt())void 0===this.#et[t]||this.#pt(this.#et[t])||(yield this.#et[t])}*rvalues(){for(const t of this.#vt())void 0===this.#et[t]||this.#pt(this.#et[t])||(yield this.#et[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const i of this.#yt()){const n=this.#et[i],s=this.#pt(n)?n.__staleWhileFetching:n;if(void 0!==s&&t(s,this.#tt[i],this))return this.get(this.#tt[i],e)}}forEach(t,e=this){for(const i of this.#yt()){const n=this.#et[i],s=this.#pt(n)?n.__staleWhileFetching:n;void 0!==s&&t.call(e,s,this.#tt[i],this)}}rforEach(t,e=this){for(const i of this.#vt()){const n=this.#et[i],s=this.#pt(n)?n.__staleWhileFetching:n;void 0!==s&&t.call(e,s,this.#tt[i],this)}}purgeStale(){let t=!1;for(const e of this.#vt({allowStale:!0}))this.#bt(e)&&(this.#kt(this.#tt[e],"expire"),t=!0);return t}info(t){const e=this.#J.get(t);if(void 0===e)return;const i=this.#et[e],n=this.#pt(i)?i.__staleWhileFetching:i;if(void 0===n)return;const s={value:n};if(this.#ht&&this.#ct){const t=this.#ht[e],i=this.#ct[e];if(t&&i){const e=t-(Mu.now()-i);s.ttl=e,s.start=Date.now()}}return this.#lt&&(s.size=this.#lt[e]),s}dump(){const t=[];for(const e of this.#yt({allowStale:!0})){const i=this.#tt[e],n=this.#et[e],s=this.#pt(n)?n.__staleWhileFetching:n;if(void 0===s||void 0===i)continue;const r={value:s};if(this.#ht&&this.#ct){r.ttl=this.#ht[e];const t=Mu.now()-this.#ct[e];r.start=Math.floor(Date.now()-t)}this.#lt&&(r.size=this.#lt[e]),t.unshift([i,r])}return t}load(t){this.clear();for(const[e,i]of t){if(i.start){const t=Date.now()-i.start;i.start=Mu.now()-t}this.set(e,i.value,i)}}set(t,e,i={}){if(void 0===e)return this.delete(t),this;const{ttl:n=this.ttl,start:s,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=i;let{noUpdateTTL:l=this.noUpdateTTL}=i;const c=this.#Mt(t,e,i.size||0,o);if(this.maxEntrySize&&c>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#kt(t,"set"),this;let h=0===this.#X?void 0:this.#J.get(t);if(void 0===h)h=0===this.#X?this.#rt:0!==this.#ot.length?this.#ot.pop():this.#X===this.#q?this.#Tt(!1):this.#X,this.#tt[h]=t,this.#et[h]=e,this.#J.set(t,h),this.#it[this.#rt]=h,this.#nt[h]=this.#rt,this.#rt=h,this.#X++,this.#_t(h,c,a),a&&(a.set="add"),l=!1;else{this.#gt(h);const i=this.#et[h];if(e!==i){if(this.#dt&&this.#pt(i)){i.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:e}=i;void 0===e||r||(this.#ut&&this.#K?.(e,t,"set"),this.#ft&&this.#at?.push([e,t,"set"]))}else r||(this.#ut&&this.#K?.(i,t,"set"),this.#ft&&this.#at?.push([i,t,"set"]));if(this.#Et(h),this.#_t(h,c,a),this.#et[h]=e,a){a.set="replace";const t=i&&this.#pt(i)?i.__staleWhileFetching:i;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===n||this.#ht||this.#xt(),this.#ht&&(l||this.#St(h,n,s),a&&this.#Ct(a,h)),!r&&this.#ft&&this.#at){const t=this.#at;let e;for(;e=t?.shift();)this.#G?.(...e)}return this}pop(){try{for(;this.#X;){const t=this.#et[this.#st];if(this.#Tt(!0),this.#pt(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#ft&&this.#at){const t=this.#at;let e;for(;e=t?.shift();)this.#G?.(...e)}}}#Tt(t){const e=this.#st,i=this.#tt[e],n=this.#et[e];return this.#dt&&this.#pt(n)?n.__abortController.abort(new Error("evicted")):(this.#ut||this.#ft)&&(this.#ut&&this.#K?.(n,i,"evict"),this.#ft&&this.#at?.push([n,i,"evict"])),this.#Et(e),t&&(this.#tt[e]=void 0,this.#et[e]=void 0,this.#ot.push(e)),1===this.#X?(this.#st=this.#rt=0,this.#ot.length=0):this.#st=this.#it[e],this.#J.delete(i),this.#X--,e}has(t,e={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=e,s=this.#J.get(t);if(void 0!==s){const t=this.#et[s];if(this.#pt(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#bt(s))return i&&this.#jt(s),n&&(n.has="hit",this.#Ct(n,s)),!0;n&&(n.has="stale",this.#Ct(n,s))}else n&&(n.has="miss");return!1}peek(t,e={}){const{allowStale:i=this.allowStale}=e,n=this.#J.get(t);if(void 0===n||!i&&this.#bt(n))return;const s=this.#et[n];return this.#pt(s)?s.__staleWhileFetching:s}#mt(t,e,i,n){const s=void 0===e?void 0:this.#et[e];if(this.#pt(s))return s;const r=new Ou,{signal:o}=i;o?.addEventListener("abort",(()=>r.abort(o.reason)),{signal:r.signal});const a={signal:r.signal,options:i,context:n},l=(n,s=!1)=>{const{aborted:o}=r.signal,l=i.ignoreFetchAbort&&void 0!==n;return i.status&&(o&&!s?(i.status.fetchAborted=!0,i.status.fetchError=r.signal.reason,l&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),!o||l||s?(this.#et[e]===h&&(void 0===n?h.__staleWhileFetching?this.#et[e]=h.__staleWhileFetching:this.#kt(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,n,a.options))),n):c(r.signal.reason)},c=n=>{const{aborted:s}=r.signal,o=s&&i.allowStaleOnFetchAbort,a=o||i.allowStaleOnFetchRejection,l=h;if(this.#et[e]===h&&(!a&&!i.noDeleteOnFetchRejection||void 0===l.__staleWhileFetching?this.#kt(t,"fetch"):o||(this.#et[e]=l.__staleWhileFetching)),a)return i.status&&void 0!==l.__staleWhileFetching&&(i.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw n};i.status&&(i.status.fetchDispatched=!0);const h=new Promise(((e,n)=>{const o=this.#Z?.(t,s,a);o&&o instanceof Promise&&o.then((t=>e(void 0===t?void 0:t)),n),r.signal.addEventListener("abort",(()=>{i.ignoreFetchAbort&&!i.allowStaleOnFetchAbort||(e(void 0),i.allowStaleOnFetchAbort&&(e=t=>l(t,!0)))}))})).then(l,(t=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=t),c(t)))),u=Object.assign(h,{__abortController:r,__staleWhileFetching:s,__returned:void 0});return void 0===e?(this.set(t,u,{...a.options,status:void 0}),e=this.#J.get(t)):this.#et[e]=u,u}#pt(t){if(!this.#dt)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Ou}async fetch(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:m=!1,status:g,signal:y}=e;if(!this.#dt)return g&&(g.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:g});const v={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:r,noDisposeOnSet:o,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:g,signal:y};let b=this.#J.get(t);if(void 0===b){g&&(g.fetch="miss");const e=this.#mt(t,b,v,p);return e.__returned=e}{const e=this.#et[b];if(this.#pt(e)){const t=i&&void 0!==e.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const s=this.#bt(b);if(!m&&!s)return g&&(g.fetch="hit"),this.#gt(b),n&&this.#jt(b),g&&this.#Ct(g,b),e;const r=this.#mt(t,b,v,p),o=void 0!==r.__staleWhileFetching&&i;return g&&(g.fetch=s?"stale":"refresh",o&&s&&(g.returnedStale=!0)),o?r.__staleWhileFetching:r.__returned=r}}async forceFetch(t,e={}){const i=await this.fetch(t,e);if(void 0===i)throw new Error("fetch() returned undefined");return i}memo(t,e={}){const i=this.#Y;if(!i)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:s,...r}=e,o=this.get(t,r);if(!s&&void 0!==o)return o;const a=i(t,o,{options:r,context:n});return this.set(t,a,r),a}get(t,e={}){const{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:r}=e,o=this.#J.get(t);if(void 0!==o){const e=this.#et[o],a=this.#pt(e);return r&&this.#Ct(r,o),this.#bt(o)?(r&&(r.get="stale"),a?(r&&i&&void 0!==e.__staleWhileFetching&&(r.returnedStale=!0),i?e.__staleWhileFetching:void 0):(s||this.#kt(t,"expire"),r&&i&&(r.returnedStale=!0),i?e:void 0)):(r&&(r.get="hit"),a?e.__staleWhileFetching:(this.#gt(o),n&&this.#jt(o),e))}r&&(r.get="miss")}#Ot(t,e){this.#nt[e]=t,this.#it[t]=e}#gt(t){t!==this.#rt&&(t===this.#st?this.#st=this.#it[t]:this.#Ot(this.#nt[t],this.#it[t]),this.#Ot(this.#rt,t),this.#rt=t)}delete(t){return this.#kt(t,"delete")}#kt(t,e){let i=!1;if(0!==this.#X){const n=this.#J.get(t);if(void 0!==n)if(i=!0,1===this.#X)this.#Nt(e);else{this.#Et(n);const i=this.#et[n];if(this.#pt(i)?i.__abortController.abort(new Error("deleted")):(this.#ut||this.#ft)&&(this.#ut&&this.#K?.(i,t,e),this.#ft&&this.#at?.push([i,t,e])),this.#J.delete(t),this.#tt[n]=void 0,this.#et[n]=void 0,n===this.#rt)this.#rt=this.#nt[n];else if(n===this.#st)this.#st=this.#it[n];else{const t=this.#nt[n];this.#it[t]=this.#it[n];const e=this.#it[n];this.#nt[e]=this.#nt[n]}this.#X--,this.#ot.push(n)}}if(this.#ft&&this.#at?.length){const t=this.#at;let e;for(;e=t?.shift();)this.#G?.(...e)}return i}clear(){return this.#Nt("delete")}#Nt(t){for(const e of this.#vt({allowStale:!0})){const i=this.#et[e];if(this.#pt(i))i.__abortController.abort(new Error("deleted"));else{const n=this.#tt[e];this.#ut&&this.#K?.(i,n,t),this.#ft&&this.#at?.push([i,n,t])}}if(this.#J.clear(),this.#et.fill(void 0),this.#tt.fill(void 0),this.#ht&&this.#ct&&(this.#ht.fill(0),this.#ct.fill(0)),this.#lt&&this.#lt.fill(0),this.#st=0,this.#rt=0,this.#ot.length=0,this.#Q=0,this.#X=0,this.#ft&&this.#at){const t=this.#at;let e;for(;e=t?.shift();)this.#G?.(...e)}}}var Du=function(t){return(function(t){return!!t&&"object"==typeof t})(t)&&!(function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||(function(t){return t.$$typeof===$u})(t)})(t)},$u="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Bu(t,e){return!1!==e.clone&&e.isMergeableObject(t)?Vu(Array.isArray(t)?[]:{},t,e):t}function Uu(t,e,i){return t.concat(e).map((function(t){return Bu(t,i)}))}function Fu(t){return Object.keys(t).concat((function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]})(t))}function Wu(t,e){try{return e in t}catch(xx){return!1}}function Vu(t,e,i){(i=i||{}).arrayMerge=i.arrayMerge||Uu,i.isMergeableObject=i.isMergeableObject||Du,i.cloneUnlessOtherwiseSpecified=Bu;var n=Array.isArray(e);return n===Array.isArray(t)?n?i.arrayMerge(t,e,i):(function(t,e,i){var n={};return i.isMergeableObject(t)&&Fu(t).forEach((function(e){n[e]=Bu(t[e],i)})),Fu(e).forEach((function(s){(function(t,e){return Wu(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,s)||(n[s]=Wu(t,s)&&i.isMergeableObject(e[s])?(function(t,e){if(!e.customMerge)return Vu;var i=e.customMerge(t);return"function"==typeof i?i:Vu})(s,i)(t[s],e[s],i):Bu(e[s],i))})),n})(t,e,i):Bu(e,i)}Vu.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return Vu(t,i,e)}),{})};var qu=new Set,Hu=[],Ku=[],Gu={appendCss:t=>{Ku.push(t)},registerClassName:t=>{qu.add(t)},registerComposition:t=>{Hu.push(t)},markCompositionUsed:()=>{},onEndFileScope:t=>{var e=(function(t){var{localClassNames:e,cssObjs:i,composedClassLists:n}=t,s=new Cu(e,n);for(var r of i)s.processCssObj(r);return s.toCss()})({localClassNames:Array.from(qu),composedClassLists:Hu,cssObjs:Ku}).join("\n");(t=>{var{fileScope:e,css:i}=t,n=e.packageName?[e.packageName,e.filePath].join("/"):e.filePath,s=oh[n];if(!s){var r=document.createElement("style");e.packageName&&r.setAttribute("data-package",e.packageName),r.setAttribute("data-file",e.filePath),r.setAttribute("type","text/css"),s=oh[n]=r,document.head.appendChild(r)}s.innerHTML=i})({fileScope:t,css:e}),Ku=[]},getIdentOption:()=>"short"};yh||(t=>{if(!t)throw new Error('No adapter provided when calling "setAdapter"');yh=!0,gh.push(t)})(Gu),new Pu({max:500});var Zu,Yu,Xu=Object.create,Qu=Object.defineProperty,Ju=Object.getOwnPropertyDescriptor,td=Object.getOwnPropertyNames,ed=Object.getPrototypeOf,id=Object.prototype.hasOwnProperty,nd=t=>{throw TypeError(t)},sd=(t,e,i)=>(((t,e)=>{e.has(t)||nd("Cannot read from private field")})(t,e),i?i.call(t):e.get(t)),rd=(t,e,i)=>e.has(t)?nd("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),od=((t,e)=>function(){return t&&(e=(0,t[td(t)[0]])(t=0)),e})({"vanilla-extract-css-ns:src/components/styling/StyleMarker.css.ts.vanilla.css?source=OndoZXJlKCopIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiB2YXIoLS1kYXBwLWtpdC1jb2xvcnMtYm9keSk7CiAgZm9udC1mYW1pbHk6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udEZhbWlseSk7CiAgZm9udC1zaXplOiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1ub3JtYWwpOwogIGZvbnQtc3R5bGU6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udFN0eWxlKTsKICBmb250LXdlaWdodDogdmFyKC0tZGFwcC1raXQtZm9udFdlaWdodHMtbm9ybWFsKTsKICBsaW5lLWhlaWdodDogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1saW5lSGVpZ2h0KTsKICBsZXR0ZXItc3BhY2luZzogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1sZXR0ZXJTcGFjaW5nKTsKfQo6d2hlcmUoYnV0dG9uKSB7CiAgYXBwZWFyYW5jZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7CiAgY29sb3I6IGluaGVyaXQ7CiAgYm9yZGVyOiAwOwogIHBhZGRpbmc6IDA7CiAgbWFyZ2luOiAwOwp9Cjp3aGVyZShhKSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGNvbG9yOiBpbmhlcml0OwogIG91dGxpbmU6IG5vbmU7Cn0KOndoZXJlKG9sLCB1bCkgewogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDA7Cn0KOndoZXJlKGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYpIHsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7CiAgbWFyZ2luOiAwOwp9"(){}}),ad=(Zu={"src/components/styling/StyleMarker.css.ts"(){od()}},function(){return Yu||(0,Zu[td(Zu)[0]])((Yu={exports:{}}).exports,Yu),Yu.exports}),ld={all:{baseScope:"wallet"},connectWallet:cd("connect-wallet"),autoconnectWallet:cd("autoconnect-wallet"),disconnectWallet:cd("disconnect-wallet"),signPersonalMessage:cd("sign-personal-message"),signTransaction:cd("sign-transaction"),signAndExecuteTransaction:cd("sign-and-execute-transaction"),switchAccount:cd("switch-account"),reportTransactionEffects:cd("report-transaction-effects")};function cd(t){return function(e=[]){return[{...ld.all,baseEntity:t},...e]}}var hd=V.createContext(null);function ud(t){const e=V.useContext(hd);if(!e)throw new Error("Could not find WalletContext. Ensure that you have set up the WalletProvider.");return(function(t,e=Eo){const i=Co(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,void 0);return jo(i),i})(e,t)}function dd({mutationKey:t,...e}={}){const i=ud((t=>t.setWalletConnected)),n=ud((t=>t.setConnectionStatus));return no({mutationKey:ld.connectWallet(t),mutationFn:async({wallet:t,accountAddress:e,...s})=>{try{n("connecting");const r=await t.features["standard:connect"].connect(s),o=r.accounts.filter((t=>t.chains.some((t=>"sui"===t.split(":")[0])))),a=(function(t,e){return 0===t.length?null:e?t.find((t=>t.address===e))??t[0]:t[0]})(o,e);return i(t,o,a,r.supportedIntents),{accounts:o}}catch(qa){throw n("disconnected"),qa}},...e})}function fd(t,e){const i=Oo().get().filter((t=>(function(t,e=[]){return[...Go,...e].every((e=>e in t.features))})(t)&&(!e||e(t))));return[...t.map((t=>i.find((e=>e.name===t)))).filter(Boolean),...i.filter((e=>!t.includes(e.name)))]}function pd(t){return t?.id??t?.name}function md(e){return t.jsx("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M7.57 12.262c0 .341.13.629.403.895l5.175 5.059c.204.205.45.307.751.307.609 0 1.101-.485 1.101-1.087 0-.293-.123-.574-.349-.8L10.14 12.27l4.511-4.375A1.13 1.13 0 0 0 15 7.087C15 6.485 14.508 6 13.9 6c-.295 0-.54.103-.752.308l-5.175 5.058c-.28.28-.404.56-.404.896Z",fill:"currentColor"})})}function gd(e){return t.jsx("svg",{width:10,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M9.708.292a.999.999 0 0 0-1.413 0l-3.289 3.29L1.717.291A.999.999 0 0 0 .305 1.705l3.289 3.289-3.29 3.289a.999.999 0 1 0 1.413 1.412l3.29-3.289 3.288 3.29a.999.999 0 0 0 1.413-1.413l-3.29-3.29 3.29-3.288a.999.999 0 0 0 0-1.413Z",fill:"currentColor"})})}var yd="data-dapp-kit",vd=`[${yd}]`,bd={[yd]:""};((t,e,i)=>{i=null!=t?Xu(ed(t)):{},((t,e,i,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let s of td(e))id.call(t,s)||undefined===s||Qu(t,s,{get:()=>e[s],enumerable:!(n=Ju(e,s))||n.enumerable})})(t&&t.__esModule?i:Qu(i,"default",{value:t,enumerable:!0}),t)})(ad());var wd=V.forwardRef((({children:i,...n},s)=>t.jsx(e,{ref:s,...n,...bd,children:i})));wd.displayName="StyleMarker";var xd=ia({defaultClassName:"Heading__1aa835k0",variantClassNames:{size:{sm:"Heading_headingVariants_size_sm__1aa835k1",md:"Heading_headingVariants_size_md__1aa835k2",lg:"Heading_headingVariants_size_lg__1aa835k3",xl:"Heading_headingVariants_size_xl__1aa835k4"},weight:{normal:"Heading_headingVariants_weight_normal__1aa835k5",bold:"Heading_headingVariants_weight_bold__1aa835k6"},truncate:{true:"Heading_headingVariants_truncate_true__1aa835k7"}},defaultVariants:{size:"lg",weight:"bold"},compoundVariants:[]}),Sd=V.forwardRef((({children:i,className:n,asChild:s=!1,as:r="h1",size:o,weight:a,truncate:l,...c},h)=>t.jsx(e,{...c,ref:h,className:tr(xd({size:o,weight:a,truncate:l}),n),children:s?i:t.jsx(r,{children:i})})));Sd.displayName="Heading";var kd=V.forwardRef((({className:i,asChild:n=!1,...s},r)=>t.jsx(n?e:"button",{...s,className:tr("IconButton_container__s6n7bq0",i),ref:r})));kd.displayName="Button";var jd="ConnectModal_selectedViewContainer__gz8z95",Cd="ConnectModal_walletListContainerWithViewSelected__gz8z9a",Ed=ia({defaultClassName:"Button_buttonVariants__x1s81q0",variantClassNames:{variant:{primary:"Button_buttonVariants_variant_primary__x1s81q1",outline:"Button_buttonVariants_variant_outline__x1s81q2"},size:{md:"Button_buttonVariants_size_md__x1s81q3",lg:"Button_buttonVariants_size_lg__x1s81q4"}},defaultVariants:{variant:"primary",size:"md"},compoundVariants:[]}),Md=V.forwardRef((({className:i,variant:n,size:s,asChild:r=!1,...o},a)=>t.jsx(r?e:"button",{...o,className:tr(Ed({variant:n,size:s}),i),ref:a})));Md.displayName="Button";var _d=ia({defaultClassName:"Text__2bv1ur0",variantClassNames:{size:{sm:"Text_textVariants_size_sm__2bv1ur1"},weight:{normal:"Text_textVariants_weight_normal__2bv1ur2",medium:"Text_textVariants_weight_medium__2bv1ur3",bold:"Text_textVariants_weight_bold__2bv1ur4"},color:{muted:"Text_textVariants_color_muted__2bv1ur5",danger:"Text_textVariants_color_danger__2bv1ur6"},mono:{true:"Text_textVariants_mono_true__2bv1ur7"}},defaultVariants:{size:"sm",weight:"normal"},compoundVariants:[]}),Td=V.forwardRef((({children:i,className:n,asChild:s=!1,as:r="div",size:o,weight:a,color:l,mono:c,...h},u)=>t.jsx(e,{...h,ref:u,className:tr(_d({size:o,weight:a,color:l,mono:c}),n),children:s?i:t.jsx(r,{children:i})})));function Ad({selectedWallet:e,hadConnectionError:i,onRetryConnection:n}){return t.jsxs("div",{className:"ConnectionStatus_container__nckm2d0",children:[t.jsx("img",{className:"ConnectionStatus_walletIcon__nckm2d1",src:e.icon,alt:`${e.name} logo`}),t.jsx("div",{className:"ConnectionStatus_title__nckm2d2",children:t.jsxs(Sd,{as:"h2",size:"xl",children:["Opening ",e.name]})}),t.jsx("div",{className:"ConnectionStatus_connectionStatus__nckm2d3",children:t.jsx(Td,i?{color:"danger",children:"Connection failed"}:{color:"muted",children:"Confirm connection in the wallet..."})}),i?t.jsx("div",{className:"ConnectionStatus_retryButtonContainer__nckm2d4",children:t.jsx(Md,{type:"button",variant:"outline",onClick:()=>n(e),children:"Retry Connection"})}):null]})}function Od({title:e,children:i}){return t.jsxs("section",{className:"InfoSection_container__1wtioi70",children:[t.jsx(Sd,{as:"h3",size:"sm",weight:"normal",children:e}),t.jsx(Td,{weight:"medium",color:"muted",children:i})]})}function Nd(){return t.jsxs("div",{className:"GettingStarted_container__1fp07e10",children:[t.jsx(Sd,{as:"h2",children:"Get Started with Sui"}),t.jsxs("div",{className:"GettingStarted_content__1fp07e11",children:[t.jsx(Od,{title:"Install the Sui Wallet Extension",children:"We recommend pinning Sui Wallet to your taskbar for quicker access."}),t.jsx(Od,{title:"Create or Import a Wallet",children:"Be sure to back up your wallet using a secure method. Never share your secret phrase with anyone."}),t.jsx(Od,{title:"Refresh Your Browser",children:"Once you set up your wallet, refresh this window browser to load up the extension."}),t.jsx("div",{className:"GettingStarted_installButtonContainer__1fp07e12",children:t.jsx(Md,{variant:"outline",asChild:!0,children:t.jsx("a",{href:"https://chrome.google.com/webstore/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",target:"_blank",rel:"noreferrer",children:"Install Wallet Extension"})})})]})]})}function Id(){return t.jsxs("div",{className:"WhatIsAWallet_container__1ktpkq90",children:[t.jsx(Sd,{as:"h2",children:"What is a Wallet"}),t.jsxs("div",{className:"WhatIsAWallet_content__1ktpkq91",children:[t.jsx(Od,{title:"Easy Login",children:"No need to create new accounts and passwords for every website. Just connect your wallet and get going."}),t.jsx(Od,{title:"Store your Digital Assets",children:"Send, receive, store, and display your digital assets like NFTs & coins."})]})]})}function Ld(){return ud((t=>t.wallets))}function zd(e){return t.jsxs("svg",{width:28,height:28,fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsx("rect",{width:28,height:28,rx:6,fill:"#6FBCF0"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.942 20.527A6.875 6.875 0 0 0 13.957 24c2.51 0 4.759-1.298 6.015-3.473a6.875 6.875 0 0 0 0-6.945l-5.29-9.164a.837.837 0 0 0-1.45 0l-5.29 9.164a6.875 6.875 0 0 0 0 6.945Zm4.524-11.75 1.128-1.953a.418.418 0 0 1 .725 0l4.34 7.516a5.365 5.365 0 0 1 .449 4.442 4.675 4.675 0 0 0-.223-.73c-.599-1.512-1.954-2.68-4.029-3.47-1.426-.54-2.336-1.336-2.706-2.364-.476-1.326.021-2.77.316-3.44Zm-1.923 3.332L9.255 14.34a5.373 5.373 0 0 0 0 5.43 5.373 5.373 0 0 0 4.702 2.714 5.38 5.38 0 0 0 3.472-1.247c.125-.314.51-1.462.034-2.646-.44-1.093-1.5-1.965-3.15-2.594-1.864-.707-3.076-1.811-3.6-3.28a4.601 4.601 0 0 1-.17-.608Z",fill:"#fff"})]})}Td.displayName="Text";var Rd="WalletListItem_selectedWalletItem__1dqqtqs2";function Pd({name:e,icon:i,onClick:n,isSelected:s=!1}){return t.jsx("li",{className:"WalletListItem_container__1dqqtqs0",children:t.jsxs("button",{className:tr("WalletListItem_walletItem__1dqqtqs1",{[Rd]:s}),type:"button",onClick:n,children:["string"==typeof i?t.jsx("img",{className:"WalletListItem_walletIcon__1dqqtqs3",src:i,alt:`${e} logo`}):i,t.jsx(Sd,{size:"md",truncate:!0,asChild:!0,children:t.jsx("div",{children:e})})]})})}function Dd({selectedWalletName:e,onPlaceholderClick:i,onSelect:n}){const s=Ld();return t.jsx("ul",{className:"WalletList_container__1v2s6cz0",children:s.length>0?s.map((i=>t.jsx(Pd,{name:i.name,icon:i.icon,isSelected:pd(i)===e,onClick:()=>n(i)},pd(i)))):t.jsx(Pd,{name:"Sui Wallet",icon:t.jsx(zd,{}),onClick:i,isSelected:!0})})}function $d({trigger:e,open:c,defaultOpen:h,onOpenChange:u}){const[d,f]=V.useState(c??h),[p,m]=V.useState(),[g,y]=V.useState(),{mutate:v,isError:b}=dd(),w=()=>{y(void 0),m(void 0)},x=t=>{t||w(),f(t),u?.(t)},S=t=>{m("connection-status"),v({wallet:t},{onSuccess:()=>x(!1)})};let k;switch(p){case"what-is-a-wallet":default:k=t.jsx(Id,{});break;case"getting-started":k=t.jsx(Nd,{});break;case"connection-status":k=t.jsx(Ad,{selectedWallet:g,hadConnectionError:b,onRetryConnection:S})}return t.jsxs(i,{open:c??d,onOpenChange:x,children:[t.jsx(n,{asChild:!0,children:e}),t.jsx(s,{children:t.jsx(wd,{children:t.jsx(r,{className:"ConnectModal_overlay__gz8z90",children:t.jsxs(o,{className:"ConnectModal_content__gz8z92","aria-describedby":void 0,children:[t.jsxs("div",{className:tr("ConnectModal_walletListContainer__gz8z99",{[Cd]:!!p}),children:[t.jsxs("div",{className:"ConnectModal_walletListContent__gz8z98",children:[t.jsx(a,{className:"ConnectModal_title__gz8z91",asChild:!0,children:t.jsx(Sd,{as:"h2",children:"Connect a Wallet"})}),t.jsx(Dd,{selectedWalletName:pd(g),onPlaceholderClick:()=>m("getting-started"),onSelect:t=>{pd(g)!==pd(t)&&(y(t),S(t))}})]}),t.jsx("button",{className:"ConnectModal_whatIsAWalletButton__gz8z93",onClick:()=>m("what-is-a-wallet"),type:"button",children:"What is a Wallet?"})]}),t.jsxs("div",{className:tr("ConnectModal_viewContainer__gz8z94",{[jd]:!!p}),children:[t.jsx("div",{className:"ConnectModal_backButtonContainer__gz8z96",children:t.jsx(kd,{type:"button","aria-label":"Back",onClick:()=>w(),children:t.jsx(md,{})})}),k]}),t.jsx(l,{className:"ConnectModal_closeButtonContainer__gz8z97",asChild:!0,children:t.jsx(kd,{type:"button","aria-label":"Close",children:t.jsx(gd,{})})})]})})})})]})}function Bd(){return ud((t=>t.currentAccount))}var Ud=V.createContext(null),Fd={localnet:{url:Tt("localnet")}},Wd=function(t,e){return(function(t){return"object"==typeof t&&null!==t&&!0===t[Xs]})(e)?e:new Qs(e)};function Vd(e){const{onNetworkChange:i,network:n,children:s}=e,r=e.networks??Fd,o=e.createClient??Wd,[a,l]=V.useState(e.network??e.defaultNetwork??Object.keys(r)[0]),c=e.network??a,h=V.useMemo((()=>o(c,r[c])),[o,c,r]),u=V.useMemo((()=>({client:h,networks:r,network:c,config:r[c]instanceof Qs?null:r[c],selectNetwork:t=>{c!==t&&(n||t===a||l(t),i?.(t))}})),[h,r,a,c,n,i]);return t.jsx(Ud.Provider,{value:u,children:s})}function qd(){const t=V.useContext(Ud);if(!t)throw new Error("Could not find SuiClientContext. Ensure that you have set up the SuiClientProvider");return t}function Hd(){return qd().client}function Kd(t,e){return(function(...t){const[e,i,{queryKey:n=[],...s}={}]=t,r=qd();return io({...s,queryKey:[r.network,e,i,...n],queryFn:async()=>await r.client[e](i)})})("resolveNameServiceNames",{address:t,limit:1},{...e,refetchOnWindowFocus:!1,retry:!1,select:t=>t.data.length>0?t.data[0]:null,enabled:!!t&&!1!==e?.enabled})}var Gd=class extends Error{},Zd=class extends Error{},Yd=class extends Error{},Xd=class extends Error{};function Qd(){const t=ud((t=>t.currentWallet)),e=ud((t=>t.connectionStatus)),i=ud((t=>t.supportedIntents));switch(e){case"connecting":return{connectionStatus:e,currentWallet:null,isDisconnected:!1,isConnecting:!0,isConnected:!1,supportedIntents:[]};case"disconnected":return{connectionStatus:e,currentWallet:null,isDisconnected:!0,isConnecting:!1,isConnected:!1,supportedIntents:[]};case"connected":return{connectionStatus:e,currentWallet:t,isDisconnected:!1,isConnecting:!1,isConnected:!0,supportedIntents:i}}}var Jd="AccountDropdownMenu_menuItem__div2ql3";function tf(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e,children:t.jsx("path",{fill:"currentColor",d:"m11.726 5.048-4.73 5.156-1.722-1.879a.72.72 0 0 0-.529-.23.722.722 0 0 0-.525.24.858.858 0 0 0-.22.573.86.86 0 0 0 .211.576l2.255 2.458c.14.153.332.24.53.24.2 0 .391-.087.532-.24l5.261-5.735A.86.86 0 0 0 13 5.63a.858.858 0 0 0-.22-.572.722.722 0 0 0-.525-.24.72.72 0 0 0-.529.23Z"})})}function ef(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e,children:t.jsx("path",{stroke:"#A0B6C3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m4 6 4 4 4-4"})})}function nf({currentAccount:e}){const{mutate:i}=(function({mutationKey:t,...e}={}){const{currentWallet:i}=Qd(),n=ud((t=>t.setWalletDisconnected));return no({mutationKey:ld.disconnectWallet(t),mutationFn:async()=>{if(!i)throw new Gd("No wallet is connected.");try{await(i.features["standard:disconnect"]?.disconnect())}catch(qa){console.error("Failed to disconnect the application from the current wallet.",qa)}n()},...e})})(),{data:n}=Kd(e.label?null:e.address),s=ud((t=>t.accounts));return t.jsxs(c,{modal:!1,children:[t.jsx(wd,{children:t.jsx(h,{asChild:!0,children:t.jsxs(Md,{size:"lg",className:"AccountDropdownMenu_connectedAccount__div2ql0",children:[t.jsx(Td,{mono:!0,weight:"bold",children:e.label??n??ci(e.address)}),t.jsx(ef,{})]})})}),t.jsx(u,{children:t.jsx(wd,{className:"AccountDropdownMenu_menuContainer__div2ql1",children:t.jsxs(d,{className:"AccountDropdownMenu_menuContent__div2ql2",children:[s.map((i=>t.jsx(sf,{account:i,active:e.address===i.address},i.address))),t.jsx(f,{className:"AccountDropdownMenu_separator__div2ql5"}),t.jsx(p,{className:tr(Jd),onSelect:()=>i(),children:"Disconnect"})]})})})]})}function sf({account:e,active:i}){const{mutate:n}=(function({mutationKey:t,...e}={}){const{currentWallet:i}=Qd(),n=ud((t=>t.setAccountSwitched));return no({mutationKey:ld.switchAccount(t),mutationFn:async({account:t})=>{if(!i)throw new Gd("No wallet is connected.");const e=i.accounts.find((e=>e.address===t.address));if(!e)throw new Xd(`No account with address ${t.address} is connected to ${i.name}.`);n(e)},...e})})(),{data:s}=Kd(e.label?null:e.address);return t.jsxs(p,{className:tr(Jd,"AccountDropdownMenu_switchAccountMenuItem__div2ql4"),onSelect:()=>n({account:e}),children:[t.jsx(Td,{mono:!0,children:e.label??s??ci(e.address)}),i?t.jsx(tf,{}):null]})}function rf({connectText:e="Connect Wallet",...i}){const n=Bd();return n?t.jsx(nf,{currentAccount:n}):t.jsx($d,{trigger:t.jsx(wd,{children:t.jsx(Md,{...i,children:e})})})}function of(){const t=new Map;return{getItem:e=>t.get(e),setItem(e,i){t.set(e,i)},removeItem(e){t.delete(e)}}}var af="undefined"!=typeof window&&window.localStorage?localStorage:of(),lf=["sui:signTransaction","sui:signTransactionBlock"],cf=t=>lf.some((e=>t.features[e])),hf=["Sui Wallet",th];function uf(){const{mutateAsync:t}=dd(),e=ud((t=>t.autoConnectEnabled)),i=ud((t=>t.lastConnectedWalletName)),n=ud((t=>t.lastConnectedAccountAddress)),s=Ld(),{isConnected:r}=Qd(),[o,a]=V.useState(!1);V.useLayoutEffect((()=>{a(!0)}),[]);const{data:l,isError:c}=io({queryKey:["@mysten/dapp-kit","autoconnect",{isConnected:r,autoConnectEnabled:e,lastConnectedWalletName:i,lastConnectedAccountAddress:n,walletCount:s.length}],queryFn:async()=>{if(!e)return"disabled";if(!i||!n||r)return"attempted";const o=s.find((t=>pd(t)===i));return o&&await t({wallet:o,accountAddress:n,silent:!0}),"attempted"},enabled:e,persister:void 0,gcTime:0,staleTime:0,networkMode:"always",retry:!1,retryOnMount:!1,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return e?o?r?"attempted":i?c?"attempted":l??"idle":"attempted":"idle":"disabled"}var df="Unsafe Burner Wallet";var ff={blurs:{modalOverlay:"blur(0)"},backgroundColors:{primaryButton:"#F6F7F9",primaryButtonHover:"#F0F2F5",outlineButtonHover:"#F4F4F5",modalOverlay:"rgba(24 36 53 / 20%)",modalPrimary:"white",modalSecondary:"#F7F8F8",iconButton:"transparent",iconButtonHover:"#F0F1F2",dropdownMenu:"#FFFFFF",dropdownMenuSeparator:"#F3F6F8",walletItemSelected:"white",walletItemHover:"#3C424226"},borderColors:{outlineButton:"#E4E4E7"},colors:{primaryButton:"#373737",outlineButton:"#373737",iconButton:"#000000",body:"#182435",bodyMuted:"#767A81",bodyDanger:"#FF794B"},radii:{small:"6px",medium:"8px",large:"12px",xlarge:"16px"},shadows:{primaryButton:"0px 4px 12px rgba(0, 0, 0, 0.1)",walletItemSelected:"0px 2px 6px rgba(0, 0, 0, 0.05)"},fontWeights:{normal:"400",medium:"500",bold:"600"},fontSizes:{small:"14px",medium:"16px",large:"18px",xlarge:"20px"},typography:{fontFamily:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontStyle:"normal",lineHeight:"1.3",letterSpacing:"1"}};function pf({wallets:t,storage:e,storageKey:i,autoConnectEnabled:n}){return so((s=(e,i)=>({autoConnectEnabled:n,wallets:t,accounts:[],currentWallet:null,currentAccount:null,lastConnectedAccountAddress:null,lastConnectedWalletName:null,connectionStatus:"disconnected",supportedIntents:[],setConnectionStatus(t){e((()=>({connectionStatus:t})))},setWalletConnected(t,i,n,s=[]){e((()=>({accounts:i,currentWallet:t,currentAccount:n,lastConnectedWalletName:pd(t),lastConnectedAccountAddress:n?.address,connectionStatus:"connected",supportedIntents:s})))},setWalletDisconnected(){e((()=>({accounts:[],currentWallet:null,currentAccount:null,lastConnectedWalletName:null,lastConnectedAccountAddress:null,connectionStatus:"disconnected",supportedIntents:[]})))},setAccountSwitched(t){e((()=>({currentAccount:t,lastConnectedAccountAddress:t.address})))},setWalletRegistered(t){e((()=>({wallets:t})))},setWalletUnregistered(t,n){n===i().currentWallet?e((()=>({wallets:t,accounts:[],currentWallet:null,currentAccount:null,lastConnectedWalletName:null,lastConnectedAccountAddress:null,connectionStatus:"disconnected",supportedIntents:[]}))):e((()=>({wallets:t})))},updateWalletAccounts(t){const n=i().currentAccount;e((()=>({accounts:t,currentAccount:n&&t.find((({address:t})=>t===n.address))||t[0]})))}}),"getStorage"in(r={name:i,storage:ih((()=>e)),partialize:({lastConnectedWalletName:t,lastConnectedAccountAddress:e})=>({lastConnectedWalletName:t,lastConnectedAccountAddress:e})})||"serialize"in r||"deserialize"in r?((t,e)=>(i,n,s)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:t=>t,version:0,merge:(t,e)=>({...e,...t}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=r.getStorage()}catch(pE){}if(!c)return t(((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),i(...t)}),n,s);const h=nh(r.serialize),u=()=>{const t=r.partialize({...n()});let e;const i=h({state:t,version:r.version}).then((t=>c.setItem(r.name,t))).catch((t=>{e=t}));if(e)throw e;return i},d=s.setState;s.setState=(t,e)=>{d(t,e),u()};const f=t(((...t)=>{i(...t),u()}),n,s);let p;const m=()=>{var t;if(!c)return;o=!1,a.forEach((t=>t(n())));const e=(null==(t=r.onRehydrateStorage)?void 0:t.call(r,n()))||void 0;return nh(c.getItem.bind(c))(r.name).then((t=>{if(t)return r.deserialize(t)})).then((t=>{if(t){if("number"!=typeof t.version||t.version===r.version)return t.state;if(r.migrate)return r.migrate(t.state,t.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((t=>{var e;return p=r.merge(t,null!=(e=n())?e:f),i(p,!0),u()})).then((()=>{null==e||e(p,void 0),o=!0,l.forEach((t=>t(p)))})).catch((t=>{null==e||e(void 0,t)}))};return s.persist={setOptions:t=>{r={...r,...t},t.getStorage&&(c=t.getStorage())},clearStorage:()=>{null==c||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:t=>(a.add(t),()=>{a.delete(t)}),onFinishHydration:t=>(l.add(t),()=>{l.delete(t)})},m(),p||f})(s,r):((t,e)=>(i,n,s)=>{let r={storage:ih((()=>localStorage)),partialize:t=>t,version:0,merge:(t,e)=>({...e,...t}),...e},o=!1;const a=new Set,l=new Set;let c=r.storage;if(!c)return t(((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),i(...t)}),n,s);const h=()=>{const t=r.partialize({...n()});return c.setItem(r.name,{state:t,version:r.version})},u=s.setState;s.setState=(t,e)=>{u(t,e),h()};const d=t(((...t)=>{i(...t),h()}),n,s);let f;s.getInitialState=()=>d;const p=()=>{var t,e;if(!c)return;o=!1,a.forEach((t=>{var e;return t(null!=(e=n())?e:d)}));const s=(null==(e=r.onRehydrateStorage)?void 0:e.call(r,null!=(t=n())?t:d))||void 0;return nh(c.getItem.bind(c))(r.name).then((t=>{if(t){if("number"!=typeof t.version||t.version===r.version)return[!1,t.state];if(r.migrate)return[!0,r.migrate(t.state,t.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]})).then((t=>{var e;const[s,o]=t;if(f=r.merge(o,null!=(e=n())?e:d),i(f,!0),s)return h()})).then((()=>{null==s||s(f,void 0),f=n(),o=!0,l.forEach((t=>t(f)))})).catch((t=>{null==s||s(void 0,t)}))};return s.persist={setOptions:t=>{r={...r,...t},t.storage&&(c=t.storage)},clearStorage:()=>{null==c||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:t=>(a.add(t),()=>{a.delete(t)}),onFinishHydration:t=>(l.add(t),()=>{l.delete(t)})},r.skipHydration||p(),f||d})(s,r)));var s,r}var mf,gf=(mf=(t,e)=>`dapp-kit-${e.join("-")}`,rh({blurs:{modalOverlay:""},backgroundColors:{primaryButton:"",primaryButtonHover:"",outlineButtonHover:"",walletItemHover:"",walletItemSelected:"",modalOverlay:"",modalPrimary:"",modalSecondary:"",iconButton:"",iconButtonHover:"",dropdownMenu:"",dropdownMenuSeparator:""},borderColors:{outlineButton:""},colors:{primaryButton:"",outlineButton:"",body:"",bodyMuted:"",bodyDanger:"",iconButton:""},radii:{small:"",medium:"",large:"",xlarge:""},shadows:{primaryButton:"",walletItemSelected:""},fontWeights:{normal:"",medium:"",bold:""},fontSizes:{small:"",medium:"",large:"",xlarge:""},typography:{fontFamily:"",fontStyle:"",lineHeight:"",letterSpacing:""}},((t,e)=>{var i=mf(0,e),n="string"==typeof i?i.replace(/^\-\-/,""):null;if("string"!=typeof n||n!==dh(n,{isIdentifier:!0}))throw new Error('Invalid variable name for "'.concat(e.join("."),'": ').concat(n));return"var(--".concat(n,")")})));function yf({theme:e}){const i=Array.isArray(e)?e.map((({mediaQuery:t,selector:e,variables:i})=>{const n=vf(i),s=e?`${e} ${n}`:n;return t?`@media ${t}{${s}}`:s})).join(" "):vf(e);return t.jsx("style",{precedence:"default",href:"mysten-dapp-kit-theme",dangerouslySetInnerHTML:{__html:i}})}function vf(t){return`${vd} {${(function(t){return Object.entries((function(t,e){var i={};if("object"==typeof e){var n=t;rh(e,((t,e)=>{if(null!=t){var s=(function(t,e){var i=t;for(var n of e){if(!(n in i))throw new Error("Path ".concat(e.join(" -> ")," does not exist in object"));i=i[n]}return i})(n,e);i[sh(s)]=String(t)}}))}else{var s=t;for(var r in s){var o=s[r];null!=o&&(i[sh(r)]=o)}}return Object.defineProperty(i,"toString",{value:function(){return Object.keys(this).map((t=>"".concat(t,":").concat(this[t]))).join(";")},writable:!1}),i})(gf,t)).map((([t,e])=>`${t}:${e};`)).join("")})(t)}}`}function bf({preferredWallets:e=hf,walletFilter:i=cf,storage:n=af,storageKey:s="sui-dapp-kit:wallet-connection-info",enableUnsafeBurner:r=!1,autoConnect:o=!1,stashedWallet:a,theme:l=ff,children:c}){const h=V.useRef(pf({autoConnectEnabled:o,wallets:fd(e,i),storage:n||of(),storageKey:s}));return t.jsx(hd.Provider,{value:h.current,children:t.jsxs(wf,{preferredWallets:e,walletFilter:i,enableUnsafeBurner:r,stashedWallet:a,children:[l?t.jsx(yf,{theme:l}):null,c]})})}function wf({preferredWallets:t=hf,walletFilter:e=cf,enableUnsafeBurner:i=!1,stashedWallet:n,children:s}){return(function(t,e){const i=ud((t=>t.setWalletRegistered)),n=ud((t=>t.setWalletUnregistered));V.useEffect((()=>{const s=Oo();i(fd(t,e));const r=s.on("register",(()=>{i(fd(t,e))})),o=s.on("unregister",(i=>{n(fd(t,e),i)}));return()=>{r(),o()}}),[t,e,i,n])})(t,e),(function(){const{currentWallet:t}=Qd(),e=ud((t=>t.updateWalletAccounts));V.useEffect((()=>{const i=t?.features["standard:events"].on("change",(({accounts:t})=>{t&&e(t)}));return i}),[t?.features,e])})(),(function(t){const e=uf(),[i,n]=V.useState(null),[s,r]=V.useState(null),{mutate:o}=dd();V.useEffect((()=>{i&&s&&"attempted"===e&&(o({wallet:s,silent:!0}),n(null))}),[i,e,o,s]),V.useLayoutEffect((()=>{if(!t?.name)return;const{wallet:e,unregister:i,addressFromRedirect:s}=(function(t,{origin:e,network:i="mainnet"}={}){const n=Oo();let s=null;try{const t=new URLSearchParams(window.location.search);s=t.get("stashed_address")||t.get("zksend_address")}catch{}const r=new eh({name:t,network:i,origin:e,address:s});return{wallet:r,unregister:n.register(r),addressFromRedirect:s}})(t.name,{origin:t.origin,network:t.network});return s&&(r(e),n(s)),i}),[t?.name,t?.origin,t?.network])})(n),(function(t){const e=Hd();V.useEffect((()=>{if(!t)return;const i=(function(t){var e,i,n,s,r,o,a;const l=Oo();if(l.get().find((t=>t.name===df)))return void console.warn("registerUnsafeBurnerWallet: Unsafe Burner Wallet already registered, skipping duplicate registration.");console.warn("Your application is currently using the unsafe burner wallet. Make sure that this wallet is disabled in production.");const c=new cc,h=new Ho({address:c.getPublicKey().toSuiAddress(),publicKey:c.getPublicKey().toSuiBytes(),chains:["sui:unknown"],features:["sui:signAndExecuteTransactionBlock","sui:signTransactionBlock","sui:signTransaction","sui:signAndExecuteTransaction"]});return e=new WeakMap,i=new WeakMap,n=new WeakMap,s=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,l.register(new class{constructor(){rd(this,e,(()=>()=>{})),rd(this,i,(async()=>({accounts:this.accounts}))),rd(this,n,(async t=>{const{bytes:e,signature:i}=await c.signPersonalMessage(t.message);return{bytes:e,signature:i}})),rd(this,s,(async e=>{const{bytes:i,signature:n}=await e.transactionBlock.sign({client:t,signer:c});return{transactionBlockBytes:i,signature:n}})),rd(this,r,(async e=>{const{bytes:i,signature:n}=await Ys.from(await e.transaction.toJSON()).sign({client:t,signer:c});return e.signal?.throwIfAborted(),{bytes:i,signature:n}})),rd(this,o,(async e=>{const{bytes:i,signature:n}=await e.transactionBlock.sign({client:t,signer:c});return t.executeTransactionBlock({signature:n,transactionBlock:i,options:e.options})})),rd(this,a,(async e=>{const{bytes:i,signature:n}=await Ys.from(await e.transaction.toJSON()).sign({client:t,signer:c});e.signal?.throwIfAborted();const{rawEffects:s,digest:r}=await t.executeTransactionBlock({signature:n,transactionBlock:i,options:{showRawEffects:!0}});return{bytes:i,signature:n,digest:r,effects:zt(new Uint8Array(s))}}))}get version(){return"1.0.0"}get name(){return df}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAJrElEQVR42tWbe2xT1x3H7UxAyD3XrdrSbGXlUbKWsq5rWdVuVOMRSEqSOmnVRZMmJqZNYv1nf3R/jWmVmVrtRRM/YwPd1nVTNcrE3pQCoikrIRAC4VVNY0hlD9ZOo1uCfe3ra9979v0dcy3s5Pper76Oh/STE+495/4+5/c85zqe2f7HAx5vKsS+monJj/CdHi/f4/HWW4f6AwdblmXjTM0NyS+movKtw9v+j6C5gKhyTMTTpA2x15Qwy+Pz75motOGdgKep8WF5ATgVZIt5NeO2wMqD0hfVGNPh3oYaYflsjG0l63PeyLCDnqbsLpZIhaRNFI+Ox+Le5KB0RybK8gDmJOkI07U4i/FhT1NDQl8Me5rUIfaDfELOJ0NsFa/SJQHm1WLsHcDqRWiy9BCL8s0N5t6UWWFVvxplejYm60hC91cNjPtzCTZsAptCVoeLP8PDDQJNCSodap6H+LtE8ZcdkvVkkD38vwDn4/Jvy4EhBhZSvRaUHiTXn31gJJxkUPoClBKKFizM+inhVA2cYIdM4HJouPvoe9s9H+KzDhyGK6KkmIqitBhww2C11rjQL2L4kgUwFxk8yPyzauUA3Pk/353XnA6zKbKCaQ2UlMvJF6W5uF5F8yHfZWZpC9HRmBziaEpm1bpY9XvhxuWJRldC7Mt03WlZwpjnkZUNa2DMG2EaPj9MGd2l2mofd0hQ7ZSopsXckHxVCUp32fXGdD0ZktrgFUmMqwhcWFjp87RArsD+9bn585IRaSHAKgBL3SZwOTRc8BKg7yYoskp5OJDiiPmF2Sj7ox0siYJ7lJA04EqvzZ9B1xSVt6PlW0IxZgUMJdZYAJuWngLQt9IRuZXmoTEkmci8ZtTXTViUKyasA9FRun5d8z6bfw0gYWm9mmCXxZatQgxfC7I2NVpRYQOxKWppLs4mcgn5NcibgL1K40xYp8CYY5TXEpjcb3LAJ0OZyyg3+2nySm6fjEtzkEz+7VBx3RTb+60z9dma7pkvwO2QQL5HzTtAdpKF7euw/HuzfrosBHy+ZsBimzbQshjWTVMDgez53B5MbjcGbr1ZjdUJOM5O0SLXzJ2R+uOA1dMAVoLsm5zb73JSId8t8Aa1LsAJdoTCrCaw6e3NC2DdFMUXWRg173mysJNOSUNskUJ1cOlXa2LhcbgmSszXYSn9hl3KSxTDjrZ2cbbfbWDyumsh9m3e7zCG7a3ETt+gtI7fx6lEOanZKDVvuA2cjYmt5xNOd2Louz3IQ12UZ2Zo3lkb9cDlvSs6m4Vk5Yqlabs0B97wT7PUuCXQz0Bnt9QxMPTW4iwBtmUlY8hFsHJPlzcQ1xuG75CVK1kXofCUGnU9fg1aVD7kfE9MoabtYkcAvIUYS2op3Hc3TTrDQzIAeojugTVLFolWDR6wFPtY0R66n6HltwjCIawnE2ymresk9NtN+pfUUi0mX6RJLfrh9zMRaRPOqubSA8W2MNzC0mHpK7j2ruuw5mYkxl5+2+HGQeg4yNYg7vNg+xMxFsuRMuiTsRJZG3cysAl4D9n4aC4un8L9qUyVvbCyYwFXX1nGUxFf1cCiEQqy75O+TpMwYKNKSPQUqhLyyWLsRbESLctx0YnixgfphRWA8pOPc+N4F9d+eV9V4OlCX/As5w5g+wtGhJGukp5go2R3D7EW9rSDcnGL56YgJHj+8GcFND/Vy41jj/H0jxc6HU/AA2QlR01UlH3D7CmITQnJq4lVWBi1yl8XYEh278c5H++F+Iui7r7bYR8tH/gbqoJN7fVODUhLYVVxzmYCEyOxFg7RUVa0egCHZZ55eRHnp/tKgMna6s/bbMdTxZgMzl9CCcmq7k690OzDfaeSN4QcsREjsQpgXHwyWyfg9K5WE7hc6JqTWjyihObfygOFOkv6i5K5TZx8LsL1sVS4NL8ItiB7sgAcEKcWHfUCVhK3kUVnBNbfXIs4l5xAv5sJs234eTUy93L0Au2otQOw5ORMyfQ6WwexFupVSHowG6uThXfebmlhWojMS3fazmMeGxEI6S2SUti6RAo2vKohVuH3qUG5FWm/PjH8kzutgSH5g58xrVwzIbZkxHf7OFjFC+wrMDXcpOqOKX/g01U/XPvVJyxdWsiJblqYmnZoWbDxAcR56X5WPuh4ewcL5PY9JBRUYjc7fzjG6Uc3mHBWbg23X1BLaFHOSnrw4bWiNAXSEWcWRntIignXTP/oDsfKZX66mMbZAPfhviU1AyYmJLYAMZa/QXjUSeIiixpj3UUFtd884KytjN7EjdGNNMbWwtlf3FvbQ4OQtIoYSzbxqVDLXMTxP8jnnbiyKcaJLvueGLD6kXW2sKZov1tpn7hwXf3ZUvq0K2FXOM7Op/Xgb6PhxsWIErYGVuK3WGXWkkwMMZVCVl5kWtax5A6usgemvnx4DelUcYcFC0eIbcbXKzggeyBjeXIhkftaKknJKLtnuSg7KmKQsrH+1nqbmLWY6w/tBGy/8xrruR5SM99LLIjfT/4ZbNZnQEPssIVb21rKTGRIPDagNoLdFMKgcuLc/TF6Bulk6c7ovg4TU+XvS6FNw1tDfVqH9MOPmBDui0hcK6wz744FlDjNe0m3aVldJYagtI6YbF+3ZGPsQHlN1vbeh8lJofqJ+uo9Zi4wXZxKFiXKGxbHT7pNq71oNg4Qi6MviE0FpRVqjGXILYoJ4tCjdYU1rWeMdPLc/ochj3B9pGNGL4NupGPRlUl35KMVxFLNO6ZnxYlBsUPqoMkbUqAb6VhMVKQ7MVT1dYdrL8hzEAcjpmvjHKphgaFb0ZVJZw7dwVD9q5fkgPTRbBxnzmGfgRLQsMCkG+moQdcp6GzzZsL2MGyllvBNGWM9RqMCk26kI7aBK526csVShZTfzid6FEzeiNAGP92jpCPQEbrW7EW5MbZxAz/fN9lg0IbQaaxrQ83/VoKPb/HqJx67Hw+43CDQBPsX0gm6ufXNvH4vP9rZapzx7+Nn+oxZAjfo2caZ3n350c5W6FSEdQ86sNarj3c/jRV+H42AXsdGRBfPPIlnb/mUtxzWXfALn/PmRze2Gud6E/xsXwYtnlsWN8Tc5/oyxjn/jvyJrlY82xLUfWuPr/TqxzuXQZkIP9M7CXiyuP4B4WmsTnNhzinjrD+WO9bRhmdZWLXe4EKRtV5tpN3Hx3s2G+d79/MJf4qff0LnE72kfFEs4ITQvWLMab8C131dP9n9Je1Yx000Nz2jAf+UJwCBchc3NvGR1Qx71XXY2Ww1Jvx7YalzAPkX9rp5E5Z+pv+ja8bE43uN491b9dHO9Xx4lUxziLn21Nai/wXWM6t9vkvtrwAAAABJRU5ErkJggg=="}get chains(){return Yo}get accounts(){return[h]}get features(){return{"standard:connect":{version:"1.0.0",connect:sd(this,i)},"standard:events":{version:"1.0.0",on:sd(this,e)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:sd(this,n)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:sd(this,s)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:sd(this,o)},"sui:signTransaction":{version:"2.0.0",signTransaction:sd(this,r)},"sui:signAndExecuteTransaction":{version:"2.0.0",signAndExecuteTransaction:sd(this,a)}}}})})(e);return i}),[t,e])})(i),uf(),s}function xf({mutationKey:t,...e}={}){const{currentWallet:i}=Qd(),n=Bd();return no({mutationKey:ld.reportTransactionEffects(t),mutationFn:async({effects:t,chain:e=i?.chains[0],account:s=n})=>{if(!i)throw new Gd("No wallet is connected.");if(!s)throw new Zd("No wallet account is selected to report transaction effects for");const r=i.features["sui:reportTransactionEffects"];if(r)return await r.reportTransactionEffects({effects:Array.isArray(t)?zt(new Uint8Array(t)):t,account:s,chain:e??i?.chains[0]})},...e})}function Sf({mutationKey:t,execute:e,...i}={}){const{currentWallet:n,supportedIntents:s}=Qd(),r=Bd(),o=Hd(),{mutate:a}=xf(),l=e??(async({bytes:t,signature:e})=>{const{digest:i,rawEffects:n}=await o.executeTransactionBlock({transactionBlock:t,signature:e,options:{showRawEffects:!0}});return{digest:i,rawEffects:n,effects:zt(new Uint8Array(n)),bytes:t,signature:e}});return no({mutationKey:ld.signAndExecuteTransaction(t),mutationFn:async({transaction:t,...e})=>{if(!n)throw new Gd("No wallet is connected.");const i=e.account??r;if(!i)throw new Zd("No wallet account is selected to sign the transaction with.");const c=e.chain??i?.chains[0];if(!n.features["sui:signTransaction"]&&!n.features["sui:signTransactionBlock"])throw new Yd("This wallet doesn't support the `signTransaction` feature.");const{signature:h,bytes:u}=await Ko(n,{...e,transaction:{toJSON:async()=>"string"==typeof t?t:await t.toJSON({supportedIntents:s,client:o})},account:i,chain:e.chain??i.chains[0]}),d=await l({bytes:u,signature:h});let f;if("effects"in d&&d.effects?.bcs)f=d.effects.bcs;else{if(!("rawEffects"in d))throw new Error("Could not parse effects from transaction result.");f=zt(new Uint8Array(d.rawEffects))}return a({effects:f,account:i,chain:c}),d},...i})}var kf={};Object.defineProperty(kf,"__esModule",{value:!0}),kf.parse=function(t,e){const i=new Tf,n=t.length;if(n<2)return i;const s=e?.decode||Nf;let r=0;do{const e=t.indexOf("=",r);if(-1===e)break;const o=t.indexOf(";",r),a=-1===o?n:o;if(e>a){r=t.lastIndexOf(";",e-1)+1;continue}const l=Af(t,r,e),c=Of(t,e,l),h=t.slice(l,c);if(void 0===i[h]){let n=Af(t,e+1,a),r=Of(t,a,n);const o=s(t.slice(n,r));i[h]=o}r=a+1}while(r<n);return i},kf.serialize=function(t,e,i){const n=i?.encode||encodeURIComponent;if(!jf.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=n(e);if(!Cf.test(s))throw new TypeError(`argument val is invalid: ${e}`);let r=t+"="+s;if(!i)return r;if(void 0!==i.maxAge){if(!Number.isInteger(i.maxAge))throw new TypeError(`option maxAge is invalid: ${i.maxAge}`);r+="; Max-Age="+i.maxAge}if(i.domain){if(!Ef.test(i.domain))throw new TypeError(`option domain is invalid: ${i.domain}`);r+="; Domain="+i.domain}if(i.path){if(!Mf.test(i.path))throw new TypeError(`option path is invalid: ${i.path}`);r+="; Path="+i.path}if(i.expires){if(!(function(t){return"[object Date]"===_f.call(t)})(i.expires)||!Number.isFinite(i.expires.valueOf()))throw new TypeError(`option expires is invalid: ${i.expires}`);r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.partitioned&&(r+="; Partitioned"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():void 0){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${i.priority}`)}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"none":r+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${i.sameSite}`)}return r};const jf=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Cf=/^[\u0021-\u003A\u003C-\u007E]*$/,Ef=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Mf=/^[\u0020-\u003A\u003D-\u007E]*$/,_f=Object.prototype.toString,Tf=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function Af(t,e,i){do{const i=t.charCodeAt(e);if(32!==i&&9!==i)return e}while(++e<i);return i}function Of(t,e,i){for(;e>i;){const i=t.charCodeAt(--e);if(32!==i&&9!==i)return e+1}return i}function Nf(t){if(-1===t.indexOf("%"))return t;try{return decodeURIComponent(t)}catch(mx){return t}}var If="popstate";function Lf(t,e){if(!1===t||null==t)throw new Error(e)}function zf(t,e){if(!t){"undefined"!=typeof console&&console.warn(e);try{throw new Error(e)}catch(mx){}}}function Rf(t,e){return{usr:t.state,key:t.key,idx:e}}function Pf(t,e,i=null,n){return{pathname:"string"==typeof t?t:t.pathname,search:"",hash:"",..."string"==typeof e?$f(e):e,state:i,key:e&&e.key||n||Math.random().toString(36).substring(2,10)}}function Df({pathname:t="/",search:e="",hash:i=""}){return e&&"?"!==e&&(t+="?"===e.charAt(0)?e:"?"+e),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function $f(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}var Bf=new Set(["lazy","caseSensitive","path","id","index","children"]);function Uf(t,e,i=[],n={}){return t.map(((t,s)=>{let r=[...i,String(s)],o="string"==typeof t.id?t.id:r.join("-");if(Lf(!0!==t.index||!t.children,"Cannot specify children on an index route"),Lf(!n[o],`Found a route id collision on id "${o}".  Route id's must be globally unique within Data Router usages`),(function(t){return!0===t.index})(t)){let i={...t,...e(t),id:o};return n[o]=i,i}{let i={...t,...e(t),id:o,children:void 0};return n[o]=i,t.children&&(i.children=Uf(t.children,e,r,n)),i}}))}function Ff(t,e,i="/"){return Wf(t,e,i,!1)}function Wf(t,e,i,n){let s=np(("string"==typeof e?$f(e):e).pathname||"/",i);if(null==s)return null;let r=Vf(t);!(function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:(function(t,e){let i=t.length===e.length&&t.slice(0,-1).every(((t,i)=>t===e[i]));return i?t[t.length-1]-e[e.length-1]:0})(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))})(r);let o=null;for(let a=0;null==o&&a<r.length;++a){let t=ip(s);o=tp(r[a],t,n)}return o}function Vf(t,e=[],i=[],n=""){let s=(t,s,r)=>{let o={relativePath:void 0===r?t.path||"":r,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};o.relativePath.startsWith("/")&&(Lf(o.relativePath.startsWith(n),`Absolute route path "${o.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(n.length));let a=lp([n,o.relativePath]),l=i.concat(o);t.children&&t.children.length>0&&(Lf(!0!==t.index,`Index routes must not have child routes. Please remove all child routes from route path "${a}".`),Vf(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:Jf(a,t.index),routesMeta:l})};return t.forEach(((t,e)=>{if(""!==t.path&&t.path?.includes("?"))for(let i of qf(t.path))s(t,e,i);else s(t,e)})),e}function qf(t){let e=t.split("/");if(0===e.length)return[];let[i,...n]=e,s=i.endsWith("?"),r=i.replace(/\?$/,"");if(0===n.length)return s?[r,""]:[r];let o=qf(n.join("/")),a=[];return a.push(...o.map((t=>""===t?r:[r,t].join("/")))),s&&a.push(...o),a.map((e=>t.startsWith("/")&&""===e?"/":e))}var Hf=/^:[\w-]+$/,Kf=3,Gf=2,Zf=1,Yf=10,Xf=-2,Qf=t=>"*"===t;function Jf(t,e){let i=t.split("/"),n=i.length;return i.some(Qf)&&(n+=Xf),e&&(n+=Gf),i.filter((t=>!Qf(t))).reduce(((t,e)=>t+(Hf.test(e)?Kf:""===e?Zf:Yf)),n)}function tp(t,e,i=!1){let{routesMeta:n}=t,s={},r="/",o=[];for(let a=0;a<n.length;++a){let t=n[a],l=a===n.length-1,c="/"===r?e:e.slice(r.length)||"/",h=ep({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},c),u=t.route;if(!h&&l&&i&&!n[n.length-1].route.index&&(h=ep({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},c)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:lp([r,h.pathname]),pathnameBase:cp(lp([r,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(r=lp([r,h.pathnameBase]))}return o}function ep(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[i,n]=(function(t,e=!1,i=!0){zf("*"===t||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,i)=>(n.push({paramName:e,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));return t.endsWith("*")?(n.push({paramName:"*"}),s+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":""!==t&&"/"!==t&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]})(t.path,t.caseSensitive,t.end),s=e.match(i);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1),l=n.reduce(((t,{paramName:e,isOptional:i},n)=>{"*"===e&&(o=r.slice(0,r.length-(a[n]||"").length).replace(/(.)\/+$/,"$1"));const s=a[n];return t[e]=i&&!s?void 0:(s||"").replace(/%2F/g,"/"),t}),{});return{params:l,pathname:r,pathnameBase:o,pattern:t}}function ip(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(qa){return zf(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${qa}).`),t}}function np(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,n=t.charAt(i);return n&&"/"!==n?null:t.slice(i)||"/"}function sp(t,e,i,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rp(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function op(t){let e=rp(t);return e.map(((t,i)=>i===e.length-1?t.pathname:t.pathnameBase))}function ap(t,e,i,n=!1){let s;"string"==typeof t?s=$f(t):(s={...t},Lf(!s.pathname||!s.pathname.includes("?"),sp("?","pathname","search",s)),Lf(!s.pathname||!s.pathname.includes("#"),sp("#","pathname","hash",s)),Lf(!s.search||!s.search.includes("#"),sp("#","search","hash",s)));let r,o=""===t||""===s.pathname,a=o?"/":s.pathname;if(null==a)r=i;else{let t=e.length-1;if(!n&&a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;s.pathname=e.join("/")}r=t>=0?e[t]:"/"}let l=(function(t,e="/"){let{pathname:i,search:n="",hash:s=""}="string"==typeof t?$f(t):t,r=i?i.startsWith("/")?i:(function(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?i.length>1&&i.pop():"."!==t&&i.push(t)})),i.length>1?i.join("/"):"/"})(i,e):e;return{pathname:r,search:hp(n),hash:up(s)}})(s,r),c=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&i.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}var lp=t=>t.join("/").replace(/\/\/+/g,"/"),cp=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hp=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",up=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"",dp=class{constructor(t,e,i,n=!1){this.status=t,this.statusText=e||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function fp(t){return null!=t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"boolean"==typeof t.internal&&"data"in t}var pp=["POST","PUT","PATCH","DELETE"],mp=new Set(pp),gp=["GET",...pp],yp=new Set(gp),vp=new Set([301,302,303,307,308]),bp=new Set([307,308]),wp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xp={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},kp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jp=t=>({hasErrorBoundary:Boolean(t.hasErrorBoundary)}),Cp="remix-router-transitions",Ep=Symbol("ResetLoaderData");function Mp(t,e,i,n,s,r){let o,a;if(s){o=[];for(let t of e)if(o.push(t),t.route.id===s){a=t;break}}else o=e,a=e[e.length-1];let l=ap(n||".",op(o),np(t.pathname,i)||t.pathname,"path"===r);if(null==n&&(l.search=t.search,l.hash=t.hash),(null==n||""===n||"."===n)&&a){let t=nm(l.search);if(a.route.index&&!t)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&t){let t=new URLSearchParams(l.search),e=t.getAll("index");t.delete("index"),e.filter((t=>t)).forEach((e=>t.append("index",e)));let i=t.toString();l.search=i?`?${i}`:""}}return"/"!==i&&(l.pathname="/"===l.pathname?i:lp([i,l.pathname])),Df(l)}function _p(t,e,i){if(!i||!(function(t){return null!=t&&("formData"in t&&null!=t.formData||"body"in t&&void 0!==t.body)})(i))return{path:e};if(i.formMethod&&!yp.has(i.formMethod.toUpperCase()))return{path:e,error:Gp(405,{method:i.formMethod})};let n,s,r=()=>({path:e,error:Gp(400,{type:"invalid-body"})}),o=(i.formMethod||"get").toUpperCase(),a=Yp(e);if(void 0!==i.body){if("text/plain"===i.formEncType){if(!im(o))return r();let t="string"==typeof i.body?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce(((t,[e,i])=>`${t}${e}=${i}\n`),""):String(i.body);return{path:e,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:t}}}if("application/json"===i.formEncType){if(!im(o))return r();try{let t="string"==typeof i.body?JSON.parse(i.body):i.body;return{path:e,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:t,text:void 0}}}catch(mx){return r()}}}if(Lf("function"==typeof FormData,"FormData is not available in this environment"),i.formData)n=Up(i.formData),s=i.formData;else if(i.body instanceof FormData)n=Up(i.body),s=i.body;else if(i.body instanceof URLSearchParams)n=i.body,s=Fp(n);else if(null==i.body)n=new URLSearchParams,s=new FormData;else try{n=new URLSearchParams(i.body),s=Fp(n)}catch(mx){return r()}let l={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(im(l.formMethod))return{path:e,submission:l};let c=$f(e);return t&&c.search&&nm(c.search)&&n.append("index",""),c.search=`?${n}`,{path:Df(c),submission:l}}function Tp(t,e,i=!1){let n=t.findIndex((t=>t.route.id===e));return n>=0?t.slice(0,i?n+1:n):t}function Ap(t,e,i,n,s,r,o,a,l,c,h,u,d,f){let p=f?Qp(f[1])?f[1].error:f[1].data:void 0,m=t.createURL(e.location),g=t.createURL(s),y=i;r&&e.errors?y=Tp(i,Object.keys(e.errors)[0],!0):f&&Qp(f[1])&&(y=Tp(i,f[0]));let v=f?f[1].statusCode:void 0,b=v&&v>=400,w=y.filter(((t,i)=>{let{route:s}=t;if(s.lazy)return!0;if(null==s.loader)return!1;if(r)return Op(s,e.loaderData,e.errors);if((function(t,e,i){let n=!e||i.route.id!==e.route.id,s=!t.hasOwnProperty(i.route.id);return n||s})(e.loaderData,e.matches[i],t))return!0;let a=e.matches[i],l=t;return Ip(t,{currentUrl:m,currentParams:a.params,nextUrl:g,nextParams:l.params,...n,actionResult:p,actionStatus:v,defaultShouldRevalidate:!b&&(o||m.pathname+m.search===g.pathname+g.search||m.search!==g.search||Np(a,l))})})),x=[];return c.forEach(((t,s)=>{if(r||!i.some((e=>e.route.id===t.routeId))||l.has(s))return;let c=Ff(u,t.path,d);if(!c)return void x.push({key:s,routeId:t.routeId,path:t.path,matches:null,match:null,controller:null});let f=e.fetchers.get(s),y=sm(c,t.path),w=!1;h.has(s)?w=!1:a.has(s)?(a.delete(s),w=!0):w=f&&"idle"!==f.state&&void 0===f.data?o:Ip(y,{currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:i[i.length-1].params,...n,actionResult:p,actionStatus:v,defaultShouldRevalidate:!b&&o}),w&&x.push({key:s,routeId:t.routeId,path:t.path,matches:c,match:y,controller:new AbortController})})),[w,x]}function Op(t,e,i){if(t.lazy)return!0;if(!t.loader)return!1;let n=null!=e&&void 0!==e[t.id],s=null!=i&&void 0!==i[t.id];return!(!n&&s)&&("function"==typeof t.loader&&!0===t.loader.hydrate||!n&&!s)}function Np(t,e){let i=t.route.path;return t.pathname!==e.pathname||null!=i&&i.endsWith("*")&&t.params["*"]!==e.params["*"]}function Ip(t,e){if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate(e);if("boolean"==typeof i)return i}return e.defaultShouldRevalidate}function Lp(t,e,i,n,s){let r;if(t){let e=n[t];Lf(e,`No route found to patch children into: routeId = ${t}`),e.children||(e.children=[]),r=e.children}else r=i;let o=Uf(e.filter((t=>!r.some((e=>zp(t,e))))),s,[t||"_","patch",String(r?.length||"0")],n);r.push(...o)}function zp(t,e){return"id"in t&&"id"in e&&t.id===e.id||t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive&&(!(t.children&&0!==t.children.length||e.children&&0!==e.children.length)||t.children.every(((t,i)=>e.children?.some((e=>zp(t,e))))))}async function Rp({matches:t}){let e=t.filter((t=>t.shouldLoad)),i=await Promise.all(e.map((t=>t.resolve())));return i.reduce(((t,i,n)=>Object.assign(t,{[e[n].route.id]:i})),{})}async function Pp(t){let{result:e,type:i}=t;if(em(e)){let t;try{let i=e.headers.get("Content-Type");t=i&&/\bapplication\/json\b/.test(i)?null==e.body?null:await e.json():await e.text()}catch(mx){return{type:"error",error:mx}}return"error"===i?{type:"error",error:new dp(e.status,e.statusText,t),statusCode:e.status,headers:e.headers}:{type:"data",data:t,statusCode:e.status,headers:e.headers}}if("error"===i){if(tm(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:e.init?.status};e=new dp(e.init?.status||500,void 0,e.data)}return{type:"error",error:e,statusCode:fp(e)?e.status:void 0}}return tm(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function Dp(t,e,i,n,s){let r=t.headers.get("Location");if(Lf(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!kp.test(r)){let o=n.slice(0,n.findIndex((t=>t.route.id===i))+1);r=Mp(new URL(e.url),o,s,r),t.headers.set("Location",r)}return t}function $p(t,e,i){if(kp.test(t)){let n=t,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),r=null!=np(s.pathname,i);if(s.origin===e.origin&&r)return s.pathname+s.search+s.hash}return t}function Bp(t,e,i,n){let s=t.createURL(Yp(e)).toString(),r={signal:i};if(n&&im(n.formMethod)){let{formMethod:t,formEncType:e}=n;r.method=t.toUpperCase(),"application/json"===e?(r.headers=new Headers({"Content-Type":e}),r.body=JSON.stringify(n.json)):r.body="text/plain"===e?n.text:"application/x-www-form-urlencoded"===e&&n.formData?Up(n.formData):n.formData}return new Request(s,r)}function Up(t){let e=new URLSearchParams;for(let[i,n]of t.entries())e.append(i,"string"==typeof n?n:n.name);return e}function Fp(t){let e=new FormData;for(let[i,n]of t.entries())e.append(i,n);return e}function Wp(t,e,i,n,s,r){let{loaderData:o,errors:a}=(function(t,e,i,n=!1,s=!1){let r,o={},a=null,l=!1,c={},h=i&&Qp(i[1])?i[1].error:void 0;return t.forEach((i=>{if(!(i.route.id in e))return;let u=i.route.id,d=e[u];if(Lf(!Jp(d),"Cannot handle redirect results in processLoaderData"),Qp(d)){let e=d.error;if(void 0!==h&&(e=h,h=void 0),a=a||{},s)a[u]=e;else{let i=Hp(t,u);null==a[i.route.id]&&(a[i.route.id]=e)}n||(o[u]=Ep),l||(l=!0,r=fp(d.error)?d.error.status:500),d.headers&&(c[u]=d.headers)}else o[u]=d.data,d.statusCode&&200!==d.statusCode&&!l&&(r=d.statusCode),d.headers&&(c[u]=d.headers)})),void 0!==h&&i&&(a={[i[0]]:h},o[i[0]]=void 0),{loaderData:o,errors:a,statusCode:r||200,loaderHeaders:c}})(e,i,n);return s.forEach((e=>{let{key:i,match:n,controller:s}=e,o=r[i];if(Lf(o,"Did not find corresponding fetcher result"),!s||!s.signal.aborted)if(Qp(o)){let e=Hp(t.matches,n?.route.id);a&&a[e.route.id]||(a={...a,[e.route.id]:o.error}),t.fetchers.delete(i)}else if(Jp(o))Lf(!1,"Unhandled fetcher revalidation redirect");else{let e=lm(o.data);t.fetchers.set(i,e)}})),{loaderData:o,errors:a}}function Vp(t,e,i,n){let s=Object.entries(e).filter((([,t])=>t!==Ep)).reduce(((t,[e,i])=>(t[e]=i,t)),{});for(let r of i){let i=r.route.id;if(!e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&r.route.loader&&(s[i]=t[i]),n&&n.hasOwnProperty(i))break}return s}function qp(t){return t?Qp(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Hp(t,e){let i=e?t.slice(0,t.findIndex((t=>t.route.id===e))+1):[...t];return i.reverse().find((t=>!0===t.route.hasErrorBoundary))||t[0]}function Kp(t){let e=1===t.length?t[0]:t.find((t=>t.index||!t.path||"/"===t.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Gp(t,{pathname:e,routeId:i,method:n,type:s}={}){let r="Unknown Server Error",o="Unknown @remix-run/router error";return 400===t?(r="Bad Request",n&&e&&i?o=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:"invalid-body"===s&&(o="Unable to encode submission body")):403===t?(r="Forbidden",o=`Route "${i}" does not match URL "${e}"`):404===t?(r="Not Found",o=`No route matches URL "${e}"`):405===t&&(r="Method Not Allowed",n&&e&&i?o=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new dp(t||500,r,new Error(o),!0)}function Zp(t){let e=Object.entries(t);for(let i=e.length-1;i>=0;i--){let[t,n]=e[i];if(Jp(n))return{key:t,result:n}}}function Yp(t){return Df({..."string"==typeof t?$f(t):t,hash:""})}function Xp(t){return em(t.result)&&vp.has(t.result.status)}function Qp(t){return"error"===t.type}function Jp(t){return"redirect"===(t&&t.type)}function tm(t){return"object"==typeof t&&null!=t&&"type"in t&&"data"in t&&"init"in t&&"DataWithResponseInit"===t.type}function em(t){return null!=t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"object"==typeof t.headers&&void 0!==t.body}function im(t){return mp.has(t.toUpperCase())}function nm(t){return new URLSearchParams(t).getAll("index").some((t=>""===t))}function sm(t,e){let i="string"==typeof e?$f(e).search:e.search;if(t[t.length-1].route.index&&nm(i||""))return t[t.length-1];let n=rp(t);return n[n.length-1]}function rm(t){let{formMethod:e,formAction:i,formEncType:n,text:s,formData:r,json:o}=t;if(e&&i&&n)return null!=s?{formMethod:e,formAction:i,formEncType:n,formData:void 0,json:void 0,text:s}:null!=r?{formMethod:e,formAction:i,formEncType:n,formData:r,json:void 0,text:void 0}:void 0!==o?{formMethod:e,formAction:i,formEncType:n,formData:void 0,json:o,text:void 0}:void 0}function om(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function am(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function lm(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}var cm=V.createContext(null);cm.displayName="DataRouter";var hm=V.createContext(null);hm.displayName="DataRouterState";var um=V.createContext({isTransitioning:!1});um.displayName="ViewTransition";var dm=V.createContext(new Map);dm.displayName="Fetchers",V.createContext(null).displayName="Await";var fm=V.createContext(null);fm.displayName="Navigation";var pm=V.createContext(null);pm.displayName="Location";var mm=V.createContext({outlet:null,matches:[],isDataRoute:!1});mm.displayName="Route";var gm=V.createContext(null);function ym(){return null!=V.useContext(pm)}function vm(){return Lf(ym(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(pm).location}gm.displayName="RouteError";var bm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wm(t){V.useContext(fm).static||V.useLayoutEffect(t)}function xm(){let{isDataRoute:t}=V.useContext(mm);return t?(function(){let{router:t}=(function(){let t=V.useContext(cm);return Lf(t,_m("useNavigate")),t})(),e=Tm("useNavigate"),i=V.useRef(!1);wm((()=>{i.current=!0}));let n=V.useCallback((async(n,s={})=>{zf(i.current,bm),i.current&&("number"==typeof n?t.navigate(n):await t.navigate(n,{fromRouteId:e,...s}))}),[t,e]);return n})():(function(){Lf(ym(),"useNavigate() may be used only in the context of a <Router> component.");let t=V.useContext(cm),{basename:e,navigator:i}=V.useContext(fm),{matches:n}=V.useContext(mm),{pathname:s}=vm(),r=JSON.stringify(op(n)),o=V.useRef(!1);wm((()=>{o.current=!0}));let a=V.useCallback(((n,a={})=>{if(zf(o.current,bm),!o.current)return;if("number"==typeof n)return void i.go(n);let l=ap(n,JSON.parse(r),s,"path"===a.relative);null==t&&"/"!==e&&(l.pathname="/"===l.pathname?e:lp([e,l.pathname])),(a.replace?i.replace:i.push)(l,a.state,a)}),[e,i,r,s,t]);return a})()}var Sm=V.createContext(null);function km(t,{relative:e}={}){let{matches:i}=V.useContext(mm),{pathname:n}=vm(),s=JSON.stringify(op(i));return V.useMemo((()=>ap(t,JSON.parse(s),n,"path"===e)),[t,s,n,e])}function jm(){let t=(function(){let t=V.useContext(gm),e=(function(){let t=V.useContext(hm);return Lf(t,_m("useRouteError")),t})(),i=Tm("useRouteError");return void 0!==t?t:e.errors?.[i]})(),e=fp(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=V.createElement(V.Fragment,null,V.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:r},"ErrorBoundary")," or"," ",V.createElement("code",{style:r},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),i?V.createElement("pre",{style:s},i):null,o)}var Cm=V.createElement(jm,null),Em=class extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?V.createElement(mm.Provider,{value:this.props.routeContext},V.createElement(gm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Mm({routeContext:t,match:e,children:i}){let n=V.useContext(cm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(mm.Provider,{value:t},i)}function _m(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tm(t){let e=(function(t){let e=V.useContext(mm);return Lf(e,_m(t)),e})(t),i=e.matches[e.matches.length-1];return Lf(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}var Am={};function Om(t,e,i){e||Am[t]||(Am[t]=!0,zf(!1,i))}var Nm={};function Im(t,e){t||Nm[e]||(Nm[e]=!0,console.warn(e))}var Lm=class{constructor(){this.status="pending",this.promise=new Promise(((t,e)=>{this.resolve=e=>{"pending"===this.status&&(this.status="resolved",t(e))},this.reject=t=>{"pending"===this.status&&(this.status="rejected",e(t))}}))}};function zm({router:t,flushSync:e}){let[i,n]=V.useState(t.state),[s,r]=V.useState(),[o,a]=V.useState({isTransitioning:!1}),[l,c]=V.useState(),[h,u]=V.useState(),[d,f]=V.useState(),p=V.useRef(new Map),m=V.useCallback(((i,{deletedFetchers:s,flushSync:o,viewTransitionOpts:d})=>{s.forEach((t=>p.current.delete(t))),i.fetchers.forEach(((t,e)=>{void 0!==t.data&&p.current.set(e,t.data)})),Im(!1===o||null!=e,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let m=null!=t.window&&null!=t.window.document&&"function"==typeof t.window.document.startViewTransition;if(Im(null==d||m,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),d&&m){if(e&&o){e((()=>{h&&(l&&l.resolve(),h.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:d.currentLocation,nextLocation:d.nextLocation})}));let s=t.window.document.startViewTransition((()=>{e((()=>n(i)))}));return s.finished.finally((()=>{e((()=>{c(void 0),u(void 0),r(void 0),a({isTransitioning:!1})}))})),void e((()=>u(s)))}h?(l&&l.resolve(),h.skipTransition(),f({state:i,currentLocation:d.currentLocation,nextLocation:d.nextLocation})):(r(i),a({isTransitioning:!0,flushSync:!1,currentLocation:d.currentLocation,nextLocation:d.nextLocation}))}else e&&o?e((()=>n(i))):V.startTransition((()=>n(i)))}),[t.window,e,h,l]);V.useLayoutEffect((()=>t.subscribe(m)),[t,m]),V.useEffect((()=>{o.isTransitioning&&!o.flushSync&&c(new Lm)}),[o]),V.useEffect((()=>{if(l&&s&&t.window){let e=s,i=l.promise,o=t.window.document.startViewTransition((async()=>{V.startTransition((()=>n(e))),await i}));o.finished.finally((()=>{c(void 0),u(void 0),r(void 0),a({isTransitioning:!1})})),u(o)}}),[s,l,t.window]),V.useEffect((()=>{l&&s&&i.location.key===s.location.key&&l.resolve()}),[l,h,i.location,s]),V.useEffect((()=>{!o.isTransitioning&&d&&(r(d.state),a({isTransitioning:!0,flushSync:!1,currentLocation:d.currentLocation,nextLocation:d.nextLocation}),f(void 0))}),[o.isTransitioning,d]);let g=V.useMemo((()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:e=>t.navigate(e),push:(e,i,n)=>t.navigate(e,{state:i,preventScrollReset:n?.preventScrollReset}),replace:(e,i,n)=>t.navigate(e,{replace:!0,state:i,preventScrollReset:n?.preventScrollReset})})),[t]),y=t.basename||"/",v=V.useMemo((()=>({router:t,navigator:g,static:!1,basename:y})),[t,g,y]);return V.createElement(V.Fragment,null,V.createElement(cm.Provider,{value:v},V.createElement(hm.Provider,{value:i},V.createElement(dm.Provider,{value:p.current},V.createElement(um.Provider,{value:o},V.createElement(Dm,{basename:y,location:i.location,navigationType:i.historyAction,navigator:g},V.createElement(Rm,{routes:t.routes,future:t.future,state:i})))))),null)}var Rm=V.memo((function({routes:t,future:e,state:i}){return(function(t,e,i){Lf(ym(),"useRoutes() may be used only in the context of a <Router> component.");let n,{navigator:s}=V.useContext(fm),{matches:r}=V.useContext(mm),o=r[r.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let t=h&&h.path||"";Om(l,!h||t.endsWith("*")||t.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${t}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${t}"> to <Route path="${"/"===t?"*":`${t}/*`}">.`)}n=vm();let u=n.pathname||"/",d=u;if("/"!==c){let t=c.replace(/^\//,"").split("/");d="/"+u.replace(/^\//,"").split("/").slice(t.length).join("/")}let f=Ff(t,{pathname:d});zf(h||null!=f,`No routes matched location "${n.pathname}${n.search}${n.hash}" `),zf(null==f||void 0!==f[f.length-1].route.element||void 0!==f[f.length-1].route.Component||void 0!==f[f.length-1].route.lazy,`Matched leaf route at location "${n.pathname}${n.search}${n.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=(function(t,e=[],i=null){if(null==t){if(!i)return null;if(i.errors)t=i.matches;else{if(0!==e.length||i.initialized||!(i.matches.length>0))return null;t=i.matches}}let n=t,s=i?.errors;if(null!=s){let t=n.findIndex((t=>t.route.id&&void 0!==s?.[t.route.id]));Lf(t>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),n=n.slice(0,Math.min(n.length,t+1))}let r=!1,o=-1;if(i)for(let a=0;a<n.length;a++){let t=n[a];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(o=a),t.route.id){let{loaderData:e,errors:s}=i,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!s||void 0===s[t.route.id]);if(t.route.lazy||a){r=!0,n=o>=0?n.slice(0,o+1):[n[0]];break}}}return n.reduceRight(((t,a,l)=>{let c,h=!1,u=null,d=null;i&&(c=s&&a.route.id?s[a.route.id]:void 0,u=a.route.errorElement||Cm,r&&(o<0&&0===l?(Om("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,d=null):o===l&&(h=!0,d=a.route.hydrateFallbackElement||null)));let f=e.concat(n.slice(0,l+1)),p=()=>{let e;return e=c?u:h?d:a.route.Component?V.createElement(a.route.Component,null):a.route.element?a.route.element:t,V.createElement(Mm,{match:a,routeContext:{outlet:t,matches:f,isDataRoute:null!=i},children:e})};return i&&(a.route.ErrorBoundary||a.route.errorElement||0===l)?V.createElement(Em,{location:i.location,revalidation:i.revalidation,component:u,error:c,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()}),null)})(f&&f.map((t=>Object.assign({},t,{params:Object.assign({},a,t.params),pathname:lp([c,s.encodeLocation?s.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?c:lp([c,s.encodeLocation?s.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),r,i);return p})(t,0,i)}));function Pm(t){return(function(t){let e=V.useContext(mm).outlet;return e?V.createElement(Sm.Provider,{value:t},e):e})(t.context)}function Dm({basename:t="/",children:e=null,location:i,navigationType:n="POP",navigator:s,static:r=!1}){Lf(!ym(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=V.useMemo((()=>({basename:o,navigator:s,static:r,future:{}})),[o,s,r]);"string"==typeof i&&(i=$f(i));let{pathname:l="/",search:c="",hash:h="",state:u=null,key:d="default"}=i,f=V.useMemo((()=>{let t=np(l,o);return null==t?null:{location:{pathname:t,search:c,hash:h,state:u,key:d},navigationType:n}}),[o,l,c,h,u,d,n]);return zf(null!=f,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:V.createElement(fm.Provider,{value:a},V.createElement(pm.Provider,{children:e,value:f}))}var $m="get",Bm="application/x-www-form-urlencoded";function Um(t){return null!=t&&"string"==typeof t.tagName}function Fm(t=""){return new URLSearchParams("string"==typeof t||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce(((e,i)=>{let n=t[i];return e.concat(Array.isArray(n)?n.map((t=>[i,t])):[[i,n]])}),[]))}var Wm=null,Vm=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qm(t){return null==t||Vm.has(t)?t:(zf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bm}"`),null)}function Hm(t,e){if(!1===t||null==t)throw new Error(e)}function Km(t){return null!=t&&(null==t.href?"preload"===t.rel&&"string"==typeof t.imageSrcSet&&"string"==typeof t.imageSizes:"string"==typeof t.rel&&"string"==typeof t.href)}function Gm(t,e,i,n,s,r){let o=(t,e)=>!i[e]||t.route.id!==i[e].route.id,a=(t,e)=>i[e].pathname!==t.pathname||i[e].route.path?.endsWith("*")&&i[e].params["*"]!==t.params["*"];return"assets"===r?e.filter(((t,e)=>o(t,e)||a(t,e))):"data"===r?e.filter(((e,r)=>{let l=n.routes[e.route.id];if(!l||!l.hasLoader)return!1;if(o(e,r)||a(e,r))return!0;if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:e.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0})):[]}var Zm=V.createContext(void 0);function Ym(){let t=V.useContext(Zm);return Hm(t,"You must render this element inside a <HydratedRouter> element"),t}function Xm(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function Qm({page:t,...e}){let{router:i}=(function(){let t=V.useContext(cm);return Hm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t})(),n=V.useMemo((()=>Ff(i.routes,t,i.basename)),[i.routes,t,i.basename]);return n?V.createElement(Jm,{page:t,matches:n,...e}):null}function Jm({page:t,matches:e,...i}){let n=vm(),{manifest:s,routeModules:r}=Ym(),{loaderData:o,matches:a}=(function(){let t=V.useContext(hm);return Hm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t})(),l=V.useMemo((()=>Gm(t,e,a,s,n,"data")),[t,e,a,s,n]),c=V.useMemo((()=>Gm(t,e,a,s,n,"assets")),[t,e,a,s,n]),h=V.useMemo((()=>{if(t===n.pathname+n.search+n.hash)return[];let i=new Set,a=!1;if(e.forEach((t=>{let e=s.routes[t.route.id];e&&e.hasLoader&&(!l.some((e=>e.route.id===t.route.id))&&t.route.id in o&&r[t.route.id]?.shouldRevalidate||e.hasClientLoader?a=!0:i.add(t.route.id))})),0===i.size)return[];let c=(function(t){let e="string"==typeof t?new URL(t,"undefined"==typeof window?"server://singlefetch/":window.location.origin):t;return e.pathname="/"===e.pathname?"_root.data":`${e.pathname.replace(/\/$/,"")}.data`,e})(t);return a&&i.size>0&&c.searchParams.set("_routes",e.filter((t=>i.has(t.route.id))).map((t=>t.route.id)).join(",")),[c.pathname+c.search]}),[o,n,s,l,e,t,r]),u=V.useMemo((()=>(function(t,e){return i=t.map((t=>{let i=e.routes[t.route.id];if(!i)return[];let n=[i.module];return i.imports&&(n=n.concat(i.imports)),n})).flat(1),[...new Set(i)];var i})(c,s)),[c,s]),d=(function(t){let{manifest:e,routeModules:i}=Ym(),[n,s]=V.useState([]);return V.useEffect((()=>{let n=!1;return(async function(t,e,i){let n=await Promise.all(t.map((async t=>{let n=e.routes[t.route.id];if(n){let t=await(async function(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(qa){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(qa),window.__reactRouterContext&&window,window.location.reload(),new Promise((()=>{}))}})(n,i);return t.links?t.links():[]}return[]})));return(function(t){let e=new Set;return new Set(void 0),t.reduce(((t,i)=>{let n=JSON.stringify((function(t){let e={},i=Object.keys(t).sort();for(let n of i)e[n]=t[n];return e})(i));return e.has(n)||(e.add(n),t.push({key:n,link:i})),t}),[])})(n.flat(1).filter(Km).filter((t=>"stylesheet"===t.rel||"preload"===t.rel)).map((t=>"stylesheet"===t.rel?{...t,rel:"prefetch",as:"style"}:{...t,rel:"prefetch"})))})(t,e,i).then((t=>{n||s(t)})),()=>{n=!0}}),[t,e,i]),n})(c);return V.createElement(V.Fragment,null,h.map((t=>V.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...i}))),u.map((t=>V.createElement("link",{key:t,rel:"modulepreload",href:t,...i}))),d.map((({key:t,link:e})=>V.createElement("link",{key:t,...e}))))}function tg(...t){return e=>{t.forEach((t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)}))}}Zm.displayName="FrameworkContext";var eg="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{eg&&(window.__reactRouterVersion="7.1.1")}catch(mx){}function ig(t){if(!t)return null;let e=Object.entries(t),i={};for(let[n,s]of e)if(s&&"RouteErrorResponse"===s.__type)i[n]=new dp(s.status,s.statusText,s.data,!0===s.internal);else if(s&&"Error"===s.__type){if(s.__subType){let t=window[s.__subType];if("function"==typeof t)try{let e=new t(s.message);e.stack="",i[n]=e}catch(mx){}}if(null==i[n]){let t=new Error(s.message);t.stack="",i[n]=t}}else i[n]=s;return i}var ng=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sg=V.forwardRef((function({onClick:t,discover:e="render",prefetch:i="none",relative:n,reloadDocument:s,replace:r,state:o,target:a,to:l,preventScrollReset:c,viewTransition:h,...u},d){let f,{basename:p}=V.useContext(fm),m="string"==typeof l&&ng.test(l),g=!1;if("string"==typeof l&&m&&(f=l,eg))try{let t=new URL(window.location.href),e=l.startsWith("//")?new URL(t.protocol+l):new URL(l),i=np(e.pathname,p);e.origin===t.origin&&null!=i?l=i+e.search+e.hash:g=!0}catch(mx){zf(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=(function(t,{relative:e}={}){Lf(ym(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=V.useContext(fm),{hash:s,pathname:r,search:o}=km(t,{relative:e}),a=r;return"/"!==i&&(a="/"===r?i:lp([i,r])),n.createHref({pathname:a,search:o,hash:s})})(l,{relative:n}),[v,b,w]=(function(t,e){let i=V.useContext(Zm),[n,s]=V.useState(!1),[r,o]=V.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:u}=e,d=V.useRef(null);V.useEffect((()=>{if("render"===t&&o(!0),"viewport"===t){let t=new IntersectionObserver((t=>{t.forEach((t=>{o(t.isIntersecting)}))}),{threshold:.5});return d.current&&t.observe(d.current),()=>{t.disconnect()}}}),[t]),V.useEffect((()=>{if(n){let t=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(t)}}}),[n]);let f=()=>{s(!0)},p=()=>{s(!1),o(!1)};return i?"intent"!==t?[r,d,{}]:[r,d,{onFocus:Xm(a,f),onBlur:Xm(l,p),onMouseEnter:Xm(c,f),onMouseLeave:Xm(h,p),onTouchStart:Xm(u,f)}]:[!1,d,{}]})(i,u),x=(function(t,{target:e,replace:i,state:n,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=xm(),l=vm(),c=km(t,{relative:r});return V.useCallback((h=>{if((function(t,e){return!(0!==t.button||e&&"_self"!==e||(function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)})(t))})(h,e)){h.preventDefault();let e=void 0!==i?i:Df(l)===Df(c);a(t,{replace:e,state:n,preventScrollReset:s,relative:r,viewTransition:o})}}),[l,a,c,i,n,e,t,s,r,o])})(l,{replace:r,state:o,target:a,preventScrollReset:c,relative:n,viewTransition:h}),S=V.createElement("a",{...u,...w,href:f||y,onClick:g||s?t:function(e){t&&t(e),e.defaultPrevented||x(e)},ref:tg(d,b),target:a,"data-discover":m||"render"!==e?void 0:"true"});return v&&!m?V.createElement(V.Fragment,null,S,V.createElement(Qm,{page:y})):S}));sg.displayName="Link";var rg=V.forwardRef((function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:n=!1,style:s,to:r,viewTransition:o,children:a,...l},c){let h=km(r,{relative:l.relative}),u=vm(),d=V.useContext(hm),{navigator:f,basename:p}=V.useContext(fm),m=null!=d&&(function(t,e={}){let i=V.useContext(um);Lf(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ag("useViewTransitionState"),s=km(t,{relative:e.relative});if(!i.isTransitioning)return!1;let r=np(i.currentLocation.pathname,n)||i.currentLocation.pathname,o=np(i.nextLocation.pathname,n)||i.nextLocation.pathname;return null!=ep(s.pathname,o)||null!=ep(s.pathname,r)})(h)&&!0===o,g=f.encodeLocation?f.encodeLocation(h).pathname:h.pathname,y=u.pathname,v=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;e||(y=y.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&p&&(v=np(v,p)||v);const b="/"!==g&&g.endsWith("/")?g.length-1:g.length;let w,x=y===g||!n&&y.startsWith(g)&&"/"===y.charAt(b),S=null!=v&&(v===g||!n&&v.startsWith(g)&&"/"===v.charAt(g.length)),k={isActive:x,isPending:S,isTransitioning:m},j=x?t:void 0;w="function"==typeof i?i(k):[i,x?"active":null,S?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof s?s(k):s;return V.createElement(sg,{...l,"aria-current":j,className:w,ref:c,style:C,to:r,viewTransition:o},"function"==typeof a?a(k):a)}));rg.displayName="NavLink";var og=V.forwardRef((({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:n,replace:s,state:r,method:o=$m,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:u,...d},f)=>{let p=(function(){let{router:t}=ag("useSubmit"),{basename:e}=V.useContext(fm),i=Tm("useRouteId");return V.useCallback((async(n,s={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=(function(t,e){let i,n,s,r,o;if(Um(a=t)&&"form"===a.tagName.toLowerCase()){let o=t.getAttribute("action");n=o?np(o,e):null,i=t.getAttribute("method")||$m,s=qm(t.getAttribute("enctype"))||Bm,r=new FormData(t)}else if((function(t){return Um(t)&&"button"===t.tagName.toLowerCase()})(t)||(function(t){return Um(t)&&"input"===t.tagName.toLowerCase()})(t)&&("submit"===t.type||"image"===t.type)){let o=t.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=t.getAttribute("formaction")||o.getAttribute("action");if(n=a?np(a,e):null,i=t.getAttribute("formmethod")||o.getAttribute("method")||$m,s=qm(t.getAttribute("formenctype"))||qm(o.getAttribute("enctype"))||Bm,r=new FormData(o,t),!(function(){if(null===Wm)try{new FormData(document.createElement("form"),0),Wm=!1}catch(mx){Wm=!0}return Wm})()){let{name:e,type:i,value:n}=t;if("image"===i){let t=e?`${e}.`:"";r.append(`${t}x`,"0"),r.append(`${t}y`,"0")}else e&&r.append(e,n)}}else{if(Um(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=$m,n=null,s=Bm,o=t}var a;return r&&"text/plain"===s&&(o=r,r=void 0),{action:n,method:i.toLowerCase(),encType:s,formData:r,body:o}})(n,e);if(!1===s.navigate){let e=s.fetcherKey||hg();await t.fetch(e,i,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})}),[t,e,i])})(),m=(function(t,{relative:e}={}){let{basename:i}=V.useContext(fm),n=V.useContext(mm);Lf(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...km(t||".",{relative:e})},o=vm();if(null==t){r.search=o.search;let t=new URLSearchParams(r.search),e=t.getAll("index"),i=e.some((t=>""===t));if(i){t.delete("index"),e.filter((t=>t)).forEach((e=>t.append("index",e)));let i=t.toString();r.search=i?`?${i}`:""}}return t&&"."!==t||!s.route.index||(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),"/"!==i&&(r.pathname="/"===r.pathname?i:lp([i,r.pathname])),Df(r)})(a,{relative:c}),g="get"===o.toLowerCase()?"get":"post",y="string"==typeof a&&ng.test(a);return V.createElement("form",{ref:f,method:g,action:m,onSubmit:n?l:t=>{if(l&&l(t),t.defaultPrevented)return;t.preventDefault();let n=t.nativeEvent.submitter,a=n?.getAttribute("formmethod")||o;p(n||t.currentTarget,{fetcherKey:e,method:a,navigate:i,replace:s,state:r,relative:c,preventScrollReset:h,viewTransition:u})},...d,"data-discover":y||"render"!==t?void 0:"true"})}));function ag(t){let e=V.useContext(cm);return Lf(e,(function(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`})(t)),e}function lg(t){zf("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=V.useRef(Fm(t)),i=V.useRef(!1),n=vm(),s=V.useMemo((()=>(function(t,e){let i=Fm(t);return e&&e.forEach(((t,n)=>{i.has(n)||e.getAll(n).forEach((t=>{i.append(n,t)}))})),i})(n.search,i.current?null:e.current)),[n.search]),r=xm(),o=V.useCallback(((t,e)=>{const n=Fm("function"==typeof t?t(s):t);i.current=!0,r("?"+n,e)}),[r,s]);return[s,o]}og.displayName="Form";var cg=0,hg=()=>`__${String(++cg)}__`;function ug(t){return V.createElement(zm,{flushSync:W.flushSync,...t})}new TextEncoder;let dg,fg,pg,mg={data:""},gg=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yg=/\/\*[^]*?\*\/|  +/g,vg=/\n+/g,bg=(t,e)=>{let i="",n="",s="";for(let r in t){let o=t[r];"@"==r[0]?"i"==r[1]?i=r+" "+o+";":n+="f"==r[1]?bg(o,r):r+"{"+bg(o,"k"==r[1]?"":e)+"}":"object"==typeof o?n+=bg(o,e?e.replace(/([^,])+/g,(t=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)))):r):null!=o&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=bg.p?bg.p(r,o):r+":"+o+";")}return i+(e&&s?e+"{"+s+"}":s)+n},wg={},xg=t=>{if("object"==typeof t){let e="";for(let i in t)e+=i+xg(t[i]);return e}return t};function Sg(t){let e=this||{},i=t.call?t(e.p):t;return((t,e,i,n,s)=>{let r=xg(t),o=wg[r]||(wg[r]=(t=>{let e=0,i=11;for(;e<t.length;)i=101*i+t.charCodeAt(e++)>>>0;return"go"+i})(r));if(!wg[o]){let e=r!==t?t:(t=>{let e,i,n=[{}];for(;e=gg.exec(t.replace(yg,""));)e[4]?n.shift():e[3]?(i=e[3].replace(vg," ").trim(),n.unshift(n[0][i]=n[0][i]||{})):n[0][e[1]]=e[2].replace(vg," ").trim();return n[0]})(t);wg[o]=bg(s?{["@keyframes "+o]:e}:e,i?"":"."+o)}let a=i&&wg.g?wg.g:null;return i&&(wg.g=wg[o]),((t,e,i,n)=>{n?e.data=e.data.replace(n,t):-1===e.data.indexOf(t)&&(e.data=i?t+e.data:e.data+t)})(wg[o],e,n,a),o})(i.unshift?i.raw?((t,e,i)=>t.reduce(((t,n,s)=>{let r=e[s];if(r&&r.call){let t=r(i),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;r=e?"."+e:t&&"object"==typeof t?t.props?"":bg(t,""):!1===t?"":t}return t+n+(null==r?"":r)}),""))(i,[].slice.call(arguments,1),e.p):i.reduce(((t,i)=>Object.assign(t,i&&i.call?i(e.p):i)),{}):i,(t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||mg)(e.target),e.g,e.o,e.k)}Sg.bind({g:1});let kg=Sg.bind({k:1});function jg(t,e){let i=this||{};return function(){let e=arguments;return function n(s,r){let o=Object.assign({},s),a=o.className||n.className;i.p=Object.assign({theme:fg&&fg()},o),i.o=/ *go\d+/.test(a),o.className=Sg.apply(i,e)+(a?" "+a:"");let l=t;return t[0]&&(l=o.as||t,delete o.as),pg&&l[0]&&pg(o),dg(l,o)}}}var Cg=(t,e)=>(t=>"function"==typeof t)(t)?t(e):t,Eg=(()=>{let t=0;return()=>(++t).toString()})(),Mg=(()=>{let t;return()=>{if(void 0===t&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),_g=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,20)};case 1:return{...t,toasts:t.toasts.map((t=>t.id===e.toast.id?{...t,...e.toast}:t))};case 2:let{toast:i}=e;return _g(t,{type:t.toasts.find((t=>t.id===i.id))?1:0,toast:i});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map((t=>t.id===n||void 0===n?{...t,dismissed:!0,visible:!1}:t))};case 4:return void 0===e.toastId?{...t,toasts:[]}:{...t,toasts:t.toasts.filter((t=>t.id!==e.toastId))};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map((t=>({...t,pauseDuration:t.pauseDuration+s})))}}},Tg=[],Ag={toasts:[],pausedAt:void 0},Og=t=>{Ag=_g(Ag,t),Tg.forEach((t=>{t(Ag)}))},Ng={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ig=t=>(e,i)=>{let n=((t,e="blank",i)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...i,id:(null==i?void 0:i.id)||Eg()}))(e,t,i);return Og({type:2,toast:n}),n.id},Lg=(t,e)=>Ig("blank")(t,e);Lg.error=Ig("error"),Lg.success=Ig("success"),Lg.loading=Ig("loading"),Lg.custom=Ig("custom"),Lg.dismiss=t=>{Og({type:3,toastId:t})},Lg.remove=t=>Og({type:4,toastId:t}),Lg.promise=(t,e,i)=>{let n=Lg.loading(e.loading,{...i,...null==i?void 0:i.loading});return"function"==typeof t&&(t=t()),t.then((t=>{let s=e.success?Cg(e.success,t):void 0;return s?Lg.success(s,{id:n,...i,...null==i?void 0:i.success}):Lg.dismiss(n),t})).catch((t=>{let s=e.error?Cg(e.error,t):void 0;s?Lg.error(s,{id:n,...i,...null==i?void 0:i.error}):Lg.dismiss(n)})),t};var zg=(t,e)=>{Og({type:1,toast:{id:t,height:e}})},Rg=()=>{Og({type:5,time:Date.now()})},Pg=new Map,Dg=kg`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$g=kg`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bg=kg`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ug=jg("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Dg} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$g} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Bg} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Fg=kg`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Wg=jg("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Fg} 1s linear infinite;
`,Vg=kg`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qg=kg`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Hg=jg("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vg} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qg} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Kg=jg("div")`
  position: absolute;
`,Gg=jg("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Zg=kg`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Yg=jg("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Zg} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Xg=({toast:t})=>{let{icon:e,type:i,iconTheme:n}=t;return void 0!==e?"string"==typeof e?V.createElement(Yg,null,e):e:"blank"===i?null:V.createElement(Gg,null,V.createElement(Wg,{...n}),"loading"!==i&&V.createElement(Kg,null,V.createElement("error"===i?Ug:Hg,{...n})))},Qg=t=>`\n0% {transform: translate3d(0,${-200*t}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Jg=t=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*t}%,-1px) scale(.6); opacity:0;}\n`,ty=jg("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ey=jg("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,iy=V.memo((({toast:t,position:e,style:i,children:n})=>{let s=t.height?((t,e)=>{let i=t.includes("top")?1:-1,[n,s]=Mg()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Qg(i),Jg(i)];return{animation:e?`${kg(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${kg(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||e||"top-center",t.visible):{opacity:0},r=V.createElement(Xg,{toast:t}),o=V.createElement(ey,{...t.ariaProps},Cg(t.message,t));return V.createElement(ty,{className:t.className,style:{...s,...i,...t.style}},"function"==typeof n?n({icon:r,message:o}):V.createElement(V.Fragment,null,r,o))}));!(function(t){bg.p=void 0,dg=t,fg=void 0,pg=void 0})(V.createElement);var ny=({id:t,className:e,style:i,onHeightUpdate:n,children:s})=>{let r=V.useCallback((e=>{if(e){let i=()=>{let i=e.getBoundingClientRect().height;n(t,i)};i(),new MutationObserver(i).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,n]);return V.createElement("div",{ref:r,className:e,style:i},s)},sy=Sg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ry=({reverseOrder:t,position:e="top-center",toastOptions:i,gutter:n,children:s,containerStyle:r,containerClassName:o})=>{let{toasts:a,handlers:l}=(t=>{let{toasts:e,pausedAt:i}=((t={})=>{let[e,i]=V.useState(Ag);V.useEffect((()=>(Tg.push(i),()=>{let t=Tg.indexOf(i);t>-1&&Tg.splice(t,1)})),[e]);let n=e.toasts.map((e=>{var i,n,s;return{...t,...t[e.type],...e,removeDelay:e.removeDelay||(null==(i=t[e.type])?void 0:i.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(n=t[e.type])?void 0:n.duration)||(null==t?void 0:t.duration)||Ng[e.type],style:{...t.style,...null==(s=t[e.type])?void 0:s.style,...e.style}}}));return{...e,toasts:n}})(t);V.useEffect((()=>{if(i)return;let t=Date.now(),n=e.map((e=>{if(e.duration===1/0)return;let i=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(i<0))return setTimeout((()=>Lg.dismiss(e.id)),i);e.visible&&Lg.dismiss(e.id)}));return()=>{n.forEach((t=>t&&clearTimeout(t)))}}),[e,i]);let n=V.useCallback((()=>{i&&Og({type:6,time:Date.now()})}),[i]),s=V.useCallback(((t,i)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:r}=i||{},o=e.filter((e=>(e.position||r)===(t.position||r)&&e.height)),a=o.findIndex((e=>e.id===t.id)),l=o.filter(((t,e)=>e<a&&t.visible)).length;return o.filter((t=>t.visible)).slice(...n?[l+1]:[0,l]).reduce(((t,e)=>t+(e.height||0)+s),0)}),[e]);return V.useEffect((()=>{e.forEach((t=>{if(t.dismissed)((t,e=1e3)=>{if(Pg.has(t))return;let i=setTimeout((()=>{Pg.delete(t),Og({type:4,toastId:t})}),e);Pg.set(t,i)})(t.id,t.removeDelay);else{let e=Pg.get(t.id);e&&(clearTimeout(e),Pg.delete(t.id))}}))}),[e]),{toasts:e,handlers:{updateHeight:zg,startPause:Rg,endPause:n,calculateOffset:s}}})(i);return V.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...r},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map((i=>{let r=i.position||e,o=((t,e)=>{let i=t.includes("top"),n=i?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Mg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(i?1:-1)}px)`,...n,...s}})(r,l.calculateOffset(i,{reverseOrder:t,gutter:n,defaultPosition:e}));return V.createElement(ny,{id:i.id,key:i.id,onHeightUpdate:l.updateHeight,className:i.visible?sy:"",style:o},"custom"===i.type?Cg(i.message,i):s?s(i):V.createElement(iy,{toast:i,position:r}))})))},oy=Lg,ay="undefined"!=typeof Element,ly="function"==typeof Map,cy="function"==typeof Set,hy="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function uy(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var i,n,s,r;if(Array.isArray(t)){if((i=t.length)!=e.length)return!1;for(n=i;0!=n--;)if(!uy(t[n],e[n]))return!1;return!0}if(ly&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r=t.entries();!(n=r.next()).done;)if(!e.has(n.value[0]))return!1;for(r=t.entries();!(n=r.next()).done;)if(!uy(n.value[1],e.get(n.value[0])))return!1;return!0}if(cy&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r=t.entries();!(n=r.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(hy&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if((i=t.length)!=e.length)return!1;for(n=i;0!=n--;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&"function"==typeof t.valueOf&&"function"==typeof e.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&"function"==typeof t.toString&&"function"==typeof e.toString)return t.toString()===e.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(e).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;if(ay&&t instanceof Element)return!1;for(n=i;0!=n--;)if(("_owner"!==s[n]&&"__v"!==s[n]&&"__o"!==s[n]||!t.$$typeof)&&!uy(t[s[n]],e[s[n]]))return!1;return!0}return t!=t&&e!=e}var dy=function(t,e){try{return uy(t,e)}catch(qa){if((qa.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw qa}};const fy=q(dy);var py=function(t,e,i,n,s,r,o,a){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,n,s,r,o,a],h=0;(l=new Error(e.replace(/%s/g,(function(){return c[h++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}};const my=q(py),gy=q((function(t,e,i,n){var s=i?i.call(n,t,e):void 0;if(void 0!==s)return!!s;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<r.length;l++){var c=r[l];if(!a(c))return!1;var h=t[c],u=e[c];if(!1===(s=i?i.call(n,h,u,c):void 0)||void 0===s&&h!==u)return!1}return!0}));var yy=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(yy||{}),vy={rel:["amphtml","canonical","alternate"]},by={type:["application/ld+json"]},wy={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},xy=Object.values(yy),Sy={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ky=Object.entries(Sy).reduce(((t,[e,i])=>(t[i]=e,t)),{}),jy="data-rh",Cy=(t,e)=>{for(let i=t.length-1;i>=0;i-=1){const n=t[i];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},Ey=t=>{let e=Cy(t,"title");const i=Cy(t,"titleTemplate");if(Array.isArray(e)&&(e=e.join("")),i&&e)return i.replace(/%s/g,(()=>e));const n=Cy(t,"defaultTitle");return e||n||void 0},My=t=>Cy(t,"onChangeClientState")||(()=>{}),_y=(t,e)=>e.filter((e=>void 0!==e[t])).map((e=>e[t])).reduce(((t,e)=>({...t,...e})),{}),Ty=(t,e)=>e.filter((t=>void 0!==t.base)).map((t=>t.base)).reverse().reduce(((e,i)=>{if(!e.length){const n=Object.keys(i);for(let s=0;s<n.length;s+=1){const r=n[s].toLowerCase();if(-1!==t.indexOf(r)&&i[r])return e.concat(i)}}return e}),[]),Ay=(t,e,i)=>{const n={};return i.filter((e=>{return!!Array.isArray(e[t])||(void 0!==e[t]&&(i=`Helmet: ${t} should be of type "Array". Instead found type "${typeof e[t]}"`,console&&"function"==typeof console.warn&&console.warn(i)),!1);var i})).map((e=>e[t])).reverse().reduce(((t,i)=>{const s={};i.filter((t=>{let i;const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const s=r[n],o=s.toLowerCase();-1===e.indexOf(o)||"rel"===i&&"canonical"===t[i].toLowerCase()||"rel"===o&&"stylesheet"===t[o].toLowerCase()||(i=o),-1===e.indexOf(s)||"innerHTML"!==s&&"cssText"!==s&&"itemprop"!==s||(i=s)}if(!i||!t[i])return!1;const o=t[i].toLowerCase();return n[i]||(n[i]={}),s[i]||(s[i]={}),!n[i][o]&&(s[i][o]=!0,!0)})).reverse().forEach((e=>t.push(e)));const r=Object.keys(s);for(let e=0;e<r.length;e+=1){const t=r[e],i={...n[t],...s[t]};n[t]=i}return t}),[]).reverse()},Oy=(t,e)=>{if(Array.isArray(t)&&t.length)for(let i=0;i<t.length;i+=1)if(t[i][e])return!0;return!1},Ny=t=>Array.isArray(t)?t.join(""):t,Iy=(t,e)=>Array.isArray(t)?t.reduce(((t,i)=>(((t,e)=>{const i=Object.keys(t);for(let n=0;n<i.length;n+=1)if(e[i[n]]&&e[i[n]].includes(t[i[n]]))return!0;return!1})(i,e)?t.priority.push(i):t.default.push(i),t)),{priority:[],default:[]}):{default:t,priority:[]},Ly=(t,e)=>({...t,[e]:void 0}),zy=["noscript","script","style"],Ry=(t,e=!0)=>!1===e?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Py=t=>Object.keys(t).reduce(((e,i)=>{const n=void 0!==t[i]?`${i}="${t[i]}"`:`${i}`;return e?`${e} ${n}`:n}),""),Dy=(t,e={})=>Object.keys(t).reduce(((e,i)=>(e[Sy[i]||i]=t[i],e)),e),$y=(t,e)=>e.map(((e,i)=>{const n={key:i,[jy]:!0};return Object.keys(e).forEach((t=>{const i=Sy[t]||t;"innerHTML"===i||"cssText"===i?n.dangerouslySetInnerHTML={__html:e.innerHTML||e.cssText}:n[i]=e[t]})),H.createElement(t,n)})),By=(t,e,i=!0)=>{switch(t){case"title":return{toComponent:()=>((t,e,i)=>{const n=Dy(i,{key:e,[jy]:!0});return[H.createElement("title",n,e)]})(0,e.title,e.titleAttributes),toString:()=>((t,e,i,n)=>{const s=Py(i),r=Ny(e);return s?`<${t} ${jy}="true" ${s}>${Ry(r,n)}</${t}>`:`<${t} ${jy}="true">${Ry(r,n)}</${t}>`})(t,e.title,e.titleAttributes,i)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Dy(e),toString:()=>Py(e)};default:return{toComponent:()=>$y(t,e),toString:()=>((t,e,i=!0)=>e.reduce(((e,n)=>{const s=n,r=Object.keys(s).filter((t=>!("innerHTML"===t||"cssText"===t))).reduce(((t,e)=>{const n=void 0===s[e]?e:`${e}="${Ry(s[e],i)}"`;return t?`${t} ${n}`:n}),""),o=s.innerHTML||s.cssText||"",a=-1===zy.indexOf(t);return`${e}<${t} ${jy}="true" ${r}${a?"/>":`>${o}</${t}>`}`}),""))(t,e,i)}}},Uy=t=>{const{baseTag:e,bodyAttributes:i,encode:n=!0,htmlAttributes:s,noscriptTags:r,styleTags:o,title:a="",titleAttributes:l,prioritizeSeoTags:c}=t;let{linkTags:h,metaTags:u,scriptTags:d}=t,f={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:f,linkTags:h,metaTags:u,scriptTags:d}=(({metaTags:t,linkTags:e,scriptTags:i,encode:n})=>{const s=Iy(t,wy),r=Iy(e,vy),o=Iy(i,by);return{priorityMethods:{toComponent:()=>[...$y("meta",s.priority),...$y("link",r.priority),...$y("script",o.priority)],toString:()=>`${By("meta",s.priority,n)} ${By("link",r.priority,n)} ${By("script",o.priority,n)}`},metaTags:s.default,linkTags:r.default,scriptTags:o.default}})(t)),{priority:f,base:By("base",e,n),bodyAttributes:By("bodyAttributes",i,n),htmlAttributes:By("htmlAttributes",s,n),link:By("link",h,n),meta:By("meta",u,n),noscript:By("noscript",r,n),script:By("script",d,n),style:By("style",o,n),title:By("title",{title:a,titleAttributes:l},n)}},Fy=[],Wy=!("undefined"==typeof window||!window.document||!window.document.createElement),Vy=class{instances=[];canUseDOM=Wy;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Fy:this.instances,add:t=>{(this.canUseDOM?Fy:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Fy:this.instances).indexOf(t);(this.canUseDOM?Fy:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Uy({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},qy=H.createContext({}),Hy=class t extends V.Component{static canUseDOM=Wy;helmetData;constructor(e){super(e),this.helmetData=new Vy(this.props.context||{},t.canUseDOM)}render(){return H.createElement(qy.Provider,{value:this.helmetData.value},this.props.children)}},Ky=(t,e)=>{const i=document.head||document.querySelector("head"),n=i.querySelectorAll(`${t}[${jy}]`),s=[].slice.call(n),r=[];let o;return e&&e.length&&e.forEach((e=>{const i=document.createElement(t);for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&("innerHTML"===t?i.innerHTML=e.innerHTML:"cssText"===t?i.styleSheet?i.styleSheet.cssText=e.cssText:i.appendChild(document.createTextNode(e.cssText)):i.setAttribute(t,void 0===e[t]?"":e[t]));i.setAttribute(jy,"true"),s.some(((t,e)=>(o=e,i.isEqualNode(t))))?s.splice(o,1):r.push(i)})),s.forEach((t=>t.parentNode?.removeChild(t))),r.forEach((t=>i.appendChild(t))),{oldTags:s,newTags:r}},Gy=(t,e)=>{const i=document.getElementsByTagName(t)[0];if(!i)return;const n=i.getAttribute(jy),s=n?n.split(","):[],r=[...s],o=Object.keys(e);for(const a of o){const t=e[a]||"";i.getAttribute(a)!==t&&i.setAttribute(a,t),-1===s.indexOf(a)&&s.push(a);const n=r.indexOf(a);-1!==n&&r.splice(n,1)}for(let a=r.length-1;a>=0;a-=1)i.removeAttribute(r[a]);s.length===r.length?i.removeAttribute(jy):i.getAttribute(jy)!==o.join(",")&&i.setAttribute(jy,o.join(","))},Zy=(t,e)=>{const{baseTag:i,bodyAttributes:n,htmlAttributes:s,linkTags:r,metaTags:o,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:h,title:u,titleAttributes:d}=t;Gy("body",n),Gy("html",s),((t,e)=>{void 0!==t&&document.title!==t&&(document.title=Ny(t)),Gy("title",e)})(u,d);const f={baseTag:Ky("base",i),linkTags:Ky("link",r),metaTags:Ky("meta",o),noscriptTags:Ky("noscript",a),scriptTags:Ky("script",c),styleTags:Ky("style",h)},p={},m={};Object.keys(f).forEach((t=>{const{newTags:e,oldTags:i}=f[t];e.length&&(p[t]=e),i.length&&(m[t]=f[t].oldTags)})),e&&e(),l(t,p,m)},Yy=null,Xy=class extends V.Component{rendered=!1;shouldComponentUpdate(t){return!gy(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let i=null;const n=(s=t.get().map((t=>{const e={...t.props};return delete e.context,e})),{baseTag:Ty(["href"],s),bodyAttributes:_y("bodyAttributes",s),defer:Cy(s,"defer"),encode:Cy(s,"encodeSpecialCharacters"),htmlAttributes:_y("htmlAttributes",s),linkTags:Ay("link",["rel","href"],s),metaTags:Ay("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:Ay("noscript",["innerHTML"],s),onChangeClientState:My(s),scriptTags:Ay("script",["src","innerHTML"],s),styleTags:Ay("style",["cssText"],s),title:Ey(s),titleAttributes:_y("titleAttributes",s),prioritizeSeoTags:Oy(s,"prioritizeSeoTags")});var s,r;Hy.canUseDOM?(r=n,Yy&&cancelAnimationFrame(Yy),r.defer?Yy=requestAnimationFrame((()=>{Zy(r,(()=>{Yy=null}))})):(Zy(r),Yy=null)):i=Uy(n),e(i)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},Qy=class extends V.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!fy(Ly(this.props,"helmetData"),Ly(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,i,n){return{...e,[t.type]:[...e[t.type]||[],{...i,...this.mapNestedChildrenToProps(t,n)}]}}mapObjectTypeChildren(t,e,i,n){switch(t.type){case"title":return{...e,[t.type]:n,titleAttributes:{...i}};case"body":return{...e,bodyAttributes:{...i}};case"html":return{...e,htmlAttributes:{...i}};default:return{...e,[t.type]:{...i}}}}mapArrayTypeChildrenToProps(t,e){let i={...e};return Object.keys(t).forEach((e=>{i={...i,[e]:t[e]}})),i}warnOnInvalidChildren(t,e){return my(xy.some((e=>t.type===e)),"function"==typeof t.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${xy.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),my(!e||"string"==typeof e||Array.isArray(e)&&!e.some((t=>"string"!=typeof t)),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let i={};return H.Children.forEach(t,(t=>{if(!t||!t.props)return;const{children:n,...s}=t.props,r=Object.keys(s).reduce(((t,e)=>(t[ky[e]||e]=s[e],t)),{});let{type:o}=t;switch("symbol"==typeof o?o=o.toString():this.warnOnInvalidChildren(t,n),o){case"Symbol(react.fragment)":e=this.mapChildrenToProps(n,e);break;case"link":case"meta":case"noscript":case"script":case"style":i=this.flattenArrayTypeChildren(t,i,r,n);break;default:e=this.mapObjectTypeChildren(t,e,r,n)}})),this.mapArrayTypeChildrenToProps(i,e)}render(){const{children:t,...e}=this.props;let i={...e},{helmetData:n}=e;return t&&(i=this.mapChildrenToProps(t,i)),!n||n instanceof Vy||(n=new Vy(n.context,!0),delete i.helmetData),n?H.createElement(Xy,{...i,context:n.value}):H.createElement(qy.Consumer,null,(t=>H.createElement(Xy,{...i,context:t})))}};function Jy(){return t.jsx(m,{children:t.jsxs(g,{className:"flex items-center gap-1 h-full pl-2 pr",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",className:"w-6 h-6 mr-3 filter drop-shadow-[0_0_5px_rgba(255,255,255,0.3)] drop-shadow-[0_0_15px_rgba(255,255,255,0.2)] drop-shadow-[0_0_25px_rgba(255,255,255,0.1)]",children:[t.jsx("rect",{x:"0",y:"0",width:"70",height:"100",fill:"#808080",rx:"20",ry:"20"}),t.jsx("path",{d:"M50 0h30c11 0 20 9 20 20v30h-50z",fill:"white"}),t.jsx("path",{d:"M50 50h50v30c0 11-9 20-20 20h-30z",fill:"#000"})]}),"Govex"]})})}const tv=[{title:"Trade",link:"/"},{title:"Create",link:"/create"},{title:"Learn",link:"/learn",icon:t.jsx(x,{})}];function ev(){const[e,i]=V.useState(!1),n=V.useCallback((()=>{i(!e)}),[e]);return t.jsx(y,{style:{maxWidth:"100vw",width:"100vw"},children:t.jsxs(v,{position:"sticky",px:"4",py:"2",justify:"between",align:"center",className:"border-b relative",children:[t.jsx(m,{className:"flex items-center pr-",children:t.jsx(rg,{to:"/",children:t.jsx(Jy,{})})}),t.jsx(m,{className:"hidden md:flex gap-5 items-center h-full",children:tv.map((e=>t.jsx(rg,{to:e.link,className:({isActive:t,isPending:e})=>"h-full flex items-center gap-2 "+(e?"pending":t?"font-bold text-blue-600":""),children:e.title},e.link)))}),t.jsxs(v,{gap:"3",align:"center",children:[t.jsx(m,{className:"connect-wallet-wrapper flex items-center",children:t.jsx("div",{className:"bg-gray-800 rounded-lg p-1",children:t.jsx(rf,{className:"hover:bg-gray-700 text-gray-100"})})}),t.jsxs(m,{className:"md:hidden",children:[t.jsx(b,{className:"md:hidden bg-gray-800 rounded-lg hover:bg-gray-700",variant:"ghost",onClick:n,children:t.jsx(w,{width:"24",height:"24",className:"text-gray-300"})}),e&&t.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 rounded-lg shadow-lg py-1 z-50",children:tv.map((e=>t.jsx(rg,{to:e.link,onClick:()=>i(!1),className:({isActive:t,isPending:e})=>"block px-4 py-2 hover:bg-gray-700 "+(e?"pending":t?"font-bold text-blue-600":"text-gray-200"),children:e.title},e.link)))})]})]})]})})}const iv="/images/twitter-image-govex.png",nv={"/":{title:"Trade - Govex",description:"View all proposals.",ogImage:iv},"/create":{title:"Create - Govex",description:"Create proposals and DAOs.",ogImage:iv},"/learn":{title:"Learn - Govex",description:"Learn more about the Govex platform.",ogImage:iv}};function sv(){const e=vm(),{title:i,description:n,ogImage:s}=(function(t){if(nv[t])return nv[t];const e=new URL(window.location.origin+t),i=new URLSearchParams(e.search);return"/"===t&&i.has("dao")?{title:"Proposal View - Govex",description:"View proposals for your DAO.",ogImage:iv}:"/create"===t&&i.has("dao")?{title:"Create Proposal - Govex",description:"Create proposals for your DAO.",ogImage:iv}:t.startsWith("/trade/")?{title:"Proposal View - Govex",description:"Trade the selected proposal",ogImage:iv}:nv["/"]})(e.pathname);return t.jsxs("div",{children:[t.jsxs(Qy,{children:[t.jsx("title",{children:i}),t.jsx("meta",{name:"description",content:n,"data-rh":"true"}),t.jsx("meta",{property:"og:title",content:i}),t.jsx("meta",{property:"og:description",content:n}),s&&t.jsx("meta",{property:"og:image",content:s}),t.jsx("meta",{property:"og:url",content:window.location.href}),t.jsx("meta",{property:"og:type",content:"website"})]}),t.jsx(ry,{position:"bottom-center"}),t.jsx(ev,{}),t.jsx(y,{py:"4",style:{maxWidth:"100vw",width:"100vw"},children:t.jsx(Pm,{})})]})}var rv=(t=>(t.Locked="locked",t.Escrow="escrow",t.GetOwnedObjects="getOwnedObjects",t.Dao="dao",t.Proposals="proposals",t.ProposalDetail="",t.VerificationHistory="verification-history",t))(rv||{});const ov="https://www.govex.ai/api/",av="0x00cc98effcd697b6021a1192587ccfe2d1e49d3edb3d83e488ba129dca00e8d4",lv="0xdbb23ebdea13ba34e3d42284bb844e7c066759eeb0f2a0951ae210c058dfebc7",cv="0x2947e8b5cec875800832ebfac0aee1998581df0ec77392a984255efacebc84fc",hv="0x6dd66f8e91cd6ebe427ceac80203a3369d4e220a8ba6db70c8b9325aa77868ea",uv="0x2a6f93ac460cce22e8c1eca3e9d9e67d6853e5bb03dd72c59263a4f62df9c7d0",dv="0xbca761149ecff8360788d8e7536285719504f9cc88cce162b2cfef1cef9138ce",fv="0x64f96d762c6fc8b91507a7b1c61ef55cb5dedf283bcece055763a223cadde815",pv="testnet",mv=({className:e="",size:i=18})=>t.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`text-green-500 ${e}`,children:[t.jsx("path",{d:"M13.8179 4.54512L13.6275 4.27845C12.8298 3.16176 11.1702 3.16176 10.3725 4.27845L10.1821 4.54512C9.76092 5.13471 9.05384 5.45043 8.33373 5.37041L7.48471 5.27608C6.21088 5.13454 5.13454 6.21088 5.27608 7.48471L5.37041 8.33373C5.45043 9.05384 5.13471 9.76092 4.54512 10.1821L4.27845 10.3725C3.16176 11.1702 3.16176 12.8298 4.27845 13.6275L4.54512 13.8179C5.13471 14.2391 5.45043 14.9462 5.37041 15.6663L5.27608 16.5153C5.13454 17.7891 6.21088 18.8655 7.48471 18.7239L8.33373 18.6296C9.05384 18.5496 9.76092 18.8653 10.1821 19.4549L10.3725 19.7215C11.1702 20.8382 12.8298 20.8382 13.6275 19.7215L13.8179 19.4549C14.2391 18.8653 14.9462 18.5496 15.6663 18.6296L16.5153 18.7239C17.7891 18.8655 18.8655 17.7891 18.7239 16.5153L18.6296 15.6663C18.5496 14.9462 18.8653 14.2391 19.4549 13.8179L19.7215 13.6275C20.8382 12.8298 20.8382 11.1702 19.7215 10.3725L19.4549 10.1821C18.8653 9.76092 18.5496 9.05384 18.6296 8.33373L18.7239 7.48471C18.8655 6.21088 17.7891 5.13454 16.5153 5.27608L15.6663 5.37041C14.9462 5.45043 14.2391 5.13471 13.8179 4.54512Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M9 12L10.8189 13.8189V13.8189C10.9189 13.9189 11.0811 13.9189 11.1811 13.8189V13.8189L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),gv=({value:e,onChange:i,onDaoSelect:n,tooltip:s})=>{const[r,o]=V.useState(!1),[a,l]=V.useState(""),c=V.useRef(null);V.useEffect((()=>{l(e)}),[e]);const{data:h,isLoading:u,error:d}=io({queryKey:["daos",a],queryFn:async()=>{if(!a)return{data:[]};const t=await fetch(`${ov}daos?dao_id=${encodeURIComponent(a)}`);if(!t.ok)throw new Error(`API error: ${t.statusText}`);return t.json()},enabled:a.length>0,staleTime:1});V.useEffect((()=>{const t=t=>{c.current&&!c.current.contains(t.target)&&o(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)}),[]);const f=(e,i)=>{if(!i)return e;const n=new RegExp(`(${i})`,"gi"),s=e.split(n);return t.jsx(t.Fragment,{children:s.map(((e,i)=>n.test(e)?t.jsx("span",{className:"bg-blue-500 bg-opacity-30",children:e},i):t.jsx("span",{children:e},i)))})};return t.jsx(S,{appearance:"dark",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"DAO Search"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-800 text-gray-200 text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:s})]})]}),t.jsxs("div",{className:"relative",ref:c,children:[t.jsx("input",{type:"text",name:"daoId",value:a,onChange:t=>{const e=t.target.value;l(e),o(!0),i(t),""===e&&n&&n(null)},onFocus:()=>o(!0),autoComplete:"off",className:"w-full p-2 bg-black border border-blue-500 rounded-md text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Search by DAO name or ID"}),r&&(a||u)&&t.jsx("div",{className:"absolute w-full mt-1 bg-gray-900 border border-gray-800 rounded-md shadow-xl z-10 max-h-60 overflow-auto",children:u?t.jsx("div",{className:"p-2 text-gray-400",children:"Loading..."}):d?t.jsx("div",{className:"p-2 text-red-400",children:d instanceof Error?d.message:"Error loading DAOs"}):h?.data?.length?h.data.map((e=>{return t.jsx("div",{className:"p-2 hover:bg-gray-800 cursor-pointer text-gray-200 transition-colors duration-150",onClick:()=>(t=>{const e={target:{name:"daoId",value:t.dao_id}};l(t.dao_id),i(e),n&&n(t),o(!1)})(e),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 flex-shrink-0",children:t.jsx("img",{src:e.dao_icon||"/placeholder-dao.png",alt:e.dao_name,className:"w-full h-full rounded-full object-cover",onError:t=>{t.currentTarget.src="/placeholder-dao.png"}})}),t.jsxs("div",{className:"flex-grow min-w-0 space-y-1",children:[t.jsxs("div",{className:"font-medium truncate flex items-center",children:[f(e.dao_name,a),e.verification?.verified&&t.jsx(mv,{className:"ml-1 flex-shrink-0"})]}),t.jsx("div",{className:"font-mono text-sm text-gray-400 truncate",children:(s=e.dao_id,s.length<=20?s:`${s.slice(0,10)}...${s.slice(-10)}`)})]})]})},e.dao_id);var s})):t.jsx("div",{className:"p-2 text-gray-400",children:"No DAOs found"})})]})]})})};function yv({daoId:e,daoName:i,isSelected:n}){const{data:s,isLoading:r}=io({queryKey:[rv.VerificationHistory,e],queryFn:async()=>{const t=await fetch(`${ov}dao/${e}/verification-requests`);if(!t.ok)throw new Error("Failed to fetch verification history");return t.json()},enabled:n&&Boolean(e)});return n?r?t.jsx("div",{className:"text-sm text-gray-500",children:"Loading verification history..."}):s?.length?t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:`Verification History for ${i}`}),t.jsxs(j,{variant:"surface",children:[t.jsx(C,{children:t.jsxs(E,{children:[t.jsx(M,{children:"Date"}),t.jsx(M,{children:"Status"}),t.jsx(M,{children:"Attestation"}),t.jsx(M,{children:"Details"})]})}),t.jsx(_,{children:s.map(((e,i)=>t.jsxs(E,{children:[t.jsx(T,{children:new Date(Number(e.timestamp)).toLocaleDateString()}),t.jsx(T,{children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.status?"bg-yellow-500/20 text-yellow-300":"approved"===e.status?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"),children:e.status})}),t.jsx(T,{children:t.jsx("a",{href:e.attestation_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 hover:underline",children:"View"})}),t.jsx(T,{children:e.reject_reason&&t.jsx("span",{className:"text-red-400",children:e.reject_reason})})]},`${e.verification_id}-${i}`)))})]})]}):t.jsx("div",{className:"text-sm text-gray-500",children:"No existing verification requests found"}):null}const vv=()=>{const[e,i]=V.useState({daoId:"",attestationUrl:""}),[n,s]=V.useState(null),{mutate:r}=Sf(),[o,a]=V.useState(!1),[l,c]=V.useState(null),h=t=>{const{name:e,value:n}=t.target;i((t=>({...t,[e]:n})))};return t.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[t.jsxs("form",{onSubmit:async t=>{t.preventDefault(),a(!0),c(null);const n=oy.loading("Requesting DAO verification...");try{if(!e.daoId)throw new Error("No DAO selected");if(!e.attestationUrl)throw new Error("Tweet URL is required");const t=new Ys;t.setGasBudget(5e7);const[o]=t.splitCoins(t.gas,[t.pure.u64(1e4)]);t.moveCall({target:`${av}::factory::request_verification`,arguments:[t.object(lv),o,t.object(e.daoId),t.pure.string(e.attestationUrl),t.object("0x6")]}),await r({transaction:t}),oy.dismiss(n),oy.success("Successfully requested DAO verification!",{duration:5e3}),i({daoId:"",attestationUrl:""}),s(null)}catch(o){oy.dismiss(n);const t=o instanceof Error?o.message:"Failed to request verification";c(t),oy.error(`Failed to verify DAO: ${t}`,{duration:5e3})}finally{a(!1)}},className:"space-y-4",children:[t.jsx(gv,{value:e.daoId,onChange:h,onDaoSelect:t=>{s(t),i((e=>({...e,daoId:t?.dao_id||""})))},tooltip:"The DAO name or ID that you want to get verified"}),n&&t.jsx("div",{className:"bg-gray-900 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 flex-shrink-0",children:t.jsx("img",{src:n.icon_url||"/placeholder-dao.png",alt:n.dao_name,className:"w-full h-full rounded-full object-cover",onError:t=>{t.currentTarget.src="/placeholder-dao.png"}})}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsxs("div",{className:"font-medium text-gray-200 truncate flex items-center",children:[n.dao_name,n.verification?.verified&&t.jsx(mv,{className:"ml-1 flex-shrink-0"})]}),t.jsxs("div",{className:"font-mono text-sm text-gray-400 flex items-center space-x-2",children:[t.jsx("span",{className:"truncate",children:(u=e.daoId,u.length<=20?u:`${u.slice(0,10)}...${u.slice(-10)}`)}),t.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),navigator.clipboard.writeText(`@govexdotai here is the ID for our official DAO: ${e.daoId}. We are excited to try futarchy on Sui \ud83d\ude80`),oy.success("DAO ID copied to clipboard")},className:"hover:text-gray-200 transition-colors",children:t.jsx(A,{className:"w-5 h-5"})})]})]})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Give us a tweet from the project's official Twitter account with the DAO ID."}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"Tweet @govexdotai with the onchain ID of the DAO you wish to formally affiliate with your organization."})]})]}),t.jsx("input",{type:"text",name:"attestationUrl",value:e.attestationUrl,onChange:h,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter tweet URL",required:!0})]}),t.jsxs("div",{className:" rounded-lg p-4 space-y-2",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-3",children:"Verification Requirements:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-gray-300",children:[t.jsx("li",{children:"The DAO's metadata is unique."}),t.jsx("li",{children:"The attestation tweet is from the organization's official Twitter account."}),t.jsx("li",{children:"The Twitter account has a verified tick."}),t.jsx("li",{children:"The DAO stable token has $100,000+ of liquidity onchain against USDC or SUI."}),t.jsx("li",{children:"Please wait for up to one week to get your DAO verified."})]})]}),l&&t.jsx("div",{className:"text-red-500 text-sm",children:l}),t.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 disabled:bg-blue-300 disabled:cursor-not-allowed",children:o?"Verifying...":"Get DAO Verified"})]}),t.jsx(yv,{daoId:e.daoId,daoName:n?.dao_name,isSelected:Boolean(n)})]});var u},bv=({value:e,onChange:i,label:n,tooltipText:s,placeholder:r="package::module::type",required:o=!1,onMetadataChange:a})=>{const[l,c]=V.useState(null),[h,u]=V.useState(!1),[d,f]=V.useState(null),p=Hd();V.useEffect((()=>{e&&m(e)}),[]);const m=async t=>{if("0x2::sui::SUI"!==(e=t)&&!/^0x[a-fA-F0-9]{64}::[a-z][a-z0-9_]*[a-z0-9]::[A-Z][A-Z0-9_]*[A-Z0-9]$/.test(e))return f("Invalid format. Expected: package::module::type"),c(null),void i(t,void 0);var e;u(!0),f(null);try{const e=await p.getCoinMetadata({coinType:t});e?(c(e),i(t,e),a?.(e)):(f("Coin type not found"),c(null),i(t,void 0),a?.(null))}catch(n){console.error("Metadata fetch error:",n),f("Failed to fetch coin metadata"),c(null),i(t,void 0),a?.(null)}finally{u(!1)}};return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:n}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:s})]})]}),l&&t.jsxs("span",{className:"text-sm text-gray-500",children:[l.name," (",l.symbol,")"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:e,onChange:t=>{const e=t.target.value;f(null),i(e,void 0)},onBlur:()=>{e&&m(e)},onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),m(e))},className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 "+(d?"border-red-500":l?"border-green-500":""),placeholder:r,required:o}),h&&t.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-500 border-t-transparent"})})]}),d&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:d})]})},wv="0x6dd66f8e91cd6ebe427ceac80203a3369d4e220a8ba6db70c8b9325aa77868ea::my_asset::MY_ASSET",xv="0xbca761149ecff8360788d8e7536285719504f9cc88cce162b2cfef1cef9138ce::my_stable::MY_STABLE",Sv=()=>{const[e,i]=V.useState({assetType:wv,stableType:xv,minAssetAmount:"1",minStableAmount:"1",daoName:"",imageUrl:"",reviewPeriodMs:36e5,tradingPeriodMs:72e5,twapStartDelay:6e4,twapStepMax:.1,twapThreshold:1}),{mutate:n}=Sf(),[s,r]=V.useState(!1),[o,a]=V.useState(null),[l,c]=V.useState(!1),[h,u]=V.useState(!1),[d,f]=V.useState(null),[p,m]=V.useState(null),[g,y]=V.useState(""),[v,b]=V.useState(!1),w=(t,e)=>{try{const i=t.replace(/,/g,"");return BigInt(Math.floor(parseFloat(i)*Math.pow(10,e)))}catch(qa){throw new Error(`Invalid amount format: ${t}`)}};V.useEffect((()=>{e.imageUrl?(b(!1),(async()=>{try{const t=(await fetch(e.imageUrl,{method:"HEAD"})).headers.get("content-length");if(t&&parseInt(t)>10485760)return b(!0),void oy.error("Image size exceeds 10MB limit. Please use a smaller image.");y(e.imageUrl)}catch(qa){b(!0),y("")}})()):y(d?.iconUrl?d.iconUrl:"")}),[e.imageUrl,d]);const x=t=>{const{name:e,value:n}=t.target;i((t=>({...t,[e]:n})))};return t.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:t.jsxs("form",{onSubmit:async t=>{if(console.log(e),console.log(d,p),t.preventDefault(),!d?.id||!p?.id)return void a("Valid coin metadata is required for both asset and stable coins");if(!(t=>/^0x[a-fA-F0-9]+::[a-zA-Z_]+::[A-Z_]+$/.test(t))(e.stableType))return void a("Invalid Stable Type format. Expected format: package::module::type");if(!e.minAssetAmount||!e.minStableAmount)return void a("Amount fields cannot be empty");if(isNaN(parseFloat(e.minAssetAmount))||isNaN(parseFloat(e.minStableAmount)))return void a("Please enter valid numbers for amounts");let i,s;try{i=w(e.minAssetAmount,d.decimals),s=w(e.minStableAmount,p.decimals),console.log("=== Debug Info ==="),console.log("Input values:",{minAssetAmount:e.minAssetAmount,minStableAmount:e.minStableAmount}),console.log("Calculated chain amounts:",{chainAssetAmount:i.toString(),chainStableAmount:s.toString()})}catch(qa){return a("Invalid amount format. Please enter valid numbers."),void console.error("Chain amount calculation error:",qa)}r(!0),a(null),c(!1);try{const t=new Ys;t.setGasBudget(5e7);const[r]=t.splitCoins(t.gas,[t.pure.u64(1e4)]),o=1e3*e.twapThreshold,a=Math.max(1,Math.round(100*e.twapStepMax));t.moveCall({target:`${av}::factory::create_dao`,typeArguments:[e.assetType,e.stableType],arguments:[t.object(lv),t.object(cv),r,t.pure.u64(i),t.pure.u64(s),t.pure.string(e.daoName),t.pure.string(e.imageUrl),t.pure.u64(e.reviewPeriodMs),t.pure.u64(e.tradingPeriodMs),t.object(d.id),t.object(p.id),t.pure.u64(e.twapStartDelay),t.pure.u64(a),t.pure.u64(o),t.object("0x6")]}),await n({transaction:t}),c(!0),oy.success("Successfully executed transaction!",{duration:5e3})}catch(o){a(o instanceof Error?o.message:"Failed to create DAO"),oy.error(`Failed to execute transaction: ${o}`,{duration:5e3})}finally{r(!1)}},className:"space-y-4",children:[t.jsx(bv,{value:e.assetType,onChange:(t,e)=>{i((e=>({...e,assetType:t}))),e&&f(e)},onMetadataChange:f,label:"Asset Type",tooltipText:"The asset that represents ownership over the DAO. Format: package::module::type",required:!0}),t.jsx(bv,{value:e.stableType,onChange:(t,e)=>{i((e=>({...e,stableType:t}))),e&&m(e)},label:"Stable Type",tooltipText:"The stable coin to price the asset in. Format: package::module::type",required:!0}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Min Asset Amount"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"The minimum amount of the asset the proposer must supply to create a proposal"})]})]}),t.jsx("input",{type:"text",name:"minAssetAmount",value:e.minAssetAmount,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Min Stable Amount"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"The minimum amount of the stable coin the proposer must supply to create a proposal"})]})]}),t.jsx("input",{type:"text",name:"minStableAmount",value:e.minStableAmount,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"DAO Name"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"The name of your DAO"})]})]}),t.jsx("input",{type:"text",name:"daoName",value:e.daoName,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter DAO name",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Advanced Settings"}),t.jsx("button",{type:"button",onClick:()=>u(!h),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(h?"bg-blue-500":"bg-gray-700"),children:t.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(h?"translate-x-6":"translate-x-1")})})]}),t.jsxs("div",{className:"space-y-4 mt-4 "+(h?"":"hidden"),children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Pre-trading Period (ms)"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"The period of time in milliseconds between when a proposal is created and trading will begin."})]})]}),t.jsx("input",{type:"number",name:"reviewPeriodMs",value:e.reviewPeriodMs,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Trading Period (ms)"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"The trading period in milliseconds"})]})]}),t.jsx("input",{type:"number",name:"tradingPeriodMs",value:e.tradingPeriodMs,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"TWAP Start Delay (ms)"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"Delay before TWAP calculations begin (in milliseconds)"})]})]}),t.jsx("input",{type:"number",name:"twapStartDelay",value:e.twapStartDelay,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"TWAP Step Max (%)"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"Maximum % step size for TWAP cap per a 60s window"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",name:"twapStepMax",value:Number(e.twapStepMax).toFixed(2),onChange:t=>{const e=Math.round(100*parseFloat(t.target.value))/100;i((t=>({...t,twapStepMax:e})))},className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 pr-8",min:"0.01",step:"0.01",required:!0}),t.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"TWAP Threshold (%)"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"% difference by which an outcome must be greater than Reject to pass"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",name:"twapThreshold",value:Number(e.twapThreshold).toFixed(3),onChange:t=>{const e=Math.round(1e3*parseFloat(t.target.value))/1e3;i((t=>({...t,twapThreshold:e})))},className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 pr-8",min:"0.001",step:"0.001",required:!0}),t.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Overwrite default DAO image with new URL"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:"If not set this will default to the URL for your asset coin. If your asset coin does not have a URL, set one here."})]})]}),t.jsx("input",{type:"text",name:"imageUrl",value:e.imageUrl,onChange:x,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter image URL"})]})]})," ",t.jsxs("div",{className:"mt-6 space-y-2",children:[t.jsx("h3",{className:"block text-sm font-medium",children:"Preview DAO Image"}),t.jsxs("div",{className:"w-32 h-32 border rounded-lg overflow-hidden bg-gray-50",children:[g&&t.jsx("img",{src:g,alt:"DAO Preview",className:"w-full h-full object-cover rounded-lg",onError:()=>{b(!0),y("")},onLoad:()=>b(!1)}),!g&&t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No image"})]}),v&&t.jsx("p",{className:"text-sm text-red-500",children:e.imageUrl?"Error: Image is over 10MB or invalid URL":"Failed to load image"})]}),t.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 disabled:bg-blue-300 disabled:cursor-not-allowed",children:s?"Creating...":"Create DAO"})]})})};function kv(){return kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},kv.apply(this,arguments)}const jv=["children","options"],Cv="0",Ev="1",Mv="2",_v="3",Tv="4",Av="5",Ov="6",Nv="7",Iv="8",Lv="9",zv="10",Rv="11",Pv="12",Dv="13",$v="14",Bv="15",Uv="16",Fv="17",Wv="18",Vv="19",qv="20",Hv="21",Kv="22",Gv="23",Zv="24",Yv="25",Xv="27",Qv="28",Jv="29",tb="30",eb="31",ib="32",nb="33";var sb;!(function(t){t[t.MAX=0]="MAX",t[t.HIGH=1]="HIGH",t[t.MED=2]="MED",t[t.LOW=3]="LOW",t[t.MIN=4]="MIN"})(sb||(sb={}));const rb=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((t,e)=>(t[e.toLowerCase()]=e,t)),{class:"className",for:"htmlFor"}),ob={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xa0",quot:"\u201c"},ab=["style","script"],lb=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,cb=/mailto:/i,hb=/\n{2,}$/,ub=/^(\s*>[\s\S]*?)(?=\n\n|$)/,db=/^ *> ?/gm,fb=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,pb=/^ {2,}\n/,mb=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,gb=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,yb=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,vb=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,bb=/^(?:\n *)*\n/,wb=/\r\n?/g,xb=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,Sb=/^\[\^([^\]]+)]/,kb=/\f/g,jb=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,Cb=/^\s*?\[(x|\s)\]/,Eb=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Mb=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,_b=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,Tb=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,Ab=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,Ob=/^<!--[\s\S]*?(?:-->)/,Nb=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,Ib=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,Lb=/^\{.*\}$/,zb=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Rb=/^<([^ >]+@[^ >]+)>/,Pb=/^<([^ >]+:\/[^ >]+)>/,Db=/-([a-z])?/gi,$b=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Bb=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Ub=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,Fb=/^\[([^\]]*)\] ?\[([^\]]*)\]/,Wb=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,Vb=/\t/g,qb=/(^ *\||\| *$)/g,Hb=/^ *:-+: *$/,Kb=/^ *:-+ *$/,Gb=/^ *-+: *$/,Zb="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",Yb=new RegExp(`^([*_])\\1${Zb}\\1\\1(?!\\1)`),Xb=new RegExp(`^([*_])${Zb}\\1(?!\\1|\\w)`),Qb=new RegExp(`^==${Zb}==`),Jb=new RegExp(`^~~${Zb}~~`),tw=/^\\([^0-9A-Za-z\s])/,ew=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,iw=/^\n+/,nw=/^([ \t]*)/,sw=/\\([^\\])/g,rw=/ *\n+$/,ow=/(?:^|\n)( *)$/,aw="(?:\\d+\\.)",lw="(?:[*+-])";function cw(t){return"( *)("+(1===t?aw:lw)+") +"}const hw=cw(1),uw=cw(2);function dw(t){return new RegExp("^"+(1===t?hw:uw))}const fw=dw(1),pw=dw(2);function mw(t){return new RegExp("^"+(1===t?hw:uw)+"[^\\n]*(?:\\n(?!\\1"+(1===t?aw:lw)+" )[^\\n]*)*(\\n|$)","gm")}const gw=mw(1),yw=mw(2);function vw(t){const e=1===t?aw:lw;return new RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const bw=vw(1),ww=vw(2);function xw(t,e){const i=1===e,n=i?bw:ww,s=i?gw:yw,r=i?fw:pw;return{match(t,e){const i=ow.exec(e.prevCapture);return i&&(e.list||!e.inline&&!e.simple)?n.exec(t=i[1]+t):null},order:1,parse(t,e,n){const o=i?+t[2]:void 0,a=t[0].replace(hb,"\n").match(s);let l=!1;return{items:a.map((function(t,i){const s=r.exec(t)[0].length,o=new RegExp("^ {1,"+s+"}","gm"),c=t.replace(o,"").replace(r,""),h=i===a.length-1,u=-1!==c.indexOf("\n\n")||h&&l;l=u;const d=n.inline,f=n.list;let p;n.list=!0,u?(n.inline=!1,p=c.replace(rw,"\n\n")):(n.inline=!0,p=c.replace(rw,""));const m=e(p,n);return n.inline=d,n.list=f,m})),ordered:i,start:o}},render:(e,i,n)=>t(e.ordered?"ol":"ul",{key:n.key,start:"20"===e.type?e.start:void 0},e.items.map((function(e,s){return t("li",{key:s},i(e,n))})))}}const Sw=new RegExp("^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),kw=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,jw=[ub,gb,yb,Eb,_b,Mb,Ob,$b,gw,bw,yw,ww],Cw=[...jw,/^[^\n]+(?:  \n|\n{2,})/,Tb,Ib];function Ew(t){return t.replace(/[\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xc6]/g,"a").replace(/[\xe7\xc7]/g,"c").replace(/[\xf0\xd0]/g,"d").replace(/[\xc8\xc9\xca\xcb\xe9\xe8\xea\xeb]/g,"e").replace(/[\xcf\xef\xce\xee\xcd\xed\xcc\xec]/g,"i").replace(/[\xd1\xf1]/g,"n").replace(/[\xf8\xd8\u0153\u0152\xd5\xf5\xd4\xf4\xd3\xf3\xd2\xf2]/g,"o").replace(/[\xdc\xfc\xdb\xfb\xda\xfa\xd9\xf9]/g,"u").replace(/[\u0178\xff\xdd\xfd]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Mw(t){return Gb.test(t)?"right":Hb.test(t)?"center":Kb.test(t)?"left":null}function _w(t,e,i,n){const s=i.inTable;i.inTable=!0;let r=[[]],o="";function a(){if(!o)return;const t=r[r.length-1];t.push.apply(t,e(o,i)),o=""}return t.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach(((t,e,i)=>{"|"===t.trim()&&(a(),n)?0!==e&&e!==i.length-1&&r.push([]):o+=t})),a(),i.inTable=s,r}function Tw(t,e,i){i.inline=!0;const n=t[2]?t[2].replace(qb,"").split("|").map(Mw):[],s=t[3]?(function(t,e,i){return t.trim().split("\n").map((function(t){return _w(t,e,i,!0)}))})(t[3],e,i):[],r=_w(t[1],e,i,!!s.length);return i.inline=!1,s.length?{align:n,cells:s,header:r,type:"25"}:{children:r,type:"21"}}function Aw(t,e){return null==t.align[e]?{}:{textAlign:t.align[e]}}function Ow(t){return function(e,i){return i.inline?t.exec(e):null}}function Nw(t){return function(e,i){return i.inline||i.simple?t.exec(e):null}}function Iw(t){return function(e,i){return i.inline||i.simple?null:t.exec(e)}}function Lw(t){return function(e){return t.exec(e)}}function zw(t,e){if(e.inline||e.simple)return null;let i="";t.split("\n").every((t=>(t+="\n",!jw.some((e=>e.test(t)))&&(i+=t,!!t.trim()))));const n=i.trimEnd();return""==n?null:[i,n]}function Rw(t){try{if(decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch(t){return null}return t}function Pw(t){return t.replace(sw,"$1")}function Dw(t,e,i){const n=i.inline||!1,s=i.simple||!1;i.inline=!0,i.simple=!0;const r=t(e,i);return i.inline=n,i.simple=s,r}function $w(t,e,i){const n=i.inline||!1,s=i.simple||!1;i.inline=!1,i.simple=!0;const r=t(e,i);return i.inline=n,i.simple=s,r}function Bw(t,e,i){const n=i.inline||!1;i.inline=!1;const s=t(e,i);return i.inline=n,s}const Uw=(t,e,i)=>({children:Dw(e,t[1],i)});function Fw(){return{}}function Ww(){return null}function Vw(...t){return t.filter(Boolean).join(" ")}function qw(t,e,i){let n=t;const s=e.split(".");for(;s.length&&(n=n[s[0]],void 0!==n);)s.shift();return n||i}function Hw(t="",e={}){function i(t,i,...n){const s=qw(e.overrides,`${t}.props`,{});return e.createElement((function(t,e){const i=qw(e,t);return i?"function"==typeof i||"object"==typeof i&&"render"in i?i:qw(e,`${t}.component`,t):t})(t,e.overrides),kv({},i,s,{className:Vw(null==i?void 0:i.className,s.className)||void 0}),...n)}function n(t){t=t.replace(jb,"");let n=!1;e.forceInline?n=!0:e.forceBlock||(n=!1===Wb.test(t));const s=c(l(n?t:`${t.trimEnd().replace(iw,"")}\n\n`,{inline:n}));for(;"string"==typeof s[s.length-1]&&!s[s.length-1].trim();)s.pop();if(null===e.wrapper)return s;const r=e.wrapper||(n?"span":"div");let o;if(s.length>1||e.forceWrapper)o=s;else{if(1===s.length)return o=s[0],"string"==typeof o?i("span",{key:"outer"},o):o;o=null}return e.createElement(r,{key:"outer"},o)}function s(t,i){const s=i.match(lb);return s?s.reduce((function(i,s){const r=s.indexOf("=");if(-1!==r){const o=(function(t){return-1!==t.indexOf("-")&&null===t.match(Nb)&&(t=t.replace(Db,(function(t,e){return e.toUpperCase()}))),t})(s.slice(0,r)).trim(),a=(function(t){const e=t[0];return('"'===e||"'"===e)&&t.length>=2&&t[t.length-1]===e?t.slice(1,-1):t})(s.slice(r+1).trim()),l=rb[o]||o;if("ref"===l)return i;const c=i[l]=(function(t,e,i,n){return"style"===e?i.split(/;\s?/).reduce((function(t,e){const i=e.slice(0,e.indexOf(":"));return t[i.trim().replace(/(-[a-z])/g,(t=>t[1].toUpperCase()))]=e.slice(i.length+1).trim(),t}),{}):"href"===e||"src"===e?n(i,t,e):(i.match(Lb)&&(i=i.slice(1,i.length-1)),"true"===i||"false"!==i&&i)})(t,o,a,e.sanitizer);"string"==typeof c&&(Tb.test(c)||Ib.test(c))&&(i[l]=n(c.trim()))}else"style"!==s&&(i[rb[s]||s]=!0);return i}),{}):null}e.overrides=e.overrides||{},e.sanitizer=e.sanitizer||Rw,e.slugify=e.slugify||Ew,e.namedCodesToUnicode=e.namedCodesToUnicode?kv({},ob,e.namedCodesToUnicode):ob,e.createElement=e.createElement||V.createElement;const r=[],o={},a={[Cv]:{match:Iw(ub),order:1,parse(t,e,i){const[,n,s]=t[0].replace(db,"").match(fb);return{alert:n,children:e(s,i)}},render(t,n,s){const r={key:s.key};return t.alert&&(r.className="markdown-alert-"+e.slugify(t.alert.toLowerCase(),Ew),t.children.unshift({attrs:{},children:[{type:Xv,text:t.alert}],noInnerParse:!0,type:Rv,tag:"header"})),i("blockquote",r,n(t.children,s))}},[Ev]:{match:Lw(pb),order:1,parse:Fw,render:(t,e,n)=>i("br",{key:n.key})},[Mv]:{match:Iw(mb),order:1,parse:Fw,render:(t,e,n)=>i("hr",{key:n.key})},[_v]:{match:Iw(yb),order:0,parse:t=>({lang:void 0,text:t[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(t,e,n)=>i("pre",{key:n.key},i("code",kv({},t.attrs,{className:t.lang?`lang-${t.lang}`:""}),t.text))},[Tv]:{match:Iw(gb),order:0,parse:t=>({attrs:s("code",t[3]||""),lang:t[2]||void 0,text:t[4],type:"3"})},[Av]:{match:Nw(vb),order:3,parse:t=>({text:t[2]}),render:(t,e,n)=>i("code",{key:n.key},t.text)},[Ov]:{match:Iw(xb),order:0,parse:t=>(r.push({footnote:t[2],identifier:t[1]}),{}),render:Ww},[Nv]:{match:Ow(Sb),order:1,parse:t=>({target:`#${e.slugify(t[1],Ew)}`,text:t[1]}),render:(t,n,s)=>i("a",{key:s.key,href:e.sanitizer(t.target,"a","href")},i("sup",{key:s.key},t.text))},[Iv]:{match:Ow(Cb),order:1,parse:t=>({completed:"x"===t[1].toLowerCase()}),render:(t,e,n)=>i("input",{checked:t.completed,key:n.key,readOnly:!0,type:"checkbox"})},[Lv]:{match:Iw(e.enforceAtxHeadings?Mb:Eb),order:1,parse:(t,i,n)=>({children:Dw(i,t[2],n),id:e.slugify(t[2],Ew),level:t[1].length}),render:(t,e,n)=>i(`h${t.level}`,{id:t.id,key:n.key},e(t.children,n))},[zv]:{match:Iw(_b),order:0,parse:(t,e,i)=>({children:Dw(e,t[1],i),level:"="===t[2]?1:2,type:"9"})},[Rv]:{match:Lw(Tb),order:1,parse(t,e,i){const[,n]=t[3].match(nw),r=new RegExp(`^${n}`,"gm"),o=t[3].replace(r,""),a=(l=o,Cw.some((t=>t.test(l)))?Bw:Dw);var l;const c=t[1].toLowerCase(),h=-1!==ab.indexOf(c),u=(h?c:t[1]).trim(),d={attrs:s(u,t[2]),noInnerParse:h,tag:u};return i.inAnchor=i.inAnchor||"a"===c,h?d.text=t[3]:d.children=a(e,o,i),i.inAnchor=!1,d},render:(t,e,n)=>i(t.tag,kv({key:n.key},t.attrs),t.text||(t.children?e(t.children,n):""))},[Dv]:{match:Lw(Ib),order:1,parse(t){const e=t[1].trim();return{attrs:s(e,t[2]||""),tag:e}},render:(t,e,n)=>i(t.tag,kv({},t.attrs,{key:n.key}))},[Pv]:{match:Lw(Ob),order:1,parse:()=>({}),render:Ww},[$v]:{match:Nw(kw),order:1,parse:t=>({alt:t[1],target:Pw(t[2]),title:t[3]}),render:(t,n,s)=>i("img",{key:s.key,alt:t.alt||void 0,title:t.title||void 0,src:e.sanitizer(t.target,"img","src")})},[Bv]:{match:Ow(Sw),order:3,parse:(t,e,i)=>({children:$w(e,t[1],i),target:Pw(t[2]),title:t[3]}),render:(t,n,s)=>i("a",{key:s.key,href:e.sanitizer(t.target,"a","href"),title:t.title},n(t.children,s))},[Uv]:{match:Ow(Pb),order:0,parse:t=>({children:[{text:t[1],type:Xv}],target:t[1],type:Bv})},[Fv]:{match:(t,i)=>i.inAnchor||e.disableAutoLink?null:Ow(zb)(t,i),order:0,parse:t=>({children:[{text:t[1],type:Xv}],target:t[1],title:void 0,type:Bv})},[Wv]:{match:Ow(Rb),order:0,parse(t){let e=t[1],i=t[1];return cb.test(i)||(i="mailto:"+i),{children:[{text:e.replace("mailto:",""),type:Xv}],target:i,type:Bv}}},[qv]:xw(i,1),[nb]:xw(i,2),[Vv]:{match:Iw(bb),order:3,parse:Fw,render:()=>"\n"},[Hv]:{match:zw,order:3,parse:Uw,render:(t,e,n)=>i("p",{key:n.key},e(t.children,n))},[Kv]:{match:Ow(Bb),order:0,parse:t=>(o[t[1]]={target:t[2],title:t[4]},{}),render:Ww},[Gv]:{match:Nw(Ub),order:0,parse:t=>({alt:t[1]||void 0,ref:t[2]}),render:(t,n,s)=>o[t.ref]?i("img",{key:s.key,alt:t.alt,src:e.sanitizer(o[t.ref].target,"img","src"),title:o[t.ref].title}):null},[Zv]:{match:Ow(Fb),order:0,parse:(t,e,i)=>({children:e(t[1],i),fallbackChildren:t[0],ref:t[2]}),render:(t,n,s)=>o[t.ref]?i("a",{key:s.key,href:e.sanitizer(o[t.ref].target,"a","href"),title:o[t.ref].title},n(t.children,s)):i("span",{key:s.key},t.fallbackChildren)},[Yv]:{match:Iw($b),order:1,parse:Tw,render(t,e,n){const s=t;return i("table",{key:n.key},i("thead",null,i("tr",null,s.header.map((function(t,r){return i("th",{key:r,style:Aw(s,r)},e(t,n))})))),i("tbody",null,s.cells.map((function(t,r){return i("tr",{key:r},t.map((function(t,r){return i("td",{key:r,style:Aw(s,r)},e(t,n))})))}))))}},[Xv]:{match:Lw(ew),order:4,parse:t=>({text:t[0].replace(Ab,((t,i)=>e.namedCodesToUnicode[i]?e.namedCodesToUnicode[i]:t))}),render:t=>t.text},[Qv]:{match:Nw(Yb),order:2,parse:(t,e,i)=>({children:e(t[2],i)}),render:(t,e,n)=>i("strong",{key:n.key},e(t.children,n))},[Jv]:{match:Nw(Xb),order:3,parse:(t,e,i)=>({children:e(t[2],i)}),render:(t,e,n)=>i("em",{key:n.key},e(t.children,n))},[tb]:{match:Nw(tw),order:1,parse:t=>({text:t[1],type:Xv})},[eb]:{match:Nw(Qb),order:3,parse:Uw,render:(t,e,n)=>i("mark",{key:n.key},e(t.children,n))},[ib]:{match:Nw(Jb),order:3,parse:Uw,render:(t,e,n)=>i("del",{key:n.key},e(t.children,n))}};!0===e.disableParsingRawHTML&&(delete a[Rv],delete a[13]);const l=(function(t){let e=Object.keys(t);function i(n,s){let r=[];for(s.prevCapture=s.prevCapture||"";n;){let o=0;for(;o<e.length;){const a=e[o],l=t[a],c=l.match(n,s);if(c){const t=c[0];s.prevCapture+=t,n=n.substring(t.length);const e=l.parse(c,i,s);null==e.type&&(e.type=a),r.push(e);break}o++}}return s.prevCapture="",r}return e.sort((function(e,i){let n=t[e].order,s=t[i].order;return n!==s?n-s:e<i?-1:1})),function(t,e){return i((function(t){return t.replace(wb,"\n").replace(kb,"").replace(Vb,"    ")})(t),e)}})(a),c=(h=(function(t,e){return function(i,n,s){const r=t[i.type].render;return e?e((()=>r(i,n,s)),i,n,s):r(i,n,s)}})(a,e.renderRule),function t(e,i={}){if(Array.isArray(e)){const n=i.key,s=[];let r=!1;for(let o=0;o<e.length;o++){i.key=o;const n=t(e[o],i),a="string"==typeof n;a&&r?s[s.length-1]+=n:null!==n&&s.push(n),r=a}return i.key=n,s}return h(e,t,i)});var h;const u=n(t);return r.length?i("div",null,u,i("footer",{key:"footer"},r.map((function(t){return i("div",{id:e.slugify(t.identifier,Ew),key:t.identifier},t.identifier,c(l(t.footnote,{inline:!0})))})))):u}const Kw=t=>{let{children:e="",options:i}=t,n=(function(t,e){if(null==t)return{};var i,n,s={},r=Object.keys(t);for(n=0;n<r.length;n++)e.indexOf(i=r[n])>=0||(s[i]=t[i]);return s})(t,jv);return V.cloneElement(Hw(e,i),n)},Gw={title:"",description:"# Intro\n\nWalk **all** the dogs twice a day because they have been good.\n\n![Dog](https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Black_Labrador_Retriever_-_Male_IMG_3323.jpg/1280px-Black_Labrador_Retriever_-_Male_IMG_3323.jpg)\n\n# Details\n\n\u2022 Walk 4+ KM\n\n\u2022 Bring treats\n\n\u2022 Bring lead",metadata:"test",outcomeMessages:["Reject","Accept"],daoObjectId:"",assetType:"",stableType:"",minAssetAmount:"0",minStableAmount:"0",senderAddress:""},Zw=t=>t.length<=20?t:`${t.slice(0,10)}...${t.slice(-10)}`,Yw=({value:e,onChange:i,tooltip:n,customAmounts:s,setCustomAmounts:r,daoData:o})=>{const[a,l]=V.useState((()=>{const t=e.split(",").map((t=>t.trim()));return t.length<2?["Reject","Accept"]:t})),c=t=>t?[parseFloat(h(t.minAssetAmount,t.asset_decimals))||0,parseFloat(h(t.minStableAmount,t.stable_decimals))||0]:[0,0],h=(t,e)=>(parseInt(t)/Math.pow(10,e)).toString();return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Outcome Messages"}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:n})]})]}),t.jsxs("div",{className:"space-y-2",children:[a.map(((e,n)=>{const h=0===n||2===a.length&&1===n;return t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"text",value:e,onChange:t=>((t,e)=>{if(0===t)return;if(2===a.length&&1===t)return;const n=[...a];n[t]=e,l(n),i({target:{name:"outcomeMessages",value:n.join(", ")}})})(n,t.target.value),className:"flex-1 p-2 rounded-md text-gray-100 "+(h?"bg-gray-900 cursor-not-allowed":"bg-black border border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"),disabled:h}),!h&&a.length>2&&t.jsx("button",{type:"button",onClick:()=>(t=>{if(a.length<=2)return;let e,n;const[h,u]=c(o);3===a.length?(e=["Reject","Accept"],n=[h,u,h,u]):(e=[...a.slice(0,t),...a.slice(t+1)],n=[...s.slice(0,2*t),...s.slice(2*(t+1))],e=e.map(((t,e)=>0===e?"Reject":`Option ${e+1}`))),r(n),l(e),i({target:{name:"outcomeMessages",value:e.join(", ")}})})(n),className:"p-2 text-gray-400 hover:text-gray-200 bg-gray-900 rounded-md",children:"\u2212"})]},n)})),a.length<10&&t.jsxs("button",{type:"button",onClick:()=>{if(a.length>=10)return;const t=[...a],[e,n]=c(o),h=[...s];2===a.length?(t[1]="Option 2",t.push("Option 3"),h[2]=e,h[3]=n,h.push(e),h.push(n)):(t.push(`Option ${a.length+1}`),h.push(e),h.push(n)),r(h),l(t),i({target:{name:"outcomeMessages",value:t.join(", ")}})},className:"flex items-center space-x-1 text-blue-500 hover:text-blue-600 px-2 py-1 rounded border",children:[t.jsx("span",{children:"+"}),t.jsx("span",{children:"Add Option"})]})]})]})},Xw=({walletAddress:e,daoIdFromUrl:i})=>{const[n,s]=V.useState(!1),[r,o]=V.useState(!1),[a,l]=V.useState([]),[c,h]=V.useState((()=>({...Gw,senderAddress:e}))),{data:u}=io({queryKey:["dao",i],queryFn:async()=>{if(!i)return null;const t=await fetch(`${ov}daos?dao_id=${encodeURIComponent(i)}`);if(!t.ok)throw new Error(`API error: ${t.statusText}`);return(await t.json()).data[0]||null},enabled:!!i});V.useEffect((()=>{h((t=>({...t,senderAddress:e,daoObjectId:u?.dao_id||t.daoObjectId,assetType:u?.assetType||t.assetType,stableType:u?.stableType||t.stableType,minAssetAmount:u?f(u.minAssetAmount,u.asset_decimals):t.minAssetAmount,minStableAmount:u?f(u.minStableAmount,u.stable_decimals):t.minStableAmount}))),u&&c.outcomeMessages.length>0&&p(u)}),[e,i,u]);const d=(t,e)=>Math.floor(t*Math.pow(10,e)),f=(t,e)=>(parseInt(t)/Math.pow(10,e)).toString(),p=t=>{const e=parseFloat(f(t.minAssetAmount,t.asset_decimals))||0,i=parseFloat(f(t.minStableAmount,t.stable_decimals))||0,n=[];c.outcomeMessages.forEach((()=>{n.push(e),n.push(i)})),l(n)},{mutate:m}=Sf(),[g,y]=V.useState(!1),[v,b]=V.useState(null),w=t=>{const{name:i,value:n}=t.target;h((t=>({...t,[i]:"outcomeMessages"===i?n.split(",").map((t=>t.trim())):n,senderAddress:e})))},x=xm();return t.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:t.jsxs("form",{onSubmit:async t=>{t.preventDefault(),y(!0),b(null);try{const t=256,e=512,i=16384;if(!c.daoObjectId)throw new Error("No DAO found for that ID");if(!c.assetType||!c.stableType)throw new Error("Asset and Stable types are required");if(!c.title)throw new Error("Title is required");if(!c.description)throw new Error("Description is required");if(!c.outcomeMessages||c.outcomeMessages.length<2)throw new Error("At least two outcome messages are required");if(!c.senderAddress)throw new Error("Sender address is missing");const s=new TextEncoder,r=s.encode(c.title).length,o=s.encode(c.metadata).length,l=s.encode(c.description).length;if(r>t)throw new Error(`Title exceeds maximum length of ${t} characters (current: ${r} characters)`);if(o>e)throw new Error(`Metadata exceeds maximum length of ${e} characters (current: ${o} characters)`);if(l>i)throw new Error(`Description exceeds maximum length of ${i} characters (current: ${l} characters)`);let f=null;if(n&&a.length>0)f=a.map(((t,e)=>d(t,e%2==0?u?.asset_decimals||0:u?.stable_decimals||0)));else{const t=c.outcomeMessages.length;f=[];for(let e=0;e<t;e++)f.push(d(parseFloat(c.minAssetAmount),u?.asset_decimals||0)),f.push(d(parseFloat(c.minStableAmount),u?.stable_decimals||0))}const p=await(async function(t,e,i){try{const n=new Qs({url:Tt(pv)}),[s,r]=await Promise.all([n.getCoins({owner:t.senderAddress,coinType:`0x${t.assetType}`}),n.getCoins({owner:t.senderAddress,coinType:`0x${t.stableType}`})]),o=new Ys,[a]=o.splitCoins(o.gas,[o.pure.u64(1e4)]);async function l(t,e,i){if(!t.data.length)throw new Error(`No ${i} coins available`);const n=BigInt(e),s=[...t.data].sort(((t,e)=>Number(BigInt(e.balance)-BigInt(t.balance))));if(BigInt(s[0].balance)>=n){const[t]=o.splitCoins(o.object(s[0].coinObjectId),[o.pure.u64(e)]);return t}let r=0n;const a=[];for(const o of s)if(r+=BigInt(o.balance),a.push(o.coinObjectId),r>=n)break;if(r<n)throw new Error(`Insufficient ${i} balance. Required: ${e}, Available: ${r}`);const l=o.object(a[0]);a.length>1&&o.mergeCoins(l,a.slice(1).map((t=>o.object(t))));const[c]=o.splitCoins(l,[o.pure.u64(e)]);return c}const c=t=>{let e=0,i=0;for(let n=0;n<t.length;n+=2)e=Math.max(e,t[n]),i=Math.max(i,t[n+1]);return{maxAsset:e,maxStable:i}},{maxAsset:h,maxStable:u}=e?c(e):{maxAsset:1e4,maxStable:1e4},[d,f]=await Promise.all([l(s,h.toString(),`0x${t.assetType}`),l(r,u.toString(),`0x${t.stableType}`)]);return o.moveCall({target:`${i}::dao::create_proposal`,typeArguments:[`0x${t.assetType}`,`0x${t.stableType}`],arguments:[o.object(t.daoObjectId),o.object(cv),a,o.pure.u64(t.outcomeMessages.length),d,f,o.pure.string(t.title),o.pure.string(t.description),o.pure.string(t.metadata),o.pure.vector("string",t.outcomeMessages),o.pure.option("vector<u64>",e||null),o.object("0x6")]}),o.setGasBudget(1e9),oy.success("Proposal transaction created successfully",{duration:5e3}),o}catch(v){const m=v instanceof Error?v.message:"Failed to create proposal transaction";throw oy.error(m,{duration:5e3}),v}})(c,f,av);await m({transaction:p}),h((t=>({...Gw,senderAddress:t.senderAddress})))}catch(e){console.error("Error creating proposal:",{message:e instanceof Error?e.message:String(e),details:e}),b(e instanceof Error?e.message:"Failed to create proposal")}finally{y(!1)}},className:"space-y-4",children:[t.jsx(gv,{value:c.daoObjectId,onChange:w,onDaoSelect:t=>{t?(h((i=>({...i,daoObjectId:t.dao_id,assetType:t.assetType,stableType:t.stableType,minAssetAmount:f(t.minAssetAmount,t.asset_decimals),minStableAmount:f(t.minStableAmount,t.stable_decimals),senderAddress:e}))),x(`/create?dao=${t.dao_id}`)):(h((t=>({...t,daoObjectId:"",assetType:"",stableType:"",minAssetAmount:"0",minStableAmount:"0",senderAddress:e}))),x("/create"))},tooltip:"The DAO name or ID that this proposal is for"}),c.daoObjectId&&t.jsxs("div",{className:"bg-gray-900 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 flex-shrink-0",children:t.jsx("img",{src:u?.icon_url||"/placeholder-dao.png",alt:u?.dao_name,className:"w-full h-full rounded-full object-cover",onError:t=>{t.currentTarget.src="/placeholder-dao.png"}})}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsxs("div",{className:"font-medium text-gray-200 truncate flex items-center",children:[u?.dao_name,u?.verification?.verified&&t.jsx(mv,{className:"ml-1 flex-shrink-0"})]}),t.jsx("div",{className:"font-mono text-sm text-gray-400 truncate",children:Zw(c.daoObjectId)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-2 pt-2 border-t border-gray-800",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Asset Type:"}),t.jsx("p",{className:"text-xs truncate",children:Zw(c.assetType)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Stable Type:"}),t.jsx("p",{className:"text-xs truncate",children:Zw(c.stableType)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Min Asset Amount:"}),t.jsx("p",{className:"text-xs",children:c.minAssetAmount})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Min Stable Amount:"}),t.jsx("p",{className:"text-xs",children:c.minStableAmount})]})]})]}),t.jsx(Qw,{label:"Title",name:"title",value:c.title,onChange:w,tooltip:"The title of your proposal",placeholder:""}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{children:t.jsx("label",{className:"block text-sm font-medium",children:"Description"})}),r?t.jsx("div",{className:"prose px-6 border p-2 rounded bg-gray-900",children:t.jsx(Kw,{options:{overrides:{h1:{component:"h1",props:{className:"text-4xl font-bold my-4"}},h2:{component:"h2",props:{className:"text-3xl font-bold my-4"}},h3:{component:"h3",props:{className:"text-2xl font-bold my-3"}},h4:{component:"h4",props:{className:"text-xl font-bold my-2"}},h5:{component:"h5",props:{className:"text-lg font-bold my-2"}},h6:{component:"h6",props:{className:"text-base font-bold my-2"}}}},children:c.description})}):t.jsx("textarea",{name:"description",value:c.description,onChange:w,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 min-h-[300px]",placeholder:"",required:!0}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>o(!r),className:"text-blue-500 text-sm",children:r?"Edit":"Preview"})})]}),t.jsx(Yw,{value:c.outcomeMessages.join(", "),onChange:w,customAmounts:a,setCustomAmounts:l,daoData:u,tooltip:"The first option must be 'Reject'. If there are two outcomes in total the second must be 'Accept'."}),t.jsxs("div",{className:"mt-6 pt-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Advanced Settings"}),t.jsx("button",{type:"button",onClick:()=>s(!n),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n?"bg-blue-500":"bg-gray-700"),children:t.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n?"translate-x-6":"translate-x-1")})})]}),n&&t.jsxs("div",{className:"space-y-4 p-4 rounded-lg",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-2",children:[t.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Outcome"}),t.jsx("div",{className:"text-sm font-medium text-gray-300",children:`${u?.asset_symbol||"Asset"} Amount`}),t.jsx("div",{className:"text-sm font-medium text-gray-300",children:`${u?.stable_symbol||"Stable"} Amount`})]}),c.outcomeMessages.map(((e,i)=>t.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[t.jsx("div",{className:"text-sm text-gray-200",children:e}),t.jsxs("div",{children:[t.jsx("input",{type:"number",value:a[2*i]||"",step:Math.pow(10,-(u?.asset_decimals||0)),onChange:t=>{const e=[...a];e[2*i]=parseFloat(t.target.value),l(e)},min:parseFloat(f(u?.minAssetAmount||"0",u?.asset_decimals||0)),className:"w-full p-2 rounded bg-gray-900 border "+(a[2*i]<parseFloat(f(u?.minAssetAmount||"0",u?.asset_decimals||0))?"border-red-500":"border-gray-700")}),a[2*i]<parseFloat(f(u?.minAssetAmount||"0",u?.asset_decimals||0))&&t.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Below minimum (",f(u?.minAssetAmount||"0",u?.asset_decimals||0),")"]})]}),t.jsxs("div",{children:[t.jsx("input",{type:"number",value:a[2*i+1]||"",step:Math.pow(10,-(u?.stable_decimals||0)),onChange:t=>{const e=[...a];e[2*i+1]=parseFloat(t.target.value),l(e)},min:parseFloat(f(u?.minStableAmount||"0",u?.stable_decimals||0)),className:"w-full p-2 rounded bg-gray-900 border "+(a[2*i+1]<parseFloat(f(u?.minStableAmount||"0",u?.stable_decimals||0))?"border-red-500":"border-gray-700")}),a[2*i+1]<parseFloat(f(u?.minStableAmount||"0",u?.stable_decimals||0))&&t.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Below minimum (",f(u?.minStableAmount||"0",u?.stable_decimals||0),")"]})]})]},i)))]})]}),v&&t.jsx("div",{className:"text-red-500 text-sm",children:v}),(u?.review_period_ms||u?.trading_period_ms)&&t.jsx("p",{className:"text-gray-200 text-sm mt-4",children:(()=>{const t=parseInt(u?.review_period_ms||"0"),e=parseInt(u?.trading_period_ms||"0"),i=Math.ceil((t+e)/864e5);return`Please be aware you may not be able to withdraw your liquidity for up to ${i} ${1===i?"day":"days"}.`})()}),t.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 disabled:bg-blue-300 disabled:cursor-not-allowed",children:g?"Creating...":"Create Proposal"})]})})},Qw=({label:e,name:i,value:n,onChange:s,tooltip:r,isTextArea:o=!1,placeholder:a=""})=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:e}),t.jsxs("div",{className:"relative group",children:[t.jsx(k,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:r})]})]}),o?t.jsx("textarea",{name:i,value:n,onChange:s,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:a,required:!0}):t.jsx("input",{type:"text",name:i,value:n,onChange:s,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:a,required:!0})]});function Jw(){const e=Bd(),[i]=lg(),n=i.get("dao")||void 0;return t.jsxs(O,{defaultValue:"proposal",children:[t.jsxs(N,{children:[t.jsx(I,{value:"proposal",className:"cursor-pointer",children:"Create Proposal"}),t.jsx(I,{value:"dao",className:"cursor-pointer",children:"Create DAO"}),t.jsx(I,{value:"verify",className:"cursor-pointer",children:"Get a DAO Verified"})]}),t.jsx(L,{value:"proposal",children:t.jsx(Xw,{walletAddress:e?.address??"",daoIdFromUrl:n})}),t.jsx(L,{value:"dao",children:t.jsx(Sv,{})}),t.jsx(L,{value:"verify",children:t.jsx(vv,{})})]})}function tx(){const t=Hd(),{mutateAsync:e}=(function({mutationKey:t,...e}={}){const{currentWallet:i}=Qd(),n=Bd(),s=Hd(),{mutate:r}=xf();return no({mutationKey:ld.signTransaction(t),mutationFn:async({transaction:t,...e})=>{if(!i)throw new Gd("No wallet is connected.");const o=e.account??n;if(!o)throw new Zd("No wallet account is selected to sign the transaction with.");if(!i.features["sui:signTransaction"]&&!i.features["sui:signTransactionBlock"])throw new Yd("This wallet doesn't support the `signTransaction` feature.");const{bytes:a,signature:l}=await Ko(i,{...e,transaction:{toJSON:async()=>"string"==typeof t?t:await t.toJSON({supportedIntents:[],client:s})},account:o,chain:e.chain??o.chains[0]});return{bytes:a,signature:l,reportTransactionEffects:t=>{r({effects:t,account:o,chain:e.chain??o.chains[0]})}}},...e})})();return async i=>{try{const n=await e({transaction:i}),s=await t.executeTransactionBlock({transactionBlock:n.bytes,signature:n.signature,options:{showEffects:!0,showObjectChanges:!0}});return oy.success("Successfully executed transaction!"),s}catch(mx){oy.error(`Failed to execute transaction: ${mx.message}`)}}}function ex({className:e=""}){const{mutate:i,isPending:n}=(function(){const t=Bd(),e=tx();return no({mutationFn:async()=>{if(!t?.address)throw new Error("Please connect your wallet first!");const i=new Ys;i.setGasBudget(5e7),i.moveCall({target:`${hv}::my_asset::mint`,arguments:[i.object(uv),i.pure.u64(1e7),i.pure.address(t.address)]}),i.moveCall({target:`${dv}::my_stable::mint`,arguments:[i.object(fv),i.pure.u64(1e7),i.pure.address(t.address)]});const n=oy.loading("Minting testnet coins...");try{const t=await e(i);return oy.dismiss(n),t&&"effects"in t&&"success"===t.effects?.status?.status?oy.success("Successfully minted testnet coins!"):oy.error("Failed to mint coins: Transaction failed"),t}catch(qa){throw oy.dismiss(n),qa}},onError:t=>{oy.error(`Failed to mint coins: ${t.message}`)}})})();return t.jsx("button",{onClick:()=>i(),disabled:n,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${e}`,children:n?"Minting...":"Mint Testnet Coins"})}function ix(){const e=[{name:"Documentation",component:()=>t.jsxs(m,{className:"p-4",children:[t.jsx(z,{size:"5",weight:"bold",className:"mb-4 text-gray-400",children:"In One Sentence:"}),t.jsx(z,{as:"p",className:"mb-3",children:"Govex is a distributed decision control system for digitally scarce assets."}),t.jsx(z,{size:"5",weight:"bold",className:"mb-4 text-gray-400",children:"In One Paragraph:"}),t.jsx(z,{as:"p",className:"mb-3",children:"We believe markets should be used to decide the most important decisions organizations make. Markets are the most accurate and efficient information gathering mechanism humanity has invented. Govex DAOs are analogous to the board of directors, and the public markets in a single entity. An entity with millisecond latency root access. Govex DAOs only execute instructions that the markets predict will increase its price. This means that members of Govex DAOs are better protected from mismanagement than members of legacy organizations that rely on voting."}),t.jsx(z,{size:"5",weight:"bold",className:"mb-4 text-gray-400",children:"How to Get Started:"}),t.jsxs(z,{as:"p",className:"mb-3",children:[t.jsx("li",{children:"1) Connect your Sui wallet."}),t.jsx("li",{children:"2) Create a new Govex DAO or choose an existing one."}),t.jsx("li",{children:"3) Create a proposal for the DAO, e.g., 'Rent an office in the UAE for the DAO'."}),t.jsx("li",{children:"4) Trade the existing proposal."}),t.jsx("li",{children:"5) Wait for the trading period to finish."}),t.jsx("li",{children:"6) The DAO will execute the instructions (currently Govex DAOs can only advise not execute)."})]})]})},{name:"Tutorials",component:()=>t.jsxs(m,{className:"p-4",children:[t.jsx(z,{size:"5",weight:"bold",className:"mb-4 text-gray-400",children:"Get Started with Test Coins"}),t.jsx(z,{as:"p",className:"mb-4",children:"Click below to mint testnet coins that can be used to try out Govex:"}),t.jsx(ex,{})]})},{name:"Social",component:()=>t.jsxs(m,{className:"p-4",children:[t.jsx(z,{size:"5",weight:"bold",className:"mb-4"}),t.jsxs("a",{href:"https://x.com/govexdotai",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[20px] font-bold transition-opacity duration-200 hover:opacity-60",children:[t.jsx("img",{src:"/images/x-logo.png",alt:"X logo",className:"w-5 h-5 mr-1"}),t.jsx("span",{className:"-translate-y-[1px]",children:"@govexdotai"})]})]})}],[i,n]=V.useState(e[0].name);return t.jsxs(O,{value:i,onValueChange:n,children:[t.jsx(N,{children:e.map(((e,i)=>t.jsx(I,{value:e.name,className:"cursor-pointer",children:e.name},i)))}),e.map(((e,i)=>t.jsx(L,{value:e.name,children:e.component()},i)))]})}const nx=()=>{const[e,i]=lg(),n=xm(),[s,r]=V.useState(!1),[o,a]=V.useState(""),l=V.useRef(null),{data:c,isLoading:h}=io({queryKey:["unified-search",o],queryFn:async()=>{if(!o)return{data:{daos:[],proposals:[]}};const t=await fetch(`${ov}search?query=${encodeURIComponent(o)}`);if(!t.ok)throw new Error(`API error: ${t.statusText}`);return t.json()},enabled:o.length>0});V.useEffect((()=>{const t=t=>{l.current&&!l.current.contains(t.target)&&r(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)}),[]);const u=t=>{r(!1),"dao"===t.type?i({dao:t.dao_id}):n(`/trade/${t.market_state_id}`),a("")},d=(e,i)=>{if(!i)return e;const n=new RegExp(`(${i})`,"gi"),s=e.split(n);return t.jsx(t.Fragment,{children:s.map(((e,i)=>n.test(e)?t.jsx("span",{className:"bg-blue-500 bg-opacity-30",children:e},i):t.jsx("span",{children:e},i)))})};return t.jsx(S,{appearance:"dark",children:t.jsx("div",{className:"w-full md:w-[380px]",children:t.jsxs("div",{className:"relative w-full",ref:l,children:[t.jsx("input",{type:"text",value:o,onChange:t=>{a(t.target.value),r(!0)},onFocus:()=>r(!0),className:"w-full p-2 bg-black border border-blue-500 rounded-md text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Search DAOs and proposals..."}),s&&o&&t.jsx("div",{className:"absolute w-full mt-1 bg-gray-900 border border-gray-800 rounded-md shadow-xl z-10 max-h-96 overflow-auto",children:h?t.jsx("div",{className:"p-2 text-gray-400",children:"Loading..."}):c?.data?t.jsxs("div",{children:[c.data.daos?.length>0&&t.jsx("div",{className:"border-b border-gray-800",children:c.data.daos.map((e=>{return t.jsx("div",{onClick:()=>u(e),className:"p-2 hover:bg-gray-800 cursor-pointer",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-blue-400 whitespace-nowrap",children:"DAO:"}),t.jsx("img",{src:e.dao_icon||"/placeholder-dao.png",alt:"",className:"w-5 h-5 rounded-full object-cover flex-shrink-0",onError:t=>{t.currentTarget.src="/placeholder-dao.png"}}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-100 font-medium truncate",children:d(e.dao_name,o)}),e.verification?.verified&&t.jsx(mv,{className:"flex-shrink-0"})]}),t.jsx("span",{className:"text-sm text-gray-400 whitespace-nowrap flex-shrink-0",children:(i=e.dao_id,`${i.slice(0,5)}...${i.slice(-5)}`)})]})},e.id);var i}))}),c.data.proposals?.length>0&&t.jsx("div",{children:c.data.proposals.map((e=>t.jsx("div",{onClick:()=>u(e),className:"p-2 hover:bg-gray-800 cursor-pointer",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-green-400 whitespace-nowrap flex-shrink-0",children:"PROPOSAL:"}),t.jsx("img",{src:e.dao.dao_icon||"/placeholder-dao.png",alt:"",className:"w-5 h-5 rounded-full object-cover flex-shrink-0",onError:t=>{t.currentTarget.src="/placeholder-dao.png"}}),t.jsx("span",{className:"text-sm text-gray-400 whitespace-nowrap flex-shrink-0",children:e.dao.dao_name}),e.dao.verification?.verified&&t.jsx(mv,{className:"flex-shrink-0"})]}),t.jsx("div",{className:"pl-[85px]",children:t.jsx("span",{className:"text-gray-100 font-medium truncate",children:d(e.title,o)})})]})},e.id)))}),0===c.data.daos?.length&&0===c.data.proposals?.length&&t.jsx("div",{className:"p-2 text-gray-400",children:"No results found"})]}):t.jsx("div",{className:"p-2 text-gray-400",children:"Type to search..."})})]})})})},sx=[{label:"Pre-market",value:"PRE-MARKET"},{label:"Trading",value:"TRADING"},{label:"Finished",value:"FINISHED"}],rx=t=>{switch(t){case 0:default:return"PRE-MARKET";case 1:return"TRADING";case 2:return"FINISHED"}};function ox({proposal:e}){const i=rx(e.current_state),n=(t=>{switch(t){case 0:return"bg-yellow-700 text-yellow-100";case 1:return"bg-green-700 text-green-100";case 2:return"bg-red-800 text-red-100";default:return"bg-gray-700 text-gray-100"}})(e.current_state);return t.jsx(sg,{to:`/trade/${e.market_state_id}`,className:"block",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-sm border border-gray-700 p-5 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(F,{content:t.jsx("p",{className:"text-sm text-gray-100 max-w-xl",style:{backgroundColor:"#1f2937",border:"1px solid #374151",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",padding:"8px",borderRadius:"6px",outline:"none"},children:e.title}),style:{outline:"none"},children:t.jsx("h3",{className:"text-lg font-semibold text-gray-100 line-clamp-2 leading-tight h-10 mr-1 overflow-hidden max-w-[180px]",style:{height:"2.7rem"},children:e.title})}),t.jsx("span",{className:`px-3 py-1 text-sm rounded-full whitespace-nowrap ${n}`,children:i})]}),t.jsx("div",{className:"flex flex-col",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",e.dao_icon?{className:"w-7 h-7 rounded-full overflow-hidden mr-2 flex-shrink-0 bg-gray-700 aspect-square",children:t.jsx("img",{src:e.dao_icon,style:{objectPosition:"center"},alt:`${e.dao_name} icon`,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="/fallback-icon.png"}})}:{className:"w-6 h-6 rounded-full bg-gray-700 mr-2 flex-shrink-0"}),t.jsx("span",{className:"truncate font-medium text-gray-200",children:e.dao_name}),e.dao_verified&&t.jsx(mv,{className:"ml-1 flex-shrink-0"})]})})]})})}function ax(){const[e,i]=V.useState(sx.map((t=>t.value))),[n,s]=V.useState(!1),r=V.useRef(),[o]=lg(),a=o.get("dao"),l=a?`dao/${a}/proposals`:"proposals",{data:c,isLoading:h,error:u}=io({queryKey:[rv.Proposals,a],queryFn:async()=>{const t=ov+l+(t=>{const e=new URLSearchParams;for(const i in t)e.set(i,t[i]);return`?${e.toString()}`})({limit:"10",...a?{dao_id:a}:{}}),e=await fetch(t);if(!e.ok)throw new Error(`API error: ${e.statusText}`);return e.json()}}),d=c?.data?.filter((t=>e.includes(rx(t.current_state))));return h?t.jsx("div",{className:"w-full p-6 text-center text-gray-400",children:"Loading proposals..."}):u?t.jsxs("div",{className:"w-full p-6 text-center text-red-400",children:["Error loading proposals: ",u.message]}):t.jsx(S,{appearance:"dark",children:t.jsxs("div",{className:"w-full px-6 py-6 pb-6 pt-0",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-end gap-4",children:[t.jsx(nx,{}),t.jsxs(R,{open:n,onOpenChange:s,children:[t.jsx(P,{className:"w-fit self-end",children:t.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 text-sm",children:["Filter by state",t.jsx(D,{})]})}),t.jsx($,{className:"bg-gray-800 border border-gray-700 rounded-lg p-2",children:sx.map((n=>t.jsx(B,{className:"flex items-center gap-3 px-1 py-1 text-gray-200 text-base cursor-pointer hover:bg-gray-700 rounded w-full focus:bg-transparent active:bg-transparent data-[highlighted]:bg-transparent data-[state=checked]:bg-transparent radix-highlighted:bg-transparent",onClick:t=>{t.preventDefault(),(t=>{i((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t])),r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{s(!1)}),1e3)})(n.value)},onSelect:t=>{t.preventDefault()},children:t.jsxs("div",{className:"flex items-center gap-3 w-full",children:[t.jsx(U,{checked:e.includes(n.value),className:"data-[state=checked]:bg-blue-600"}),t.jsx("span",{children:n.label})]})},n.value)))})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 mt-4",children:d?.map((e=>t.jsx(ox,{proposal:e},e.id)))}),(!d||0===d.length)&&t.jsx("div",{className:"text-center text-gray-400 mt-8",children:"No proposals found"})]})})}function lx(t){var e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function cx(t,e){return t.width===e.width&&t.height===e.height}var hx=(function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter((function(t){return t!==i}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(this._window.devicePixelRatio,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(e){return e.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t})(),ux=(function(){function t(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=lx({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=e?e:function(t){return t},this._allowResizeObserver=null===(n=null==i?void 0:i.allowResizeObserver)||void 0===n||n,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(e=this._devicePixelRatioObservable)||void 0===e||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return lx({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=lx(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(e){return e!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(e){return e!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;cx(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach((function(n){return n.call(i,t,e)}))},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=lx(this._transformBitmapSize(t,this._canvasElementClientSize)),n=cx(this.bitmapSize,i)?null:i;null===e&&null===n||null!==e&&null!==n&&cx(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach((function(n){return n.call(i,t,e)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var e=new ResizeObserver((function(i){t(i.every((function(t){return"devicePixelContentBoxSize"in t}))),e.disconnect()}));e.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=dx(this._canvasElement);if(null===e)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=(function(t){return new hx(t)})(e),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,e;if(null!==this._canvasElement){var i=dx(this._canvasElement);if(null!==i){var n=null!==(e=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==e?e:i.devicePixelRatio,s=this._canvasElement.getClientRects(),r=void 0!==s[0]?(function(t,e){return lx({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})})(s[0],n):lx({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(r)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(e){var i=e.find((function(e){return e.target===t._canvasElement}));if(i&&i.devicePixelContentBoxSize&&i.devicePixelContentBoxSize[0]){var n=i.devicePixelContentBoxSize[0],s=lx({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(s)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t})();function dx(t){return t.ownerDocument.defaultView}var fx=(function(){function t(t,e,i){if(0===e.width||0===e.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t})();function px(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var n=t.bitmapSize;if(0===n.width||0===n.height)return null;var s=t.canvasElement.getContext("2d",e);return null===s?null:new fx(s,i,n)}const mx={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},gx={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},yx={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},vx={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},bx={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},wx={color:"#26a69a",base:0},xx={color:"#2196f3"},Sx={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var kx,jx;function Cx(t,e){t.setLineDash({0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e])}function Ex(t,e,i,n){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(i,e+s),t.lineTo(n,e+s),t.stroke()}function Mx(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function _x(t){if(void 0===t)throw new Error("Value is undefined");return t}function Tx(t){if(null===t)throw new Error("Value is null");return t}function Ax(t){return Tx(_x(t))}!(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(kx||(kx={})),(function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"})(jx||(jx={}));const Ox={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Nx(t){return t<0?0:t>255?255:Math.round(t)||0}function Ix(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const Lx=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,zx=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Rx=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Px=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Dx(t){(t=t.toLowerCase())in Ox&&(t=Ox[t]);{const e=Px.exec(t)||Rx.exec(t);if(e)return[Nx(parseInt(e[1],10)),Nx(parseInt(e[2],10)),Nx(parseInt(e[3],10)),Ix(e.length<5?1:parseFloat(e[4]))]}{const e=zx.exec(t);if(e)return[Nx(parseInt(e[1],16)),Nx(parseInt(e[2],16)),Nx(parseInt(e[3],16)),1]}{const e=Lx.exec(t);if(e)return[Nx(17*parseInt(e[1],16)),Nx(17*parseInt(e[2],16)),Nx(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function $x(t){return.199*t[0]+.687*t[1]+.114*t[2]}function Bx(t){const e=Dx(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:$x(e)>160?"black":"white"}}class Ux{constructor(){this.h=[]}l(t,e,i){this.h.push({o:t,_:e,u:!0===i})}v(t){const e=this.h.findIndex((e=>t===e.o));e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter((e=>e._!==t))}m(t,e,i){const n=[...this.h];this.h=this.h.filter((t=>!t.u)),n.forEach((n=>n.o(t,e,i)))}M(){return this.h.length>0}S(){this.h=[]}}function Fx(t,...e){for(const i of e)for(const e in i)void 0!==i[e]&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:Fx(t[e],i[e]));return t}function Wx(t){return"number"==typeof t&&isFinite(t)}function Vx(t){return"number"==typeof t&&t%1==0}function qx(t){return"string"==typeof t}function Hx(t){return"boolean"==typeof t}function Kx(t){const e=t;if(!e||"object"!=typeof e)return e;let i,n,s;for(n in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(s=e[n],i[n]=s&&"object"==typeof s?Kx(s):s);return i}function Gx(t){return null!==t}function Zx(t){return null===t?void 0:t}const Yx="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Xx(t,e,i){return void 0===e&&(e=Yx),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class Qx{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=Xx(e,i),t.L=2.5/12*e,t.B=t.L,t.A=e/12*t.T,t.I=e/12*t.T,t.N=0),t.V=this.$(),t.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Jx{constructor(){this.Y=[]}Z(t){this.Y=t}X(t,e,i){this.Y.forEach((n=>{n.X(t,e,i)}))}}class tS{X(t,e,i){t.useBitmapCoordinateSpace((t=>this.K(t,e,i)))}}class eS extends tS{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.G||null===this.G.tt)return;const n=this.G.tt,s=this.G,r=Math.max(1,Math.floor(e))%2/2,o=o=>{t.beginPath();for(let a=n.to-1;a>=n.from;--a){const n=s.it[a],l=Math.round(n.nt*e)+r,c=n.st*i,h=o*i+r;t.moveTo(l,c),t.arc(l,c,h,0,2*Math.PI)}t.fill()};s.et>0&&(t.fillStyle=s.rt,o(s.ht+s.et)),t.fillStyle=s.lt,o(s.ht)}}function iS(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const nS={from:0,to:1};class sS{constructor(t,e){this.ut=new Jx,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.Z(this.ct)}bt(t){const e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(iS),this.ct=this.dt.map((t=>{const e=new eS;return e.J(t),e})),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const t=2===this.vt.W().mode,e=this.F.wt(),i=this.vt.xt(),n=this.F.St();e.forEach(((e,s)=>{var r;const o=this.dt[s],a=e.kt(i);if(t||null===a||!e.yt())return void(o.tt=null);const l=Tx(e.Ct());o.lt=a.Tt,o.ht=a.ht,o.et=a.Pt,o.it[0]._t=a._t,o.it[0].st=e.Dt().Rt(a._t,l.Vt),o.rt=null!==(r=a.Ot)&&void 0!==r?r:this.F.Bt(o.it[0].st/e.Dt().At()),o.it[0].ot=i,o.it[0].nt=n.It(i),o.tt=nS}))}}class rS extends tS{constructor(t){super(),this.zt=t}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.zt)return;const s=this.zt.Lt.yt,r=this.zt.Et.yt;if(!s&&!r)return;const o=Math.round(this.zt.nt*i),a=Math.round(this.zt.st*n);t.lineCap="butt",s&&o>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*i),t.strokeStyle=this.zt.Lt.V,t.fillStyle=this.zt.Lt.V,Cx(t,this.zt.Lt.Nt),(function(t,e,i,n){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(e+s,0),t.lineTo(e+s,n),t.stroke()})(t,o,0,e.height)),r&&a>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*n),t.strokeStyle=this.zt.Et.V,t.fillStyle=this.zt.Et.V,Cx(t,this.zt.Et.Nt),Ex(t,a,0,e.width))}}class oS{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new rS(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.yt(),e=Tx(this.jt.Ht()),i=e.$t().W().crosshair,n=this.Ft;if(2===i.mode)return n.Et.yt=!1,void(n.Lt.yt=!1);n.Et.yt=t&&this.jt.Ut(e),n.Lt.yt=t&&this.jt.qt(),n.Et.et=i.horzLine.width,n.Et.Nt=i.horzLine.style,n.Et.V=i.horzLine.color,n.Lt.et=i.vertLine.width,n.Lt.Nt=i.vertLine.style,n.Lt.V=i.vertLine.color,n.nt=this.jt.Yt(),n.st=this.jt.Zt()}}function aS(t,e,i,n,s,r){t.fillRect(e+r,i,n-2*r,r),t.fillRect(e+r,i+s-r,n-2*r,r),t.fillRect(e,i,r,s),t.fillRect(e+n-r,i,r,s)}function lS(t,e,i,n,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,i,n,s),t.restore()}function cS(t,e,i,n,s,r){t.beginPath(),t.roundRect?t.roundRect(e,i,n,s,r):(t.lineTo(e+n-r[1],i),0!==r[1]&&t.arcTo(e+n,i,e+n,i+r[1],r[1]),t.lineTo(e+n,i+s-r[2]),0!==r[2]&&t.arcTo(e+n,i+s,e+n-r[2],i+s,r[2]),t.lineTo(e+r[3],i+s),0!==r[3]&&t.arcTo(e,i+s,e,i+s-r[3],r[3]),t.lineTo(e,i+r[0]),0!==r[0]&&t.arcTo(e,i,e+r[0],i,r[0]))}function hS(t,e,i,n,s,r,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===r)return cS(t,e,i,n,s,a),t.fillStyle=r,t.fill(),void t.restore();const c=o/2;var h;cS(t,e+c,i+c,n-o,s-o,(h=-c,a.map((t=>0===t?t:t+h)))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==l&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function uS(t,e,i,n,s,r,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,r),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,i,n,s),t.restore()}class dS{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Xt=e}At(t,e){return this.zt.yt?t.P+t.L+t.B:0}X(t,e,i,n){if(!this.zt.yt||0===this.zt.Kt.length)return;const s=this.zt.V,r=this.Xt.t,o=t.useBitmapCoordinateSpace((t=>{const o=t.context;o.font=e.R;const a=this.Gt(t,e,i,n),l=a.Jt;return a.Qt?hS(o,l.ti,l.ii,l.ni,l.si,r,l.ei,[l.ht,0,0,l.ht],r):hS(o,l.ri,l.ii,l.ni,l.si,r,l.ei,[0,l.ht,l.ht,0],r),this.zt.hi&&(o.fillStyle=s,o.fillRect(l.ri,l.li,l.ai-l.ri,l.oi)),this.zt._i&&(o.fillStyle=e.O,o.fillRect(a.Qt?l.ui-l.ei:0,l.ii,l.ei,l.ci-l.ii)),a}));t.useMediaCoordinateSpace((({context:t})=>{const i=o.di;t.font=e.R,t.textAlign=o.Qt?"right":"left",t.textBaseline="middle",t.fillStyle=s,t.fillText(this.zt.Kt,i.fi,(i.ii+i.ci)/2+i.pi)}))}Gt(t,e,i,n){var s;const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,h=this.zt.hi||!this.zt.mi?e.T:0,u=this.zt.bi?e.C:0,d=e.L+this.Xt.wi,f=e.B+this.Xt.gi,p=e.A,m=e.I,g=this.zt.Kt,y=e.P,v=i.Mi(r,g),b=Math.ceil(i.xi(r,g)),w=y+d+f,x=e.C+p+m+b+h,S=Math.max(1,Math.floor(c));let k=Math.round(w*c);k%2!=S%2&&(k+=1);const j=u>0?Math.max(1,Math.floor(u*l)):0,C=Math.round(x*l),E=Math.round(h*l),M=null!==(s=this.Xt.Si)&&void 0!==s?s:this.Xt.ki,_=Math.round(M*c)-Math.floor(.5*c),T=Math.floor(_+S/2-k/2),A=T+k,O="right"===n,N=O?a.width-u:u,I=O?o.width-j:j;let L,z,R;return O?(L=I-C,z=I-E,R=N-h-p-u):(L=I+C,z=I+E,R=N+h+p),{Qt:O,Jt:{ii:T,li:_,ci:A,ni:C,si:k,ht:2*l,ei:j,ti:L,ri:I,ai:z,oi:S,ui:o.width},di:{ii:T/c,ci:A/c,fi:R,pi:v}}}}class fS{constructor(t){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(t||dS)(this.Ci,this.yi),this.Ri=new(t||dS)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(t,e=!1){return Math.max(this.Pi.At(t,e),this.Ri.At(t,e))}Vi(){return this.yi.Si||0}Oi(t){this.yi.Si=t}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(t){return this.Di(),this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.hi=this.Ti.hi&&t.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class pS extends fS{constructor(t,e,i){super(),this.jt=t,this.Li=e,this.Ei=i}zi(t,e,i){if(t.yt=!1,2===this.jt.W().mode)return;const n=this.jt.W().horzLine;if(!n.labelVisible)return;const s=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||null===s)return;const r=Bx(n.labelBackgroundColor);i.t=r.t,t.V=r.i;const o=2/12*this.Li.P();i.wi=o,i.gi=o;const a=this.Ei(this.Li);i.ki=a.ki,t.Kt=this.Li.Fi(a._t,s),t.yt=!0}}const mS=/[1-9]/g;class gS{constructor(){this.zt=null}J(t){this.zt=t}X(t,e){if(null===this.zt||!1===this.zt.yt||0===this.zt.Kt.length)return;const i=t.useMediaCoordinateSpace((({context:t})=>(t.font=e.R,Math.round(e.Wi.xi(t,Tx(this.zt).Kt,mS)))));if(i<=0)return;const n=e.ji,s=i+2*n,r=s/2,o=this.zt.Hi;let a=this.zt.ki,l=Math.floor(a-r)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-r)+.5):l+s>o&&(a-=Math.abs(o-(l+s)),l=Math.floor(a-r)+.5);const c=l+s,h=Math.ceil(0+e.C+e.T+e.L+e.P+e.B);t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:i,verticalPixelRatio:n})=>{const s=Tx(this.zt);t.fillStyle=s.t;const r=Math.round(l*i),o=Math.round(0*n),a=Math.round(c*i),u=Math.round(h*n),d=Math.round(2*i);if(t.beginPath(),t.moveTo(r,o),t.lineTo(r,u-d),t.arcTo(r,u,r+d,u,d),t.lineTo(a-d,u),t.arcTo(a,u,a,u-d,d),t.lineTo(a,o),t.fill(),s.hi){const r=Math.round(s.ki*i),a=o,l=Math.round((a+e.T)*n);t.fillStyle=s.V;const c=Math.max(1,Math.floor(i)),h=Math.floor(.5*i);t.fillRect(r-h,a,c,l-a)}})),t.useMediaCoordinateSpace((({context:t})=>{const i=Tx(this.zt),s=0+e.C+e.T+e.L+e.P/2;t.font=e.R,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.V;const r=e.Wi.Mi(t,"Apr0");t.translate(l+n,s+r),t.fillText(i.Kt,0,0)}))}}class yS{constructor(t,e,i){this.ft=!0,this.Wt=new gS,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=t,this.$i=e,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const t=this.Ft;if(t.yt=!1,2===this.vt.W().mode)return;const e=this.vt.W().vertLine;if(!e.labelVisible)return;const i=this.$i.St();if(i.Ni())return;t.Hi=i.Hi();const n=this.Ei();if(null===n)return;t.ki=n.ki;const s=i.Ui(this.vt.xt());t.Kt=i.qi(Tx(s)),t.yt=!0;const r=Bx(e.labelBackgroundColor);t.t=r.t,t.V=r.i,t.hi=i.W().ticksVisible}}class vS{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(t){this.Zi=t}Dt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}yt(){return!0}}var bS;!(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(bS||(bS={}));class wS extends vS{constructor(t,e){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=t,this.cn=e,this.dn=new sS(t,this),this.fn=((t,e)=>i=>{const n=e(),s=t();if(i===Tx(this.tn).vn())return{_t:s,ki:n};{const t=Tx(i.Ct());return{_t:i.pn(n,t),ki:n}}})((()=>this.nn),(()=>this.an));const i=((t,e)=>()=>{const i=this.$i.St().mn(t()),n=e();return i&&Number.isFinite(n)?{ot:i,ki:n}:null})((()=>this.sn),(()=>this.Yt()));this.bn=new yS(this,t,i),this.wn=new oS(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(t){return null!==this.tn?[this.wn,this.dn]:[]}Ut(t){return t===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(t,e){this.en&&this.tn===t||this.rn.clear();const i=[];return this.tn===t&&i.push(this.Dn(this.rn,e,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach((t=>t.bt())),this.bn.bt(),this.dn.bt()}On(t){return t&&!t.vn().Ni()?t.vn():null}yn(t,e,i){this.Bn(t,e,i)&&this.Vn()}Bn(t,e,i){const n=this.ln,s=this.an,r=this.nn,o=this.sn,a=this.tn,l=this.On(i);this.sn=t,this.ln=isNaN(t)?NaN:this.$i.St().It(t),this.tn=i;const c=null!==l?l.Ct():null;return null!==l&&null!==c?(this.nn=e,this.an=l.Rt(e,c)):(this.nn=NaN,this.an=NaN),n!==this.ln||s!==this.an||o!==this.sn||r!==this.nn||a!==this.tn}Tn(){const t=this.$i.wt().map((t=>t.In().An())).filter(Gx),e=0===t.length?null:Math.max(...t);this.sn=null!==e?e:NaN}Dn(t,e,i){let n=t.get(e);return void 0===n&&(n=new pS(this,e,i),t.set(e,n)),n}}function xS(t){return"left"===t||"right"===t}class SS{constructor(t){this.zn=new Map,this.Ln=[],this.En=t}Nn(t,e){const i=(function(t,e){return void 0===t?e:{Fn:Math.max(t.Fn,e.Fn),Wn:t.Wn||e.Wn}})(this.zn.get(t),e);this.zn.set(t,i)}jn(){return this.En}Hn(t){const e=this.zn.get(t);return void 0===e?{Fn:this.En}:{Fn:Math.max(this.En,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(t){this.Un(),this.Ln=[{qn:1,Vt:t}]}Zn(t){this.Xn(),this.Ln.push({qn:5,Vt:t})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(t){this.Un(),this.Ln.push({qn:2,Vt:t})}Jn(t){this.Un(),this.Ln.push({qn:3,Vt:t})}Qn(){return this.Ln}ts(t){for(const e of t.Ln)this.ns(e);this.En=Math.max(this.En,t.En),t.zn.forEach(((t,e)=>{this.Nn(e,t)}))}static ss(){return new SS(2)}static es(){return new SS(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Kn();break;case 5:this.Zn(t.Vt);break;case 6:this.Xn()}}Xn(){const t=this.Ln.findIndex((t=>5===t.qn));-1!==t&&this.Ln.splice(t,1)}}function kS(t,e){if(!Wx(t))return"n/a";if(!Vx(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class jS{constructor(t,e){if(e||(e=1),Wx(t)&&Vx(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){const e=t<0?"\u2212":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const e=this.Li/this.rs;let i=Math.floor(t),n="";const s=void 0!==this.os?this.os:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this.os);r>=e&&(r-=e,i+=1),n="."+kS(+r.toFixed(this.os)*this.rs,s)}else i=Math.round(i*e)/e,s>0&&(n="."+kS(0,s));return i.toFixed(0)+n}}class CS extends jS{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class ES{constructor(t){this._s=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}us(t){let e;const i=Math.pow(10,this._s);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((t,e)=>e))}}function MS(t,e,i,n,s,r,o){if(0===e.length||n.from>=e.length||n.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,h=e[n.from];let u=r(t,h),d=h;if(n.to-n.from<2){const e=s/2;a.beginPath();const i={nt:h.nt-e,st:h.st},n={nt:h.nt+e,st:h.st};a.moveTo(i.nt*l,i.st*c),a.lineTo(n.nt*l,n.st*c),o(t,u,i,n)}else{const s=(e,i)=>{o(t,u,d,i),a.beginPath(),u=e,d=i};let f=d;a.beginPath(),a.moveTo(h.nt*l,h.st*c);for(let o=n.from+1;o<n.to;++o){f=e[o];const n=r(t,f);switch(i){case 0:a.lineTo(f.nt*l,f.st*c);break;case 1:a.lineTo(f.nt*l,e[o-1].st*c),n!==u&&(s(n,f),a.lineTo(f.nt*l,e[o-1].st*c)),a.lineTo(f.nt*l,f.st*c);break;case 2:{const[t,i]=OS(e,o-1,o);a.bezierCurveTo(t.nt*l,t.st*c,i.nt*l,i.st*c,f.nt*l,f.st*c);break}}1!==i&&n!==u&&(s(n,f),a.moveTo(f.nt*l,f.st*c))}(d!==f||d===f&&1===i)&&o(t,u,d,f)}}const _S=6;function TS(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function AS(t,e){return{nt:t.nt/e,st:t.st/e}}function OS(t,e,i){const n=Math.max(0,e-1),s=Math.min(t.length-1,i+1);var r,o;return[(r=t[e],o=AS(TS(t[i],t[n]),_S),{nt:r.nt+o.nt,st:r.st+o.st}),TS(t[i],AS(TS(t[s],t[e]),_S))]}function NS(t,e,i,n,s){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:a}=e;r.lineTo(s.nt*o,t*a),r.lineTo(n.nt*o,t*a),r.closePath(),r.fillStyle=i,r.fill()}class IS extends tS{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K(t){var e;if(null===this.G)return;const{it:i,tt:n,cs:s,et:r,Nt:o,ds:a}=this.G,l=null!==(e=this.G.fs)&&void 0!==e?e:this.G.vs?0:t.mediaSize.height;if(null===n)return;const c=t.context;c.lineCap="butt",c.lineJoin="round",c.lineWidth=r,Cx(c,o),c.lineWidth=1,MS(t,i,a,n,s,this.ps.bind(this),NS.bind(null,l))}}function LS(t,e,i){return Math.min(Math.max(t,e),i)}function zS(t,e,i){return e-t<=i}function RS(t){const e=Math.ceil(t);return e%2==0?e-1:e}class PS{bs(t,e){const i=this.ws,{gs:n,Ms:s,xs:r,Ss:o,ks:a,fs:l}=e;if(void 0===this.ys||void 0===i||i.gs!==n||i.Ms!==s||i.xs!==r||i.Ss!==o||i.fs!==l||i.ks!==a){const i=t.context.createLinearGradient(0,0,0,a);if(i.addColorStop(0,n),null!=l){const e=LS(l*t.verticalPixelRatio/a,0,1);i.addColorStop(e,s),i.addColorStop(e,r)}i.addColorStop(1,o),this.ys=i,this.ws=e}return this.ys}}class DS extends IS{constructor(){super(...arguments),this.Cs=new PS}ps(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}function $S(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class BS extends tS{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K(t){if(null===this.G)return;const{it:e,tt:i,cs:n,ds:s,et:r,Nt:o,Rs:a}=this.G;if(null===i)return;const l=t.context;l.lineCap="butt",l.lineWidth=r*t.verticalPixelRatio,Cx(l,o),l.lineJoin="round";const c=this.Ds.bind(this);void 0!==s&&MS(t,e,s,i,n,c,$S),a&&(function(t,e,i,n,s){const{horizontalPixelRatio:r,verticalPixelRatio:o,context:a}=t;let l=null;const c=Math.max(1,Math.floor(r))%2/2,h=i*o+c;for(let u=n.to-1;u>=n.from;--u){const i=e[u];if(i){const e=s(t,i);e!==l&&(a.beginPath(),null!==l&&a.fill(),a.fillStyle=e,l=e);const n=Math.round(i.nt*r)+c,u=i.st*o;a.moveTo(n,u),a.arc(n,u,h,0,2*Math.PI)}}a.fill()})(t,e,a,i,c)}}class US extends BS{Ds(t,e){return e.lt}}function FS(t,e,i,n,s=0,r=e.length){let o=r-s;for(;0<o;){const r=o>>1,a=s+r;n(e[a],i)===t?(s=a+1,o-=r+1):o=r}return s}const WS=FS.bind(null,!0),VS=FS.bind(null,!1);function qS(t,e){return t.ot<e}function HS(t,e){return e<t.ot}function KS(t,e,i){const n=e.Vs(),s=e.ui(),r=WS(t,n,qS),o=VS(t,s,HS);if(!i)return{from:r,to:o};let a=r,l=o;return r>0&&r<t.length&&t[r].ot>=n&&(a=r-1),o>0&&o<t.length&&t[o-1].ot<=s&&(l=o+1),{from:a,to:l}}class GS{constructor(t,e,i){this.Os=!0,this.Bs=!0,this.As=!0,this.Is=[],this.zs=null,this.Ls=t,this.Es=e,this.Ns=i}bt(t){this.Os=!0,"data"===t&&(this.Bs=!0),"options"===t&&(this.As=!0)}gt(){return this.Ls.yt()?(this.Fs(),null===this.zs?null:this.Ws):null}js(){this.Is=this.Is.map((t=>Object.assign(Object.assign({},t),this.Ls.$s().Hs(t.ot))))}Us(){this.zs=null}Fs(){this.Bs&&(this.qs(),this.Bs=!1),this.As&&(this.js(),this.As=!1),this.Os&&(this.Ys(),this.Os=!1)}Ys(){const t=this.Ls.Dt(),e=this.Es.St();if(this.Us(),e.Ni()||t.Ni())return;const i=e.Zs();if(null===i)return;if(0===this.Ls.In().Xs())return;const n=this.Ls.Ct();null!==n&&(this.zs=KS(this.Is,i,this.Ns),this.Ks(t,e,n.Vt),this.Gs())}}class ZS extends GS{constructor(t,e){super(t,e,!0)}Ks(t,e,i){e.Js(this.Is,Zx(this.zs)),t.Qs(this.Is,i,Zx(this.zs))}te(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}qs(){const t=this.Ls.$s();this.Is=this.Ls.In().ie().map((e=>this.ne(e.se,e.Vt[3],t)))}}class YS extends ZS{constructor(t,e){super(t,e),this.Ws=new Jx,this.ee=new DS,this.re=new US,this.Ws.Z([this.ee,this.re])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Ls.W();this.ee.J({ds:t.lineType,it:this.Is,Nt:t.lineStyle,et:t.lineWidth,fs:null,vs:t.invertFilledArea,tt:this.zs,cs:this.Es.St().he()}),this.re.J({ds:t.lineVisible?t.lineType:void 0,it:this.Is,Nt:t.lineStyle,et:t.lineWidth,tt:this.zs,cs:this.Es.St().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class XS extends tS{constructor(){super(...arguments),this.zt=null,this.le=0,this.ae=0}J(t){this.zt=t}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;this.le=this.oe(e),this.le>=2&&Math.max(1,Math.floor(e))%2!=this.le%2&&this.le--,this.ae=this.zt._e?Math.min(this.le,Math.floor(e)):this.le;let n=null;const s=this.ae<=this.le&&this.zt.he>=Math.floor(1.5*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;++r){const o=this.zt.In[r];n!==o.ue&&(t.fillStyle=o.ue,n=o.ue);const a=Math.floor(.5*this.ae),l=Math.round(o.nt*e),c=l-a,h=this.ae,u=c+h-1,d=Math.min(o.ce,o.de),f=Math.max(o.ce,o.de),p=Math.round(d*i)-a,m=Math.round(f*i)+a,g=Math.max(m-p,this.ae);t.fillRect(c,p,h,g);const y=Math.ceil(1.5*this.le);if(s){if(this.zt.fe){const e=l-y;let n=Math.max(p,Math.round(o.ve*i)-a),s=n+h-1;s>p+g-1&&(s=p+g-1,n=s-h+1),t.fillRect(e,n,c-e,s-n+1)}const e=l+y;let n=Math.max(p,Math.round(o.pe*i)-a),s=n+h-1;s>p+g-1&&(s=p+g-1,n=s-h+1),t.fillRect(u+1,n,e-u,s-n+1)}}}oe(t){const e=Math.floor(t);return Math.max(e,Math.floor((function(t,e){return Math.floor(.3*t*e)})(Tx(this.zt).he,t)))}}class QS extends GS{constructor(t,e){super(t,e,!1)}Ks(t,e,i){e.Js(this.Is,Zx(this.zs)),t.me(this.Is,i,Zx(this.zs))}be(t,e,i){return{ot:t,we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3],nt:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){const t=this.Ls.$s();this.Is=this.Ls.In().ie().map((e=>this.ne(e.se,e,t)))}}class JS extends QS{constructor(){super(...arguments),this.Ws=new XS}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Ls.W();this.Ws.J({In:this.Is,he:this.Es.St().he(),fe:t.openVisible,_e:t.thinBars,tt:this.zs})}}class tk extends IS{constructor(){super(...arguments),this.Cs=new PS}ps(t,e){return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:this.G.fs})}}class ek extends BS{constructor(){super(...arguments),this.Te=new PS}Ds(t,e){return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:this.G.fs})}}class ik extends ZS{constructor(t,e){super(t,e),this.Ws=new Jx,this.De=new tk,this.Ve=new ek,this.Ws.Z([this.De,this.Ve])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Ls.Ct();if(null===t)return;const e=this.Ls.W(),i=this.Ls.Dt().Rt(e.baseValue.price,t.Vt),n=this.Es.St().he();this.De.J({it:this.Is,et:e.lineWidth,Nt:e.lineStyle,ds:e.lineType,fs:i,vs:!1,tt:this.zs,cs:n}),this.Ve.J({it:this.Is,et:e.lineWidth,Nt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:i,tt:this.zs,cs:n})}}class nk extends tS{constructor(){super(...arguments),this.zt=null,this.le=0}J(t){this.zt=t}K(t){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;const{horizontalPixelRatio:e}=t;this.le=(function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);const i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),n=Math.floor(t*i*e),s=Math.floor(t*e),r=Math.min(n,s);return Math.max(Math.floor(e),r)})(this.zt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;const i=this.zt.In;this.zt.Oe&&this.Be(t,i,this.zt.tt),this.zt._i&&this.Ae(t,i,this.zt.tt);const n=this.Ie(e);(!this.zt._i||this.le>2*n)&&this.ze(t,i,this.zt.tt)}Be(t,e,i){if(null===this.zt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="",a=Math.min(Math.floor(s),Math.floor(this.zt.he*s));a=Math.max(Math.floor(s),Math.min(a,this.le));const l=Math.floor(.5*a);let c=null;for(let h=i.from;h<i.to;h++){const t=e[h];t.Le!==o&&(n.fillStyle=t.Le,o=t.Le);const i=Math.round(Math.min(t.ve,t.pe)*r),u=Math.round(Math.max(t.ve,t.pe)*r),d=Math.round(t.ce*r),f=Math.round(t.de*r);let p=Math.round(s*t.nt)-l;const m=p+a-1;null!==c&&(p=Math.max(c+1,p),p=Math.min(p,m));const g=m-p+1;n.fillRect(p,d,g,i-d),n.fillRect(p,u+1,g,f-u),c=m}}Ie(t){let e=Math.floor(1*t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));const i=Math.max(Math.floor(t),e);return this.le<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Ae(t,e,i){if(null===this.zt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="";const a=this.Ie(s);let l=null;for(let c=i.from;c<i.to;c++){const t=e[c];t.Ee!==o&&(n.fillStyle=t.Ee,o=t.Ee);let i=Math.round(t.nt*s)-Math.floor(.5*this.le);const h=i+this.le-1,u=Math.round(Math.min(t.ve,t.pe)*r),d=Math.round(Math.max(t.ve,t.pe)*r);null!==l&&(i=Math.max(l+1,i),i=Math.min(i,h)),this.zt.he*s>2*a?aS(n,i,u,h-i+1,d-u+1,a):n.fillRect(i,u,h-i+1,d-u+1),l=h}}ze(t,e,i){if(null===this.zt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="";const a=this.Ie(s);for(let l=i.from;l<i.to;l++){const t=e[l];let i=Math.round(Math.min(t.ve,t.pe)*r),c=Math.round(Math.max(t.ve,t.pe)*r),h=Math.round(t.nt*s)-Math.floor(.5*this.le),u=h+this.le-1;if(t.ue!==o){const e=t.ue;n.fillStyle=e,o=e}this.zt._i&&(h+=a,i+=a,u-=a,c-=a),i>c||n.fillRect(h,i,u-h+1,c-i+1)}}}class sk extends QS{constructor(){super(...arguments),this.Ws=new nk}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){const t=this.Ls.W();this.Ws.J({In:this.Is,he:this.Es.St().he(),Oe:t.wickVisible,_i:t.borderVisible,tt:this.zs})}}class rk{constructor(t,e){this.Ne=t,this.Li=e}X(t,e,i){this.Ne.draw(t,this.Li,e,i)}}class ok extends GS{constructor(t,e,i){super(t,e,!1),this.wn=i,this.Ws=new rk(this.wn.renderer(),(e=>{const i=t.Ct();return null===i?null:t.Dt().Rt(e,i.Vt)}))}Fe(t){return this.wn.priceValueBuilder(t)}We(t){return this.wn.isWhitespace(t)}qs(){const t=this.Ls.$s();this.Is=this.Ls.In().ie().map((e=>Object.assign(Object.assign({ot:e.se,nt:NaN},t.Hs(e.se)),{je:e.He})))}Ks(t,e){e.Js(this.Is,Zx(this.zs))}Gs(){this.wn.update({bars:this.Is.map(ak),barSpacing:this.Es.St().he(),visibleRange:this.zs},this.Ls.W())}}function ak(t){return{x:t.nt,time:t.ot,originalData:t.je,barColor:t.ue}}class lk extends tS{constructor(){super(...arguments),this.zt=null,this.$e=[]}J(t){this.zt=t,this.$e=[]}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return;this.$e.length||this.Ue(e);const n=Math.max(1,Math.floor(i)),s=Math.round(this.zt.qe*i)-Math.floor(n/2),r=s+n;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const e=this.zt.it[o],a=this.$e[o-this.zt.tt.from],l=Math.round(e.st*i);let c,h;t.fillStyle=e.ue,l<=s?(c=l,h=r):(c=s,h=l-Math.floor(n/2)+n),t.fillRect(a.Vs,c,a.ui-a.Vs+1,h-c)}}Ue(t){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return void(this.$e=[]);const e=Math.ceil(this.zt.he*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.he*t)-e;this.$e=new Array(this.zt.tt.to-this.zt.tt.from);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const e=this.zt.it[s],n=Math.round(e.nt*t);let r,o;if(i%2){const t=(i-1)/2;r=n-t,o=n+t}else{const t=i/2;r=n-t,o=n+t-1}this.$e[s-this.zt.tt.from]={Vs:r,ui:o,Ye:n,Ze:e.nt*t,ot:e.ot}}for(let s=this.zt.tt.from+1;s<this.zt.tt.to;s++){const t=this.$e[s-this.zt.tt.from],i=this.$e[s-this.zt.tt.from-1];t.ot===i.ot+1&&t.Vs-i.ui!==e+1&&(i.Ye>i.Ze?i.ui=t.Vs-e-1:t.Vs=i.ui+e+1)}let n=Math.ceil(this.zt.he*t);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const t=this.$e[s-this.zt.tt.from];t.ui<t.Vs&&(t.ui=t.Vs),n=Math.min(t.ui-t.Vs+1,n)}if(e>0&&n<4)for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const t=this.$e[s-this.zt.tt.from];t.ui-t.Vs+1>n&&(t.Ye>t.Ze?t.ui-=1:t.Vs+=1)}}}class ck extends ZS{constructor(){super(...arguments),this.Ws=new lk}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t={it:this.Is,he:this.Es.St().he(),tt:this.zs,qe:this.Ls.Dt().Rt(this.Ls.W().base,Tx(this.Ls.Ct()).Vt)};this.Ws.J(t)}}class hk extends ZS{constructor(){super(...arguments),this.Ws=new US}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){const t=this.Ls.W(),e={it:this.Is,Nt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.zs,cs:this.Es.St().he()};this.Ws.J(e)}}const uk=/[2-9]/g;class dk{constructor(t=50){this.Xe=0,this.Ke=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=t}ir(){this.Xe=0,this.Qe.clear(),this.Ke=1,this.Ge=1,this.Je={}}xi(t,e,i){return this.nr(t,e,i).width}Mi(t,e,i){const n=this.nr(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}nr(t,e,i){const n=i||uk,s=String(e).replace(n,"0");if(this.Qe.has(s))return _x(this.Qe.get(s)).sr;if(this.Xe===this.tr){const t=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(t),this.Ge++,this.Xe--}t.save(),t.textBaseline="middle";const r=t.measureText(s);return t.restore(),0===r.width&&e.length||(this.Qe.set(s,{sr:r,er:this.Ke}),this.Je[this.Ke]=s,this.Xe++,this.Ke++),r}}class fk{constructor(t){this.rr=null,this.k=null,this.hr="right",this.lr=t}ar(t,e,i){this.rr=t,this.k=e,this.hr=i}X(t){null!==this.k&&null!==this.rr&&this.rr.X(t,this.k,this.lr,this.hr)}}class pk{constructor(t,e,i){this._r=t,this.lr=new dk(50),this.ur=e,this.F=i,this.j=-1,this.Wt=new fk(this.lr)}gt(){const t=this.F.cr(this.ur);if(null===t)return null;const e=t.dr(this.ur)?t.vr():this.ur.Dt();if(null===e)return null;const i=t.pr(e);if("overlay"===i)return null;const n=this.F.mr();return n.P!==this.j&&(this.j=n.P,this.lr.ir()),this.Wt.ar(this._r.Ii(),n,i),this.Wt}}class mk extends tS{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}br(t,e){var i;if(!(null===(i=this.zt)||void 0===i?void 0:i.yt))return null;const{st:n,et:s,wr:r}=this.zt;return e>=n-s-7&&e<=n+s+7?{gr:this.zt,wr:r}:null}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.zt)return;if(!1===this.zt.yt)return;const s=Math.round(this.zt.st*n);s<0||s>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.V,t.lineWidth=Math.floor(this.zt.et*i),Cx(t,this.zt.Nt),Ex(t,s,0,e.width))}}class gk{constructor(t){this.Mr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.Sr=new mk,this.ft=!0,this.Ls=t,this.Es=t.$t(),this.Sr.J(this.Mr)}bt(){this.ft=!0}gt(){return this.Ls.yt()?(this.ft&&(this.kr(),this.ft=!1),this.Sr):null}}class yk extends gk{constructor(t){super(t)}kr(){this.Mr.yt=!1;const t=this.Ls.Dt(),e=t.yr().yr;if(2!==e&&3!==e)return;const i=this.Ls.W();if(!i.baseLineVisible||!this.Ls.yt())return;const n=this.Ls.Ct();null!==n&&(this.Mr.yt=!0,this.Mr.st=t.Rt(n.Vt,n.Vt),this.Mr.V=i.baseLineColor,this.Mr.et=i.baseLineWidth,this.Mr.Nt=i.baseLineStyle)}}class vk extends tS{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}He(){return this.zt}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.zt;if(null===n)return;const s=Math.max(1,Math.floor(e)),r=s%2/2,o=Math.round(n.Ze.x*e)+r,a=n.Ze.y*i;t.fillStyle=n.Cr,t.beginPath();const l=Math.max(2,1.5*n.Tr)*e;t.arc(o,a,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.Pr,t.beginPath(),t.arc(o,a,n.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=s,t.strokeStyle=n.Rr,t.beginPath(),t.arc(o,a,n.ht*e+s/2,0,2*Math.PI,!1),t.stroke()}}const bk=[{Dr:0,Vr:.25,Or:4,Br:10,Ar:.25,Ir:0,zr:.4,Lr:.8},{Dr:.25,Vr:.525,Or:10,Br:14,Ar:0,Ir:0,zr:.8,Lr:0},{Dr:.525,Vr:1,Or:14,Br:14,Ar:0,Ir:0,zr:0,Lr:0}];function wk(t,e,i,n){return(function(t,e){if("transparent"===t)return t;const i=Dx(t);return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*i[3]})`})(t,i+(n-i)*e)}function xk(t,e){const i=t%2600/2600;let n;for(const l of bk)if(i>=l.Dr&&i<=l.Vr){n=l;break}Mx(void 0!==n,"Last price animation internal logic error");const s=(i-n.Dr)/(n.Vr-n.Dr);return{Pr:wk(e,s,n.Ar,n.Ir),Rr:wk(e,s,n.zr,n.Lr),ht:(r=s,o=n.Or,a=n.Br,o+(a-o)*r)};var r,o,a}class Sk{constructor(t){this.Wt=new vk,this.ft=!0,this.Er=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=t}jr(){this.Fr=this.Nr-1,this.bt()}Hr(){if(this.bt(),2===this.Wr.W().lastPriceAnimation){const t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}bt(){this.ft=!0}$r(){this.Er=!0}yt(){return 0!==this.Wr.W().lastPriceAnimation}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Er=!1):this.Er&&(this.qr(),this.Er=!1),this.Wt}Mt(){this.Wt.J(null);const t=this.Wr.$t().St(),e=t.Zs(),i=this.Wr.Ct();if(null===e||null===i)return;const n=this.Wr.Yr(!0);if(n.Zr||!e.Xr(n.se))return;const s={x:t.It(n.se),y:this.Wr.Dt().Rt(n._t,i.Vt)},r=n.V,o=this.Wr.W().lineWidth,a=xk(this.Kr(),r);this.Wt.J({Cr:r,Tr:o,Pr:a.Pr,Rr:a.Rr,ht:a.ht,Ze:s})}qr(){const t=this.Wt.He();if(null!==t){const e=xk(this.Kr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ht=e.ht}}Kr(){return this.Ur()?performance.now()-this.Nr:2599}}function kk(t,e){return RS(Math.min(Math.max(t,12),30)*e)}function jk(t,e){switch(t){case"arrowDown":case"arrowUp":return kk(e,1);case"circle":return kk(e,.8);case"square":return kk(e,.7)}}function Ck(t){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(kk(t,1))}function Ek(t){return Math.max(kk(t,.1),3)}function Mk(t,e,i){return e?t:i?Math.ceil(t/2):0}function _k(t,e,i,n,s){const r=jk("square",i),o=(r-1)/2,a=t-o,l=e-o;return n>=a&&n<=a+r&&s>=l&&s<=l+r}function Tk(t,e,i,n){const s=(jk("arrowUp",n)-1)/2*i.Gr,r=(RS(n/2)-1)/2*i.Gr;e.beginPath(),t?(e.moveTo(i.nt-s,i.st),e.lineTo(i.nt,i.st-s),e.lineTo(i.nt+s,i.st),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+r,i.st+s),e.lineTo(i.nt-r,i.st+s),e.lineTo(i.nt-r,i.st)):(e.moveTo(i.nt-s,i.st),e.lineTo(i.nt,i.st+s),e.lineTo(i.nt+s,i.st),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+r,i.st-s),e.lineTo(i.nt-r,i.st-s),e.lineTo(i.nt-r,i.st)),e.fill()}class Ak extends tS{constructor(){super(...arguments),this.zt=null,this.lr=new dk,this.j=-1,this.H="",this.Jr=""}J(t){this.zt=t}ar(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Jr=Xx(t,e),this.lr.ir())}br(t,e){if(null===this.zt||null===this.zt.tt)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const n=this.zt.it[i];if(Nk(n,t,e))return{gr:n.Qr,wr:n.wr}}return null}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i},n,s){if(null!==this.zt&&null!==this.zt.tt){t.textBaseline="middle",t.font=this.Jr;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const s=this.zt.it[n];void 0!==s.Kt&&(s.Kt.Hi=this.lr.xi(t,s.Kt.th),s.Kt.At=this.j,s.Kt.nt=s.nt-s.Kt.Hi/2),Ok(s,t,e,i)}}}}function Ok(t,e,i,n){e.fillStyle=t.V,void 0!==t.Kt&&(function(t,e,i,n,s,r){t.save(),t.scale(s,r),t.fillText(e,i,n),t.restore()})(e,t.Kt.th,t.Kt.nt,t.Kt.st,i,n),(function(t,e,i){if(0!==t.Xs)switch(t.ih){case"arrowDown":return void Tk(!1,e,i,t.Xs);case"arrowUp":return void Tk(!0,e,i,t.Xs);case"circle":return void(function(t,e,i){const n=(jk("circle",i)-1)/2;t.beginPath(),t.arc(e.nt,e.st,n*e.Gr,0,2*Math.PI,!1),t.fill()})(e,i,t.Xs);case"square":!(function(t,e,i){const n=jk("square",i),s=(n-1)*e.Gr/2;t.fillRect(e.nt-s,e.st-s,n*e.Gr,n*e.Gr)})(e,i,t.Xs)}})(t,e,(function(t,e,i){const n=Math.max(1,Math.floor(e))%2/2;return{nt:Math.round(t.nt*e)+n,st:t.st*i,Gr:e}})(t,i,n))}function Nk(t,e,i){return!(void 0===t.Kt||!(function(t,e,i,n,s,r){const o=n/2;return s>=t&&s<=t+i&&r>=e-o&&r<=e+o})(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,i))||(function(t,e,i){if(0===t.Xs)return!1;switch(t.ih){case"arrowDown":case"arrowUp":return(function(t,e,i,n,s,r){return _k(e,i,n,s,r)})(0,t.nt,t.st,t.Xs,e,i);case"circle":return(function(t,e,i,n,s){const r=2+jk("circle",i)/2,o=t-n,a=e-s;return Math.sqrt(o*o+a*a)<=r})(t.nt,t.st,t.Xs,e,i);case"square":return _k(t.nt,t.st,t.Xs,e,i)}})(t,e,i)}function Ik(t,e,i,n,s,r,o,a,l){const c=Wx(i)?i:i.xe,h=Wx(i)?i:i.ge,u=Wx(i)?i:i.Me,d=Wx(e.size)?Math.max(e.size,0):1,f=Ck(a.he())*d,p=f/2;switch(t.Xs=f,e.position){case"inBar":return t.st=o.Rt(c,l),void(void 0!==t.Kt&&(t.Kt.st=t.st+p+r+.6*s));case"aboveBar":return t.st=o.Rt(h,l)-p-n.nh,void 0!==t.Kt&&(t.Kt.st=t.st-p-.6*s,n.nh+=1.2*s),void(n.nh+=f+r);case"belowBar":return t.st=o.Rt(u,l)+p+n.sh,void 0!==t.Kt&&(t.Kt.st=t.st+p+r+.6*s,n.sh+=1.2*s),void(n.sh+=f+r)}}class Lk{constructor(t,e){this.ft=!0,this.eh=!0,this.rh=!0,this.hh=null,this.ah=null,this.Wt=new Ak,this.Wr=t,this.$i=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.rh=!0,"data"===t&&(this.eh=!0,this.ah=null)}gt(t){if(!this.Wr.yt())return null;this.ft&&this.oh();const e=this.$i.W().layout;return this.Wt.ar(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}_h(){if(this.rh){if(this.Wr.uh().length>0){const t=this.$i.St().he(),e=Ek(t),i=1.5*Ck(t)+2*e,n=this.dh();this.hh={above:Mk(i,n.aboveBar,n.inBar),below:Mk(i,n.belowBar,n.inBar)}}else this.hh=null;this.rh=!1}return this.hh}dh(){return null===this.ah&&(this.ah=this.Wr.uh().reduce(((t,e)=>(t[e.position]||(t[e.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1})),this.ah}oh(){const t=this.Wr.Dt(),e=this.$i.St(),i=this.Wr.uh();this.eh&&(this.zt.it=i.map((t=>({ot:t.time,nt:0,st:0,Xs:0,ih:t.shape,V:t.color,Qr:t.Qr,wr:t.id,Kt:void 0}))),this.eh=!1);const n=this.$i.W().layout;this.zt.tt=null;const s=e.Zs();if(null===s)return;const r=this.Wr.Ct();if(null===r)return;if(0===this.zt.it.length)return;let o=NaN;const a=Ek(e.he()),l={nh:a,sh:a};this.zt.tt=KS(this.zt.it,s,!0);for(let c=this.zt.tt.from;c<this.zt.tt.to;c++){const s=i[c];s.time!==o&&(l.nh=a,l.sh=a,o=s.time);const h=this.zt.it[c];h.nt=e.It(s.time),void 0!==s.text&&s.text.length>0&&(h.Kt={th:s.text,nt:0,st:0,Hi:0,At:0});const u=this.Wr.fh(s.time);null!==u&&Ik(h,s,u,l,n.fontSize,a,t,e,r.Vt)}this.ft=!1}}class zk extends gk{constructor(t){super(t)}kr(){const t=this.Mr;t.yt=!1;const e=this.Ls.W();if(!e.priceLineVisible||!this.Ls.yt())return;const i=this.Ls.Yr(0===e.priceLineSource);i.Zr||(t.yt=!0,t.st=i.ki,t.V=this.Ls.ph(i.V),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class Rk extends fS{constructor(t){super(),this.jt=t}zi(t,e,i){t.yt=!1,e.yt=!1;const n=this.jt;if(!n.yt())return;const s=n.W(),r=s.lastValueVisible,o=""!==n.mh(),a=0===s.seriesLastValueMode,l=n.Yr(!1);if(l.Zr)return;r&&(t.Kt=this.bh(l,r,a),t.yt=0!==t.Kt.length),(o||a)&&(e.Kt=this.wh(l,r,o,a),e.yt=e.Kt.length>0);const c=n.ph(l.V),h=Bx(c);i.t=h.t,i.ki=l.ki,e.Ot=n.$t().Bt(l.ki/n.Dt().At()),t.Ot=c,t.V=h.i,e.V=h.i}wh(t,e,i,n){let s="";const r=this.jt.mh();return i&&0!==r.length&&(s+=`${r} `),e&&n&&(s+=this.jt.Dt().gh()?t.Mh:t.xh),s.trim()}bh(t,e,i){return e?i?this.jt.Dt().gh()?t.xh:t.Mh:t.Kt:""}}function Pk(t,e,i,n){const s=Number.isFinite(e),r=Number.isFinite(i);return s&&r?t(e,i):s||r?s?e:i:n}class Dk{constructor(t,e){this.Sh=t,this.kh=e}yh(t){return null!==t&&this.Sh===t.Sh&&this.kh===t.kh}Ch(){return new Dk(this.Sh,this.kh)}Th(){return this.Sh}Ph(){return this.kh}Rh(){return this.kh-this.Sh}Ni(){return this.kh===this.Sh||Number.isNaN(this.kh)||Number.isNaN(this.Sh)}ts(t){return null===t?this:new Dk(Pk(Math.min,this.Th(),t.Th(),-1/0),Pk(Math.max,this.Ph(),t.Ph(),1/0))}Dh(t){if(!Wx(t))return;if(0==this.kh-this.Sh)return;const e=.5*(this.kh+this.Sh);let i=this.kh-e,n=this.Sh-e;i*=t,n*=t,this.kh=e+i,this.Sh=e+n}Vh(t){Wx(t)&&(this.kh+=t,this.Sh+=t)}Oh(){return{minValue:this.Sh,maxValue:this.kh}}static Bh(t){return null===t?null:new Dk(t.minValue,t.maxValue)}}class $k{constructor(t,e){this.Ah=t,this.Ih=e||null}zh(){return this.Ah}Lh(){return this.Ih}Oh(){return null===this.Ah?null:{priceRange:this.Ah.Oh(),margins:this.Ih||void 0}}static Bh(t){return null===t?null:new $k(Dk.Bh(t.priceRange),t.margins)}}class Bk extends gk{constructor(t,e){super(t),this.Eh=e}kr(){const t=this.Mr;t.yt=!1;const e=this.Eh.W();if(!this.Ls.yt()||!e.lineVisible)return;const i=this.Eh.Nh();null!==i&&(t.yt=!0,t.st=i,t.V=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.wr=this.Eh.W().id)}}class Uk extends fS{constructor(t,e){super(),this.Wr=t,this.Eh=e}zi(t,e,i){t.yt=!1,e.yt=!1;const n=this.Eh.W(),s=""!==n.title,r=this.Wr;if(!n.axisLabelVisible||!r.yt())return;const o=this.Eh.Nh();if(null===o)return;s&&(e.Kt=n.title,e.yt=!0),e.Ot=r.$t().Bt(o/r.Dt().At()),t.Kt=this.Fh(n.price),t.yt=!0;const a=Bx(n.axisLabelColor||n.color);i.t=a.t;const l=n.axisLabelTextColor||a.i;t.V=l,e.V=l,i.ki=o}Fh(t){const e=this.Wr.Ct();return null===e?"":this.Wr.Dt().Fi(t,e.Vt)}}class Fk{constructor(t,e){this.Wr=t,this.cn=e,this.Wh=new Bk(t,this),this._r=new Uk(t,this),this.jh=new pk(this._r,t,t.$t())}Hh(t){Fx(this.cn,t),this.bt(),this.Wr.$t().$h()}W(){return this.cn}Uh(){return this.Wh}qh(){return this.jh}Yh(){return this._r}bt(){this.Wh.bt(),this._r.bt()}Nh(){const t=this.Wr,e=t.Dt();if(t.$t().St().Ni()||e.Ni())return null;const i=t.Ct();return null===i?null:e.Rt(this.cn.price,i.Vt)}}class Wk extends vS{constructor(t){super(),this.$i=t}$t(){return this.$i}}const Vk={Bar:(t,e,i,n)=>{var s;const r=e.upColor,o=e.downColor,a=Tx(t(i,n)),l=Ax(a.Vt[0])<=Ax(a.Vt[3]);return{ue:null!==(s=a.V)&&void 0!==s?s:l?r:o}},Candlestick:(t,e,i,n)=>{var s,r,o;const a=e.upColor,l=e.downColor,c=e.borderUpColor,h=e.borderDownColor,u=e.wickUpColor,d=e.wickDownColor,f=Tx(t(i,n)),p=Ax(f.Vt[0])<=Ax(f.Vt[3]);return{ue:null!==(s=f.V)&&void 0!==s?s:p?a:l,Ee:null!==(r=f.Ot)&&void 0!==r?r:p?c:h,Le:null!==(o=f.Zh)&&void 0!==o?o:p?u:d}},Custom:(t,e,i,n)=>{var s;return{ue:null!==(s=Tx(t(i,n)).V)&&void 0!==s?s:e.color}},Area:(t,e,i,n)=>{var s,r,o,a;const l=Tx(t(i,n));return{ue:null!==(s=l.lt)&&void 0!==s?s:e.lineColor,lt:null!==(r=l.lt)&&void 0!==r?r:e.lineColor,Ts:null!==(o=l.Ts)&&void 0!==o?o:e.topColor,Ps:null!==(a=l.Ps)&&void 0!==a?a:e.bottomColor}},Baseline:(t,e,i,n)=>{var s,r,o,a,l,c;const h=Tx(t(i,n));return{ue:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Pe:null!==(s=h.Pe)&&void 0!==s?s:e.topLineColor,Re:null!==(r=h.Re)&&void 0!==r?r:e.bottomLineColor,Se:null!==(o=h.Se)&&void 0!==o?o:e.topFillColor1,ke:null!==(a=h.ke)&&void 0!==a?a:e.topFillColor2,ye:null!==(l=h.ye)&&void 0!==l?l:e.bottomFillColor1,Ce:null!==(c=h.Ce)&&void 0!==c?c:e.bottomFillColor2}},Line:(t,e,i,n)=>{var s,r;const o=Tx(t(i,n));return{ue:null!==(s=o.V)&&void 0!==s?s:e.color,lt:null!==(r=o.V)&&void 0!==r?r:e.color}},Histogram:(t,e,i,n)=>{var s;return{ue:null!==(s=Tx(t(i,n)).V)&&void 0!==s?s:e.color}}};class qk{constructor(t){this.Xh=(t,e)=>void 0!==e?e.Vt:this.Wr.In().Kh(t),this.Wr=t,this.Gh=Vk[t.Jh()]}Hs(t,e){return this.Gh(this.Xh,this.Wr.W(),t,e)}}var Hk;!(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Hk||(Hk={}));const Kk=30;class Gk{constructor(){this.Qh=[],this.tl=new Map,this.il=new Map}nl(){return this.Xs()>0?this.Qh[this.Qh.length-1]:null}sl(){return this.Xs()>0?this.el(0):null}An(){return this.Xs()>0?this.el(this.Qh.length-1):null}Xs(){return this.Qh.length}Ni(){return 0===this.Xs()}Xr(t){return null!==this.rl(t,0)}Kh(t){return this.hl(t)}hl(t,e=0){const i=this.rl(t,e);return null===i?null:Object.assign(Object.assign({},this.ll(i)),{se:this.el(i)})}ie(){return this.Qh}al(t,e,i){if(this.Ni())return null;let n=null;for(const s of i)n=Zk(n,this.ol(t,e,s));return n}J(t){this.il.clear(),this.tl.clear(),this.Qh=t}el(t){return this.Qh[t].se}ll(t){return this.Qh[t]}rl(t,e){const i=this._l(t);if(null===i&&0!==e)switch(e){case-1:return this.ul(t);case 1:return this.cl(t);default:throw new TypeError("Unknown search mode")}return i}ul(t){let e=this.dl(t);return e>0&&(e-=1),e!==this.Qh.length&&this.el(e)<t?e:null}cl(t){const e=this.fl(t);return e!==this.Qh.length&&t<this.el(e)?e:null}_l(t){const e=this.dl(t);return e===this.Qh.length||t<this.Qh[e].se?null:e}dl(t){return WS(this.Qh,t,((t,e)=>t.se<e))}fl(t){return VS(this.Qh,t,((t,e)=>t.se>e))}vl(t,e,i){let n=null;for(let s=t;s<e;s++){const t=this.Qh[s].Vt[i];Number.isNaN(t)||(null===n?n={pl:t,ml:t}:(t<n.pl&&(n.pl=t),t>n.ml&&(n.ml=t)))}return n}ol(t,e,i){if(this.Ni())return null;let n=null;const s=Tx(this.sl()),r=Tx(this.An()),o=Math.max(t,s),a=Math.min(e,r),l=Math.ceil(o/Kk)*Kk,c=Math.max(l,Math.floor(a/Kk)*Kk);{const t=this.dl(o),s=this.fl(Math.min(a,l,e));n=Zk(n,this.vl(t,s,i))}let h=this.tl.get(i);void 0===h&&(h=new Map,this.tl.set(i,h));for(let u=Math.max(l+1,o);u<c;u+=Kk){const t=Math.floor(u/Kk);let e=h.get(t);if(void 0===e){const n=this.dl(t*Kk),s=this.fl((t+1)*Kk-1);e=this.vl(n,s,i),h.set(t,e)}n=Zk(n,e)}{const t=this.dl(c),e=this.fl(a);n=Zk(n,this.vl(t,e,i))}return n}}function Zk(t,e){return null===t?e:null===e?t:{pl:Math.min(t.pl,e.pl),ml:Math.max(t.ml,e.ml)}}class Yk{constructor(t){this.bl=t}X(t,e,i){this.bl.draw(t)}wl(t,e,i){var n,s;null===(s=(n=this.bl).drawBackground)||void 0===s||s.call(n,t)}}class Xk{constructor(t){this.Qe=null,this.wn=t}gt(){var t;const e=this.wn.renderer();if(null===e)return null;if((null===(t=this.Qe)||void 0===t?void 0:t.gl)===e)return this.Qe.Ml;const i=new Yk(e);return this.Qe={gl:e,Ml:i},i}xl(){var t,e,i;return null!==(i=null===(e=(t=this.wn).zOrder)||void 0===e?void 0:e.call(t))&&void 0!==i?i:"normal"}}function Qk(t){var e,i,n,s,r;return{Kt:t.text(),ki:t.coordinate(),Si:null===(e=t.fixedCoordinate)||void 0===e?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:null===(n=null===(i=t.visible)||void 0===i?void 0:i.call(t))||void 0===n||n,hi:null===(r=null===(s=t.tickVisible)||void 0===s?void 0:s.call(t))||void 0===r||r}}class Jk{constructor(t,e){this.Wt=new gS,this.Sl=t,this.kl=e}gt(){return this.Wt.J(Object.assign({Hi:this.kl.Hi()},Qk(this.Sl))),this.Wt}}class tj extends fS{constructor(t,e){super(),this.Sl=t,this.Li=e}zi(t,e,i){const n=Qk(this.Sl);i.t=n.t,t.V=n.V;const s=2/12*this.Li.P();i.wi=s,i.gi=s,i.ki=n.ki,i.Si=n.Si,t.Kt=n.Kt,t.yt=n.yt,t.hi=n.hi}}class ej{constructor(t,e){this.yl=null,this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=t,this.Wr=e}Vl(){return this.Dl}Vn(){var t,e;null===(e=(t=this.Dl).updateAllViews)||void 0===e||e.call(t)}Pn(){var t,e,i,n;const s=null!==(i=null===(e=(t=this.Dl).paneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(n=this.yl)||void 0===n?void 0:n.gl)===s)return this.yl.Ml;const r=s.map((t=>new Xk(t)));return this.yl={gl:s,Ml:r},r}Qi(){var t,e,i,n;const s=null!==(i=null===(e=(t=this.Dl).timeAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(n=this.Cl)||void 0===n?void 0:n.gl)===s)return this.Cl.Ml;const r=this.Wr.$t().St(),o=s.map((t=>new Jk(t,r)));return this.Cl={gl:s,Ml:o},o}Rn(){var t,e,i,n;const s=null!==(i=null===(e=(t=this.Dl).priceAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(n=this.Tl)||void 0===n?void 0:n.gl)===s)return this.Tl.Ml;const r=this.Wr.Dt(),o=s.map((t=>new tj(t,r)));return this.Tl={gl:s,Ml:o},o}Ol(){var t,e,i,n;const s=null!==(i=null===(e=(t=this.Dl).priceAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(n=this.Pl)||void 0===n?void 0:n.gl)===s)return this.Pl.Ml;const r=s.map((t=>new Xk(t)));return this.Pl={gl:s,Ml:r},r}Bl(){var t,e,i,n;const s=null!==(i=null===(e=(t=this.Dl).timeAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(n=this.Rl)||void 0===n?void 0:n.gl)===s)return this.Rl.Ml;const r=s.map((t=>new Xk(t)));return this.Rl={gl:s,Ml:r},r}Al(t,e){var i,n,s;return null!==(s=null===(n=(i=this.Dl).autoscaleInfo)||void 0===n?void 0:n.call(i,t,e))&&void 0!==s?s:null}br(t,e){var i,n,s;return null!==(s=null===(n=(i=this.Dl).hitTest)||void 0===n?void 0:n.call(i,t,e))&&void 0!==s?s:null}}function ij(t,e,i,n){t.forEach((t=>{e(t).forEach((t=>{t.xl()===i&&n.push(t)}))}))}function nj(t){return t.Pn()}function sj(t){return t.Ol()}function rj(t){return t.Bl()}class oj extends Wk{constructor(t,e,i,n,s){super(t),this.zt=new Gk,this.Wh=new zk(this),this.Il=[],this.zl=new yk(this),this.Ll=null,this.El=null,this.Nl=[],this.Fl=[],this.Wl=null,this.jl=[],this.cn=e,this.Hl=i;const r=new Rk(this);this.rn=[r],this.jh=new pk(r,this,t),"Area"!==i&&"Line"!==i&&"Baseline"!==i||(this.Ll=new Sk(this)),this.$l(),this.Ul(s)}S(){null!==this.Wl&&clearTimeout(this.Wl)}ph(t){return this.cn.priceLineColor||t}Yr(t){const e={Zr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return e;const n=this.$t().St().Zs(),s=this.Ct();if(null===n||null===s)return e;let r,o;if(t){const t=this.zt.nl();if(null===t)return e;r=t,o=t.se}else{const t=this.zt.hl(n.ui(),-1);if(null===t)return e;if(r=this.zt.Kh(t.se),null===r)return e;o=t.se}const a=r.Vt[3],l=this.$s().Hs(o,{Vt:r}),c=i.Rt(a,s.Vt);return{Zr:!1,_t:a,Kt:i.Fi(a,s.Vt),Mh:i.ql(a),xh:i.Yl(a,s.Vt),V:l.ue,ki:c,se:o}}$s(){return null!==this.El||(this.El=new qk(this)),this.El}W(){return this.cn}Hh(t){const e=t.priceScaleId;void 0!==e&&e!==this.cn.priceScaleId&&this.$t().Zl(this,e),Fx(this.cn,t),void 0!==t.priceFormat&&(this.$l(),this.$t().Xl()),this.$t().Kl(this),this.$t().Gl(),this.wn.bt("options")}J(t,e){this.zt.J(t),this.Jl(),this.wn.bt("data"),this.dn.bt("data"),null!==this.Ll&&(e&&e.Ql?this.Ll.Hr():0===t.length&&this.Ll.jr());const i=this.$t().cr(this);this.$t().ta(i),this.$t().Kl(this),this.$t().Gl(),this.$t().$h()}ia(t){this.Nl=t,this.Jl();const e=this.$t().cr(this);this.dn.bt("data"),this.$t().ta(e),this.$t().Kl(this),this.$t().Gl(),this.$t().$h()}na(){return this.Nl}uh(){return this.Fl}sa(t){const e=new Fk(this,t);return this.Il.push(e),this.$t().Kl(this),e}ea(t){const e=this.Il.indexOf(t);-1!==e&&this.Il.splice(e,1),this.$t().Kl(this)}Jh(){return this.Hl}Ct(){const t=this.ra();return null===t?null:{Vt:t.Vt[3],ha:t.ot}}ra(){const t=this.$t().St().Zs();if(null===t)return null;const e=t.Vs();return this.zt.hl(e,1)}In(){return this.zt}fh(t){const e=this.zt.Kh(t);return null===e?null:"Bar"===this.Hl||"Candlestick"===this.Hl||"Custom"===this.Hl?{we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3]}:e.Vt[3]}la(t){const e=[];ij(this.jl,nj,"top",e);const i=this.Ll;return null!==i&&i.yt()?(null===this.Wl&&i.Ur()&&(this.Wl=setTimeout((()=>{this.Wl=null,this.$t().aa()}),0)),i.$r(),e.unshift(i),e):e}Pn(){const t=[];this.oa()||t.push(this.zl),t.push(this.wn,this.Wh,this.dn);const e=this.Il.map((t=>t.Uh()));return t.push(...e),ij(this.jl,nj,"normal",t),t}_a(){return this.ua(nj,"bottom")}ca(t){return this.ua(sj,t)}da(t){return this.ua(rj,t)}fa(t,e){return this.jl.map((i=>i.br(t,e))).filter((t=>null!==t))}Ji(t){return[this.jh,...this.Il.map((t=>t.qh()))]}Rn(t,e){if(e!==this.Yi&&!this.oa())return[];const i=[...this.rn];for(const n of this.Il)i.push(n.Yh());return this.jl.forEach((t=>{i.push(...t.Rn())})),i}Qi(){const t=[];return this.jl.forEach((e=>{t.push(...e.Qi())})),t}Al(t,e){if(void 0!==this.cn.autoscaleInfoProvider){const i=this.cn.autoscaleInfoProvider((()=>{const i=this.va(t,e);return null===i?null:i.Oh()}));return $k.Bh(i)}return this.va(t,e)}pa(){return this.cn.priceFormat.minMove}ma(){return this.ba}Vn(){var t;this.wn.bt(),this.dn.bt();for(const e of this.rn)e.bt();for(const e of this.Il)e.bt();this.Wh.bt(),this.zl.bt(),null===(t=this.Ll)||void 0===t||t.bt(),this.jl.forEach((t=>t.Vn()))}Dt(){return Tx(super.Dt())}kt(t){if("Line"!==this.Hl&&"Area"!==this.Hl&&"Baseline"!==this.Hl||!this.cn.crosshairMarkerVisible)return null;const e=this.zt.Kh(t);return null===e?null:{_t:e.Vt[3],ht:this.wa(),Ot:this.ga(),Pt:this.Ma(),Tt:this.xa(t)}}mh(){return this.cn.title}yt(){return this.cn.visible}Sa(t){this.jl.push(new ej(t,this))}ka(t){this.jl=this.jl.filter((e=>e.Vl()!==t))}ya(){if(this.wn instanceof ok!=0)return t=>this.wn.Fe(t)}Ca(){if(this.wn instanceof ok!=0)return t=>this.wn.We(t)}oa(){return!xS(this.Dt().Ta())}va(t,e){if(!Vx(t)||!Vx(e)||this.zt.Ni())return null;const i=this.zt.al(t,e,"Line"===this.Hl||"Area"===this.Hl||"Baseline"===this.Hl||"Histogram"===this.Hl?[3]:[2,1]);let n=null!==i?new Dk(i.pl,i.ml):null;if("Histogram"===this.Jh()){const t=this.cn.base,e=new Dk(t,t);n=null!==n?n.ts(e):e}let s=this.dn._h();return this.jl.forEach((i=>{const r=i.Al(t,e);if(null==r?void 0:r.priceRange){const t=new Dk(r.priceRange.minValue,r.priceRange.maxValue);n=null!==n?n.ts(t):t}var o,a,l,c;(null==r?void 0:r.margins)&&(o=s,a=r.margins,s={above:Math.max(null!==(l=null==o?void 0:o.above)&&void 0!==l?l:0,a.above),below:Math.max(null!==(c=null==o?void 0:o.below)&&void 0!==c?c:0,a.below)})})),new $k(n,s)}wa(){switch(this.Hl){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}ga(){switch(this.Hl){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}Ma(){switch(this.Hl){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}xa(t){switch(this.Hl){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.$s().Hs(t).ue}$l(){switch(this.cn.priceFormat.type){case"custom":this.ba={format:this.cn.priceFormat.formatter};break;case"volume":this.ba=new ES(this.cn.priceFormat.precision);break;case"percent":this.ba=new CS(this.cn.priceFormat.precision);break;default:{const t=Math.pow(10,this.cn.priceFormat.precision);this.ba=new jS(t,this.cn.priceFormat.minMove*t)}}null!==this.Yi&&this.Yi.Pa()}Jl(){const t=this.$t().St();if(!t.Ra()||this.zt.Ni())return void(this.Fl=[]);const e=Tx(this.zt.sl());this.Fl=this.Nl.map(((i,n)=>{const s=Tx(t.Da(i.time,!0));return{time:Tx(this.zt.hl(s,s<e?1:-1)).se,position:i.position,shape:i.shape,color:i.color,id:i.id,Qr:n,text:i.text,size:i.size,originalTime:i.originalTime}}))}Ul(t){switch(this.dn=new Lk(this,this.$t()),this.Hl){case"Bar":this.wn=new JS(this,this.$t());break;case"Candlestick":this.wn=new sk(this,this.$t());break;case"Line":this.wn=new hk(this,this.$t());break;case"Custom":this.wn=new ok(this,this.$t(),_x(t));break;case"Area":this.wn=new YS(this,this.$t());break;case"Baseline":this.wn=new ik(this,this.$t());break;case"Histogram":this.wn=new ck(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.Hl)}}ua(t,e){const i=[];return ij(this.jl,t,e,i),i}}class aj{constructor(t){this.cn=t}Va(t,e,i){let n=t;if(0===this.cn.mode)return n;const s=i.vn(),r=s.Ct();if(null===r)return n;const o=s.Rt(t,r),a=i.Oa().filter((t=>t instanceof oj)).reduce(((t,n)=>{if(i.dr(n)||!n.yt())return t;const s=n.Dt(),r=n.In();if(s.Ni()||!r.Xr(e))return t;const o=r.Kh(e);if(null===o)return t;const a=Ax(n.Ct());return t.concat([s.Rt(o.Vt[3],a.Vt)])}),[]);return 0===a.length||(a.sort(((t,e)=>Math.abs(t-o)-Math.abs(e-o))),n=s.pn(a[0],r)),n}}class lj extends tS{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.zt)return;const s=Math.max(1,Math.floor(i));t.lineWidth=s,(function(t,e){t.save(),t.lineWidth%2&&t.translate(.5,.5),e(),t.restore()})(t,(()=>{const r=Tx(this.zt);if(r.Ba){t.strokeStyle=r.Aa,Cx(t,r.Ia),t.beginPath();for(const n of r.za){const r=Math.round(n.La*i);t.moveTo(r,-s),t.lineTo(r,e.height+s)}t.stroke()}if(r.Ea){t.strokeStyle=r.Na,Cx(t,r.Fa),t.beginPath();for(const i of r.Wa){const r=Math.round(i.La*n);t.moveTo(-s,r),t.lineTo(e.width+s,r)}t.stroke()}}))}}class cj{constructor(t){this.Wt=new lj,this.ft=!0,this.tn=t}bt(){this.ft=!0}gt(){if(this.ft){const t=this.tn.$t().W().grid,e={Ea:t.horzLines.visible,Ba:t.vertLines.visible,Na:t.horzLines.color,Aa:t.vertLines.color,Fa:t.horzLines.style,Ia:t.vertLines.style,Wa:this.tn.vn().ja(),za:(this.tn.$t().St().ja()||[]).map((t=>({La:t.coord})))};this.Wt.J(e),this.ft=!1}return this.Wt}}class hj{constructor(t){this.wn=new cj(t)}Uh(){return this.wn}}const uj={Ha:4,$a:1e-4};function dj(t,e){const i=100*(t-e)/e;return e<0?-i:i}function fj(t,e){const i=dj(t.Th(),e),n=dj(t.Ph(),e);return new Dk(i,n)}function pj(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function mj(t,e){const i=pj(t.Th(),e),n=pj(t.Ph(),e);return new Dk(i,n)}function gj(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const n=Math.log10(i+e.$a)+e.Ha;return t<0?-n:n}function yj(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const n=Math.pow(10,i-e.Ha)-e.$a;return t<0?-n:n}function vj(t,e){if(null===t)return null;const i=gj(t.Th(),e),n=gj(t.Ph(),e);return new Dk(i,n)}function bj(t,e){if(null===t)return null;const i=yj(t.Th(),e),n=yj(t.Ph(),e);return new Dk(i,n)}function wj(t){if(null===t)return uj;const e=Math.abs(t.Ph()-t.Th());if(e>=1||e<1e-15)return uj;const i=Math.ceil(Math.abs(Math.log10(e))),n=uj.Ha+i;return{Ha:n,$a:1/Math.pow(10,n)}}class xj{constructor(t,e){if(this.Ua=t,this.qa=e,(function(t){if(t<0)return!1;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0})(this.Ua))this.Ya=[2,2.5,2];else{this.Ya=[];for(let t=this.Ua;1!==t;){if(t%2==0)this.Ya.push(2),t/=2;else{if(t%5!=0)throw new Error("unexpected base");this.Ya.push(2,2.5),t/=5}if(this.Ya.length>100)throw new Error("something wrong with base")}}}Za(t,e,i){const n=0===this.Ua?0:1/this.Ua;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),r=0,o=this.qa[0];for(;;){const t=zS(s,n,1e-14)&&s>n+1e-14,e=zS(s,i*o,1e-14),a=zS(s,1,1e-14);if(!(t&&e&&a))break;s/=o,o=this.qa[++r%this.qa.length]}if(s<=n+1e-14&&(s=n),s=Math.max(1,s),this.Ya.length>0&&Math.abs(s-1)<1e-14)for(r=0,o=this.Ya[0];zS(s,i*o,1e-14)&&s>n+1e-14;)s/=o,o=this.Ya[++r%this.Ya.length];return s}}class Sj{constructor(t,e,i,n){this.Xa=[],this.Li=t,this.Ua=e,this.Ka=i,this.Ga=n}Za(t,e){if(t<e)throw new Error("high < low");const i=this.Li.At(),n=(t-e)*this.Ja()/i,s=new xj(this.Ua,[2,2.5,2]),r=new xj(this.Ua,[2,2,2.5]),o=new xj(this.Ua,[2.5,2,2]),a=[];return a.push(s.Za(t,e,n),r.Za(t,e,n),o.Za(t,e,n)),(function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e})(a)}Qa(){const t=this.Li,e=t.Ct();if(null===e)return void(this.Xa=[]);const i=t.At(),n=this.Ka(i-1,e),s=this.Ka(0,e),r=this.Li.W().entireTextOnly?this.io()/2:0,o=r,a=i-1-r,l=Math.max(n,s),c=Math.min(n,s);if(l===c)return void(this.Xa=[]);let h=this.Za(l,c),u=l%h;u+=u<0?h:0;const d=l>=c?1:-1;let f=null,p=0;for(let m=l-u;m>c;m-=h){const i=this.Ga(m,e,!0);null!==f&&Math.abs(i-f)<this.Ja()||i<o||i>a||(p<this.Xa.length?(this.Xa[p].La=i,this.Xa[p].no=t.so(m)):this.Xa.push({La:i,no:t.so(m)}),p++,f=i,t.eo()&&(h=this.Za(m*d,c)))}this.Xa.length=p}ja(){return this.Xa}io(){return this.Li.P()}Ja(){return Math.ceil(2.5*this.io())}}function kj(t){return t.slice().sort(((t,e)=>Tx(t.Xi())-Tx(e.Xi())))}var jj;!(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(jj||(jj={}));const Cj=new CS,Ej=new jS(100,1);class Mj{constructor(t,e,i,n){this.ro=0,this.ho=null,this.Ah=null,this.lo=null,this.ao={oo:!1,_o:null},this.uo=0,this.co=0,this.do=new Ux,this.fo=new Ux,this.vo=[],this.po=null,this.mo=null,this.bo=null,this.wo=null,this.ba=Ej,this.Mo=wj(null),this.xo=t,this.cn=e,this.So=i,this.ko=n,this.yo=new Sj(this,100,this.Co.bind(this),this.To.bind(this))}Ta(){return this.xo}W(){return this.cn}Hh(t){if(Fx(this.cn,t),this.Pa(),void 0!==t.mode&&this.Po({yr:t.mode}),void 0!==t.scaleMargins){const e=_x(t.scaleMargins.top),i=_x(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Ro(),this.mo=null}}Do(){return this.cn.autoScale}eo(){return 1===this.cn.mode}gh(){return 2===this.cn.mode}Vo(){return 3===this.cn.mode}yr(){return{Wn:this.cn.autoScale,Oo:this.cn.invertScale,yr:this.cn.mode}}Po(t){const e=this.yr();let i=null;void 0!==t.Wn&&(this.cn.autoScale=t.Wn),void 0!==t.yr&&(this.cn.mode=t.yr,2!==t.yr&&3!==t.yr||(this.cn.autoScale=!0),this.ao.oo=!1),1===e.yr&&t.yr!==e.yr&&((function(t,e){if(null===t)return!1;const i=yj(t.Th(),e),n=yj(t.Ph(),e);return isFinite(i)&&isFinite(n)})(this.Ah,this.Mo)?(i=bj(this.Ah,this.Mo),null!==i&&this.Bo(i)):this.cn.autoScale=!0),1===t.yr&&t.yr!==e.yr&&(i=vj(this.Ah,this.Mo),null!==i&&this.Bo(i));const n=e.yr!==this.cn.mode;n&&(2===e.yr||this.gh())&&this.Pa(),n&&(3===e.yr||this.Vo())&&this.Pa(),void 0!==t.Oo&&e.Oo!==t.Oo&&(this.cn.invertScale=t.Oo,this.Ao()),this.fo.m(e,this.yr())}Io(){return this.fo}P(){return this.So.fontSize}At(){return this.ro}zo(t){this.ro!==t&&(this.ro=t,this.Ro(),this.mo=null)}Lo(){if(this.ho)return this.ho;const t=this.At()-this.Eo()-this.No();return this.ho=t,t}zh(){return this.Fo(),this.Ah}Bo(t,e){const i=this.Ah;(e||null===i&&null!==t||null!==i&&!i.yh(t))&&(this.mo=null,this.Ah=t)}Ni(){return this.Fo(),0===this.ro||!this.Ah||this.Ah.Ni()}Wo(t){return this.Oo()?t:this.At()-1-t}Rt(t,e){return this.gh()?t=dj(t,e):this.Vo()&&(t=pj(t,e)),this.To(t,e)}Qs(t,e,i){this.Fo();const n=this.No(),s=Tx(this.zh()),r=s.Th(),o=s.Ph(),a=this.Lo()-1,l=this.Oo(),c=a/(o-r),h=void 0===i?0:i.from,u=void 0===i?t.length:i.to,d=this.jo();for(let f=h;f<u;f++){const i=t[f],s=i._t;if(isNaN(s))continue;let o=s;null!==d&&(o=d(i._t,e));const a=n+c*(o-r);i.st=l?a:this.ro-1-a}}me(t,e,i){this.Fo();const n=this.No(),s=Tx(this.zh()),r=s.Th(),o=s.Ph(),a=this.Lo()-1,l=this.Oo(),c=a/(o-r),h=void 0===i?0:i.from,u=void 0===i?t.length:i.to,d=this.jo();for(let f=h;f<u;f++){const i=t[f];let s=i.we,o=i.ge,a=i.Me,h=i.xe;null!==d&&(s=d(i.we,e),o=d(i.ge,e),a=d(i.Me,e),h=d(i.xe,e));let u=n+c*(s-r),p=l?u:this.ro-1-u;i.ve=p,u=n+c*(o-r),p=l?u:this.ro-1-u,i.ce=p,u=n+c*(a-r),p=l?u:this.ro-1-u,i.de=p,u=n+c*(h-r),p=l?u:this.ro-1-u,i.pe=p}}pn(t,e){const i=this.Co(t,e);return this.Ho(i,e)}Ho(t,e){let i=t;return this.gh()?i=(function(t,e){return e<0&&(t=-t),t/100*e+e})(i,e):this.Vo()&&(i=(function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e})(i,e)),i}Oa(){return this.vo}$o(){if(this.po)return this.po;let t=[];for(let e=0;e<this.vo.length;e++){const i=this.vo[e];null===i.Xi()&&i.Ki(e+1),t.push(i)}return t=kj(t),this.po=t,this.po}Uo(t){-1===this.vo.indexOf(t)&&(this.vo.push(t),this.Pa(),this.qo())}Yo(t){const e=this.vo.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.vo.splice(e,1),0===this.vo.length&&(this.Po({Wn:!0}),this.Bo(null)),this.Pa(),this.qo()}Ct(){let t=null;for(const e of this.vo){const i=e.Ct();null!==i&&(null===t||i.ha<t.ha)&&(t=i)}return null===t?null:t.Vt}Oo(){return this.cn.invertScale}ja(){const t=null===this.Ct();if(null!==this.mo&&(t||this.mo.Zo===t))return this.mo.ja;this.yo.Qa();const e=this.yo.ja();return this.mo={ja:e,Zo:t},this.do.m(),e}Xo(){return this.do}Ko(t){this.gh()||this.Vo()||null===this.bo&&null===this.lo&&(this.Ni()||(this.bo=this.ro-t,this.lo=Tx(this.zh()).Ch()))}Go(t){if(this.gh()||this.Vo())return;if(null===this.bo)return;this.Po({Wn:!1}),(t=this.ro-t)<0&&(t=0);let e=(this.bo+.2*(this.ro-1))/(t+.2*(this.ro-1));const i=Tx(this.lo).Ch();e=Math.max(e,.1),i.Dh(e),this.Bo(i)}Jo(){this.gh()||this.Vo()||(this.bo=null,this.lo=null)}Qo(t){this.Do()||null===this.wo&&null===this.lo&&(this.Ni()||(this.wo=t,this.lo=Tx(this.zh()).Ch()))}t_(t){if(this.Do())return;if(null===this.wo)return;const e=Tx(this.zh()).Rh()/(this.Lo()-1);let i=t-this.wo;this.Oo()&&(i*=-1);const n=i*e,s=Tx(this.lo).Ch();s.Vh(n),this.Bo(s,!0),this.mo=null}i_(){this.Do()||null!==this.wo&&(this.wo=null,this.lo=null)}ma(){return this.ba||this.Pa(),this.ba}Fi(t,e){switch(this.cn.mode){case 2:return this.n_(dj(t,e));case 3:return this.ma().format(pj(t,e));default:return this.Fh(t)}}so(t){switch(this.cn.mode){case 2:return this.n_(t);case 3:return this.ma().format(t);default:return this.Fh(t)}}ql(t){return this.Fh(t,Tx(this.s_()).ma())}Yl(t,e){return t=dj(t,e),this.n_(t,Cj)}e_(){return this.vo}r_(t){this.ao={_o:t,oo:!1}}Vn(){this.vo.forEach((t=>t.Vn()))}Pa(){this.mo=null;const t=this.s_();let e=100;null!==t&&(e=Math.round(1/t.pa())),this.ba=Ej,this.gh()?(this.ba=Cj,e=100):this.Vo()?(this.ba=new jS(100,1),e=100):null!==t&&(this.ba=t.ma()),this.yo=new Sj(this,e,this.Co.bind(this),this.To.bind(this)),this.yo.Qa()}qo(){this.po=null}s_(){return this.vo[0]||null}Eo(){return this.Oo()?this.cn.scaleMargins.bottom*this.At()+this.co:this.cn.scaleMargins.top*this.At()+this.uo}No(){return this.Oo()?this.cn.scaleMargins.top*this.At()+this.uo:this.cn.scaleMargins.bottom*this.At()+this.co}Fo(){this.ao.oo||(this.ao.oo=!0,this.h_())}Ro(){this.ho=null}To(t,e){if(this.Fo(),this.Ni())return 0;t=this.eo()&&t?gj(t,this.Mo):t;const i=Tx(this.zh()),n=this.No()+(this.Lo()-1)*(t-i.Th())/i.Rh();return this.Wo(n)}Co(t,e){if(this.Fo(),this.Ni())return 0;const i=this.Wo(t),n=Tx(this.zh()),s=n.Th()+n.Rh()*((i-this.No())/(this.Lo()-1));return this.eo()?yj(s,this.Mo):s}Ao(){this.mo=null,this.yo.Qa()}h_(){const t=this.ao._o;if(null===t)return;let e=null;const i=this.e_();let n=0,s=0;for(const a of i){if(!a.yt())continue;const i=a.Ct();if(null===i)continue;const r=a.Al(t.Vs(),t.ui());let o=r&&r.zh();if(null!==o){switch(this.cn.mode){case 1:o=vj(o,this.Mo);break;case 2:o=fj(o,i.Vt);break;case 3:o=mj(o,i.Vt)}if(e=null===e?o:e.ts(Tx(o)),null!==r){const t=r.Lh();null!==t&&(n=Math.max(n,t.above),s=Math.max(s,t.below))}}}if(n===this.uo&&s===this.co||(this.uo=n,this.co=s,this.mo=null,this.Ro()),null!==e){if(e.Th()===e.Ph()){const t=this.s_(),i=5*(null===t||this.gh()||this.Vo()?1:t.pa());this.eo()&&(e=bj(e,this.Mo)),e=new Dk(e.Th()-i,e.Ph()+i),this.eo()&&(e=vj(e,this.Mo))}if(this.eo()){const t=bj(e,this.Mo),i=wj(t);if((r=i).Ha!==(o=this.Mo).Ha||r.$a!==o.$a){const n=null!==this.lo?bj(this.lo,this.Mo):null;this.Mo=i,e=vj(t,i),null!==n&&(this.lo=vj(n,i))}}this.Bo(e)}else null===this.Ah&&(this.Bo(new Dk(-.5,.5)),this.Mo=wj(null));var r,o;this.ao.oo=!0}jo(){return this.gh()?dj:this.Vo()?pj:this.eo()?t=>gj(t,this.Mo):null}l_(t,e,i){return void 0===e?(void 0===i&&(i=this.ma()),i.format(t)):e(t)}Fh(t,e){return this.l_(t,this.ko.priceFormatter,e)}n_(t,e){return this.l_(t,this.ko.percentageFormatter,e)}}class _j{constructor(t,e){this.vo=[],this.a_=new Map,this.ro=0,this.o_=0,this.__=1e3,this.po=null,this.u_=new Ux,this.kl=t,this.$i=e,this.c_=new hj(this);const i=e.W();this.d_=this.f_("left",i.leftPriceScale),this.v_=this.f_("right",i.rightPriceScale),this.d_.Io().l(this.p_.bind(this,this.d_),this),this.v_.Io().l(this.p_.bind(this,this.v_),this),this.m_(i)}m_(t){if(t.leftPriceScale&&this.d_.Hh(t.leftPriceScale),t.rightPriceScale&&this.v_.Hh(t.rightPriceScale),t.localization&&(this.d_.Pa(),this.v_.Pa()),t.overlayPriceScales){const e=Array.from(this.a_.values());for(const i of e){const e=Tx(i[0].Dt());e.Hh(t.overlayPriceScales),t.localization&&e.Pa()}}}b_(t){switch(t){case"left":return this.d_;case"right":return this.v_}return this.a_.has(t)?_x(this.a_.get(t))[0].Dt():null}S(){this.$t().w_().p(this),this.d_.Io().p(this),this.v_.Io().p(this),this.vo.forEach((t=>{t.S&&t.S()})),this.u_.m()}g_(){return this.__}M_(t){this.__=t}$t(){return this.$i}Hi(){return this.o_}At(){return this.ro}x_(t){this.o_=t,this.S_()}zo(t){this.ro=t,this.d_.zo(t),this.v_.zo(t),this.vo.forEach((e=>{if(this.dr(e)){const i=e.Dt();null!==i&&i.zo(t)}})),this.S_()}Oa(){return this.vo}dr(t){const e=t.Dt();return null===e||this.d_!==e&&this.v_!==e}Uo(t,e,i){const n=void 0!==i?i:this.y_().k_+1;this.C_(t,e,n)}Yo(t){const e=this.vo.indexOf(t);Mx(-1!==e,"removeDataSource: invalid data source"),this.vo.splice(e,1);const i=Tx(t.Dt()).Ta();if(this.a_.has(i)){const e=_x(this.a_.get(i)),n=e.indexOf(t);-1!==n&&(e.splice(n,1),0===e.length&&this.a_.delete(i))}const n=t.Dt();n&&n.Oa().indexOf(t)>=0&&n.Yo(t),null!==n&&(n.qo(),this.T_(n)),this.po=null}pr(t){return t===this.d_?"left":t===this.v_?"right":"overlay"}P_(){return this.d_}R_(){return this.v_}D_(t,e){t.Ko(e)}V_(t,e){t.Go(e),this.S_()}O_(t){t.Jo()}B_(t,e){t.Qo(e)}A_(t,e){t.t_(e),this.S_()}I_(t){t.i_()}S_(){this.vo.forEach((t=>{t.Vn()}))}vn(){let t=null;return this.$i.W().rightPriceScale.visible&&0!==this.v_.Oa().length?t=this.v_:this.$i.W().leftPriceScale.visible&&0!==this.d_.Oa().length?t=this.d_:0!==this.vo.length&&(t=this.vo[0].Dt()),null===t&&(t=this.v_),t}vr(){let t=null;return this.$i.W().rightPriceScale.visible?t=this.v_:this.$i.W().leftPriceScale.visible&&(t=this.d_),t}T_(t){null!==t&&t.Do()&&this.z_(t)}L_(t){const e=this.kl.Zs();t.Po({Wn:!0}),null!==e&&t.r_(e),this.S_()}E_(){this.z_(this.d_),this.z_(this.v_)}N_(){this.T_(this.d_),this.T_(this.v_),this.vo.forEach((t=>{this.dr(t)&&this.T_(t.Dt())})),this.S_(),this.$i.$h()}$o(){return null===this.po&&(this.po=kj(this.vo)),this.po}F_(){return this.u_}W_(){return this.c_}z_(t){const e=t.e_();if(e&&e.length>0&&!this.kl.Ni()){const e=this.kl.Zs();null!==e&&t.r_(e)}t.Vn()}y_(){const t=this.$o();if(0===t.length)return{j_:0,k_:0};let e=0,i=0;for(let n=0;n<t.length;n++){const s=t[n].Xi();null!==s&&(s<e&&(e=s),s>i&&(i=s))}return{j_:e,k_:i}}C_(t,e,i){let n=this.b_(e);if(null===n&&(n=this.f_(e,this.$i.W().overlayPriceScales)),this.vo.push(t),!xS(e)){const i=this.a_.get(e)||[];i.push(t),this.a_.set(e,i)}n.Uo(t),t.Gi(n),t.Ki(i),this.T_(n),this.po=null}p_(t,e,i){e.yr!==i.yr&&this.z_(t)}f_(t,e){const i=Object.assign({visible:!0,autoScale:!0},Kx(e)),n=new Mj(t,i,this.$i.W().layout,this.$i.W().localization);return n.zo(this.At()),n}}class Tj{constructor(t,e,i=50){this.Xe=0,this.Ke=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.H_=t,this.U_=e,this.tr=i}q_(t){const e=this.U_.cacheKey(t.time),i=this.Qe.get(e);if(void 0!==i)return i.Y_;if(this.Xe===this.tr){const t=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(_x(t)),this.Ge++,this.Xe--}const n=this.H_(t);return this.Qe.set(e,{Y_:n,er:this.Ke}),this.Je.set(this.Ke,e),this.Xe++,this.Ke++,n}}class Aj{constructor(t,e){Mx(t<=e,"right should be >= left"),this.Z_=t,this.X_=e}Vs(){return this.Z_}ui(){return this.X_}K_(){return this.X_-this.Z_+1}Xr(t){return this.Z_<=t&&t<=this.X_}yh(t){return this.Z_===t.Vs()&&this.X_===t.ui()}}function Oj(t,e){return null===t||null===e?t===e:t.yh(e)}class Nj{constructor(){this.G_=new Map,this.Qe=null,this.J_=!1}Q_(t){this.J_=t,this.Qe=null}tu(t,e){this.iu(e),this.Qe=null;for(let i=e;i<t.length;++i){const e=t[i];let n=this.G_.get(e.timeWeight);void 0===n&&(n=[],this.G_.set(e.timeWeight,n)),n.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}nu(t,e){const i=Math.ceil(e/t);return null!==this.Qe&&this.Qe.su===i||(this.Qe={ja:this.eu(i),su:i}),this.Qe.ja}iu(t){if(0===t)return void this.G_.clear();const e=[];this.G_.forEach(((i,n)=>{t<=i[0].index?e.push(n):i.splice(WS(i,t,(e=>e.index<t)),1/0)}));for(const i of e)this.G_.delete(i)}eu(t){let e=[];for(const i of Array.from(this.G_.keys()).sort(((t,e)=>e-t))){if(!this.G_.get(i))continue;const n=e;e=[];const s=n.length;let r=0;const o=_x(this.G_.get(i)),a=o.length;let l=1/0,c=-1/0;for(let i=0;i<a;i++){const a=o[i],h=a.index;for(;r<s;){const t=n[r],i=t.index;if(!(i<h)){l=i;break}r++,e.push(t),c=i,l=1/0}if(l-h>=t&&h-c>=t)e.push(a),c=h;else if(this.J_)return n}for(;r<s;r++)e.push(n[r])}return e}}class Ij{constructor(t){this.ru=t}hu(){return null===this.ru?null:new Aj(Math.floor(this.ru.Vs()),Math.ceil(this.ru.ui()))}lu(){return this.ru}static au(){return new Ij(null)}}function Lj(t,e){return t.weight>e.weight?t:e}class zj{constructor(t,e,i,n){this.o_=0,this.ou=null,this._u=[],this.wo=null,this.bo=null,this.uu=new Nj,this.cu=new Map,this.du=Ij.au(),this.fu=!0,this.vu=new Ux,this.pu=new Ux,this.mu=new Ux,this.bu=null,this.wu=null,this.gu=[],this.cn=e,this.ko=i,this.Mu=e.rightOffset,this.xu=e.barSpacing,this.$i=t,this.U_=n,this.Su(),this.uu.Q_(e.uniformDistribution)}W(){return this.cn}ku(t){Fx(this.ko,t),this.yu(),this.Su()}Hh(t,e){var i;Fx(this.cn,t),this.cn.fixLeftEdge&&this.Cu(),this.cn.fixRightEdge&&this.Tu(),void 0!==t.barSpacing&&this.$i.Gn(t.barSpacing),void 0!==t.rightOffset&&this.$i.Jn(t.rightOffset),void 0!==t.minBarSpacing&&this.$i.Gn(null!==(i=t.barSpacing)&&void 0!==i?i:this.xu),this.yu(),this.Su(),this.mu.m()}mn(t){var e,i;return null!==(i=null===(e=this._u[t])||void 0===e?void 0:e.time)&&void 0!==i?i:null}Ui(t){var e;return null!==(e=this._u[t])&&void 0!==e?e:null}Da(t,e){if(this._u.length<1)return null;if(this.U_.key(t)>this.U_.key(this._u[this._u.length-1].time))return e?this._u.length-1:null;const i=WS(this._u,this.U_.key(t),((t,e)=>this.U_.key(t.time)<e));return this.U_.key(t)<this.U_.key(this._u[i].time)?e?i:null:i}Ni(){return 0===this.o_||0===this._u.length||null===this.ou}Ra(){return this._u.length>0}Zs(){return this.Pu(),this.du.hu()}Ru(){return this.Pu(),this.du.lu()}Du(){const t=this.Zs();if(null===t)return null;const e={from:t.Vs(),to:t.ui()};return this.Vu(e)}Vu(t){const e=Math.round(t.from),i=Math.round(t.to),n=Tx(this.Ou()),s=Tx(this.Bu());return{from:Tx(this.Ui(Math.max(n,e))),to:Tx(this.Ui(Math.min(s,i)))}}Au(t){return{from:Tx(this.Da(t.from,!0)),to:Tx(this.Da(t.to,!0))}}Hi(){return this.o_}x_(t){if(!isFinite(t)||t<=0)return;if(this.o_===t)return;const e=this.Ru(),i=this.o_;this.o_=t,this.fu=!0,this.cn.lockVisibleTimeRangeOnResize&&0!==i&&(this.xu=this.xu*t/i),this.cn.fixLeftEdge&&null!==e&&e.Vs()<=0&&(this.Mu-=Math.round((i-t)/this.xu)+1,this.fu=!0),this.Iu(),this.zu()}It(t){if(this.Ni()||!Vx(t))return 0;const e=this.Lu()+this.Mu-t;return this.o_-(e+.5)*this.xu-1}Js(t,e){const i=this.Lu(),n=void 0===e?0:e.from,s=void 0===e?t.length:e.to;for(let r=n;r<s;r++)t[r].nt=this.o_-(i+this.Mu-t[r].ot+.5)*this.xu-1}Eu(t){return Math.ceil(this.Nu(t))}Jn(t){this.fu=!0,this.Mu=t,this.zu(),this.$i.Fu(),this.$i.$h()}he(){return this.xu}Gn(t){this.Wu(t),this.zu(),this.$i.Fu(),this.$i.$h()}ju(){return this.Mu}ja(){if(this.Ni())return null;if(null!==this.wu)return this.wu;const t=this.xu,e=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=Tx(this.Zs()),s=Math.max(n.Vs(),n.Vs()-i),r=Math.max(n.ui(),n.ui()-i),o=this.uu.nu(t,e),a=this.Ou()+i,l=this.Bu()-i,c=this.Hu(),h=this.cn.fixLeftEdge||c,u=this.cn.fixRightEdge||c;let d=0;for(const f of o){if(!(s<=f.index&&f.index<=r))continue;let t;d<this.gu.length?(t=this.gu[d],t.coord=this.It(f.index),t.label=this.$u(f),t.weight=f.weight):(t={needAlignCoordinate:!1,coord:this.It(f.index),label:this.$u(f),weight:f.weight},this.gu.push(t)),t.needAlignCoordinate=!(this.xu>e/2&&!c)&&(h&&f.index<=a||u&&f.index>=l),d++}return this.gu.length=d,this.wu=this.gu,this.gu}Uu(){this.fu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}qu(t){this.fu=!0,this.ou=t,this.zu(),this.Cu()}Yu(t,e){const i=this.Nu(t),n=this.he();this.Gn(n+e*(n/10)),this.cn.rightBarStaysOnScroll||this.Jn(this.ju()+(i-this.Nu(t)))}Ko(t){this.wo&&this.i_(),null===this.bo&&null===this.bu&&(this.Ni()||(this.bo=t,this.Zu()))}Go(t){if(null===this.bu)return;const e=LS(this.o_-t,0,this.o_),i=LS(this.o_-Tx(this.bo),0,this.o_);0!==e&&0!==i&&this.Gn(this.bu.he*e/i)}Jo(){null!==this.bo&&(this.bo=null,this.Xu())}Qo(t){null===this.wo&&null===this.bu&&(this.Ni()||(this.wo=t,this.Zu()))}t_(t){if(null===this.wo)return;const e=(this.wo-t)/this.he();this.Mu=Tx(this.bu).ju+e,this.fu=!0,this.zu()}i_(){null!==this.wo&&(this.wo=null,this.Xu())}Ku(){this.Gu(this.cn.rightOffset)}Gu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.Mu,n=performance.now();this.$i.Zn({Ju:t=>(t-n)/e>=1,Qu:s=>{const r=(s-n)/e;return r>=1?t:i+(t-i)*r}})}bt(t,e){this.fu=!0,this._u=t,this.uu.tu(t,e),this.zu()}tc(){return this.vu}nc(){return this.pu}sc(){return this.mu}Lu(){return this.ou||0}ec(t){const e=t.K_();this.Wu(this.o_/e),this.Mu=t.ui()-this.Lu(),this.zu(),this.fu=!0,this.$i.Fu(),this.$i.$h()}rc(){const t=this.Ou(),e=this.Bu();null!==t&&null!==e&&this.ec(new Aj(t,e+this.cn.rightOffset))}hc(t){const e=new Aj(t.from,t.to);this.ec(e)}qi(t){return void 0!==this.ko.timeFormatter?this.ko.timeFormatter(t.originalTime):this.U_.formatHorzItem(t.time)}Hu(){const{handleScroll:t,handleScale:e}=this.$i.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Ou(){return 0===this._u.length?null:0}Bu(){return 0===this._u.length?null:this._u.length-1}lc(t){return(this.o_-1-t)/this.xu}Nu(t){const e=this.lc(t),i=this.Lu()+this.Mu-e;return Math.round(1e6*i)/1e6}Wu(t){const e=this.xu;this.xu=t,this.Iu(),e!==this.xu&&(this.fu=!0,this.ac())}Pu(){if(!this.fu)return;if(this.fu=!1,this.Ni())return void this.oc(Ij.au());const t=this.Lu(),e=this.Mu+t,i=new Aj(e-this.o_/this.xu+1,e);this.oc(new Ij(i))}Iu(){const t=this._c();if(this.xu<t&&(this.xu=t,this.fu=!0),0!==this.o_){const t=.5*this.o_;this.xu>t&&(this.xu=t,this.fu=!0)}}_c(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&0!==this._u.length?this.o_/this._u.length:this.cn.minBarSpacing}zu(){const t=this.uc();null!==t&&this.Mu<t&&(this.Mu=t,this.fu=!0);const e=this.cc();this.Mu>e&&(this.Mu=e,this.fu=!0)}uc(){const t=this.Ou(),e=this.ou;return null===t||null===e?null:t-e-1+(this.cn.fixLeftEdge?this.o_/this.xu:Math.min(2,this._u.length))}cc(){return this.cn.fixRightEdge?0:this.o_/this.xu-Math.min(2,this._u.length)}Zu(){this.bu={he:this.he(),ju:this.ju()}}Xu(){this.bu=null}$u(t){let e=this.cu.get(t.weight);return void 0===e&&(e=new Tj((t=>this.dc(t)),this.U_),this.cu.set(t.weight,e)),e.q_(t)}dc(t){return this.U_.formatTickmark(t,this.ko)}oc(t){const e=this.du;this.du=t,Oj(e.hu(),this.du.hu())||this.vu.m(),Oj(e.lu(),this.du.lu())||this.pu.m(),this.ac()}ac(){this.wu=null}yu(){this.ac(),this.cu.clear()}Su(){this.U_.updateFormatter(this.ko)}Cu(){if(!this.cn.fixLeftEdge)return;const t=this.Ou();if(null===t)return;const e=this.Zs();if(null===e)return;const i=e.Vs()-t;i<0&&this.Jn(this.Mu-i-1),this.Iu()}Tu(){this.zu(),this.Iu()}}class Rj{X(t,e,i){t.useMediaCoordinateSpace((t=>this.K(t,e,i)))}wl(t,e,i){t.useMediaCoordinateSpace((t=>this.fc(t,e,i)))}fc(t,e,i){}}class Pj extends Rj{constructor(t){super(),this.vc=new Map,this.zt=t}K(t){}fc(t){if(!this.zt.yt)return;const{context:e,mediaSize:i}=t;let n=0;for(const r of this.zt.mc){if(0===r.Kt.length)continue;e.font=r.R;const t=this.bc(e,r.Kt);r.Yu=t>i.width?i.width/t:1,n+=r.wc*r.Yu}let s=0;switch(this.zt.gc){case"top":s=0;break;case"center":s=Math.max((i.height-n)/2,0);break;case"bottom":s=Math.max(i.height-n,0)}e.fillStyle=this.zt.V;for(const r of this.zt.mc){e.save();let t=0;switch(this.zt.Mc){case"left":e.textAlign="left",t=r.wc/2;break;case"center":e.textAlign="center",t=i.width/2;break;case"right":e.textAlign="right",t=i.width-1-r.wc/2}e.translate(t,s),e.textBaseline="top",e.font=r.R,e.scale(r.Yu,r.Yu),e.fillText(r.Kt,0,r.xc),e.restore(),s+=r.wc*r.Yu}}bc(t,e){const i=this.Sc(t.font);let n=i.get(e);return void 0===n&&(n=t.measureText(e).width,i.set(e,n)),n}Sc(t){let e=this.vc.get(t);return void 0===e&&(e=new Map,this.vc.set(t,e)),e}}class Dj{constructor(t){this.ft=!0,this.Ft={yt:!1,V:"",mc:[],gc:"center",Mc:"center"},this.Wt=new Pj(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.V=t.color,e.Mc=t.horzAlign,e.gc=t.vertAlign,e.mc=[{Kt:t.text,R:Xx(t.fontSize,t.fontFamily,t.fontStyle),wc:1.2*t.fontSize,xc:0,Yu:0}])}}class $j extends vS{constructor(t,e){super(),this.cn=e,this.wn=new Dj(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var Bj,Uj,Fj,Wj,Vj;!(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Bj||(Bj={}));class qj{constructor(t,e,i){this.kc=[],this.yc=[],this.o_=0,this.Cc=null,this.Tc=new Ux,this.Pc=new Ux,this.Rc=null,this.Dc=t,this.cn=e,this.U_=i,this.Vc=new Qx(this),this.kl=new zj(this,e.timeScale,this.cn.localization,i),this.vt=new wS(this,e.crosshair),this.Oc=new aj(e.crosshair),this.Bc=new $j(this,e.watermark),this.Ac(),this.kc[0].M_(2e3),this.Ic=this.zc(0),this.Lc=this.zc(1)}Xl(){this.Ec(SS.es())}$h(){this.Ec(SS.ss())}aa(){this.Ec(new SS(1))}Kl(t){const e=this.Nc(t);this.Ec(e)}Fc(){return this.Cc}Wc(t){const e=this.Cc;this.Cc=t,null!==e&&this.Kl(e.jc),null!==t&&this.Kl(t.jc)}W(){return this.cn}Hh(t){Fx(this.cn,t),this.kc.forEach((e=>e.m_(t))),void 0!==t.timeScale&&this.kl.Hh(t.timeScale),void 0!==t.localization&&this.kl.ku(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Tc.m(),this.Ic=this.zc(0),this.Lc=this.zc(1),this.Xl()}Hc(t,e){if("left"===t)return void this.Hh({leftPriceScale:e});if("right"===t)return void this.Hh({rightPriceScale:e});const i=this.$c(t);null!==i&&(i.Dt.Hh(e),this.Tc.m())}$c(t){for(const e of this.kc){const i=e.b_(t);if(null!==i)return{Ht:e,Dt:i}}return null}St(){return this.kl}Uc(){return this.kc}qc(){return this.Bc}Yc(){return this.vt}Zc(){return this.Pc}Xc(t,e){t.zo(e),this.Fu()}x_(t){this.o_=t,this.kl.x_(this.o_),this.kc.forEach((e=>e.x_(t))),this.Fu()}Ac(t){const e=new _j(this.kl,this);void 0!==t?this.kc.splice(t,0,e):this.kc.push(e);const i=void 0===t?this.kc.length-1:t,n=SS.es();return n.Nn(i,{Fn:0,Wn:!0}),this.Ec(n),e}D_(t,e,i){t.D_(e,i)}V_(t,e,i){t.V_(e,i),this.Gl(),this.Ec(this.Kc(t,2))}O_(t,e){t.O_(e),this.Ec(this.Kc(t,2))}B_(t,e,i){e.Do()||t.B_(e,i)}A_(t,e,i){e.Do()||(t.A_(e,i),this.Gl(),this.Ec(this.Kc(t,2)))}I_(t,e){e.Do()||(t.I_(e),this.Ec(this.Kc(t,2)))}L_(t,e){t.L_(e),this.Ec(this.Kc(t,2))}Gc(t){this.kl.Ko(t)}Jc(t,e){const i=this.St();if(i.Ni()||0===e)return;const n=i.Hi();t=Math.max(1,Math.min(t,n)),i.Yu(t,e),this.Fu()}Qc(t){this.td(0),this.nd(t),this.sd()}ed(t){this.kl.Go(t),this.Fu()}rd(){this.kl.Jo(),this.$h()}td(t){this.kl.Qo(t)}nd(t){this.kl.t_(t),this.Fu()}sd(){this.kl.i_(),this.$h()}wt(){return this.yc}hd(t,e,i,n,s){this.vt.gn(t,e);let r=NaN,o=this.kl.Eu(t);const a=this.kl.Zs();null!==a&&(o=Math.min(Math.max(a.Vs(),o),a.ui()));const l=n.vn(),c=l.Ct();null!==c&&(r=l.pn(e,c)),r=this.Oc.Va(r,o,n),this.vt.kn(o,r,n),this.aa(),s||this.Pc.m(this.vt.xt(),{x:t,y:e},i)}ld(t,e,i){const n=i.vn(),s=n.Ct(),r=n.Rt(t,Tx(s)),o=this.kl.Da(e,!0),a=this.kl.It(Tx(o));this.hd(a,r,null,i,!0)}ad(t){this.Yc().Cn(),this.aa(),t||this.Pc.m(null,null,null)}Gl(){const t=this.vt.Ht();if(null!==t){const e=this.vt.xn(),i=this.vt.Sn();this.hd(e,i,null,t)}this.vt.Vn()}od(t,e,i){const n=this.kl.mn(0);void 0!==e&&void 0!==i&&this.kl.bt(e,i);const s=this.kl.mn(0),r=this.kl.Lu(),o=this.kl.Zs();if(null!==o&&null!==n&&null!==s){const e=o.Xr(r),a=this.U_.key(n)>this.U_.key(s),l=null!==t&&t>r&&!a,c=this.kl.W().allowShiftVisibleRangeOnWhitespaceReplacement,h=e&&(!(void 0===i)||c)&&this.kl.W().shiftVisibleRangeOnNewBar;if(l&&!h){const e=t-r;this.kl.Jn(this.kl.ju()-e)}}this.kl.qu(t)}ta(t){null!==t&&t.N_()}cr(t){const e=this.kc.find((e=>e.$o().includes(t)));return void 0===e?null:e}Fu(){this.Bc.Vn(),this.kc.forEach((t=>t.N_())),this.Gl()}S(){this.kc.forEach((t=>t.S())),this.kc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}_d(){return this.Vc}mr(){return this.Vc.W()}w_(){return this.Tc}ud(t,e,i){const n=this.dd(e,t,this.kc[0],i);return this.yc.push(n),1===this.yc.length?this.Xl():this.$h(),n}fd(t){const e=this.cr(t),i=this.yc.indexOf(t);Mx(-1!==i,"Series not found"),this.yc.splice(i,1),Tx(e).Yo(t),t.S&&t.S()}Zl(t,e){const i=Tx(this.cr(t));i.Yo(t);const n=this.$c(e);if(null===n){const n=t.Xi();i.Uo(t,e,n)}else{const s=n.Ht===i?t.Xi():void 0;n.Ht.Uo(t,e,s)}}rc(){const t=SS.ss();t.$n(),this.Ec(t)}vd(t){const e=SS.ss();e.Yn(t),this.Ec(e)}Kn(){const t=SS.ss();t.Kn(),this.Ec(t)}Gn(t){const e=SS.ss();e.Gn(t),this.Ec(e)}Jn(t){const e=SS.ss();e.Jn(t),this.Ec(e)}Zn(t){const e=SS.ss();e.Zn(t),this.Ec(e)}Un(){const t=SS.ss();t.Un(),this.Ec(t)}pd(){return this.cn.rightPriceScale.visible?"right":"left"}md(){return this.Lc}q(){return this.Ic}Bt(t){const e=this.Lc,i=this.Ic;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Rc||this.Rc.Ts!==i||this.Rc.Ps!==e)this.Rc={Ts:i,Ps:e,bd:new Map};else{const e=this.Rc.bd.get(t);if(void 0!==e)return e}const n=(function(t,e,i){const[n,s,r,o]=Dx(t),[a,l,c,h]=Dx(e),u=[Nx(n+i*(a-n)),Nx(s+i*(l-s)),Nx(r+i*(c-r)),Ix(o+i*(h-o))];return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${u[3]})`})(i,e,t/100);return this.Rc.bd.set(t,n),n}Kc(t,e){const i=new SS(e);if(null!==t){const n=this.kc.indexOf(t);i.Nn(n,{Fn:e})}return i}Nc(t,e){return void 0===e&&(e=2),this.Kc(this.cr(t),e)}Ec(t){this.Dc&&this.Dc(t),this.kc.forEach((t=>t.W_().Uh().bt()))}dd(t,e,i,n){const s=new oj(this,t,e,i,n),r=void 0!==t.priceScaleId?t.priceScaleId:this.pd();return i.Uo(s,r),xS(r)||s.Hh(t),s}zc(t){const e=this.cn.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}}function Hj(t){return!Wx(t)&&!qx(t)}function Kj(t){return Wx(t)}!(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Uj||(Uj={})),(function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"})(Fj||(Fj={})),(function(t){t.Solid="solid",t.VerticalGradient="gradient"})(Wj||(Wj={})),(function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"})(Vj||(Vj={}));const Gj=t=>t.getUTCFullYear();class Zj{constructor(t="yyyy-MM-dd",e="default"){this.wd=t,this.gd=e}q_(t){return(function(t,e,i){return e.replace(/yyyy/g,(t=>kS(Gj(t),4))(t)).replace(/yy/g,(t=>kS(Gj(t)%100,2))(t)).replace(/MMMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"}))(t,i)).replace(/MMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"}))(t,i)).replace(/MM/g,(t=>kS((t=>t.getUTCMonth()+1)(t),2))(t)).replace(/dd/g,(t=>kS((t=>t.getUTCDate())(t),2))(t))})(t,this.wd,this.gd)}}class Yj{constructor(t){this.Md=t||"%h:%m:%s"}q_(t){return this.Md.replace("%h",kS(t.getUTCHours(),2)).replace("%m",kS(t.getUTCMinutes(),2)).replace("%s",kS(t.getUTCSeconds(),2))}}const Xj={xd:"yyyy-MM-dd",Sd:"%h:%m:%s",kd:" ",yd:"default"};class Qj{constructor(t={}){const e=Object.assign(Object.assign({},Xj),t);this.Cd=new Zj(e.xd,e.yd),this.Td=new Yj(e.Sd),this.Pd=e.kd}q_(t){return`${this.Cd.q_(t)}${this.Pd}${this.Td.q_(t)}`}}function Jj(t){return 60*t*60*1e3}function tC(t){return 60*t*1e3}const eC=[{Rd:1e3,Dd:10},{Rd:tC(1),Dd:20},{Rd:tC(5),Dd:21},{Rd:tC(30),Dd:22},{Rd:Jj(1),Dd:30},{Rd:Jj(3),Dd:31},{Rd:Jj(6),Dd:32},{Rd:Jj(12),Dd:33}];function iC(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=eC.length-1;i>=0;--i)if(Math.floor(e.getTime()/eC[i].Rd)!==Math.floor(t.getTime()/eC[i].Rd))return eC[i].Dd;return 0}function nC(t){let e=t;if(qx(t)&&(e=rC(t)),!Hj(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Vd:Math.round(i.getTime()/1e3),Od:e}}function sC(t){if(!Kj(t))throw new Error("time must be of type isUTCTimestamp");return{Vd:t}}function rC(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function oC(t){qx(t.time)&&(t.time=rC(t.time))}class aC{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(t){t.forEach(oC)})(t):oC(t)}createConverterToInternalObj(t){return Tx((function(t){return 0===t.length?null:Hj(t[0].time)||qx(t[0].time)?nC:sC})(t))}key(t){return"object"==typeof t&&"Vd"in t?t.Vd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return void 0===e.Od?new Date(1e3*e.Vd).getTime():new Date(Date.UTC(e.Od.year,e.Od.month-1,e.Od.day)).getTime()}convertHorzItemToInternal(t){return Kj(e=t)?sC(e):Hj(e)?nC(e):nC(rC(e));var e}updateFormatter(t){if(!this.cn)return;const e=t.dateFormat;this.Bd=this.cn.timeScale.timeVisible?new Qj({xd:e,Sd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",kd:"   ",yd:t.locale}):new Zj(e,t.locale)}formatHorzItem(t){return this.Bd.q_(new Date(1e3*t.Vd))}formatTickmark(t,e){const i=(function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(void 0!==n.tickMarkFormatter){const s=n.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==s)return s}return(function(t,e,i){const n={};switch(e){case 0:n.year="numeric";break;case 1:n.month="short";break;case 2:n.day="numeric";break;case 3:n.hour12=!1,n.hour="2-digit",n.minute="2-digit";break;case 4:n.hour12=!1,n.hour="2-digit",n.minute="2-digit",n.second="2-digit"}const s=void 0===t.Od?new Date(1e3*t.Vd):new Date(Date.UTC(t.Od.year,t.Od.month-1,t.Od.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(i,n)})(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Lj,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!(function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.Vd,n=null!==i?new Date(1e3*i):null,s=0;for(let r=e;r<t.length;++r){const e=t[r],o=new Date(1e3*e.time.Vd);null!==n&&(e.timeWeight=iC(o,n)),s+=e.time.Vd-(i||e.time.Vd),i=e.time.Vd,n=o}if(0===e&&t.length>1){const e=Math.ceil(s/(t.length-1)),i=new Date(1e3*(t[0].time.Vd-e));t[0].timeWeight=iC(new Date(1e3*t[0].time.Vd),i)}})(t,e)}static Ad(t){return Fx({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}const lC="undefined"!=typeof window;function cC(){return!!lC&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function hC(){return!!lC&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function uC(t){return t+t%2}function dC(t,e){return t.Id-e.Id}function fC(t,e,i){const n=(t.Id-e.Id)/(t.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),i)}class pC{constructor(t,e,i,n){this.zd=null,this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=0,this.jd=0,this.Hd=t,this.$d=e,this.Ud=i,this.rs=n}qd(t,e){if(null!==this.zd){if(this.zd.ot===e)return void(this.zd.Id=t);if(Math.abs(this.zd.Id-t)<this.rs)return}this.Nd=this.Ed,this.Ed=this.Ld,this.Ld=this.zd,this.zd={ot:e,Id:t}}Dr(t,e){if(null===this.zd||null===this.Ld)return;if(e-this.zd.ot>50)return;let i=0;const n=fC(this.zd,this.Ld,this.$d),s=dC(this.zd,this.Ld),r=[n],o=[s];if(i+=s,null!==this.Ed){const t=fC(this.Ld,this.Ed,this.$d);if(Math.sign(t)===Math.sign(n)){const e=dC(this.Ld,this.Ed);if(r.push(t),o.push(e),i+=e,null!==this.Nd){const t=fC(this.Ed,this.Nd,this.$d);if(Math.sign(t)===Math.sign(n)){const e=dC(this.Ed,this.Nd);r.push(t),o.push(e),i+=e}}}}let a=0;for(let l=0;l<r.length;++l)a+=o[l]/i*r[l];Math.abs(a)<this.Hd||(this.Fd={Id:t,ot:e},this.jd=a,this.Wd=(function(t,e){const i=Math.log(e);return Math.log(1*i/-t)/i})(Math.abs(a),this.Ud))}Qu(t){const e=Tx(this.Fd);return e.Id+this.jd*(Math.pow(this.Ud,t-e.ot)-1)/Math.log(this.Ud)}Ju(t){return null===this.Fd||this.Yd(t)===this.Wd}Yd(t){const e=t-Tx(this.Fd).ot;return Math.min(e,this.Wd)}}class mC{constructor(t,e){this.Zd=void 0,this.Xd=void 0,this.Kd=void 0,this.en=!1,this.Gd=t,this.Jd=e,this.Qd()}bt(){this.Qd()}tf(){this.Zd&&this.Gd.removeChild(this.Zd),this.Xd&&this.Gd.removeChild(this.Xd),this.Zd=void 0,this.Xd=void 0}if(){return this.en!==this.nf()||this.Kd!==this.sf()}sf(){return $x(Dx(this.Jd.W().layout.textColor))>160?"dark":"light"}nf(){return this.Jd.W().layout.attributionLogo}ef(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Qd(){this.if()&&(this.tf(),this.en=this.nf(),this.en&&(this.Kd=this.sf(),this.Xd=document.createElement("style"),this.Xd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Zd=document.createElement("a"),this.Zd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.ef()}`,this.Zd.title="Charting by TradingView",this.Zd.id="tv-attr-logo",this.Zd.target="_blank",this.Zd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Zd.toggleAttribute("data-dark","dark"===this.Kd),this.Gd.appendChild(this.Xd),this.Gd.appendChild(this.Zd)))}}function gC(t,e){const i=Tx(t.ownerDocument).createElement("canvas");t.appendChild(i);const n=(function(t,e){if("device-pixel-content-box"===e.type)return new ux(t,e.transform,e.options);throw new Error("Unsupported binding target")})(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return n.resizeCanvasElement(e),n}function yC(t){var e;t.width=1,t.height=1,null===(e=t.getContext("2d"))||void 0===e||e.clearRect(0,0,1,1)}function vC(t,e,i,n){t.wl&&t.wl(e,i,n)}function bC(t,e,i,n){t.X(e,i,n)}function wC(t,e,i,n){const s=t(i,n);for(const r of s){const t=r.gt();null!==t&&e(t)}}class xC{constructor(t,e,i){this.rf=0,this.hf=null,this.lf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.af=0,this._f=null,this.uf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.cf=null,this.df=!1,this.ff=null,this.vf=null,this.pf=!1,this.mf=!1,this.bf=!1,this.wf=null,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=0,this.Tf=!1,this.Pf=!1,this.Rf=!1,this.Df=0,this.Vf=null,this.Of=!hC(),this.Bf=t=>{this.Af(t)},this.If=t=>{if(this.zf(t)){const e=this.Lf(t);if(++this.af,this._f&&this.af>1){const{Ef:i}=this.Nf(jC(t),this.uf);i<30&&!this.bf&&this.Ff(e,this.jf.Wf),this.Hf()}}else{const e=this.Lf(t);if(++this.rf,this.hf&&this.rf>1){const{Ef:i}=this.Nf(jC(t),this.lf);i<5&&!this.mf&&this.$f(e,this.jf.Uf),this.qf()}}},this.Yf=t,this.jf=e,this.cn=i,this.Zf()}S(){null!==this.wf&&(this.wf(),this.wf=null),null!==this.gf&&(this.gf(),this.gf=null),null!==this.xf&&(this.xf(),this.xf=null),null!==this.Sf&&(this.Sf(),this.Sf=null),null!==this.kf&&(this.kf(),this.kf=null),null!==this.Mf&&(this.Mf(),this.Mf=null),this.Xf(),this.qf()}Kf(t){this.xf&&this.xf();const e=this.Gf.bind(this);if(this.xf=()=>{this.Yf.removeEventListener("mousemove",e)},this.Yf.addEventListener("mousemove",e),this.zf(t))return;const i=this.Lf(t);this.$f(i,this.jf.Jf),this.Of=!0}qf(){null!==this.hf&&clearTimeout(this.hf),this.rf=0,this.hf=null,this.lf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Hf(){null!==this._f&&clearTimeout(this._f),this.af=0,this._f=null,this.uf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Gf(t){if(this.Rf||null!==this.vf)return;if(this.zf(t))return;const e=this.Lf(t);this.$f(e,this.jf.Qf),this.Of=!0}tv(t){const e=EC(t.changedTouches,Tx(this.Vf));if(null===e)return;if(this.Df=CC(t),null!==this.yf)return;if(this.Pf)return;this.Tf=!0;const i=this.Nf(jC(e),Tx(this.vf)),{iv:n,nv:s,Ef:r}=i;if(this.pf||!(r<5)){if(!this.pf){const t=.5*n,e=s>=t&&!this.cn.sv(),i=t>s&&!this.cn.ev();e||i||(this.Pf=!0),this.pf=!0,this.bf=!0,this.Xf(),this.Hf()}if(!this.Pf){const i=this.Lf(t,e);this.Ff(i,this.jf.rv),kC(t)}}}hv(t){if(0!==t.button)return;const e=this.Nf(jC(t),Tx(this.ff)),{Ef:i}=e;if(i>=5&&(this.mf=!0,this.qf()),this.mf){const e=this.Lf(t);this.$f(e,this.jf.lv)}}Nf(t,e){const i=Math.abs(e.nt-t.nt),n=Math.abs(e.st-t.st);return{iv:i,nv:n,Ef:i+n}}av(t){let e=EC(t.changedTouches,Tx(this.Vf));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.Vf=null,this.Df=CC(t),this.Xf(),this.vf=null,this.kf&&(this.kf(),this.kf=null);const i=this.Lf(t,e);if(this.Ff(i,this.jf.ov),++this.af,this._f&&this.af>1){const{Ef:t}=this.Nf(jC(e),this.uf);t<30&&!this.bf&&this.Ff(i,this.jf.Wf),this.Hf()}else this.bf||(this.Ff(i,this.jf._v),this.jf._v&&kC(t));0===this.af&&kC(t),0===t.touches.length&&this.df&&(this.df=!1,kC(t))}Af(t){if(0!==t.button)return;const e=this.Lf(t);if(this.ff=null,this.Rf=!1,this.Sf&&(this.Sf(),this.Sf=null),cC()&&this.Yf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Bf),!this.zf(t))if(this.$f(e,this.jf.uv),++this.rf,this.hf&&this.rf>1){const{Ef:i}=this.Nf(jC(t),this.lf);i<5&&!this.mf&&this.$f(e,this.jf.Uf),this.qf()}else this.mf||this.$f(e,this.jf.cv)}Xf(){null!==this.cf&&(clearTimeout(this.cf),this.cf=null)}dv(t){if(null!==this.Vf)return;const e=t.changedTouches[0];this.Vf=e.identifier,this.Df=CC(t);const i=this.Yf.ownerDocument.documentElement;this.bf=!1,this.pf=!1,this.Pf=!1,this.vf=jC(e),this.kf&&(this.kf(),this.kf=null);{const e=this.tv.bind(this),n=this.av.bind(this);this.kf=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",n)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",n,{passive:!1}),this.Xf(),this.cf=setTimeout(this.fv.bind(this,t),240)}const n=this.Lf(t,e);this.Ff(n,this.jf.vv),this._f||(this.af=0,this._f=setTimeout(this.Hf.bind(this),500),this.uf=jC(e))}pv(t){if(0!==t.button)return;const e=this.Yf.ownerDocument.documentElement;cC()&&e.addEventListener("mouseleave",this.Bf),this.mf=!1,this.ff=jC(t),this.Sf&&(this.Sf(),this.Sf=null);{const t=this.hv.bind(this),i=this.Af.bind(this);this.Sf=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.Rf=!0,this.zf(t))return;const i=this.Lf(t);this.$f(i,this.jf.mv),this.hf||(this.rf=0,this.hf=setTimeout(this.qf.bind(this),500),this.lf=jC(t))}Zf(){this.Yf.addEventListener("mouseenter",this.Kf.bind(this)),this.Yf.addEventListener("touchcancel",this.Xf.bind(this));{const t=this.Yf.ownerDocument,e=t=>{this.jf.bv&&(t.composed&&this.Yf.contains(t.composedPath()[0])||t.target&&this.Yf.contains(t.target)||this.jf.bv())};this.gf=()=>{t.removeEventListener("touchstart",e)},this.wf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}hC()&&(this.Mf=()=>{this.Yf.removeEventListener("dblclick",this.If)},this.Yf.addEventListener("dblclick",this.If)),this.Yf.addEventListener("mouseleave",this.wv.bind(this)),this.Yf.addEventListener("touchstart",this.dv.bind(this),{passive:!0}),(function(t){lC&&void 0!==window.chrome&&t.addEventListener("mousedown",(t=>{if(1===t.button)return t.preventDefault(),!1}))})(this.Yf),this.Yf.addEventListener("mousedown",this.pv.bind(this)),this.gv(),this.Yf.addEventListener("touchmove",(()=>{}),{passive:!1})}gv(){void 0===this.jf.Mv&&void 0===this.jf.xv&&void 0===this.jf.Sv||(this.Yf.addEventListener("touchstart",(t=>this.kv(t.touches)),{passive:!0}),this.Yf.addEventListener("touchmove",(t=>{if(2===t.touches.length&&null!==this.yf&&void 0!==this.jf.xv){const e=SC(t.touches[0],t.touches[1])/this.Cf;this.jf.xv(this.yf,e),kC(t)}}),{passive:!1}),this.Yf.addEventListener("touchend",(t=>{this.kv(t.touches)})))}kv(t){1===t.length&&(this.Tf=!1),2!==t.length||this.Tf||this.df?this.yv():this.Cv(t)}Cv(t){const e=this.Yf.getBoundingClientRect()||{left:0,top:0};this.yf={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Cf=SC(t[0],t[1]),void 0!==this.jf.Mv&&this.jf.Mv(),this.Xf()}yv(){null!==this.yf&&(this.yf=null,void 0!==this.jf.Sv&&this.jf.Sv())}wv(t){if(this.xf&&this.xf(),this.zf(t))return;if(!this.Of)return;const e=this.Lf(t);this.$f(e,this.jf.Tv),this.Of=!hC()}fv(t){const e=EC(t.touches,Tx(this.Vf));if(null===e)return;const i=this.Lf(t,e);this.Ff(i,this.jf.Pv),this.bf=!0,this.df=!0}zf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:CC(t)<this.Df+500}Ff(t,e){e&&e.call(this.jf,t)}$f(t,e){e&&e.call(this.jf,t)}Lf(t,e){const i=e||t,n=this.Yf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Rv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Dv:t.type,Vv:i.target,Ov:t.view,Bv:()=>{"touchstart"!==t.type&&kC(t)}}}}function SC(t,e){const i=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(i*i+n*n)}function kC(t){t.cancelable&&t.preventDefault()}function jC(t){return{nt:t.pageX,st:t.pageY}}function CC(t){return t.timeStamp||performance.now()}function EC(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function MC(t){return{jc:t.jc,Av:{wr:t.Iv.externalId},zv:t.Iv.cursorStyle}}function _C(t,e,i){for(const n of t){const t=n.gt();if(null!==t&&t.br){const s=t.br(e,i);if(null!==s)return{Ov:n,Av:s}}}return null}function TC(t,e){return i=>{var n,s,r,o;return(null!==(s=null===(n=i.Dt())||void 0===n?void 0:n.Ta())&&void 0!==s?s:"")!==e?[]:null!==(o=null===(r=i.ca)||void 0===r?void 0:r.call(i,t))&&void 0!==o?o:[]}}function AC(t,e,i,n){if(!t.length)return;let s=0;const r=i/2,o=t[0].At(n,!0);let a=1===e?r-(t[0].Vi()-o/2):t[0].Vi()-o/2-r;a=Math.max(0,a);for(let l=1;l<t.length;l++){const r=t[l],o=t[l-1],c=o.At(n,!1),h=r.Vi(),u=o.Vi();if(1===e?h>u-c:h<u+c){const n=u-c*e;r.Oi(n);const o=n-e*c/2;if((1===e?o<0:o>i)&&a>0){const n=Math.min(1===e?-1-o:o-i,a);for(let i=s;i<t.length;i++)t[i].Oi(t[i].Vi()+e*n);a-=n}}else s=l,a=1===e?u-c-h:h-(u+c)}}class OC{constructor(t,e,i,n){this.Li=null,this.Lv=null,this.Ev=!1,this.Nv=new dk(200),this.Jr=null,this.Fv=0,this.Wv=!1,this.jv=()=>{this.Wv||this.tn.Hv().$t().$h()},this.$v=()=>{this.Wv||this.tn.Hv().$t().$h()},this.tn=t,this.cn=e,this.So=e.layout,this.Vc=i,this.Uv="left"===n,this.qv=TC("normal",n),this.Yv=TC("top",n),this.Zv=TC("bottom",n),this.Xv=document.createElement("div"),this.Xv.style.height="100%",this.Xv.style.overflow="hidden",this.Xv.style.width="25px",this.Xv.style.left="0",this.Xv.style.position="relative",this.Kv=gC(this.Xv,lx({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv);const s=this.Kv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gv=gC(this.Xv,lx({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.$v);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const o={mv:this.Jv.bind(this),vv:this.Jv.bind(this),lv:this.Qv.bind(this),rv:this.Qv.bind(this),bv:this.tp.bind(this),uv:this.ip.bind(this),ov:this.ip.bind(this),Uf:this.np.bind(this),Wf:this.np.bind(this),Jf:this.sp.bind(this),Tv:this.ep.bind(this)};this.rp=new xC(this.Gv.canvasElement,o,{sv:()=>!this.cn.handleScroll.vertTouchDrag,ev:()=>!0})}S(){this.rp.S(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.$v),yC(this.Gv.canvasElement),this.Gv.dispose(),this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),yC(this.Kv.canvasElement),this.Kv.dispose(),null!==this.Li&&this.Li.Xo().p(this),this.Li=null}hp(){return this.Xv}P(){return this.So.fontSize}lp(){const t=this.Vc.W();return this.Jr!==t.R&&(this.Nv.ir(),this.Jr=t.R),t}ap(){if(null===this.Li)return 0;let t=0;const e=this.lp(),i=Tx(this.Kv.canvasElement.getContext("2d"));i.save();const n=this.Li.ja();i.font=this.op(),n.length>0&&(t=Math.max(this.Nv.xi(i,n[0].no),this.Nv.xi(i,n[n.length-1].no)));const s=this._p();for(let o=s.length;o--;){const e=this.Nv.xi(i,s[o].Kt());e>t&&(t=e)}const r=this.Li.Ct();if(null!==r&&null!==this.Lv&&2!==this.cn.crosshair.mode){const e=this.Li.pn(1,r),n=this.Li.pn(this.Lv.height-2,r);t=Math.max(t,this.Nv.xi(i,this.Li.Fi(Math.floor(Math.min(e,n))+.11111111111111,r)),this.Nv.xi(i,this.Li.Fi(Math.ceil(Math.max(e,n))-.11111111111111,r)))}return i.restore(),uC(Math.ceil(e.C+e.T+e.A+e.I+5+(t||34)))}up(t){null!==this.Lv&&cx(this.Lv,t)||(this.Lv=t,this.Wv=!0,this.Kv.resizeCanvasElement(t),this.Gv.resizeCanvasElement(t),this.Wv=!1,this.Xv.style.width=`${t.width}px`,this.Xv.style.height=`${t.height}px`)}cp(){return Tx(this.Lv).width}Gi(t){this.Li!==t&&(null!==this.Li&&this.Li.Xo().p(this),this.Li=t,t.Xo().l(this.do.bind(this),this))}Dt(){return this.Li}ir(){const t=this.tn.dp();this.tn.Hv().$t().L_(t,Tx(this.Dt()))}fp(t){if(null===this.Lv)return;if(1!==t){this.vp(),this.Kv.applySuggestedBitmapSize();const t=px(this.Kv);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.pp(t),this.Ae(t)})),this.tn.mp(t,this.Zv),this.bp(t),this.tn.mp(t,this.qv),this.wp(t))}this.Gv.applySuggestedBitmapSize();const e=px(this.Gv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.gp(e),this.tn.mp(e,this.Yv))}Mp(){return this.Kv.bitmapSize}xp(t,e,i){const n=this.Mp();n.width>0&&n.height>0&&t.drawImage(this.Kv.canvasElement,e,i)}bt(){var t;null===(t=this.Li)||void 0===t||t.ja()}Jv(t){if(null===this.Li||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Hv().$t(),i=this.tn.dp();this.Ev=!0,e.D_(i,this.Li,t.localY)}Qv(t){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Hv().$t(),i=this.tn.dp();e.V_(i,this.Li,t.localY)}tp(){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.Hv().$t(),e=this.tn.dp(),i=this.Li;this.Ev&&(this.Ev=!1,t.O_(e,i))}ip(t){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Hv().$t(),i=this.tn.dp();this.Ev=!1,e.O_(i,this.Li)}np(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}sp(t){null!==this.Li&&(!this.tn.Hv().$t().W().handleScale.axisPressedMouseMove.price||this.Li.gh()||this.Li.Vo()||this.Sp(1))}ep(t){this.Sp(0)}_p(){const t=[],e=null===this.Li?void 0:this.Li;return(i=>{for(let n=0;n<i.length;++n){const s=i[n].Rn(this.tn.dp(),e);for(let e=0;e<s.length;e++)t.push(s[e])}})(this.tn.dp().$o()),t}pp({context:t,bitmapSize:e}){const{width:i,height:n}=e,s=this.tn.dp().$t(),r=s.q(),o=s.md();r===o?lS(t,0,0,i,n,r):uS(t,0,0,i,n,r,o)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(null===this.Lv||null===this.Li||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.lp().C*i));let s;s=this.Uv?e.width-n:0,t.fillRect(s,0,n,e.height)}bp(t){if(null===this.Lv||null===this.Li)return;const e=this.Li.ja(),i=this.Li.W(),n=this.lp(),s=this.Uv?this.Lv.width-n.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:r,verticalPixelRatio:o})=>{t.fillStyle=i.borderColor;const a=Math.max(1,Math.floor(o)),l=Math.floor(.5*o),c=Math.round(n.T*r);t.beginPath();for(const i of e)t.rect(Math.floor(s*r),Math.round(i.La*o)-l,c,a);t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{var r;t.font=this.op(),t.fillStyle=null!==(r=i.textColor)&&void 0!==r?r:this.So.textColor,t.textAlign=this.Uv?"right":"left",t.textBaseline="middle";const o=this.Uv?Math.round(s-n.A):Math.round(s+n.T+n.A),a=e.map((e=>this.Nv.Mi(t,e.no)));for(let i=e.length;i--;){const n=e[i];t.fillText(n.no,o,n.La+a[i])}}))}vp(){if(null===this.Lv||null===this.Li)return;const t=[],e=this.Li.$o().slice(),i=this.tn.dp(),n=this.lp();this.Li===i.vr()&&this.tn.dp().$o().forEach((t=>{i.dr(t)&&e.push(t)}));const s=this.Li;e.forEach((e=>{e.Rn(i,s).forEach((e=>{e.Oi(null),e.Bi()&&t.push(e)}))})),t.forEach((t=>t.Oi(t.ki()))),this.Li.W().alignLabels&&this.kp(t,n)}kp(t,e){if(null===this.Lv)return;const i=this.Lv.height/2,n=t.filter((t=>t.ki()<=i)),s=t.filter((t=>t.ki()>i));n.sort(((t,e)=>e.ki()-t.ki())),s.sort(((t,e)=>t.ki()-e.ki()));for(const r of t){const t=Math.floor(r.At(e)/2),i=r.ki();i>-t&&i<t&&r.Oi(t),i>this.Lv.height-t&&i<this.Lv.height+t&&r.Oi(this.Lv.height-t)}AC(n,1,this.Lv.height,e),AC(s,-1,this.Lv.height,e)}wp(t){if(null===this.Lv)return;const e=this._p(),i=this.lp(),n=this.Uv?"right":"left";e.forEach((e=>{e.Ai()&&e.gt(Tx(this.Li)).X(t,i,this.Nv,n)}))}gp(t){if(null===this.Lv||null===this.Li)return;const e=this.tn.Hv().$t(),i=[],n=this.tn.dp(),s=e.Yc().Rn(n,this.Li);s.length&&i.push(s);const r=this.lp(),o=this.Uv?"right":"left";i.forEach((e=>{e.forEach((e=>{e.gt(Tx(this.Li)).X(t,r,this.Nv,o)}))}))}Sp(t){this.Xv.style.cursor=1===t?"ns-resize":"default"}do(){const t=this.ap();this.Fv<t&&this.tn.Hv().$t().Xl(),this.Fv=t}op(){return Xx(this.So.fontSize,this.So.fontFamily)}}function NC(t,e){var i,n;return null!==(n=null===(i=t._a)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:[]}function IC(t,e){var i,n;return null!==(n=null===(i=t.Pn)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:[]}function LC(t,e){var i,n;return null!==(n=null===(i=t.Ji)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:[]}function zC(t,e){var i,n;return null!==(n=null===(i=t.la)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:[]}class RC{constructor(t,e){this.Lv=lx({width:0,height:0}),this.yp=null,this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=!1,this.Dp=new Ux,this.Vp=new Ux,this.Op=0,this.Bp=!1,this.Ap=null,this.Ip=!1,this.zp=null,this.Lp=null,this.Wv=!1,this.jv=()=>{this.Wv||null===this.Ep||this.$i().$h()},this.$v=()=>{this.Wv||null===this.Ep||this.$i().$h()},this.Jd=t,this.Ep=e,this.Ep.F_().l(this.Np.bind(this),this,!0),this.Fp=document.createElement("td"),this.Fp.style.padding="0",this.Fp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Fp.appendChild(i),this.Kv=gC(i,lx({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv);const n=this.Kv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Gv=gC(i,lx({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.$v);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Hp=document.createElement("tr"),this.Hp.appendChild(this.Wp),this.Hp.appendChild(this.Fp),this.Hp.appendChild(this.jp),this.$p(),this.rp=new xC(this.Gv.canvasElement,this,{sv:()=>null===this.Ap&&!this.Jd.W().handleScroll.vertTouchDrag,ev:()=>null===this.Ap&&!this.Jd.W().handleScroll.horzTouchDrag})}S(){null!==this.yp&&this.yp.S(),null!==this.Cp&&this.Cp.S(),this.Tp=null,this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.$v),yC(this.Gv.canvasElement),this.Gv.dispose(),this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),yC(this.Kv.canvasElement),this.Kv.dispose(),null!==this.Ep&&this.Ep.F_().p(this),this.rp.S()}dp(){return Tx(this.Ep)}Up(t){var e,i;null!==this.Ep&&this.Ep.F_().p(this),this.Ep=t,null!==this.Ep&&this.Ep.F_().l(RC.prototype.Np.bind(this),this,!0),this.$p(),this.Jd.qp().indexOf(this)===this.Jd.qp().length-1?(this.Tp=null!==(e=this.Tp)&&void 0!==e?e:new mC(this.Fp,this.Jd),this.Tp.bt()):(null===(i=this.Tp)||void 0===i||i.tf(),this.Tp=null)}Hv(){return this.Jd}hp(){return this.Hp}$p(){if(null!==this.Ep&&(this.Yp(),0!==this.$i().wt().length)){if(null!==this.yp){const t=this.Ep.P_();this.yp.Gi(Tx(t))}if(null!==this.Cp){const t=this.Ep.R_();this.Cp.Gi(Tx(t))}}}Zp(){null!==this.yp&&this.yp.bt(),null!==this.Cp&&this.Cp.bt()}g_(){return null!==this.Ep?this.Ep.g_():0}M_(t){this.Ep&&this.Ep.M_(t)}Jf(t){this.Ep&&(this.Xp(),this.Kp(t.localX,t.localY,t))}mv(t){this.Xp(),this.Gp(),this.Kp(t.localX,t.localY,t)}Qf(t){var e;if(!this.Ep)return;this.Xp();const i=t.localX,n=t.localY;this.Kp(i,n,t);const s=this.br(i,n);this.Jd.Jp(null!==(e=null==s?void 0:s.zv)&&void 0!==e?e:null),this.$i().Wc(s&&{jc:s.jc,Av:s.Av})}cv(t){null!==this.Ep&&(this.Xp(),this.Qp(t))}Uf(t){null!==this.Ep&&this.tm(this.Vp,t)}Wf(t){this.Uf(t)}lv(t){this.Xp(),this.im(t),this.Kp(t.localX,t.localY,t)}uv(t){null!==this.Ep&&(this.Xp(),this.Bp=!1,this.nm(t))}_v(t){null!==this.Ep&&this.Qp(t)}Pv(t){if(this.Bp=!0,null===this.Ap){const e={x:t.localX,y:t.localY};this.sm(e,e,t)}}Tv(t){null!==this.Ep&&(this.Xp(),this.Ep.$t().Wc(null),this.rm())}hm(){return this.Dp}lm(){return this.Vp}Mv(){this.Op=1,this.$i().Un()}xv(t,e){if(!this.Jd.W().handleScale.pinch)return;const i=5*(e-this.Op);this.Op=e,this.$i().Jc(t.nt,i)}vv(t){this.Bp=!1,this.Ip=null!==this.Ap,this.Gp();const e=this.$i().Yc();null!==this.Ap&&e.yt()&&(this.zp={x:e.Yt(),y:e.Zt()},this.Ap={x:t.localX,y:t.localY})}rv(t){if(null===this.Ep)return;const e=t.localX,i=t.localY;if(null===this.Ap)this.im(t);else{this.Ip=!1;const n=Tx(this.zp);this.Kp(n.x+(e-this.Ap.x),n.y+(i-this.Ap.y),t)}}ov(t){0===this.Hv().W().trackingMode.exitMode&&(this.Ip=!0),this.am(),this.nm(t)}br(t,e){const i=this.Ep;return null===i?null:(function(t,e,i){const n=t.$o(),s=(function(t,e,i){var n,s;let r,o;for(const c of t){const t=null!==(s=null===(n=c.fa)||void 0===n?void 0:n.call(c,e,i))&&void 0!==s?s:[];for(const e of t)a=e.zOrder,(!(l=null==r?void 0:r.zOrder)||"top"===a&&"top"!==l||"normal"===a&&"bottom"===l)&&(r=e,o=c)}var a,l;return r&&o?{Iv:r,jc:o}:null})(n,e,i);if("top"===(null==s?void 0:s.Iv.zOrder))return MC(s);for(const r of n){if(s&&s.jc===r&&"bottom"!==s.Iv.zOrder&&!s.Iv.isBackground)return MC(s);const n=_C(r.Pn(t),e,i);if(null!==n)return{jc:r,Ov:n.Ov,Av:n.Av};if(s&&s.jc===r&&"bottom"!==s.Iv.zOrder&&s.Iv.isBackground)return MC(s)}return(null==s?void 0:s.Iv)?MC(s):null})(i,t,e)}om(t,e){Tx("left"===e?this.yp:this.Cp).up(lx({width:t,height:this.Lv.height}))}_m(){return this.Lv}up(t){cx(this.Lv,t)||(this.Lv=t,this.Wv=!0,this.Kv.resizeCanvasElement(t),this.Gv.resizeCanvasElement(t),this.Wv=!1,this.Fp.style.width=t.width+"px",this.Fp.style.height=t.height+"px")}um(){const t=Tx(this.Ep);t.T_(t.P_()),t.T_(t.R_());for(const e of t.Oa())if(t.dr(e)){const i=e.Dt();null!==i&&t.T_(i),e.Vn()}}Mp(){return this.Kv.bitmapSize}xp(t,e,i){const n=this.Mp();n.width>0&&n.height>0&&t.drawImage(this.Kv.canvasElement,e,i)}fp(t){if(0===t)return;if(null===this.Ep)return;if(t>1&&this.um(),null!==this.yp&&this.yp.fp(t),null!==this.Cp&&this.Cp.fp(t),1!==t){this.Kv.applySuggestedBitmapSize();const t=px(this.Kv);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.pp(t)})),this.Ep&&(this.dm(t,NC),this.fm(t),this.vm(t),this.dm(t,IC),this.dm(t,LC)))}this.Gv.applySuggestedBitmapSize();const e=px(this.Gv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.pm(e),this.dm(e,zC))}bm(){return this.yp}wm(){return this.Cp}mp(t,e){this.dm(t,e)}Np(){null!==this.Ep&&this.Ep.F_().p(this),this.Ep=null}Qp(t){this.tm(this.Dp,t)}tm(t,e){const i=e.localX,n=e.localY;t.M()&&t.m(this.$i().St().Eu(i),{x:i,y:n},e)}pp({context:t,bitmapSize:e}){const{width:i,height:n}=e,s=this.$i(),r=s.q(),o=s.md();r===o?lS(t,0,0,i,n,o):uS(t,0,0,i,n,r,o)}fm(t){const e=Tx(this.Ep).W_().Uh().gt();null!==e&&e.X(t,!1)}vm(t){const e=this.$i().qc();this.gm(t,IC,vC,e),this.gm(t,IC,bC,e)}pm(t){this.gm(t,IC,bC,this.$i().Yc())}dm(t,e){const i=Tx(this.Ep).$o();for(const n of i)this.gm(t,e,vC,n);for(const n of i)this.gm(t,e,bC,n)}gm(t,e,i,n){const s=Tx(this.Ep),r=s.$t().Fc(),o=null!==r&&r.jc===n,a=null!==r&&o&&void 0!==r.Av?r.Av.gr:void 0;wC(e,(e=>i(e,t,o,a)),n,s)}Yp(){if(null===this.Ep)return;const t=this.Jd,e=this.Ep.P_().W().visible,i=this.Ep.R_().W().visible;e||null===this.yp||(this.Wp.removeChild(this.yp.hp()),this.yp.S(),this.yp=null),i||null===this.Cp||(this.jp.removeChild(this.Cp.hp()),this.Cp.S(),this.Cp=null);const n=t.$t()._d();e&&null===this.yp&&(this.yp=new OC(this,t.W(),n,"left"),this.Wp.appendChild(this.yp.hp())),i&&null===this.Cp&&(this.Cp=new OC(this,t.W(),n,"right"),this.jp.appendChild(this.Cp.hp()))}Mm(t){return t.Rv&&this.Bp||null!==this.Ap}xm(t){return Math.max(0,Math.min(t,this.Lv.width-1))}Sm(t){return Math.max(0,Math.min(t,this.Lv.height-1))}Kp(t,e,i){this.$i().hd(this.xm(t),this.Sm(e),i,Tx(this.Ep))}rm(){this.$i().ad()}am(){this.Ip&&(this.Ap=null,this.rm())}sm(t,e,i){this.Ap=t,this.Ip=!1,this.Kp(e.x,e.y,i);const n=this.$i().Yc();this.zp={x:n.Yt(),y:n.Zt()}}$i(){return this.Jd.$t()}nm(t){if(!this.Rp)return;const e=this.$i(),i=this.dp();if(e.I_(i,i.vn()),this.Pp=null,this.Rp=!1,e.sd(),null!==this.Lp){const t=performance.now(),i=e.St();this.Lp.Dr(i.ju(),t),this.Lp.Ju(t)||e.Zn(this.Lp)}}Xp(){this.Ap=null}Gp(){if(this.Ep){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Tx(document.activeElement).blur();else{const t=document.getSelection();null!==t&&t.removeAllRanges()}!this.Ep.vn().Ni()&&this.$i().St().Ni()}}im(t){if(null===this.Ep)return;const e=this.$i(),i=e.St();if(i.Ni())return;const n=this.Jd.W(),s=n.handleScroll,r=n.kineticScroll;if((!s.pressedMouseMove||t.Rv)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!t.Rv))return;const o=this.Ep.vn(),a=performance.now();if(null!==this.Pp||this.Mm(t)||(this.Pp={x:t.clientX,y:t.clientY,Vd:a,km:t.localX,ym:t.localY}),null!==this.Pp&&!this.Rp&&(this.Pp.x!==t.clientX||this.Pp.y!==t.clientY)){if(t.Rv&&r.touch||!t.Rv&&r.mouse){const t=i.he();this.Lp=new pC(.2/t,7/t,.997,15/t),this.Lp.qd(i.ju(),this.Pp.Vd)}else this.Lp=null;o.Ni()||e.B_(this.Ep,o,t.localY),e.td(t.localX),this.Rp=!0}this.Rp&&(o.Ni()||e.A_(this.Ep,o,t.localY),e.nd(t.localX),null!==this.Lp&&this.Lp.qd(i.ju(),a))}}class PC{constructor(t,e,i,n,s){this.ft=!0,this.Lv=lx({width:0,height:0}),this.jv=()=>this.fp(3),this.Uv="left"===t,this.Vc=i._d,this.cn=e,this.Cm=n,this.Tm=s,this.Xv=document.createElement("div"),this.Xv.style.width="25px",this.Xv.style.height="100%",this.Xv.style.overflow="hidden",this.Kv=gC(this.Xv,lx({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv)}S(){this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),yC(this.Kv.canvasElement),this.Kv.dispose()}hp(){return this.Xv}_m(){return this.Lv}up(t){cx(this.Lv,t)||(this.Lv=t,this.Kv.resizeCanvasElement(t),this.Xv.style.width=`${t.width}px`,this.Xv.style.height=`${t.height}px`,this.ft=!0)}fp(t){if(t<3&&!this.ft)return;if(0===this.Lv.width||0===this.Lv.height)return;this.ft=!1,this.Kv.applySuggestedBitmapSize();const e=px(this.Kv);null!==e&&e.useBitmapCoordinateSpace((t=>{this.pp(t),this.Ae(t)}))}Mp(){return this.Kv.bitmapSize}xp(t,e,i){const n=this.Mp();n.width>0&&n.height>0&&t.drawImage(this.Kv.canvasElement,e,i)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.Cm())return;t.fillStyle=this.cn.timeScale.borderColor;const s=Math.floor(this.Vc.W().C*i),r=Math.floor(this.Vc.W().C*n);t.fillRect(this.Uv?e.width-s:0,0,s,r)}pp({context:t,bitmapSize:e}){lS(t,0,0,e.width,e.height,this.Tm())}}function DC(t){return e=>{var i,n;return null!==(n=null===(i=e.da)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:[]}}const $C=DC("normal"),BC=DC("top"),UC=DC("bottom");class FC{constructor(t,e){this.Pm=null,this.Rm=null,this.k=null,this.Dm=!1,this.Lv=lx({width:0,height:0}),this.Vm=new Ux,this.Nv=new dk(5),this.Wv=!1,this.jv=()=>{this.Wv||this.Jd.$t().$h()},this.$v=()=>{this.Wv||this.Jd.$t().$h()},this.Jd=t,this.U_=e,this.cn=t.W().layout,this.Zd=document.createElement("tr"),this.Om=document.createElement("td"),this.Om.style.padding="0",this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Xv=document.createElement("td"),this.Xv.style.height="25px",this.Xv.style.padding="0",this.Am=document.createElement("div"),this.Am.style.width="100%",this.Am.style.height="100%",this.Am.style.position="relative",this.Am.style.overflow="hidden",this.Xv.appendChild(this.Am),this.Kv=gC(this.Am,lx({width:16,height:16})),this.Kv.subscribeSuggestedBitmapSizeChanged(this.jv);const i=this.Kv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gv=gC(this.Am,lx({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.$v);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Zd.appendChild(this.Om),this.Zd.appendChild(this.Xv),this.Zd.appendChild(this.Bm),this.Im(),this.Jd.$t().w_().l(this.Im.bind(this),this),this.rp=new xC(this.Gv.canvasElement,this,{sv:()=>!0,ev:()=>!this.Jd.W().handleScroll.horzTouchDrag})}S(){this.rp.S(),null!==this.Pm&&this.Pm.S(),null!==this.Rm&&this.Rm.S(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.$v),yC(this.Gv.canvasElement),this.Gv.dispose(),this.Kv.unsubscribeSuggestedBitmapSizeChanged(this.jv),yC(this.Kv.canvasElement),this.Kv.dispose()}hp(){return this.Zd}zm(){return this.Pm}Lm(){return this.Rm}mv(t){if(this.Dm)return;this.Dm=!0;const e=this.Jd.$t();!e.St().Ni()&&this.Jd.W().handleScale.axisPressedMouseMove.time&&e.Gc(t.localX)}vv(t){this.mv(t)}bv(){const t=this.Jd.$t();!t.St().Ni()&&this.Dm&&(this.Dm=!1,this.Jd.W().handleScale.axisPressedMouseMove.time&&t.rd())}lv(t){const e=this.Jd.$t();!e.St().Ni()&&this.Jd.W().handleScale.axisPressedMouseMove.time&&e.ed(t.localX)}rv(t){this.lv(t)}uv(){this.Dm=!1;const t=this.Jd.$t();t.St().Ni()&&!this.Jd.W().handleScale.axisPressedMouseMove.time||t.rd()}ov(){this.uv()}Uf(){this.Jd.W().handleScale.axisDoubleClickReset.time&&this.Jd.$t().Kn()}Wf(){this.Uf()}Jf(){this.Jd.$t().W().handleScale.axisPressedMouseMove.time&&this.Sp(1)}Tv(){this.Sp(0)}_m(){return this.Lv}Em(){return this.Vm}Nm(t,e,i){cx(this.Lv,t)||(this.Lv=t,this.Wv=!0,this.Kv.resizeCanvasElement(t),this.Gv.resizeCanvasElement(t),this.Wv=!1,this.Xv.style.width=`${t.width}px`,this.Xv.style.height=`${t.height}px`,this.Vm.m(t)),null!==this.Pm&&this.Pm.up(lx({width:e,height:t.height})),null!==this.Rm&&this.Rm.up(lx({width:i,height:t.height}))}Fm(){const t=this.Wm();return Math.ceil(t.C+t.T+t.P+t.L+t.B+t.jm)}bt(){this.Jd.$t().St().ja()}Mp(){return this.Kv.bitmapSize}xp(t,e,i){const n=this.Mp();n.width>0&&n.height>0&&t.drawImage(this.Kv.canvasElement,e,i)}fp(t){if(0===t)return;if(1!==t){this.Kv.applySuggestedBitmapSize();const e=px(this.Kv);null!==e&&(e.useBitmapCoordinateSpace((t=>{this.pp(t),this.Ae(t),this.Hm(e,UC)})),this.bp(e),this.Hm(e,$C)),null!==this.Pm&&this.Pm.fp(t),null!==this.Rm&&this.Rm.fp(t)}this.Gv.applySuggestedBitmapSize();const e=px(this.Gv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.$m([...this.Jd.$t().wt(),this.Jd.$t().Yc()],e),this.Hm(e,BC))}Hm(t,e){const i=this.Jd.$t().wt();for(const n of i)wC(e,(e=>vC(e,t,!1,void 0)),n,void 0);for(const n of i)wC(e,(e=>bC(e,t,!1,void 0)),n,void 0)}pp({context:t,bitmapSize:e}){lS(t,0,0,e.width,e.height,this.Jd.$t().md())}Ae({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Jd.W().timeScale.borderVisible){t.fillStyle=this.Um();const n=Math.max(1,Math.floor(this.Wm().C*i));t.fillRect(0,0,e.width,n)}}bp(t){const e=this.Jd.$t().St(),i=e.ja();if(!i||0===i.length)return;const n=this.U_.maxTickMarkWeight(i),s=this.Wm(),r=e.W();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:e,verticalPixelRatio:n})=>{t.strokeStyle=this.Um(),t.fillStyle=this.Um();const r=Math.max(1,Math.floor(e)),o=Math.floor(.5*e);t.beginPath();const a=Math.round(s.T*n);for(let s=i.length;s--;){const n=Math.round(i[s].coord*e);t.rect(n-o,0,r,a)}t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{const e=s.C+s.T+s.L+s.P/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.$(),t.font=this.op();for(const s of i)if(s.weight<n){const i=s.needAlignCoordinate?this.qm(t,s.coord,s.label):s.coord;t.fillText(s.label,i,e)}this.Jd.W().timeScale.allowBoldLabels&&(t.font=this.Ym());for(const s of i)if(s.weight>=n){const i=s.needAlignCoordinate?this.qm(t,s.coord,s.label):s.coord;t.fillText(s.label,i,e)}}))}qm(t,e,i){const n=this.Nv.xi(t,i),s=Math.floor(e-n/2)+.5;return s<0?e+=Math.abs(0-s):s+n>this.Lv.width&&(e-=Math.abs(this.Lv.width-(s+n))),e}$m(t,e){const i=this.Wm();for(const n of t)for(const t of n.Qi())t.gt().X(e,i)}Um(){return this.Jd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}op(){return Xx(this.j(),this.cn.fontFamily)}Ym(){return Xx(this.j(),this.cn.fontFamily,"bold")}Wm(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new dk,jm:0});const t=this.k,e=this.op();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.B=3*i/12,t.ji=9*i/12,t.N=0,t.jm=4*i/12,t.Wi.ir()}return this.k}Sp(t){this.Xv.style.cursor=1===t?"ew-resize":"default"}Im(){const t=this.Jd.$t(),e=t.W();e.leftPriceScale.visible||null===this.Pm||(this.Om.removeChild(this.Pm.hp()),this.Pm.S(),this.Pm=null),e.rightPriceScale.visible||null===this.Rm||(this.Bm.removeChild(this.Rm.hp()),this.Rm.S(),this.Rm=null);const i={_d:this.Jd.$t()._d()},n=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,s=()=>t.md();e.leftPriceScale.visible&&null===this.Pm&&(this.Pm=new PC("left",e,i,n,s),this.Om.appendChild(this.Pm.hp())),e.rightPriceScale.visible&&null===this.Rm&&(this.Rm=new PC("right",e,i,n,s),this.Bm.appendChild(this.Rm.hp()))}}const WC=!!lC&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((t=>t.brand.includes("Chromium")))&&!!lC&&((null===(VC=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===VC?void 0:VC.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);var VC;class qC{constructor(t,e,i){var n;this.Zm=[],this.Xm=0,this.ro=0,this.o_=0,this.Km=0,this.Gm=0,this.Jm=null,this.Qm=!1,this.Dp=new Ux,this.Vp=new Ux,this.Pc=new Ux,this.tb=null,this.ib=null,this.Gd=t,this.cn=e,this.U_=i,this.Zd=document.createElement("div"),this.Zd.classList.add("tv-lightweight-charts"),this.Zd.style.overflow="hidden",this.Zd.style.direction="ltr",this.Zd.style.width="100%",this.Zd.style.height="100%",(n=this.Zd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.nb=document.createElement("table"),this.nb.setAttribute("cellspacing","0"),this.Zd.appendChild(this.nb),this.sb=this.eb.bind(this),HC(this.cn)&&this.rb(!0),this.$i=new qj(this.Dc.bind(this),this.cn,i),this.$t().Zc().l(this.hb.bind(this),this),this.lb=new FC(this,this.U_),this.nb.appendChild(this.lb.hp());const s=e.autoSize&&this.ab();let r=this.cn.width,o=this.cn.height;if(s||0===r||0===o){const e=t.getBoundingClientRect();r=r||e.width,o=o||e.height}this.ob(r,o),this._b(),t.appendChild(this.Zd),this.ub(),this.$i.St().sc().l(this.$i.Xl.bind(this.$i),this),this.$i.w_().l(this.$i.Xl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}qp(){return this.Zm}cb(){return this.lb}S(){this.rb(!1),0!==this.Xm&&window.cancelAnimationFrame(this.Xm),this.$i.Zc().p(this),this.$i.St().sc().p(this),this.$i.w_().p(this),this.$i.S();for(const t of this.Zm)this.nb.removeChild(t.hp()),t.hm().p(this),t.lm().p(this),t.S();this.Zm=[],Tx(this.lb).S(),null!==this.Zd.parentElement&&this.Zd.parentElement.removeChild(this.Zd),this.Pc.S(),this.Dp.S(),this.Vp.S(),this.fb()}ob(t,e,i=!1){if(this.ro===e&&this.o_===t)return;const n=(function(t){const e=Math.floor(t.width),i=Math.floor(t.height);return lx({width:e-e%2,height:i-i%2})})(lx({width:t,height:e}));this.ro=n.height,this.o_=n.width;const s=this.ro+"px",r=this.o_+"px";Tx(this.Zd).style.height=s,Tx(this.Zd).style.width=r,this.nb.style.height=s,this.nb.style.width=r,i?this.pb(SS.es(),performance.now()):this.$i.Xl()}fp(t){void 0===t&&(t=SS.es());for(let e=0;e<this.Zm.length;e++)this.Zm[e].fp(t.Hn(e).Fn);this.cn.timeScale.visible&&this.lb.fp(t.jn())}Hh(t){const e=HC(this.cn);this.$i.Hh(t);const i=HC(this.cn);i!==e&&this.rb(i),this.ub(),this.mb(t)}hm(){return this.Dp}lm(){return this.Vp}Zc(){return this.Pc}bb(){null!==this.Jm&&(this.pb(this.Jm,performance.now()),this.Jm=null);const t=this.wb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=Tx(e.getContext("2d"));return this.wb(i),e}gb(t){return"left"===t&&!this.Mb()||"right"===t&&!this.xb()||0===this.Zm.length?0:Tx("left"===t?this.Zm[0].bm():this.Zm[0].wm()).cp()}Sb(){return this.cn.autoSize&&null!==this.tb}kb(){return this.Zd}Jp(t){this.ib=t,this.ib?this.kb().style.setProperty("cursor",t):this.kb().style.removeProperty("cursor")}yb(){return this.ib}Cb(){return _x(this.Zm[0])._m()}mb(t){(void 0!==t.autoSize||!this.tb||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.tb&&this.ab(),!1===t.autoSize&&null!==this.tb&&this.fb(),t.autoSize||void 0===t.width&&void 0===t.height||this.ob(t.width||this.o_,t.height||this.ro))}wb(t){let e=0,i=0;const n=this.Zm[0],s=(e,i)=>{let n=0;for(let s=0;s<this.Zm.length;s++){const r=this.Zm[s],o=Tx("left"===e?r.bm():r.wm()),a=o.Mp();null!==t&&o.xp(t,i,n),n+=a.height}};this.Mb()&&(s("left",0),e+=Tx(n.bm()).Mp().width);for(let o=0;o<this.Zm.length;o++){const n=this.Zm[o],s=n.Mp();null!==t&&n.xp(t,e,i),i+=s.height}e+=n.Mp().width,this.xb()&&(s("right",e),e+=Tx(n.wm()).Mp().width);const r=(e,i,n)=>{Tx("left"===e?this.lb.zm():this.lb.Lm()).xp(Tx(t),i,n)};if(this.cn.timeScale.visible){const e=this.lb.Mp();if(null!==t){let s=0;this.Mb()&&(r("left",s,i),s=Tx(n.bm()).Mp().width),this.lb.xp(t,s,i),s+=e.width,this.xb()&&r("right",s,i)}i+=e.height}return lx({width:e,height:i})}Tb(){let t=0,e=0,i=0;for(const d of this.Zm)this.Mb()&&(e=Math.max(e,Tx(d.bm()).ap(),this.cn.leftPriceScale.minimumWidth)),this.xb()&&(i=Math.max(i,Tx(d.wm()).ap(),this.cn.rightPriceScale.minimumWidth)),t+=d.g_();e=uC(e),i=uC(i);const n=this.ro,s=Math.max(this.o_-e-i,0),r=this.cn.timeScale.visible;let o=r?Math.max(this.lb.Fm(),this.cn.timeScale.minimumHeight):0;var a;o=(a=o)+a%2;const l=0+o,c=n<l?0:n-l,h=c/t;let u=0;for(let d=0;d<this.Zm.length;++d){const t=this.Zm[d];t.Up(this.$i.Uc()[d]);let n=0,r=0;r=d===this.Zm.length-1?c-u:Math.round(t.g_()*h),n=Math.max(r,2),u+=n,t.up(lx({width:s,height:n})),this.Mb()&&t.om(e,"left"),this.xb()&&t.om(i,"right"),t.dp()&&this.$i.Xc(t.dp(),n)}this.lb.Nm(lx({width:r?s:0,height:o}),r?e:0,r?i:0),this.$i.x_(s),this.Km!==e&&(this.Km=e),this.Gm!==i&&(this.Gm=i)}rb(t){t?this.Zd.addEventListener("wheel",this.sb,{passive:!1}):this.Zd.removeEventListener("wheel",this.sb)}Pb(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return WC?1/window.devicePixelRatio:1}eb(t){if(!(0!==t.deltaX&&this.cn.handleScroll.mouseWheel||0!==t.deltaY&&this.cn.handleScale.mouseWheel))return;const e=this.Pb(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==n&&this.cn.handleScale.mouseWheel){const e=Math.sign(n)*Math.min(1,Math.abs(n)),i=t.clientX-this.Zd.getBoundingClientRect().left;this.$t().Jc(i,e)}0!==i&&this.cn.handleScroll.mouseWheel&&this.$t().Qc(-80*i)}pb(t,e){var i;const n=t.jn();3===n&&this.Rb(),3!==n&&2!==n||(this.Db(t),this.Vb(t,e),this.lb.bt(),this.Zm.forEach((t=>{t.Zp()})),3===(null===(i=this.Jm)||void 0===i?void 0:i.jn())&&(this.Jm.ts(t),this.Rb(),this.Db(this.Jm),this.Vb(this.Jm,e),t=this.Jm,this.Jm=null)),this.fp(t)}Vb(t,e){for(const i of t.Qn())this.ns(i,e)}Db(t){const e=this.$i.Uc();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].E_()}ns(t,e){const i=this.$i.St();switch(t.qn){case 0:i.rc();break;case 1:i.hc(t.Vt);break;case 2:i.Gn(t.Vt);break;case 3:i.Jn(t.Vt);break;case 4:i.Uu();break;case 5:t.Vt.Ju(e)||i.Jn(t.Vt.Qu(e))}}Dc(t){null!==this.Jm?this.Jm.ts(t):this.Jm=t,this.Qm||(this.Qm=!0,this.Xm=window.requestAnimationFrame((t=>{if(this.Qm=!1,this.Xm=0,null!==this.Jm){const e=this.Jm;this.Jm=null,this.pb(e,t);for(const i of e.Qn())if(5===i.qn&&!i.Vt.Ju(t)){this.$t().Zn(i.Vt);break}}})))}Rb(){this._b()}_b(){const t=this.$i.Uc(),e=t.length,i=this.Zm.length;for(let n=e;n<i;n++){const t=_x(this.Zm.pop());this.nb.removeChild(t.hp()),t.hm().p(this),t.lm().p(this),t.S()}for(let n=i;n<e;n++){const e=new RC(this,t[n]);e.hm().l(this.Ob.bind(this),this),e.lm().l(this.Bb.bind(this),this),this.Zm.push(e),this.nb.insertBefore(e.hp(),this.lb.hp())}for(let n=0;n<e;n++){const e=t[n],i=this.Zm[n];i.dp()!==e?i.Up(e):i.$p()}this.ub(),this.Tb()}Ab(t,e,i){var n;const s=new Map;let r;if(null!==t&&this.$i.wt().forEach((e=>{const i=e.In().hl(t);null!==i&&s.set(e,i)})),null!==t){const e=null===(n=this.$i.St().Ui(t))||void 0===n?void 0:n.originalTime;void 0!==e&&(r=e)}const o=this.$t().Fc();return{Ib:r,se:null!=t?t:void 0,zb:null!=e?e:void 0,Lb:null!==o&&o.jc instanceof oj?o.jc:void 0,Eb:s,Nb:null!==o&&void 0!==o.Av?o.Av.wr:void 0,Fb:null!=i?i:void 0}}Ob(t,e,i){this.Dp.m((()=>this.Ab(t,e,i)))}Bb(t,e,i){this.Vp.m((()=>this.Ab(t,e,i)))}hb(t,e,i){this.Pc.m((()=>this.Ab(t,e,i)))}ub(){const t=this.cn.timeScale.visible?"":"none";this.lb.hp().style.display=t}Mb(){return this.Zm[0].dp().P_().W().visible}xb(){return this.Zm[0].dp().R_().W().visible}ab(){return"ResizeObserver"in window&&(this.tb=new ResizeObserver((t=>{const e=t.find((t=>t.target===this.Gd));e&&this.ob(e.contentRect.width,e.contentRect.height)})),this.tb.observe(this.Gd,{box:"border-box"}),!0)}fb(){null!==this.tb&&this.tb.disconnect(),this.tb=null}}function HC(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function KC(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i}function GC(t,e,i,n){const s=i.value,r={se:e,ot:t,Vt:[s,s,s,s],Ib:n};return void 0!==i.color&&(r.V=i.color),r}function ZC(t,e,i,n){const s=i.value,r={se:e,ot:t,Vt:[s,s,s,s],Ib:n};return void 0!==i.lineColor&&(r.lt=i.lineColor),void 0!==i.topColor&&(r.Ts=i.topColor),void 0!==i.bottomColor&&(r.Ps=i.bottomColor),r}function YC(t,e,i,n){const s=i.value,r={se:e,ot:t,Vt:[s,s,s,s],Ib:n};return void 0!==i.topLineColor&&(r.Pe=i.topLineColor),void 0!==i.bottomLineColor&&(r.Re=i.bottomLineColor),void 0!==i.topFillColor1&&(r.Se=i.topFillColor1),void 0!==i.topFillColor2&&(r.ke=i.topFillColor2),void 0!==i.bottomFillColor1&&(r.ye=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(r.Ce=i.bottomFillColor2),r}function XC(t,e,i,n){const s={se:e,ot:t,Vt:[i.open,i.high,i.low,i.close],Ib:n};return void 0!==i.color&&(s.V=i.color),s}function QC(t,e,i,n){const s={se:e,ot:t,Vt:[i.open,i.high,i.low,i.close],Ib:n};return void 0!==i.color&&(s.V=i.color),void 0!==i.borderColor&&(s.Ot=i.borderColor),void 0!==i.wickColor&&(s.Zh=i.wickColor),s}function JC(t,e,i,n,s){const r=_x(s)(i),o=Math.max(...r),a=Math.min(...r),l=r[r.length-1],c=[l,o,a,l],h=i,{color:u}=h;return{se:e,ot:t,Vt:c,Ib:n,He:KC(h,["time","color"]),V:u}}function tE(t){return void 0!==t.Vt}function eE(t,e){return void 0!==e.customValues&&(t.Wb=e.customValues),t}function iE(t){return(e,i,n,s,r,o)=>(function(t,e){return e?e(t):void 0===(i=t).open&&void 0===i.value;var i})(n,o)?eE({ot:e,se:i,Ib:s},n):eE(t(e,i,n,s,r),n)}function nE(t){return{Candlestick:iE(QC),Bar:iE(XC),Area:iE(ZC),Baseline:iE(YC),Histogram:iE(GC),Line:iE(GC),Custom:iE(JC)}[t]}function sE(t){return{se:0,jb:new Map,ha:t}}function rE(t,e){if(void 0!==t&&0!==t.length)return{Hb:e.key(t[0].ot),$b:e.key(t[t.length-1].ot)}}function oE(t){let e;return t.forEach((t=>{void 0===e&&(e=t.Ib)})),_x(e)}class aE{constructor(t){this.Ub=new Map,this.qb=new Map,this.Yb=new Map,this.Zb=[],this.U_=t}S(){this.Ub.clear(),this.qb.clear(),this.Yb.clear(),this.Zb=[]}Xb(t,e){let i=0!==this.Ub.size,n=!1;const s=this.qb.get(t);if(void 0!==s)if(1===this.qb.size)i=!1,n=!0,this.Ub.clear();else for(const a of this.Zb)a.pointData.jb.delete(t)&&(n=!0);let r=[];if(0!==e.length){const i=e.map((t=>t.time)),s=this.U_.createConverterToInternalObj(e),o=nE(t.Jh()),a=t.ya(),l=t.Ca();r=e.map(((e,r)=>{const c=s(e.time),h=this.U_.key(c);let u=this.Ub.get(h);void 0===u&&(u=sE(c),this.Ub.set(h,u),n=!0);const d=o(c,u.se,e,i[r],a,l);return u.jb.set(t,d),d}))}i&&this.Kb(),this.Gb(t,r);let o=-1;if(n){const t=[];this.Ub.forEach((e=>{t.push({timeWeight:0,time:e.ha,pointData:e,originalTime:oE(e.jb)})})),t.sort(((t,e)=>this.U_.key(t.time)-this.U_.key(e.time))),o=this.Jb(t)}return this.Qb(t,o,(function(t,e,i){const n=rE(t,i),s=rE(e,i);if(void 0!==n&&void 0!==s)return{Ql:n.$b>=s.$b&&n.Hb>=s.Hb}})(this.qb.get(t),s,this.U_))}fd(t){return this.Xb(t,[])}tw(t,e){const i=e;!(function(t){void 0===t.Ib&&(t.Ib=t.time)})(i),this.U_.preprocessData(e);const n=this.U_.createConverterToInternalObj([e])(e.time),s=this.Yb.get(t);if(void 0!==s&&this.U_.key(n)<this.U_.key(s))throw new Error(`Cannot update oldest data, last time=${s}, new time=${n}`);let r=this.Ub.get(this.U_.key(n));const o=void 0===r;void 0===r&&(r=sE(n),this.Ub.set(this.U_.key(n),r));const a=nE(t.Jh()),l=t.ya(),c=t.Ca(),h=a(n,r.se,e,i.Ib,l,c);r.jb.set(t,h),this.iw(t,h);const u={Ql:tE(h)};if(!o)return this.Qb(t,-1,u);const d={timeWeight:0,time:r.ha,pointData:r,originalTime:oE(r.jb)},f=WS(this.Zb,this.U_.key(d.time),((t,e)=>this.U_.key(t.time)<e));this.Zb.splice(f,0,d);for(let p=f;p<this.Zb.length;++p)lE(this.Zb[p].pointData,p);return this.U_.fillWeightsForPoints(this.Zb,f),this.Qb(t,f,u)}iw(t,e){let i=this.qb.get(t);void 0===i&&(i=[],this.qb.set(t,i));const n=0!==i.length?i[i.length-1]:null;null===n||this.U_.key(e.ot)>this.U_.key(n.ot)?tE(e)&&i.push(e):tE(e)?i[i.length-1]=e:i.splice(-1,1),this.Yb.set(t,e.ot)}Gb(t,e){0!==e.length?(this.qb.set(t,e.filter(tE)),this.Yb.set(t,e[e.length-1].ot)):(this.qb.delete(t),this.Yb.delete(t))}Kb(){for(const t of this.Zb)0===t.pointData.jb.size&&this.Ub.delete(this.U_.key(t.time))}Jb(t){let e=-1;for(let i=0;i<this.Zb.length&&i<t.length;++i){const n=this.Zb[i],s=t[i];if(this.U_.key(n.time)!==this.U_.key(s.time)){e=i;break}s.timeWeight=n.timeWeight,lE(s.pointData,i)}if(-1===e&&this.Zb.length!==t.length&&(e=Math.min(this.Zb.length,t.length)),-1===e)return-1;for(let i=e;i<t.length;++i)lE(t[i].pointData,i);return this.U_.fillWeightsForPoints(t,e),this.Zb=t,e}nw(){if(0===this.qb.size)return null;let t=0;return this.qb.forEach((e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].se))})),t}Qb(t,e,i){const n={sw:new Map,St:{Lu:this.nw()}};if(-1!==e)this.qb.forEach(((e,s)=>{n.sw.set(s,{He:e,ew:s===t?i:void 0})})),this.qb.has(t)||n.sw.set(t,{He:[],ew:i}),n.St.rw=this.Zb,n.St.hw=e;else{const e=this.qb.get(t);n.sw.set(t,{He:e||[],ew:i})}return n}}function lE(t,e){t.se=e,t.jb.forEach((t=>{t.se=e}))}function cE(t){const e={value:t.Vt[3],time:t.Ib};return void 0!==t.Wb&&(e.customValues=t.Wb),e}function hE(t){const e=cE(t);return void 0!==t.V&&(e.color=t.V),e}function uE(t){const e=cE(t);return void 0!==t.lt&&(e.lineColor=t.lt),void 0!==t.Ts&&(e.topColor=t.Ts),void 0!==t.Ps&&(e.bottomColor=t.Ps),e}function dE(t){const e=cE(t);return void 0!==t.Pe&&(e.topLineColor=t.Pe),void 0!==t.Re&&(e.bottomLineColor=t.Re),void 0!==t.Se&&(e.topFillColor1=t.Se),void 0!==t.ke&&(e.topFillColor2=t.ke),void 0!==t.ye&&(e.bottomFillColor1=t.ye),void 0!==t.Ce&&(e.bottomFillColor2=t.Ce),e}function fE(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.Ib};return void 0!==t.Wb&&(e.customValues=t.Wb),e}function pE(t){const e=fE(t);return void 0!==t.V&&(e.color=t.V),e}function mE(t){const e=fE(t),{V:i,Ot:n,Zh:s}=t;return void 0!==i&&(e.color=i),void 0!==n&&(e.borderColor=n),void 0!==s&&(e.wickColor=s),e}function gE(t){return{Area:uE,Line:hE,Baseline:dE,Histogram:hE,Bar:pE,Candlestick:mE,Custom:yE}[t]}function yE(t){const e=t.Ib;return Object.assign(Object.assign({},t.He),{time:e})}const vE={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},bE={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},wE={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Yx,attributionLogo:!0},xE={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},SE={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},kE={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Yx,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function jE(){return{width:0,height:0,autoSize:!1,layout:wE,crosshair:vE,grid:bE,overlayPriceScales:Object.assign({},xE),leftPriceScale:Object.assign(Object.assign({},xE),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},xE),{visible:!0}),timeScale:SE,watermark:kE,localization:{locale:lC?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class CE{constructor(t,e){this.lw=t,this.aw=e}applyOptions(t){this.lw.$t().Hc(this.aw,t)}options(){return this.Li().W()}width(){return xS(this.aw)?this.lw.gb(this.aw):0}Li(){return Tx(this.lw.$t().$c(this.aw)).Dt}}function EE(t,e,i){const n=KC(t,["time","originalTime"]),s=Object.assign({time:e},n);return void 0!==i&&(s.originalTime=i),s}const ME={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class _E{constructor(t){this.Eh=t}applyOptions(t){this.Eh.Hh(t)}options(){return this.Eh.W()}ow(){return this.Eh}}class TE{constructor(t,e,i,n,s){this._w=new Ux,this.Ls=t,this.uw=e,this.cw=i,this.U_=s,this.dw=n}S(){this._w.S()}priceFormatter(){return this.Ls.ma()}priceToCoordinate(t){const e=this.Ls.Ct();return null===e?null:this.Ls.Dt().Rt(t,e.Vt)}coordinateToPrice(t){const e=this.Ls.Ct();return null===e?null:this.Ls.Dt().pn(t,e.Vt)}barsInLogicalRange(t){if(null===t)return null;const e=new Ij(new Aj(t.from,t.to)).hu(),i=this.Ls.In();if(i.Ni())return null;const n=i.hl(e.Vs(),1),s=i.hl(e.ui(),-1),r=Tx(i.sl()),o=Tx(i.An());if(null!==n&&null!==s&&n.se>s.se)return{barsBefore:t.from-r,barsAfter:o-t.to};const a={barsBefore:null===n||n.se===r?t.from-r:n.se-r,barsAfter:null===s||s.se===o?o-t.to:o-s.se};return null!==n&&null!==s&&(a.from=n.Ib,a.to=s.Ib),a}setData(t){this.Ls.Jh(),this.uw.fw(this.Ls,t),this.pw("full")}update(t){this.Ls.Jh(),this.uw.mw(this.Ls,t),this.pw("update")}dataByIndex(t,e){const i=this.Ls.In().hl(t,e);return null===i?null:gE(this.seriesType())(i)}data(){const t=gE(this.seriesType());return this.Ls.In().ie().map((e=>t(e)))}subscribeDataChanged(t){this._w.l(t)}unsubscribeDataChanged(t){this._w.v(t)}setMarkers(t){const e=t.map((t=>EE(t,this.U_.convertHorzItemToInternal(t.time),t.time)));this.Ls.ia(e)}markers(){return this.Ls.na().map((t=>EE(t,t.originalTime,void 0)))}applyOptions(t){this.Ls.Hh(t)}options(){return Kx(this.Ls.W())}priceScale(){return this.cw.priceScale(this.Ls.Dt().Ta())}createPriceLine(t){const e=Fx(Kx(ME),t),i=this.Ls.sa(e);return new _E(i)}removePriceLine(t){this.Ls.ea(t.ow())}seriesType(){return this.Ls.Jh()}attachPrimitive(t){this.Ls.Sa(t),t.attached&&t.attached({chart:this.dw,series:this,requestUpdate:()=>this.Ls.$t().Xl()})}detachPrimitive(t){this.Ls.ka(t),t.detached&&t.detached()}pw(t){this._w.M()&&this._w.m(t)}}class AE{constructor(t,e,i){this.bw=new Ux,this.pu=new Ux,this.Vm=new Ux,this.$i=t,this.kl=t.St(),this.lb=e,this.kl.tc().l(this.ww.bind(this)),this.kl.nc().l(this.gw.bind(this)),this.lb.Em().l(this.Mw.bind(this)),this.U_=i}S(){this.kl.tc().p(this),this.kl.nc().p(this),this.lb.Em().p(this),this.bw.S(),this.pu.S(),this.Vm.S()}scrollPosition(){return this.kl.ju()}scrollToPosition(t,e){e?this.kl.Gu(t,1e3):this.$i.Jn(t)}scrollToRealTime(){this.kl.Ku()}getVisibleRange(){const t=this.kl.Du();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.U_.convertHorzItemToInternal(t.from),to:this.U_.convertHorzItemToInternal(t.to)},i=this.kl.Au(e);this.$i.vd(i)}getVisibleLogicalRange(){const t=this.kl.Ru();return null===t?null:{from:t.Vs(),to:t.ui()}}setVisibleLogicalRange(t){Mx(t.from<=t.to,"The from index cannot be after the to index."),this.$i.vd(t)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.rc()}logicalToCoordinate(t){const e=this.$i.St();return e.Ni()?null:e.It(t)}coordinateToLogical(t){return this.kl.Ni()?null:this.kl.Eu(t)}timeToCoordinate(t){const e=this.U_.convertHorzItemToInternal(t),i=this.kl.Da(e,!1);return null===i?null:this.kl.It(i)}coordinateToTime(t){const e=this.$i.St(),i=e.Eu(t),n=e.Ui(i);return null===n?null:n.originalTime}width(){return this.lb._m().width}height(){return this.lb._m().height}subscribeVisibleTimeRangeChange(t){this.bw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.bw.v(t)}subscribeVisibleLogicalRangeChange(t){this.pu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.pu.v(t)}subscribeSizeChange(t){this.Vm.l(t)}unsubscribeSizeChange(t){this.Vm.v(t)}applyOptions(t){this.kl.Hh(t)}options(){return Object.assign(Object.assign({},Kx(this.kl.W())),{barSpacing:this.kl.he()})}ww(){this.bw.M()&&this.bw.m(this.getVisibleRange())}gw(){this.pu.M()&&this.pu.m(this.getVisibleLogicalRange())}Mw(t){this.Vm.m(t.width,t.height)}}function OE(t){return(function(t){if(Hx(t.handleScale)){const e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){const{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;Hx(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),Hx(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}const e=t.handleScroll;Hx(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(t),t}class NE{constructor(t,e,i){this.xw=new Map,this.Sw=new Map,this.kw=new Ux,this.yw=new Ux,this.Cw=new Ux,this.Tw=new aE(e);const n=void 0===i?Kx(jE()):Fx(Kx(jE()),OE(i));this.U_=e,this.lw=new qC(t,n,e),this.lw.hm().l((t=>{this.kw.M()&&this.kw.m(this.Pw(t()))}),this),this.lw.lm().l((t=>{this.yw.M()&&this.yw.m(this.Pw(t()))}),this),this.lw.Zc().l((t=>{this.Cw.M()&&this.Cw.m(this.Pw(t()))}),this);const s=this.lw.$t();this.Rw=new AE(s,this.lw.cb(),this.U_)}remove(){this.lw.hm().p(this),this.lw.lm().p(this),this.lw.Zc().p(this),this.Rw.S(),this.lw.S(),this.xw.clear(),this.Sw.clear(),this.kw.S(),this.yw.S(),this.Cw.S(),this.Tw.S()}resize(t,e,i){this.autoSizeActive()||this.lw.ob(t,e,i)}addCustomSeries(t,e){const i=Ax(t),n=Object.assign(Object.assign({},xx),i.defaultOptions());return this.Dw("Custom",n,e,i)}addAreaSeries(t){return this.Dw("Area",vx,t)}addBaselineSeries(t){return this.Dw("Baseline",bx,t)}addBarSeries(t){return this.Dw("Bar",gx,t)}addCandlestickSeries(t={}){return(function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)})(t),this.Dw("Candlestick",mx,t)}addHistogramSeries(t){return this.Dw("Histogram",wx,t)}addLineSeries(t){return this.Dw("Line",yx,t)}removeSeries(t){const e=_x(this.xw.get(t)),i=this.Tw.fd(e);this.lw.$t().fd(e),this.Vw(i),this.xw.delete(t),this.Sw.delete(e)}fw(t,e){this.Vw(this.Tw.Xb(t,e))}mw(t,e){this.Vw(this.Tw.tw(t,e))}subscribeClick(t){this.kw.l(t)}unsubscribeClick(t){this.kw.v(t)}subscribeCrosshairMove(t){this.Cw.l(t)}unsubscribeCrosshairMove(t){this.Cw.v(t)}subscribeDblClick(t){this.yw.l(t)}unsubscribeDblClick(t){this.yw.v(t)}priceScale(t){return new CE(this.lw,t)}timeScale(){return this.Rw}applyOptions(t){this.lw.Hh(OE(t))}options(){return this.lw.W()}takeScreenshot(){return this.lw.bb()}autoSizeActive(){return this.lw.Sb()}chartElement(){return this.lw.kb()}paneSize(){const t=this.lw.Cb();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const n=this.xw.get(i);if(void 0===n)return;const s=this.lw.$t().cr(n);null!==s&&this.lw.$t().ld(t,e,s)}clearCrosshairPosition(){this.lw.$t().ad(!0)}Dw(t,e,i={},n){!(function(t){void 0!==t&&"custom"!==t.type&&void 0!==t.minMove&&void 0===t.precision&&(t.precision=(function(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return e;t*=10}return e})(t.minMove))})(i.priceFormat);const s=Fx(Kx(Sx),Kx(e),i),r=this.lw.$t().ud(t,s,n),o=new TE(r,this,this,this,this.U_);return this.xw.set(o,r),this.Sw.set(r,o),o}Vw(t){const e=this.lw.$t();e.od(t.St.Lu,t.St.rw,t.St.hw),t.sw.forEach(((t,e)=>e.J(t.He,t.ew))),e.Fu()}Ow(t){return _x(this.Sw.get(t))}Pw(t){const e=new Map;t.Eb.forEach(((t,i)=>{const n=i.Jh(),s=gE(n)(t);if("Custom"!==n)Mx((function(t){return(function(t){return void 0!==t.open})(t)||(function(t){return void 0!==t.value})(t)})(s));else{const t=i.Ca();Mx(!t||!1===t(s))}e.set(this.Ow(i),s)}));const i=void 0!==t.Lb&&this.Sw.has(t.Lb)?this.Ow(t.Lb):void 0;return{time:t.Ib,logical:t.se,point:t.zb,hoveredSeries:i,hoveredObjectId:t.Nb,seriesData:e,sourceEvent:t.Fb}}}Object.assign(Object.assign({},Sx),xx);const IE=({selectedRange:e,onRangeSelect:i})=>t.jsx("div",{className:"flex justify-end",children:t.jsx("div",{className:"inline-flex bg-gray-900 rounded-full p-1 border border-gray-800",children:["1H","4H","1D","MAX"].map((n=>t.jsx("button",{onClick:()=>i(n),className:`\n              px-3 py-1 text-sm font-medium rounded-full transition-colors duration-200\n              ${e===n?"bg-black text-gray-100":"text-gray-400 hover:text-gray-200"}\n            `,children:n},n)))})}),LE=({twaps:e,twap_threshold:i,outcomeMessages:n,colors:s,asset_decimals:r,stable_decimals:o})=>{const a=n.length,l=t=>null===t?"N/A":0===t?"0.0000":(t/(1e4*Math.pow(10,r-o)*1e8)).toFixed(5);let c=[];c=s&&s.length===a?s:1===a?["#ef4444"]:2===a?["#ef4444","#22c55e"]:Array.from({length:a},((t,e)=>`hsl(${e*(360/a)%360}, 100%, 50%)`));const h=n.map(((t,i)=>{const n=e&&e[i]?parseFloat(e[i]):null;return{index:i,message:t,twap:null===n||isNaN(n)?null:n,color:c[i]}})),u=t=>null===t.twap?-1/0:0===t.index?t.twap*((1e5+Number(i))/1e5):t.twap;h.sort(((t,e)=>u(e)-u(t)));const d=h.length>2?"s":"";return t.jsx("div",{children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center relative",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-base font-bold text-gray-300",children:"Winning TWAP"}),t.jsxs("div",{className:"relative group ml-1 mr-0.5",children:[t.jsx(k,{className:"w-4 h-4 cursor-pointer"}),t.jsxs("div",{className:"absolute left-0 top-6 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:["The time average weighted price for the ",n[0]," market. Coins for market with the highest TWAP at the end of the traded period can be redeemed for cannonical tokens."]})]}),t.jsx("span",{className:"text-base font-bold text-gray-300",children:":"})]}),h.slice(0,1).map((e=>t.jsx("div",{className:"flex items-center relative",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{width:"8",height:"8",children:t.jsx("circle",{cx:"4",cy:"4",r:"4",fill:e.color})}),t.jsxs("span",{className:"text-gray-300 text-base ml-2 whitespace-nowrap",children:[t.jsxs("span",{className:"font-bold",children:[l(e.twap)," "]}),t.jsxs("span",{className:"text-gray-400 font-bold",children:["for ",e.message]})]})]})},e.index))),t.jsxs("div",{className:"flex items-center mt-4 sm:mt-0",children:[t.jsxs("span",{className:"text-base font-bold text-gray-300",children:["Failing TWAP",d]}),t.jsxs("div",{className:"relative group ml-1 mr-0.5",children:[t.jsx(k,{className:"w-4 h-4 cursor-pointer"}),t.jsxs("div",{className:"absolute left-0 top-6 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200 w-64 z-50",children:["The time average weighted price for the failing market",h.length>2?"s":"",". Coins for markets that fail cannot be redeemed for cannonical tokens at the end of the trading period."]})]}),t.jsx("span",{className:"text-base font-bold text-gray-300",children:":"})]}),t.jsx("div",{className:"flex flex-wrap gap-4 items-start",children:h.slice(1).map((e=>t.jsx("div",{className:"flex items-center relative",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{width:"8",height:"8",children:t.jsx("circle",{cx:"4",cy:"4",r:"4",fill:e.color})}),t.jsxs("span",{className:"text-gray-300 text-base ml-2 whitespace-nowrap",children:[t.jsxs("span",{className:"font-bold",children:[l(e.twap)," "]}),t.jsxs("span",{className:"text-gray-400 font-bold",children:["for ",e.message]})]})]})},e.index)))})]})})},zE=({payload:e})=>t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",backgroundColor:"#111113",padding:"5px 10px",borderRadius:"4px"},children:e?.map(((e,i)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",marginRight:"15px"},children:[t.jsx("svg",{width:"16",height:"16",style:{marginRight:"8px"},children:t.jsx("rect",{x:"0",y:"0",width:"16",height:"16",rx:"4",ry:"4",fill:e.color})}),t.jsx("span",{style:{color:"rgb(209, 213, 219)"},children:e.value})]},`item-${i}`)))}),RE=({proposalId:e,assetValue:i,stableValue:n,asset_decimals:s,stable_decimals:r,currentState:o,outcome_count:a,outcome_messages:l,initial_outcome_amounts:c,twaps:h,twap_threshold:u,winning_outcome:d,swapEvents:f,swapError:p})=>{const m=V.useRef(null),g=V.useRef(null),y=V.useRef([]),[v,b]=V.useState("MAX"),w=Math.pow(10,s-r);V.useEffect((()=>{if(!m.current||!g.current)return;const t=()=>{if(g.current&&m.current){const{clientWidth:t}=m.current;g.current.applyOptions({width:t}),g.current.timeScale().fitContent()}},e=new ResizeObserver((t=>{const{width:e}=t[0].contentRect;g.current&&(g.current.applyOptions({width:e}),g.current.timeScale().fitContent())}));return e.observe(m.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),e.disconnect()}}),[]);const{data:x,error:S}=io({queryKey:["stateHistory",e],queryFn:async()=>{const t=await fetch(`${ov}proposals/${e}/state-history`);if(!t.ok)throw new Error("Failed to fetch state history");return t.json()}}),k=x?.data?.find((t=>0===t.old_state&&1===t.new_state))?.timestamp,j=x?.data?.find((t=>1===t.old_state&&2===t.new_state))?.timestamp,C=(()=>{const t=Number(a);if(c&&c.length>=2*t){const e=Array.from({length:t},((t,e)=>{const s=BigInt(c[2*e]||"0"),r=BigInt(c[2*e+1]||"0");return s>0n&&r>0n?Number(r)/Number(s):0n===BigInt(i)?0:Number(BigInt(n))/Number(BigInt(i))}));return e}const e=0n===BigInt(i)?0:Number(BigInt(n))/Number(BigInt(i));return Array(t).fill(e)})(),E=H.useMemo((()=>{if(!f||!k)return[];const t=[{time:Math.floor(new Date(Number(k)).getTime()/1e3),prices:C}];[...f].sort(((t,e)=>Number(t.timestamp)-Number(e.timestamp))).forEach((e=>{const i=Math.floor(new Date(Number(e.timestamp)).getTime()/1e3),n=Number(BigInt(e.price))/(1e12*Number(BigInt(w))),s=[...t[t.length-1].prices];s[e.outcome]=n,t.push({time:i,prices:s})}));const e=Math.floor(new Date(Number(k)).getTime()/1e3),i=1===o?Math.floor(Date.now()/1e3):j?Math.floor(new Date(Number(j)).getTime()/1e3):Math.floor(new Date(Number(f[f.length-1]?.timestamp||k)).getTime()/1e3),n=[];for(let r=e;r<=i;r+=300){const e=t.filter((t=>t.time<=r)).pop();e&&n.push({time:r,...Object.fromEntries(e.prices.map(((t,e)=>[`market${e}`,t])))})}n[0]?.time!==e&&n.unshift({time:e,...Object.fromEntries(t[0].prices.map(((t,e)=>[`market${e}`,t])))});const s=t[t.length-1].prices;return n[n.length-1]?.time!==i&&n.push({time:i,...Object.fromEntries(s.map(((t,e)=>[`market${e}`,t])))}),n}),[f,C,k,j,w,a,o]),M=H.useMemo((()=>{const t=Number(a);if(1===t)return["#ef4444"];if(2===t)return["#ef4444","#22c55e"];const e=(t=>{const e=180/(t-1);return Array.from({length:t-1},((t,i)=>((t,e)=>{const i=e=>(e+t/30)%12,n=(e/=100)*Math.min(.5,.5),s=t=>.5-n*Math.max(Math.min(i(t)-3,9-i(t),1),-1),r=t=>Math.round(255*t).toString(16).padStart(2,"0");return`#${r(s(0))}${r(s(8))}${r(s(4))}`})(120+i*e,100)))})(t);return["#ef4444",...e]}),[a]),_=H.useMemo((()=>l.map(((t,e)=>({color:M[e],value:t})))),[M,l]),T=(t,e)=>{switch(t){case"1H":return e-3600;case"4H":return e-14400;case"1D":return e-86400;default:return Math.floor(new Date(Number(k)).getTime()/1e3)}};V.useEffect((()=>{if(!m.current||!E.length)return;const t=(function(t,e){return(function(t,e,i){let n;if(qx(t)){const e=document.getElementById(t);Mx(null!==e,`Cannot find element in DOM with id=${t}`),n=e}else n=t;const s=new NE(n,e,i);return e.setOptions(s.options()),s})(t,new aC,aC.Ad(e))})(m.current,{width:m.current.clientWidth,height:400,layout:{background:{type:Wj.Solid,color:"#111113"},textColor:"#ffffff",fontSize:14},grid:{horzLines:{color:"transparent"},vertLines:{color:"transparent"}},timeScale:{timeVisible:!0,secondsVisible:!0,borderColor:"transparent",rightOffset:0,fixLeftEdge:!0,fixRightEdge:!0,rightBarStaysOnScroll:!0},rightPriceScale:{borderColor:"transparent",autoScale:!1,mode:jj.Normal,minimumWidth:50,scaleMargins:{top:.1,bottom:.1}},handleScroll:!1,handleScale:!1});g.current=t;const e=Number(a),i=Array.from({length:e},((e,i)=>{const n=t.addLineSeries({color:M[i],lineWidth:2,title:l[i],priceLineVisible:!1,priceFormat:{type:"price",precision:5,minMove:1e-5}});return n.setData(E.map((t=>({time:t.time,value:t[`market${i}`]})))),n}));y.current=i;const n=1===o?Math.floor(Date.now()/1e3):Math.floor(new Date(Number(j||Date.now())).getTime()/1e3),s=T(v,n);return t.timeScale().setVisibleRange({from:s,to:n}),()=>{t.remove()}}),[E,a,l,M,v,o,j]);const A=H.useMemo((()=>p?`Error loading swap data: ${p.message}`:S?`Error loading state data: ${S.message}`:0!==o&&k?2===o||j&&null!=d?d?`Trading period finished, winning outcome is: ${l[Number(d)]}`:"Trading period finished":1===o&&E.length<=1?"No trading activity yet":"":"Trading period not started"),[o,k,j,E,p,S]);return t.jsxs("div",{className:"w-full py-0 my-0",children:[(k||j)&&!p&&!S&&t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-2",children:[t.jsx(LE,{twaps:h,twap_threshold:u,outcomeMessages:l,asset_decimals:s,stable_decimals:r}),t.jsx(IE,{selectedRange:v,onRangeSelect:t=>{if(b(t),!g.current)return;const e=1===o?Math.floor(Date.now()/1e3):Math.floor(new Date(Number(j||Date.now())).getTime()/1e3),i=T(t,e);g.current.timeScale().setVisibleRange({from:i,to:e})}})]}),t.jsx("div",{className:"h-106 relative",style:{overflow:"hidden"},children:t.jsx("div",p||S?{className:"h-full flex items-center justify-center text-red-500",children:A}:E.length>1?{ref:m,style:{width:"100%",height:"100%"}}:{className:"h-full flex items-center justify-center",children:A})}),(k||j)&&!p&&!S&&t.jsx(zE,{payload:_}),A&&E.length>1&&!p&&!S&&t.jsx("div",{className:"text-center mt-2 ",children:A})]})},PE=({proposalId:e,escrowId:i,outcomeCount:n,assetType:s,stableType:r,packageId:o,network:a=pv,tokens:l,outcome_messages:c,asset_symbol:h,stable_symbol:u,initial_outcome_amounts:d,asset_value:f,stable_value:p,asset_decimals:m,stable_decimals:g,swapEvents:y})=>{const[v,b]=V.useMemo((()=>[10**m,10**g]),[m,g]);console.log(v,b);const w=Bd(),[x,S]=V.useState(""),[k,j]=V.useState("0"),[C,E]=V.useState("assetToStable"),[M,_]=V.useState(""),[T,A]=V.useState(""),[O,N]=V.useState(!1),[I,L]=V.useState(null),{mutate:z}=Sf(),R=t=>{S(t);const e=parseFloat(t);if(isNaN(e)||e<=0)return;const{asset:i,stable:n}=D(),s=Number(i),r=Number(n);let o,a;"assetToStable"===C?(o=r/(s+e),a=r*e/(s+e)):(o=(r+e)/s,a=s*e/(r+e)),_(o.toFixed(6));const l=Math.floor(.99*a);A(l.toString())},P=V.useMemo((()=>l.filter((t=>t.outcome===parseInt(k)&&t.asset_type===("assetToStable"===C?0:1)))),[l,k,C]);V.useEffect((()=>{L(null)}),[x,T,k,C]),V.useEffect((()=>{x&&R(x)}),[C,k]);const D=()=>{const t=parseInt(k,10);if(y&&y.length>0){const e=y.filter((e=>e.outcome===t));if(e.length>0){const t=e.sort(((t,e)=>Number(t.timestamp)-Number(e.timestamp))),i=t[t.length-1];return{asset:BigInt(i.asset_reserve),stable:BigInt(i.stable_reserve)}}}return d&&d.length>=2*(t+1)?{asset:BigInt(d[2*t]),stable:BigInt(d[2*t+1])}:{asset:BigInt(f),stable:BigInt(p)}},$=async(t,e)=>{const i=new Qs({url:Tt(a)}),n="assetToStable"===C?`${s}`:`${r}`,o=await i.getCoins({owner:w.address,coinType:`0x${n}`}),l=BigInt(e),c=[...o.data].sort(((t,e)=>Number(BigInt(e.balance)-BigInt(t.balance))));if(0===c.length)throw new Error(`No ${"assetToStable"===C?"asset":"stable"} coins available in wallet`);let h;if(BigInt(c[0].balance)>=l)h=c[0].coinObjectId;else{let e=0n;const i=[];for(const t of c)if(e+=BigInt(t.balance),i.push(t.coinObjectId),e>=l)break;if(e<l)throw new Error(`Insufficient ${"assetToStable"===C?"asset":"stable"} balance in wallet`);h=t.mergeCoins(t.object(i[0]),i.slice(1).map((e=>t.object(e))))}const[u]=t.splitCoins(t.object(h),[t.pure.u64(l.toString())]);return u};return t.jsxs("div",{className:"rounded-lg",children:[I&&t.jsx("div",{className:"text-red-500 mb-4 text-center",children:I}),t.jsxs("div",{className:"flex flex-col gap-2 justify-center",children:[t.jsx("select",{value:k,onChange:t=>j(t.target.value),className:"p-2 rounded bg-gray-800 text-white w-full",children:[...Array(parseInt(n))].map(((e,i)=>t.jsx("option",{value:i,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c[i]||`Outcome ${i}`},i)))}),t.jsxs("div",{className:"flex",children:[t.jsx("button",{type:"button",onClick:()=>E("stableToAsset"),className:"flex-1 p-2 rounded-l "+("stableToAsset"===C?"bg-blue-500 text-white":"bg-gray-800 text-white"),children:"Buy"}),t.jsx("button",{type:"button",onClick:()=>E("assetToStable"),className:"flex-1 p-2 rounded-r "+("assetToStable"===C?"bg-blue-500 text-white":"bg-gray-800 text-white"),children:"Sell"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"mr-2 w-[30%] break-words",children:"assetToStable"===C?`${h}:`:`${u}:`}),t.jsx("input",{type:"number",value:x,onChange:t=>R(t.target.value),placeholder:"Amount to swap",className:"p-2 rounded bg-gray-800 text-white flex-1"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"mr-2 w-[30%] break-words",children:"stableToAsset"===C?`Buy ${h} up to:`:`Sell ${h} down to:`}),t.jsx("input",{type:"number",value:M,onChange:t=>(t=>{_(t);const e=parseFloat(t);if(isNaN(e)||e<=0)return;const{asset:i,stable:n}=D(),s=Number(i),r=Number(n);let o,a;"assetToStable"===C?(o=r/e-s,a=r*o/(s+o)):(o=s*e-r,a=s*o/(r+o)),o<0&&(o=0),S(o.toFixed(6));const l=Math.floor(.99*a);A(l.toString())})(t.target.value),placeholder:"Asset Price",className:"p-2 rounded bg-gray-800 text-white flex-1"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"mr-2 w-[30%] break-words",children:"assetToStable"===C?`${u} out:`:`${h} out:`}),t.jsx("input",{type:"number",value:T,onChange:t=>(t=>{A(t);const e=parseFloat(t);if(isNaN(e)||e<=0)return;const{asset:i,stable:n}=D(),s=Number(i),r=Number(n);let o,a=parseFloat(x);if(isNaN(a)||a<=0)return;o="assetToStable"===C?r*a/(s+a):s*a/(r+a);const l=Math.floor(.99*o);R((a*(e/l)).toString())})(t.target.value),placeholder:"Minimum to receive",className:"p-2 rounded bg-gray-800 text-white flex-1"})]}),w?t.jsx("button",{onClick:async()=>{if(w?.address&&x&&T)if(console.log("trade-amounts",x,T),L(null),BigInt(x)<=0n||BigInt(T)<=0n)L("Amount and minimum amount out must be positive numbers");else try{N(!0);const t=BigInt(x),n=new Ys;n.setGasBudget(1e9);const a="assetToStable"===C?0:1,l=P.some((t=>t.outcome===parseInt(k)&&t.asset_type===a));if(l){const{tokenToSwap:l,totalBalance:c}=await(async(t,e)=>{if(!P||0===P.length)throw new Error("No existing tokens available");const i=P;if(0===i.length)throw new Error("No tokens found for selected outcome and type");const n=i.reduce(((t,e)=>t+BigInt(e.balance)),0n);let s="";if(0===i.length)throw new Error("No tokens found for selected outcome");if(i.length>1){const[e,...n]=i;t.moveCall({target:`${o}::conditional_token::merge_many_entry`,arguments:[t.object(e.id),t.makeMoveVec({elements:n.map((e=>t.object(e.id)))}),t.object("0x6")]}),s=e.id}else s=i[0].id;if(n>e){const i=n-e;t.moveCall({target:`${o}::conditional_token::split_entry`,arguments:[t.object(s),t.pure.u64(i.toString()),t.object("0x6")]})}return{tokenToSwap:s,totalBalance:n}})(n,t);if(c>=t)n.moveCall({target:0===a?`${o}::swap::swap_asset_to_stable_entry`:`${o}::swap::swap_stable_to_asset_entry`,typeArguments:[s,r],arguments:[n.object(e),n.object(i),n.pure.u64(k),n.object(l),n.pure.u64(T),n.object("0x6")]});else{const h=await $(n,t-c);n.moveCall({target:0===a?`${o}::swap::create_and_swap_asset_to_stable_with_existing`:`${o}::swap::create_and_swap_stable_to_asset_with_existing`,typeArguments:[s,r],arguments:[n.object(e),n.object(i),n.pure.u64(k),n.object(l),n.pure.u64(T),h,n.object("0x6")]})}}else{const a=await $(n,t);n.moveCall({target:"assetToStable"===C?`${o}::swap::create_and_swap_asset_to_stable_entry`:`${o}::swap::create_and_swap_stable_to_asset_entry`,typeArguments:[s,r],arguments:[n.object(e),n.object(i),n.pure.u64(k),n.pure.u64(T),a,n.object("0x6")]})}await z({transaction:n}),S(""),A("")}catch(t){console.error("Trade error:",t),L(t instanceof Error?t.message:"An unknown error occurred")}finally{N(!1)}},disabled:O||!x||!T,className:"bg-blue-500 text-white p-2 rounded w-full hover:bg-blue-700",children:O?"Processing...":"Swap"}):t.jsx(rf,{className:"bg-blue-500 text-white p-2 rounded w-full hover:bg-blue-700"})]})]})};function DE({userTokens:e,winning_outcome:i,current_state:n,escrow:s,asset_type:r,stable_type:o,outcome_count:a}){const l=(function(){const t=Bd(),e=tx(),i=Zr();return no({mutationFn:async({userTokens:n,winning_outcome:s,escrow:r,asset_type:o,stable_type:a,outcome_count:l})=>{if(!t?.address)throw new Error("Wallet not connected");const c=new Ys;if(c.setGasBudget(5e7),null!==s){const t=parseInt(s,10),e={asset:n.filter((e=>e.outcome===t&&0===e.asset_type)),stable:n.filter((e=>e.outcome===t&&1===e.asset_type))};if(e.asset.length>0){let t=e.asset[0].id;if(e.asset.length>1){const[i,...n]=e.asset;c.moveCall({target:`${av}::conditional_token::merge_many_entry`,arguments:[c.object(i.id),c.makeMoveVec({elements:n.map((t=>c.object(t.id)))}),c.object("0x6")]}),t=i.id}c.moveCall({target:`${av}::coin_escrow::redeem_winning_tokens_asset_entry`,arguments:[c.object(r),c.object(t),c.object("0x6")],typeArguments:[`0x${o}`,`0x${a}`]})}if(e.stable.length>0){let t=e.stable[0].id;if(e.stable.length>1){const[i,...n]=e.stable;c.moveCall({target:`${av}::conditional_token::merge_many_entry`,arguments:[c.object(i.id),c.makeMoveVec({elements:n.map((t=>c.object(t.id)))}),c.object("0x6")]}),t=i.id}c.moveCall({target:`${av}::coin_escrow::redeem_winning_tokens_stable_entry`,arguments:[c.object(r),c.object(t),c.object("0x6")],typeArguments:[`0x${o}`,`0x${a}`]})}}else{const t={asset:n.filter((t=>0===t.asset_type)),stable:n.filter((t=>1===t.asset_type))};if(t.asset.length>0){const e=new Array(parseInt(l,10)).fill(null).map(((e,i)=>t.asset.filter((t=>t.outcome===i))));let i,n=[];for(let t=0;t<e.length;t++){const s=e[t];if(0===s.length)continue;let r=s[0].id;if(s.length>1){const[t,...e]=s;c.moveCall({target:`${av}::conditional_token::merge_many_entry`,arguments:[c.object(t.id),c.makeMoveVec({elements:e.map((t=>c.object(t.id)))}),c.object("0x6")]}),r=t.id}const o=s.reduce(((t,e)=>t+BigInt(e.balance)),0n);(void 0===i||o<i)&&(i=o),n.push(r)}if(void 0!==i)for(let t=0;t<n.length;t++){const s=n[t],r=e[t].reduce(((t,e)=>t+BigInt(e.balance)),0n);r>i&&c.moveCall({target:`${av}::conditional_token::split_entry`,arguments:[c.object(s),c.pure.u64(r-i),c.object("0x6")]})}n.length===parseInt(l,10)&&c.moveCall({target:`${av}::coin_escrow::redeem_complete_set_asset_entry`,arguments:[c.object(r),c.makeMoveVec({elements:n.map((t=>c.object(t)))}),c.object("0x6")],typeArguments:[`0x${o}`,`0x${a}`]})}if(t.stable.length>0){const e=new Array(parseInt(l,10)).fill(null).map(((e,i)=>t.stable.filter((t=>t.outcome===i))));let i,n=[];for(let t=0;t<e.length;t++){const s=e[t];if(0===s.length)continue;let r=s[0].id;if(s.length>1){const[t,...e]=s;c.moveCall({target:`${av}::conditional_token::merge_many_entry`,arguments:[c.object(t.id),c.makeMoveVec({elements:e.map((t=>c.object(t.id)))}),c.object("0x6")]}),r=t.id}const o=s.reduce(((t,e)=>t+BigInt(e.balance)),0n);(void 0===i||o<i)&&(i=o),n.push(r)}if(void 0!==i)for(let t=0;t<n.length;t++){const s=n[t],r=e[t].reduce(((t,e)=>t+BigInt(e.balance)),0n);r>i&&c.moveCall({target:`${av}::conditional_token::split_entry`,arguments:[c.object(s),c.pure.u64(r-i),c.object("0x6")]})}n.length===parseInt(l,10)&&c.moveCall({target:`${av}::coin_escrow::redeem_complete_set_stable_entry`,arguments:[c.object(r),c.makeMoveVec({elements:n.map((t=>c.object(t)))}),c.object("0x6")],typeArguments:[`0x${o}`,`0x${a}`]})}}const h=oy.loading("Redeeming tokens...");try{const t=await e(c);return oy.dismiss(h),"success"===t?.effects?.status?.status?(oy.success("Tokens redeemed successfully!"),i.invalidateQueries({queryKey:[rv.Proposals]})):oy.error("Token redemption failed: Transaction unsuccessful"),t}catch(qa){throw oy.dismiss(h),qa}},onError:t=>{oy.error(`Token redemption failed: ${t.message}`)}})})();if(console.log(e,i,n,s,r,o,a),0===n)return null;const c=1===n?"Recombine tokens":n>=2?"Redeem tokens":"";return console.log(e,i,n,s,r,o,a),console.log(e),t.jsx("button",{onClick:async()=>{try{await l.mutateAsync({userTokens:e,winning_outcome:i,current_state:n,escrow:s,asset_type:r,stable_type:o,outcome_count:a})}catch(qa){console.error("Error redeeming tokens:",qa)}},disabled:l.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l.isPending?"Redeeming...":c})}const $E=({userTokens:e,outcomeMessages:i,winning_outcome:n,current_state:s,escrow:r,asset_type:o,stable_type:a,outcome_count:l})=>{const c=V.useMemo((()=>{const t=new Map;return e.forEach((e=>{t.has(e.outcome)||t.set(e.outcome,{assetBalance:0n,stableBalance:0n});const i=t.get(e.outcome);0===e.asset_type?i.assetBalance+=BigInt(e.balance):i.stableBalance+=BigInt(e.balance)})),Array.from(t.entries()).sort((([t],[e])=>t-e)).map((([t,e])=>({outcome:t,assetBalance:e.assetBalance.toString(),stableBalance:e.stableBalance.toString()})))}),[e]);return t.jsx("div",{className:"space-y-2 px-6",children:c.length>0?t.jsxs(t.Fragment,{children:[t.jsx(DE,{userTokens:e,winning_outcome:n,current_state:s,escrow:r,asset_type:o,stable_type:a,outcome_count:l}),t.jsxs("div",{className:"pl-1 text-gray-300",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-2 font-semibold",children:[t.jsx("span",{children:"Outcome"}),t.jsx("span",{children:"Asset"}),t.jsx("span",{children:"Stable"})]}),c.map((e=>t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-1",children:[t.jsx("span",{children:i[e.outcome]||`Outcome ${e.outcome}`}),t.jsx("span",{children:e.assetBalance}),t.jsx("span",{children:e.stableBalance})]},e.outcome)))]})]}):t.jsx("div",{className:"text-gray-400 pl-4",children:"No tokens found"})})};function BE({proposalId:e,escrowId:i,assetType:n,stableType:s,daoId:r,proposalState:o}){const a=(function(){const t=Bd(),e=tx(),i=Zr();return no({mutationFn:async({proposalId:n,escrowId:s,assetType:r,stableType:o,daoId:a,proposalState:l})=>{if(!t?.address)throw new Error("You need to connect your wallet!");const c=new Ys;c.setGasBudget(5e7),console.log(av,r,o,n,s,a),0!==l&&null!=l||c.moveCall({target:`${av}::advance_stage::try_advance_state_entry`,arguments:[c.object(n),c.object(s),c.object(cv),c.object("0x6")],typeArguments:[`0x${r}`,`0x${o}`]}),1===l?c.moveCall({target:`${av}::advance_stage::try_advance_state_entry`,arguments:[c.object(n),c.object(s),c.object(cv),c.object("0x6")],typeArguments:[`0x${r}`,`0x${o}`]}):2===l&&c.moveCall({target:`${av}::dao::sign_result_entry`,arguments:[c.object(a),c.object(n),c.object(s),c.object("0x6")],typeArguments:[`0x${r}`,`0x${o}`]});const h=oy.loading("Advancing state...");try{const t=await e(c);return oy.dismiss(h),t&&"effects"in t&&"success"===t.effects?.status?.status?(oy.success("State advanced successfully!"),setTimeout((()=>{i.invalidateQueries({queryKey:[rv.Proposals]})}),1e4)):oy.error("Failed to advance state: Transaction failed"),t}catch(qa){throw oy.dismiss(h),qa}},onError:t=>{oy.error(`Failed to advance state: ${t.message}`)}})})(),l=(t=>{switch(t){case 0:return"bg-green-700 text-green-100 hover:bg-green-600";case 2:return"bg-blue-700 text-blue-100 hover:bg-blue-600";default:return"bg-red-800 text-red-100 hover:bg-red-700"}})(o);return t.jsx("button",{onClick:async()=>{try{await a.mutateAsync({proposalId:e,escrowId:i,assetType:n,stableType:s,daoId:r,proposalState:o})}catch(qa){console.error("Error advancing state:",qa)}},disabled:a.isPending,className:`px-4 py-2 rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${l}`,children:a.isPending?"Advancing...":(t=>{switch(t){case 0:return"Initialize trading";case 1:return"Finalize proposal";case 2:return"Execute proposal"}})(o)})}const UE=({messages:e})=>t.jsx("div",{className:"space-y-2",children:e.map(((e,i)=>t.jsx("div",{className:"bg-gray-900 p-3 rounded",children:t.jsx("p",{className:"text-gray-200",children:e})},i)))}),FE=t=>{switch(t){case 0:default:return"Pre-market";case 1:return"Trading Started";case 2:return"Finalized"}},WE=({proposal:e,outcomeMessages:i})=>t.jsx("div",{className:"rounded-lg shadow-lg",children:t.jsx("div",{className:"px-8 pb-8",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-gray-400",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"mb-4",children:t.jsx(BE,{proposalId:e.proposal_id,escrowId:e.escrow_id,assetType:e.asset_type,stableType:e.stable_type,daoId:e.dao_id,proposalState:e.current_state})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"TWAP Threshold"}),t.jsxs("span",{className:"font-medium text-gray-200",children:[(Number(e.twap_threshold)/1e3).toFixed(2),"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Proposal ID"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"font-medium text-gray-200",children:[e?.proposal_id.slice(0,6),"...",e?.proposal_id.slice(-4)]}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e?.proposal_id),oy.success("Proposal ID copied to clipboard")},className:"hover:text-gray-200 transition-colors",children:t.jsx(A,{className:"w-4 h-4"})})]})]}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"DAO ID"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"font-medium text-gray-200",children:[e.dao_id.slice(0,6),"...",e.dao_id.slice(-4)]}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e.dao_id),oy.success("DAO ID copied to clipboard")},className:"hover:text-gray-200 transition-colors",children:t.jsx(A,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Proposer"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"font-medium text-gray-200",children:[e.proposer.slice(0,6),"...",e.proposer.slice(-4)]}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e.proposer),oy.success("Proposer address copied to clipboard")},className:"hover:text-gray-200 transition-colors",children:t.jsx(A,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Created At"}),t.jsx("span",{className:"font-medium text-gray-200",children:new Date(Number(e.created_at)).toLocaleString()})]}),t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Outcome Count "}),t.jsx("span",{className:"font-medium text-gray-200",children:e.outcome_count})]})})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm uppercase mb-2 text-gray-300",children:"State History"}),t.jsxs("div",{className:"space-y-2 ",children:[e.state_history?.map(((e,i)=>t.jsxs("div",{className:"bg-gray-900 p-3 rounded",children:[t.jsx("p",{className:"text-gray-200",children:FE(e.new_state)}),t.jsx("p",{className:"text-gray-400 text-sm",children:new Date(Number(e.timestamp)).toLocaleString()})]},`${e.id}-${i}`))),(!e.state_history||0===e.state_history.length)&&t.jsx("div",{className:"text-gray-400",children:"No state changes recorded"})]})]}),i.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm uppercase mb-2 text-gray-300",children:"Outcomes"}),t.jsx(UE,{messages:i})]})]})]})})}),VE=({details:e})=>t.jsx("div",{className:"prose px-6",children:t.jsx(Kw,{options:{overrides:{h1:{component:"h1",props:{className:"text-4xl font-bold my-4"}},h2:{component:"h2",props:{className:"text-3xl font-bold my-4"}},h3:{component:"h3",props:{className:"text-2xl font-bold my-3"}},h4:{component:"h4",props:{className:"text-xl font-bold my-2"}},h5:{component:"h5",props:{className:"text-lg font-bold my-2"}},h6:{component:"h6",props:{className:"text-base font-bold my-2"}}}},children:e})});function qE({proposalId:e,escrow:i,asset_type:n,stable_type:s,winning_outcome:r,current_state:o}){const a=(function(){const t=Bd(),e=tx(),i=Zr();return no({mutationFn:async({proposalId:n,escrowId:s,assetType:r,stableType:o,winning_outcome:a})=>{if(!t?.address)throw new Error("You need to connect your wallet!");const l=new Ys;l.setGasBudget(5e7),l.moveCall({target:`${av}::liquidity_interact::empty_all_amm_liquidity`,arguments:[l.object(n),l.object(s),l.pure.u64(a),l.object("0x6")],typeArguments:[`0x${r}`,`0x${o}`]});const c=oy.loading("Withdrawing liquidity...");try{const t=await e(l);return oy.dismiss(c),t&&"effects"in t&&"success"===t.effects?.status?.status?(oy.success("Liquidity withdrawn successfully!"),setTimeout((()=>{i.invalidateQueries({queryKey:[rv.Proposals]})}),1e4)):oy.error("Failed to withdraw liquidity: Transaction failed"),t}catch(qa){throw oy.dismiss(c),qa}},onError:t=>{oy.error(`Failed to withdraw liquidity: ${t.message}`)}})})();return 2!==o?null:t.jsx("button",{onClick:async()=>{try{await a.mutateAsync({proposalId:e,escrowId:i,assetType:n,stableType:s,winning_outcome:r})}catch(qa){console.error("Error withdrawing liquidity:",qa)}},disabled:a.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.isPending?"Withdrawing...":"Withdraw Proposer Liquidity"})}const HE=({winning_outcome:e,current_state:i,escrow:n,asset_type:s,stable_type:r,proposalId:o})=>t.jsx("div",{className:"p-6",children:null!==e?t.jsx(qE,{proposalId:o,escrow:n,asset_type:s,stable_type:r,winning_outcome:e,current_state:i}):t.jsx("div",{children:"No liquidity operation available"})}),KE=({proposal:e,outcomeMessages:i,userTokens:n,details:s})=>{const[r,o]=V.useState("tokens");return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex border-b border-gray-700",children:[t.jsx("button",{onClick:()=>o("tokens"),className:"px-6 py-3 text-sm font-medium "+("tokens"===r?"text-blue-500 border-b-2 border-blue-500":"text-gray-400 hover:text-gray-300"),children:"Your Tokens"}),t.jsx("button",{onClick:()=>o("description"),className:"px-6 py-3 text-sm font-medium "+("description"===r?"text-blue-500 border-b-2 border-blue-500":"text-gray-400 hover:text-gray-300"),children:"Description"}),t.jsx("button",{onClick:()=>o("details"),className:"px-6 py-3 text-sm font-medium "+("details"===r?"text-blue-500 border-b-2 border-blue-500":"text-gray-400 hover:text-gray-300"),children:"Advanced Info"}),t.jsx("button",{onClick:()=>o("liquidity"),className:"px-6 py-3 text-sm font-medium "+("liquidity"===r?"text-blue-500 border-b-2 border-blue-500":"text-gray-400 hover:text-gray-300"),children:"Liquidity"})]}),"tokens"===r&&t.jsx($E,{userTokens:n,outcomeMessages:i,winning_outcome:e.winning_outcome,current_state:e.current_state,escrow:e.escrow_id,asset_type:e.asset_type,stable_type:e.stable_type,outcome_count:e.outcome_count}),"description"===r&&t.jsx(VE,{details:s}),"details"===r&&t.jsx(WE,{proposal:e,outcomeMessages:i}),"liquidity"===r&&t.jsx(HE,{userTokens:n,winning_outcome:e.winning_outcome,current_state:e.current_state,escrow:e.escrow_id,asset_type:e.asset_type,stable_type:e.stable_type,proposalId:e.proposal_id})]})},GE=av,ZE=new Qs({url:Tt(pv)});function YE(){const e=Bd(),{proposalId:i}=(function(){let{matches:t}=V.useContext(mm),e=t[t.length-1];return e?e.params:{}})(),n=(()=>{const[t,e]=V.useState(window.innerWidth);return V.useEffect((()=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t})(),{data:s,isLoading:r,error:o}=io({queryKey:[rv.ProposalDetail,i],queryFn:async()=>{const t=await fetch(`${ov}proposals/${i}`);if(!t.ok){const e=await t.json();throw new Error(e.message||`API error: ${t.statusText}`)}return t.json()}}),{tokens:a}=(function({proposalId:t,address:e,assetType:i,enabled:n=!0}){const[s,r]=V.useState([]),[o,a]=V.useState(!1),[l,c]=V.useState(null);return V.useEffect((()=>{n&&e&&t&&(async()=>{a(!0),c(null);try{const n=`${GE}::conditional_token::ConditionalToken`;let s=[],o=!0,a=null;for(;o;){const r=await ZE.getOwnedObjects({owner:e,cursor:a,limit:50,filter:{StructType:n},options:{showType:!0,showContent:!0,showDisplay:!0}}),l=r.data.filter((e=>{if(!e.data?.content||"moveObject"!==e.data.content.dataType)return!1;const n=e.data.content;return n.fields.market_id===t&&(!i||n.fields.asset_type===Number(i))})).map((t=>{const e=t.data?.content;return{id:t.data?.objectId||"",balance:e.fields.balance,outcome:e.fields.outcome,asset_type:e.fields.asset_type}}));if(s=[...s,...l],o=r.hasNextPage,a=r.nextCursor??null,!o||!a)break}const l=[],c=new Set;for(const t of s)c.has(t.id)||(c.add(t.id),l.push(t));r(l)}catch(n){c(n instanceof Error?n:new Error("Failed to fetch tokens")),console.error("Error fetching tokens:",n)}finally{a(!1)}})()}),[t,e,i,n]),{tokens:s,isLoading:o,error:l}})({proposalId:s?.proposal_id??"",address:e?.address,assetType:null,enabled:!!e?.address&&!!s?.proposal_id}),{data:l,error:c}=((t,e)=>io({queryKey:["swaps",t],queryFn:async()=>{const e=await fetch(`${ov}swaps?market_id=${t}`);if(!e.ok)throw new Error("Failed to fetch swap events");return(await e.json()).data},enabled:!!t,...e}))(s?.proposal_id??"",{enabled:!!s?.proposal_id});if(r)return t.jsx("div",{className:"w-full p-6 text-center text-gray-400",children:"Loading proposal..."});if(o)return t.jsxs("div",{className:"w-full p-6 text-center text-red-400",children:["Error loading proposal: ",o.message]});if(!s)return t.jsx("div",{className:"w-full p-6 text-center text-gray-400",children:"Proposal not found"});const h=n>=1320;return t.jsxs(S,{appearance:"dark",className:"flex flex-col min-h-screen",children:[t.jsxs("h1",{className:"text-3xl font-bold mt-4 pl-6 pr-6",children:[s.dao_icon?t.jsx("img",{src:s.dao_icon,alt:`${s.dao_name} icon`,className:"w-9 h-9 -mt-1 rounded-full inline-block mr-2 object-cover border-2 border-gray-700",onError:t=>{t.currentTarget.src="/fallback-icon.png"}}):t.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-700 inline-block mr-2 border-2 border-gray-700"}),t.jsx("span",{className:"text-gray-400",children:s.dao_name}),s.dao_verified&&t.jsx(mv,{className:"ml-1 -mt-1 inline-block",size:24}),": ",s.title]}),t.jsxs("div",{className:"flex-1 overflow-hidden p-4",children:[t.jsxs("div",{className:h?"flex items-center space-x-4":"flex flex-col space-y-4",children:[t.jsx("div",{className:h?"w-3/4":"w-full",children:t.jsx(RE,{proposalId:s.proposal_id,assetValue:s.asset_value,stableValue:s.stable_value,asset_decimals:s.dao.asset_decimals,stable_decimals:s.dao.stable_decimals,currentState:s.current_state,outcome_count:s.outcome_count,outcome_messages:s.outcome_messages,initial_outcome_amounts:s.initial_outcome_amounts,twaps:s.twaps,twap_threshold:s.twap_threshold,winning_outcome:s.winning_outcome,swapEvents:l,swapError:c??void 0})}),t.jsx("div",{className:h?"w-1/4 px-6":"w-full",children:1===s.current_state?t.jsx(PE,{proposalId:s.proposal_id,escrowId:s.escrow_id,outcomeCount:s.outcome_count,assetType:s.asset_type,stableType:s.stable_type,packageId:av,tokens:a,outcome_messages:s.outcome_messages,asset_symbol:s.dao.asset_symbol,stable_symbol:s.dao.stable_symbol,initial_outcome_amounts:s.initial_outcome_amounts,asset_value:s.asset_value,stable_value:s.stable_value,asset_decimals:s.dao.asset_decimals,stable_decimals:s.dao.stable_decimals,swapEvents:l}):t.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:t.jsx("h1",{className:"text-center text-1xl font-bold",children:0===s.current_state?"Trading not started":2===s.current_state?"Trading finished":""})})})]}),t.jsx(KE,{proposal:s,outcomeMessages:s.outcome_messages,userTokens:a,details:s.details})]})]})}const XE=(QE=[{path:"/",element:t.jsx(sv,{}),children:[{index:!0,element:t.jsx(ax,{})},{path:"create",element:t.jsx(Jw,{})},{path:"learn",element:t.jsx(ix,{})},{path:"trade/:proposalId",element:t.jsx(YE,{})}]}],(function(t){const e=t.window?t.window:"undefined"!=typeof window?window:void 0,i=void 0!==e&&void 0!==e.document&&void 0!==e.document.createElement;Lf(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n,s,r,o=t.mapRouteProperties||jp,a={},l=Uf(t.routes,o,void 0,a),c=t.basename||"/",h=t.dataStrategy||Rp,u=t.patchRoutesOnNavigation,d={...t.future},f=null,p=new Set,m=null,g=null,y=null,v=null!=t.hydrationData,b=Ff(l,t.history.location,c),w=null;if(null==b&&!u){let e=Gp(404,{pathname:t.history.location.pathname}),{matches:i,route:n}=Kp(l);b=i,w={[n.id]:e}}if(b&&!t.hydrationData&&ht(b,l,t.history.location.pathname).active&&(b=null),b)if(b.some((t=>t.route.lazy)))s=!1;else if(b.some((t=>t.route.loader))){let e=t.hydrationData?t.hydrationData.loaderData:null,i=t.hydrationData?t.hydrationData.errors:null;if(i){let t=b.findIndex((t=>void 0!==i[t.route.id]));s=b.slice(0,t+1).every((t=>!Op(t.route,e,i)))}else s=b.every((t=>!Op(t.route,e,i)))}else s=!0;else{s=!1,b=[];let e=ht(null,l,t.history.location.pathname);e.active&&e.matches&&(b=e.matches)}let x,S,k={historyAction:t.history.action,location:t.history.location,matches:b,initialized:s,navigation:wp,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||w,fetchers:new Map,blockers:new Map},j="POP",C=!1,E=!1,M=new Map,_=null,T=!1,A=!1,O=new Set,N=new Map,I=0,L=-1,z=new Map,R=new Set,P=new Map,D=new Map,$=new Set,B=new Map,U=null;function F(t,e={}){k={...k,...t};let i=[],n=[];k.fetchers.forEach(((t,e)=>{"idle"===t.state&&($.has(e)?i.push(e):n.push(e))})),[...p].forEach((t=>t(k,{deletedFetchers:i,viewTransitionOpts:e.viewTransitionOpts,flushSync:!0===e.flushSync}))),i.forEach((t=>J(t))),n.forEach((t=>k.fetchers.delete(t)))}function W(e,i,{flushSync:s}={}){let r,o=null!=k.actionData&&null!=k.navigation.formMethod&&im(k.navigation.formMethod)&&"loading"===k.navigation.state&&!0!==e.state?._isRedirect;r=i.actionData?Object.keys(i.actionData).length>0?i.actionData:null:o?k.actionData:null;let a=i.loaderData?Vp(k.loaderData,i.loaderData,i.matches||[],i.errors):k.loaderData,c=k.blockers;c.size>0&&(c=new Map(c),c.forEach(((t,e)=>c.set(e,Sp))));let h,u=!0===C||null!=k.navigation.formMethod&&im(k.navigation.formMethod)&&!0!==e.state?._isRedirect;if(n&&(l=n,n=void 0),T||"POP"===j||("PUSH"===j?t.history.push(e,e.state):"REPLACE"===j&&t.history.replace(e,e.state)),"POP"===j){let t=M.get(k.location.pathname);t&&t.has(e.pathname)?h={currentLocation:k.location,nextLocation:e}:M.has(e.pathname)&&(h={currentLocation:e,nextLocation:k.location})}else if(E){let t=M.get(k.location.pathname);t?t.add(e.pathname):(t=new Set([e.pathname]),M.set(k.location.pathname,t)),h={currentLocation:k.location,nextLocation:e}}F({...i,actionData:r,loaderData:a,historyAction:j,location:e,initialized:!0,navigation:wp,revalidation:"idle",restoreScrollPosition:ct(e,i.matches||k.matches),preventScrollReset:u,blockers:c},{viewTransitionOpts:h,flushSync:!0===s}),j="POP",C=!1,E=!1,T=!1,A=!1,U?.resolve(),U=null}async function V(e,i,s){x&&x.abort(),x=null,j=e,T=!0===(s&&s.startUninterruptedRevalidation),(function(t,e){if(m&&y){let i=lt(t,e);m[i]=y()}})(k.location,k.matches),C=!0===(s&&s.preventScrollReset),E=!0===(s&&s.enableViewTransition);let r=n||l,o=s&&s.overrideNavigation,a=Ff(r,i,c),h=!0===(s&&s.flushSync),u=ht(a,r,i.pathname);if(u.active&&u.matches&&(a=u.matches),!a){let{error:t,notFoundMatches:e,route:n}=at(i.pathname);return void W(i,{matches:e,loaderData:{},errors:{[n.id]:t}},{flushSync:h})}if(k.initialized&&!A&&(function(t,e){return t.pathname===e.pathname&&t.search===e.search&&(""===t.hash?""!==e.hash:t.hash===e.hash||""!==e.hash)})(k.location,i)&&!(s&&s.submission&&im(s.submission.formMethod)))return void W(i,{matches:a},{flushSync:h});x=new AbortController;let d,f=Bp(t.history,i,x.signal,s&&s.submission);if(s&&s.pendingError)d=[Hp(a).route.id,{type:"error",error:s.pendingError}];else if(s&&s.submission&&im(s.submission.formMethod)){let e=await(async function(t,e,i,n,s,r={}){Z();let o,a=(function(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}})(e,i);if(F({navigation:a},{flushSync:!0===r.flushSync}),s){let i=await ut(n,e.pathname,t.signal);if("aborted"===i.type)return{shortCircuited:!0};if("error"===i.type){let t=Hp(i.partialMatches).route.id;return{matches:i.partialMatches,pendingActionResult:[t,{type:"error",error:i.error}]}}if(!i.matches){let{notFoundMatches:t,error:i,route:n}=at(e.pathname);return{matches:t,pendingActionResult:[n.id,{type:"error",error:i}]}}n=i.matches}let l=sm(n,e);if(l.route.action||l.route.lazy){if(o=(await K("action",0,t,[l],n,null))[l.route.id],t.signal.aborted)return{shortCircuited:!0}}else o={type:"error",error:Gp(405,{method:t.method,pathname:e.pathname,routeId:l.route.id})};if(Jp(o)){let e;return e=r&&null!=r.replace?r.replace:$p(o.response.headers.get("Location"),new URL(t.url),c)===k.location.pathname+k.location.search,await H(t,o,!0,{submission:i,replace:e}),{shortCircuited:!0}}if(Qp(o)){let t=Hp(n,l.route.id);return!0!==(r&&r.replace)&&(j="PUSH"),{matches:n,pendingActionResult:[t.route.id,o]}}return{matches:n,pendingActionResult:[l.route.id,o]}})(f,i,s.submission,a,u.active,{replace:s.replace,flushSync:h});if(e.shortCircuited)return;if(e.pendingActionResult){let[t,n]=e.pendingActionResult;if(Qp(n)&&fp(n.error)&&404===n.error.status)return x=null,void W(i,{matches:e.matches,loaderData:{},errors:{[t]:n.error}})}a=e.matches||a,d=e.pendingActionResult,o=om(i,s.submission),h=!1,u.active=!1,f=Bp(t.history,f.url,f.signal)}let{shortCircuited:p,matches:g,loaderData:v,errors:b}=await(async function(e,i,s,r,o,a,h,u,d,f,p){let m=o||om(i,a),g=a||h||rm(m),y=!T&&!d;if(r){if(y){let t=q(p);F({navigation:m,...void 0!==t?{actionData:t}:{}},{flushSync:f})}let t=await ut(s,i.pathname,e.signal);if("aborted"===t.type)return{shortCircuited:!0};if("error"===t.type){let e=Hp(t.partialMatches).route.id;return{matches:t.partialMatches,loaderData:{},errors:{[e]:t.error}}}if(!t.matches){let{error:t,notFoundMatches:e,route:n}=at(i.pathname);return{matches:e,loaderData:{},errors:{[n.id]:t}}}s=t.matches}let v=n||l,[b,w]=Ap(t.history,k,s,g,i,!0===d,A,O,$,P,R,v,c,p);if(L=++I,0===b.length&&0===w.length){let t=it();return W(i,{matches:s,loaderData:{},errors:p&&Qp(p[1])?{[p[0]]:p[1].error}:null,...qp(p),...t?{fetchers:new Map(k.fetchers)}:{}},{flushSync:f}),{shortCircuited:!0}}if(y){let t={};if(!r){t.navigation=m;let e=q(p);void 0!==e&&(t.actionData=e)}w.length>0&&(t.fetchers=(function(t){return t.forEach((t=>{let e=k.fetchers.get(t.key),i=am(void 0,e?e.data:void 0);k.fetchers.set(t.key,i)})),new Map(k.fetchers)})(w)),F(t,{flushSync:f})}w.forEach((t=>{tt(t.key),t.controller&&N.set(t.key,t.controller)}));let S=()=>w.forEach((t=>tt(t.key)));x&&x.signal.addEventListener("abort",S);let{loaderResults:j,fetcherResults:C}=await G(0,s,b,w,e);if(e.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",S),w.forEach((t=>N.delete(t.key)));let E=Zp(j);if(E)return await H(e,E.result,!0,{replace:u}),{shortCircuited:!0};if(E=Zp(C),E)return R.add(E.key),await H(e,E.result,!0,{replace:u}),{shortCircuited:!0};let{loaderData:M,errors:_}=Wp(k,s,j,p,w,C);d&&k.errors&&(_={...k.errors,..._});let z=it(),D=nt(L);return{matches:s,loaderData:M,errors:_,...z||D||w.length>0?{fetchers:new Map(k.fetchers)}:{}}})(f,i,a,u.active,o,s&&s.submission,s&&s.fetcherSubmission,s&&s.replace,s&&!0===s.initialHydration,h,d);p||(x=null,W(i,{matches:g||a,...qp(d),loaderData:v,errors:b}))}function q(t){return t&&!Qp(t[1])?{[t[0]]:t[1].data}:k.actionData?0===Object.keys(k.actionData).length?null:k.actionData:void 0}async function H(n,s,r,{submission:o,fetcherSubmission:a,preventScrollReset:l,replace:h}={}){s.response.headers.has("X-Remix-Revalidate")&&(A=!0);let u=s.response.headers.get("Location");Lf(u,"Expected a Location header on the redirect Response"),u=$p(u,new URL(n.url),c);let d=Pf(k.location,u,{_isRedirect:!0});if(i){let i=!1;if(s.response.headers.has("X-Remix-Reload-Document"))i=!0;else if(kp.test(u)){const n=t.history.createURL(u);i=n.origin!==e.location.origin||null==np(n.pathname,c)}if(i)return void(h?e.location.replace(u):e.location.assign(u))}x=null;let f=!0===h||s.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:p,formAction:m,formEncType:g}=k.navigation;!o&&!a&&p&&m&&g&&(o=rm(k.navigation));let y=o||a;if(bp.has(s.response.status)&&y&&im(y.formMethod))await V(f,d,{submission:{...y,formAction:u},preventScrollReset:l||C,enableViewTransition:r?E:void 0});else{let t=om(d,o);await V(f,d,{overrideNavigation:t,fetcherSubmission:a,preventScrollReset:l||C,enableViewTransition:r?E:void 0})}}async function K(t,e,i,n,s,r){let l,u={};try{l=await(async function(t,e,i,n,s,r,o,a,l,c){let h=r.map((t=>t.route.lazy?(async function(t,e,i){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let s=i[t.id];Lf(s,"No route found in manifest");let r={};for(let o in n){let t=void 0!==s[o]&&"hasErrorBoundary"!==o;zf(!t,`Route "${s.id}" has a static property "${o}" defined but its lazy function is also returning a value for this property. The lazy route property "${o}" will be ignored.`),t||Bf.has(o)||(r[o]=n[o])}Object.assign(s,r),Object.assign(s,{...e(s),lazy:void 0})})(t.route,l,a):void 0)),u=r.map(((t,i)=>{let r=h[i],o=s.some((e=>e.route.id===t.route.id));return{...t,shouldLoad:o,resolve:async i=>(i&&"GET"===n.method&&(t.route.lazy||t.route.loader)&&(o=!0),o?(async function(t,e,i,n,s,r){let o,a,l=n=>{let o,l=new Promise(((t,e)=>o=e));a=()=>o(),e.signal.addEventListener("abort",a);let c=s=>"function"!=typeof n?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${t}" [routeId: ${i.route.id}]`)):n({request:e,params:i.params,context:r},...void 0!==s?[s]:[]),h=(async()=>{try{return{type:"data",result:await(s?s((t=>c(t))):c())}}catch(mx){return{type:"error",result:mx}}})();return Promise.race([h,l])};try{let s=i.route[t];if(n)if(s){let t,[e]=await Promise.all([l(s).catch((e=>{t=e})),n]);if(void 0!==t)throw t;o=e}else{if(await n,s=i.route[t],!s){if("action"===t){let t=new URL(e.url);throw Gp(405,{method:e.method,pathname:t.pathname+t.search,routeId:i.route.id})}return{type:"data",result:void 0}}o=await l(s)}else{if(!s){let t=new URL(e.url);throw Gp(404,{pathname:t.pathname+t.search})}o=await l(s)}}catch(mx){return{type:"error",result:mx}}finally{a&&e.signal.removeEventListener("abort",a)}return o})(e,n,t,r,i,c):Promise.resolve({type:"data",result:void 0}))}})),d=await t({matches:u,request:n,params:r[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch(mx){}return d})(h,t,0,i,n,s,r,a,o)}catch(mx){return n.forEach((e=>{u[e.route.id]={type:"error",error:mx}})),u}for(let[o,a]of Object.entries(l))u[o]=Xp(a)?{type:"redirect",response:Dp(a.result,i,o,s,c)}:await Pp(a);return u}async function G(e,i,n,s,r){let o=K("loader",0,r,n,i,null),a=Promise.all(s.map((async e=>{if(e.matches&&e.match&&e.controller){let i=(await K("loader",0,Bp(t.history,e.path,e.controller.signal),[e.match],e.matches,e.key))[e.match.route.id];return{[e.key]:i}}return Promise.resolve({[e.key]:{type:"error",error:Gp(404,{pathname:e.path})}})}))),l=await o,c=(await a).reduce(((t,e)=>Object.assign(t,e)),{});return{loaderResults:l,fetcherResults:c}}function Z(){A=!0,P.forEach(((t,e)=>{N.has(e)&&O.add(e),tt(e)}))}function Y(t,e,i={}){k.fetchers.set(t,e),F({fetchers:new Map(k.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function X(t,e,i,n={}){let s=Hp(k.matches,e);J(t),F({errors:{[s.route.id]:i},fetchers:new Map(k.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Q(t){return D.set(t,(D.get(t)||0)+1),$.has(t)&&$.delete(t),k.fetchers.get(t)||xp}function J(t){let e=k.fetchers.get(t);!N.has(t)||e&&"loading"===e.state&&z.has(t)||tt(t),P.delete(t),z.delete(t),R.delete(t),$.delete(t),O.delete(t),k.fetchers.delete(t)}function tt(t){let e=N.get(t);e&&(e.abort(),N.delete(t))}function et(t){for(let e of t){let t=lm(Q(e).data);k.fetchers.set(e,t)}}function it(){let t=[],e=!1;for(let i of R){let n=k.fetchers.get(i);Lf(n,`Expected fetcher: ${i}`),"loading"===n.state&&(R.delete(i),t.push(i),e=!0)}return et(t),e}function nt(t){let e=[];for(let[i,n]of z)if(n<t){let t=k.fetchers.get(i);Lf(t,`Expected fetcher: ${i}`),"loading"===t.state&&(tt(i),z.delete(i),e.push(i))}return et(e),e.length>0}function st(t){k.blockers.delete(t),B.delete(t)}function rt(t,e){let i=k.blockers.get(t)||Sp;Lf("unblocked"===i.state&&"blocked"===e.state||"blocked"===i.state&&"blocked"===e.state||"blocked"===i.state&&"proceeding"===e.state||"blocked"===i.state&&"unblocked"===e.state||"proceeding"===i.state&&"unblocked"===e.state,`Invalid blocker state transition: ${i.state} -> ${e.state}`);let n=new Map(k.blockers);n.set(t,e),F({blockers:n})}function ot({currentLocation:t,nextLocation:e,historyAction:i}){if(0===B.size)return;B.size>1&&zf(!1,"A router only supports one blocker at a time");let n=Array.from(B.entries()),[s,r]=n[n.length-1],o=k.blockers.get(s);return o&&"proceeding"===o.state?void 0:r({currentLocation:t,nextLocation:e,historyAction:i})?s:void 0}function at(t){let e=Gp(404,{pathname:t}),i=n||l,{matches:s,route:r}=Kp(i);return{notFoundMatches:s,route:r,error:e}}function lt(t,e){if(g){let i=g(t,e.map((t=>(function(t,e){let{route:i,pathname:n,params:s}=t;return{id:i.id,pathname:n,params:s,data:e[i.id],handle:i.handle}})(t,k.loaderData))));return i||t.key}return t.key}function ct(t,e){if(m){let i=lt(t,e),n=m[i];if("number"==typeof n)return n}return null}function ht(t,e,i){if(u){if(!t)return{active:!0,matches:Wf(e,i,c,!0)||[]};if(Object.keys(t[0].params).length>0)return{active:!0,matches:Wf(e,i,c,!0)}}return{active:!1,matches:null}}async function ut(t,e,i){if(!u)return{type:"success",matches:t};let s=t;for(;;){let t=null==n,r=n||l,h=a;try{await u({path:e,matches:s,patch:(t,e)=>{i.aborted||Lp(t,e,r,h,o)}})}catch(mx){return{type:"error",error:mx,partialMatches:s}}finally{t&&!i.aborted&&(l=[...l])}if(i.aborted)return{type:"aborted"};let d=Ff(r,e,c);if(d)return{type:"success",matches:d};let f=Wf(r,e,c,!0);if(!f||s.length===f.length&&s.every(((t,e)=>t.route.id===f[e].route.id)))return{type:"success",matches:null};s=f}}return r={get basename(){return c},get future(){return d},get state(){return k},get routes(){return l},get window(){return e},initialize:function(){if(f=t.history.listen((({action:e,location:i,delta:n})=>{if(S)return S(),void(S=void 0);zf(0===B.size||null!=n,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=ot({currentLocation:k.location,nextLocation:i,historyAction:e});if(s&&null!=n){let e=new Promise((t=>{S=t}));return t.history.go(-1*n),void rt(s,{state:"blocked",location:i,proceed(){rt(s,{state:"proceeding",proceed:void 0,reset:void 0,location:i}),e.then((()=>t.history.go(n)))},reset(){let t=new Map(k.blockers);t.set(s,Sp),F({blockers:t})}})}return V(e,i)})),i){!(function(t,e){try{let i=t.sessionStorage.getItem(Cp);if(i){let t=JSON.parse(i);for(let[i,n]of Object.entries(t||{}))n&&Array.isArray(n)&&e.set(i,new Set(n||[]))}}catch(mx){}})(e,M);let t=()=>(function(t,e){if(e.size>0){let i={};for(let[t,n]of e)i[t]=[...n];try{t.sessionStorage.setItem(Cp,JSON.stringify(i))}catch(qa){zf(!1,`Failed to save applied view transitions in sessionStorage (${qa}).`)}}})(e,M);e.addEventListener("pagehide",t),_=()=>e.removeEventListener("pagehide",t)}return k.initialized||V("POP",k.location,{initialHydration:!0}),r},subscribe:function(t){return p.add(t),()=>p.delete(t)},enableScrollRestoration:function(t,e,i){if(m=t,y=e,g=i||null,!v&&k.navigation===wp){v=!0;let t=ct(k.location,k.matches);null!=t&&F({restoreScrollPosition:t})}return()=>{m=null,y=null,g=null}},navigate:async function e(i,n){if("number"==typeof i)return void t.history.go(i);let s=Mp(k.location,k.matches,c,i,n?.fromRouteId,n?.relative),{path:r,submission:o,error:a}=_p(!1,s,n),l=k.location,h=Pf(k.location,r,n&&n.state);h={...h,...t.history.encodeLocation(h)};let u=n&&null!=n.replace?n.replace:void 0,d="PUSH";!0===u?d="REPLACE":!1===u||null!=o&&im(o.formMethod)&&o.formAction===k.location.pathname+k.location.search&&(d="REPLACE");let f=n&&"preventScrollReset"in n?!0===n.preventScrollReset:void 0,p=!0===(n&&n.flushSync),m=ot({currentLocation:l,nextLocation:h,historyAction:d});m?rt(m,{state:"blocked",location:h,proceed(){rt(m,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),e(i,n)},reset(){let t=new Map(k.blockers);t.set(m,Sp),F({blockers:t})}}):await V(d,h,{submission:o,pendingError:a,preventScrollReset:f,replace:n&&n.replace,enableViewTransition:n&&n.viewTransition,flushSync:p})},fetch:async function(e,i,s,r){tt(e);let o=!0===(r&&r.flushSync),a=n||l,h=Mp(k.location,k.matches,c,s,i,r?.relative),u=Ff(a,h,c),d=ht(u,a,h);if(d.active&&d.matches&&(u=d.matches),!u)return void X(e,i,Gp(404,{pathname:h}),{flushSync:o});let{path:f,submission:p,error:m}=_p(!0,h,r);if(m)return void X(e,i,m,{flushSync:o});let g=sm(u,f),y=!0===(r&&r.preventScrollReset);p&&im(p.formMethod)?await(async function(e,i,s,r,o,a,h,u,d){function f(t){if(!t.route.action&&!t.route.lazy){let t=Gp(405,{method:d.formMethod,pathname:s,routeId:i});return X(e,i,t,{flushSync:h}),!0}return!1}if(Z(),P.delete(e),!a&&f(r))return;let p=k.fetchers.get(e);Y(e,(function(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}})(d,p),{flushSync:h});let m=new AbortController,g=Bp(t.history,s,m.signal,d);if(a){let t=await ut(o,s,g.signal);if("aborted"===t.type)return;if("error"===t.type)return void X(e,i,t.error,{flushSync:h});if(!t.matches)return void X(e,i,Gp(404,{pathname:s}),{flushSync:h});if(f(r=sm(o=t.matches,s)))return}N.set(e,m);let y=I,v=(await K("action",0,g,[r],o,e))[r.route.id];if(g.signal.aborted)return void(N.get(e)===m&&N.delete(e));if($.has(e)){if(Jp(v)||Qp(v))return void Y(e,lm(void 0))}else{if(Jp(v))return N.delete(e),L>y?void Y(e,lm(void 0)):(R.add(e),Y(e,am(d)),H(g,v,!1,{fetcherSubmission:d,preventScrollReset:u}));if(Qp(v))return void X(e,i,v.error)}let b=k.navigation.location||k.location,w=Bp(t.history,b,m.signal),S=n||l,C="idle"!==k.navigation.state?Ff(S,k.navigation.location,c):k.matches;Lf(C,"Didn't find any matches after fetcher action");let E=++I;z.set(e,E);let M=am(d,v.data);k.fetchers.set(e,M);let[_,T]=Ap(t.history,k,C,d,b,!1,A,O,$,P,R,S,c,[r.route.id,v]);T.filter((t=>t.key!==e)).forEach((t=>{let e=t.key,i=k.fetchers.get(e),n=am(void 0,i?i.data:void 0);k.fetchers.set(e,n),tt(e),t.controller&&N.set(e,t.controller)})),F({fetchers:new Map(k.fetchers)});let D=()=>T.forEach((t=>tt(t.key)));m.signal.addEventListener("abort",D);let{loaderResults:B,fetcherResults:U}=await G(0,C,_,T,w);if(m.signal.aborted)return;m.signal.removeEventListener("abort",D),z.delete(e),N.delete(e),T.forEach((t=>N.delete(t.key)));let V=Zp(B);if(V)return H(w,V.result,!1,{preventScrollReset:u});if(V=Zp(U),V)return R.add(V.key),H(w,V.result,!1,{preventScrollReset:u});let{loaderData:q,errors:Q}=Wp(k,C,B,void 0,T,U);if(k.fetchers.has(e)){let t=lm(v.data);k.fetchers.set(e,t)}nt(E),"loading"===k.navigation.state&&E>L?(Lf(j,"Expected pending action"),x&&x.abort(),W(k.navigation.location,{matches:C,loaderData:q,errors:Q,fetchers:new Map(k.fetchers)})):(F({errors:Q,loaderData:Vp(k.loaderData,q,C,Q),fetchers:new Map(k.fetchers)}),A=!1)})(e,i,f,g,u,d.active,o,y,p):(P.set(e,{routeId:i,path:f}),await(async function(e,i,n,s,r,o,a,l,c){let h=k.fetchers.get(e);Y(e,am(c,h?h.data:void 0),{flushSync:a});let u=new AbortController,d=Bp(t.history,n,u.signal);if(o){let t=await ut(r,n,d.signal);if("aborted"===t.type)return;if("error"===t.type)return void X(e,i,t.error,{flushSync:a});if(!t.matches)return void X(e,i,Gp(404,{pathname:n}),{flushSync:a});s=sm(r=t.matches,n)}N.set(e,u);let f=I,p=(await K("loader",0,d,[s],r,e))[s.route.id];if(N.get(e)===u&&N.delete(e),!d.signal.aborted){if(!$.has(e))return Jp(p)?L>f?void Y(e,lm(void 0)):(R.add(e),void(await H(d,p,!1,{preventScrollReset:l}))):void(Qp(p)?X(e,i,p.error):Y(e,lm(p.data)));Y(e,lm(void 0))}})(e,i,f,g,u,d.active,o,y,p))},revalidate:function(){U||(U=(function(){let t,e,i=new Promise(((n,s)=>{t=async t=>{n(t);try{await i}catch(mx){}},e=async t=>{s(t);try{await i}catch(mx){}}}));return{promise:i,resolve:t,reject:e}})()),Z(),F({revalidation:"loading"});let t=U.promise;return"submitting"===k.navigation.state?t:"idle"===k.navigation.state?(V(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),t):(V(j||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:!0===E}),t)},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:Q,deleteFetcher:function(t){let e=(D.get(t)||0)-1;e<=0?(D.delete(t),$.add(t)):D.set(t,e),F({fetchers:new Map(k.fetchers)})},dispose:function(){f&&f(),_&&_(),p.clear(),x&&x.abort(),k.fetchers.forEach(((t,e)=>J(e))),k.blockers.forEach(((t,e)=>st(e)))},getBlocker:function(t,e){let i=k.blockers.get(t)||Sp;return B.get(t)!==e&&B.set(t,e),i},deleteBlocker:st,patchRoutes:function(t,e){let i=null==n;Lp(t,e,n||l,a,o),i&&(l=[...l],F({}))},_internalFetchControllers:N,_internalSetRoutes:function(t){a={},n=Uf(t,o,void 0,a)}},r})({basename:undefined,future:undefined,history:(function(t={}){return(function(t,e,i,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,a="POP",l=null,c=h();function h(){return(o.state||{idx:null}).idx}function u(){a="POP";let t=h(),e=null==t?null:t-c;c=t,l&&l({action:a,location:f.location,delta:e})}function d(t){let e="null"!==s.location.origin?s.location.origin:s.location.href,i="string"==typeof t?t:Df(t);return i=i.replace(/ $/,"%20"),Lf(e,`No window.location.(origin|href) available to create URL for href: ${i}`),new URL(i,e)}null==c&&(c=0,o.replaceState({...o.state,idx:c},""));let f={get action(){return a},get location(){return t(s,o)},listen(t){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(If,u),l=t,()=>{s.removeEventListener(If,u),l=null}},createHref:t=>e(s,t),createURL:d,encodeLocation(t){let e=d(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){a="PUSH";let i=Pf(f.location,t,e);c=h()+1;let n=Rf(i,c),u=f.createHref(i);try{o.pushState(n,"",u)}catch(qa){if(qa instanceof DOMException&&"DataCloneError"===qa.name)throw qa;s.location.assign(u)}r&&l&&l({action:a,location:f.location,delta:1})},replace:function(t,e){a="REPLACE";let i=Pf(f.location,t,e);c=h();let n=Rf(i,c),s=f.createHref(i);o.replaceState(n,"",s),r&&l&&l({action:a,location:f.location,delta:0})},go:t=>o.go(t)};return f})((function(t,e){let{pathname:i,search:n,hash:s}=t.location;return Pf("",{pathname:i,search:n,hash:s},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"==typeof e?e:Df(e)}),0,t)})({window:undefined}),hydrationData:(function(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:ig(t.errors)}),t})(),routes:QE,mapRouteProperties:function(t){let e={hasErrorBoundary:t.hasErrorBoundary||null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&(t.element&&zf(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:V.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&zf(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:V.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&zf(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:V.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e},dataStrategy:undefined,patchRoutesOnNavigation:undefined,window:undefined}).initialize());var QE;const JE=new class{#It;#p;#c;#Lt;#zt;#Rt;#Pt;#Dt;constructor(t={}){this.#It=t.queryCache||new zr,this.#p=t.mutationCache||new Pr,this.#c=t.defaultOptions||{},this.#Lt=new Map,this.#zt=new Map,this.#Rt=0}mount(){this.#Rt++,1===this.#Rt&&(this.#Pt=kr.subscribe((async t=>{t&&(await this.resumePausedMutations(),this.#It.onFocus())})),this.#Dt=jr.subscribe((async t=>{t&&(await this.resumePausedMutations(),this.#It.onOnline())})))}unmount(){this.#Rt--,0===this.#Rt&&(this.#Pt?.(),this.#Pt=void 0,this.#Dt?.(),this.#Dt=void 0)}isFetching(t){return this.#It.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#p.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#It.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),i=this.#It.build(this,e),n=i.state.data;return void 0===n?this.fetchQuery(t):(t.revalidateIfStale&&i.isStaleByTime(or(e.staleTime,i))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#It.findAll(t).map((({queryKey:t,state:e})=>[t,e.data]))}setQueryData(t,e,i){const n=this.defaultQueryOptions({queryKey:t}),s=this.#It.get(n.queryHash),r=s?.state.data,o=(function(t,e){return"function"==typeof t?t(e):t})(e,r);if(void 0!==o)return this.#It.build(this,n).setData(o,{...i,manual:!0})}setQueriesData(t,e,i){return Or.batch((()=>this.#It.findAll(t).map((({queryKey:t})=>[t,this.setQueryData(t,e,i)]))))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#It.get(e.queryHash)?.state}removeQueries(t){const e=this.#It;Or.batch((()=>{e.findAll(t).forEach((t=>{e.remove(t)}))}))}resetQueries(t,e){const i=this.#It,n={type:"active",...t};return Or.batch((()=>(i.findAll(t).forEach((t=>{t.reset()})),this.refetchQueries(n,e))))}cancelQueries(t,e={}){const i={revert:!0,...e},n=Or.batch((()=>this.#It.findAll(t).map((t=>t.cancel(i)))));return Promise.all(n).then(nr).catch(nr)}invalidateQueries(t,e={}){return Or.batch((()=>{if(this.#It.findAll(t).forEach((t=>{t.invalidate()})),"none"===t?.refetchType)return Promise.resolve();const i={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(i,e)}))}refetchQueries(t,e={}){const i={...e,cancelRefetch:e.cancelRefetch??!0},n=Or.batch((()=>this.#It.findAll(t).filter((t=>!t.isDisabled())).map((t=>{let e=t.fetch(void 0,i);return i.throwOnError||(e=e.catch(nr)),"paused"===t.state.fetchStatus?Promise.resolve():e}))));return Promise.all(n).then(nr)}fetchQuery(t){const e=this.defaultQueryOptions(t);void 0===e.retry&&(e.retry=!1);const i=this.#It.build(this,e);return i.isStaleByTime(or(e.staleTime,i))?i.fetch(e):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(nr).catch(nr)}fetchInfiniteQuery(t){return t.behavior=$r(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(nr).catch(nr)}ensureInfiniteQueryData(t){return t.behavior=$r(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return jr.isOnline()?this.#p.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#It}getMutationCache(){return this.#p}getDefaultOptions(){return this.#c}setDefaultOptions(t){this.#c=t}setQueryDefaults(t,e){this.#Lt.set(ur(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#Lt.values()],i={};return e.forEach((e=>{dr(t,e.queryKey)&&Object.assign(i,e.defaultOptions)})),i}setMutationDefaults(t,e){this.#zt.set(ur(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#zt.values()];let i={};return e.forEach((e=>{dr(t,e.mutationKey)&&(i={...i,...e.defaultOptions})})),i}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#c.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hr(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.throwOnError&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===xr&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#c.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#It.clear(),this.#p.clear()}},{networkConfig:tM}=(function(){function t(){const{config:t}=qd();if(!t)throw new Error("No network config found");return t}function e(){const{variables:e}=t();return e??{}}return{networkConfig:{localnet:{url:Tt("localnet")},devnet:{url:Tt("devnet")},testnet:{url:Tt("testnet")},mainnet:{url:Tt("mainnet")}},useNetworkConfig:t,useNetworkVariables:e,useNetworkVariable:function(t){return e()[t]}}})(),eM=document.getElementById("root");if(!eM)throw new Error("Root element not found");G.createRoot(eM).render(t.jsx(H.StrictMode,{children:t.jsx(Hy,{children:t.jsx(S,{appearance:"dark",children:t.jsx(Yr,{client:JE,children:t.jsx(Vd,{networks:tM,defaultNetwork:pv,children:t.jsx(bf,{autoConnect:!0,children:t.jsx(ug,{router:XE})})})})})})}));
//# sourceMappingURL=index-DSI-AE1X.js.map
